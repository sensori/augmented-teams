FUNCTIONAL PURPOSE: Make superhero powers feel distinct and combat outcomes immediately clear

POWER ACTIVATION ANIMATION
	Animated visual effects when powers are used
	
	RELATIONSHIPS:
		USES: Foundry VTT Integration
		USES: Sequencer Library
	
	Power Item (PowerItem class)
		Wrapper for power providing characteristics needed for animation
		Stores descriptor (fire, ice, electricity, mental, physical, cosmic, magic, etc.)
		Stores effect type (damage, affliction, movement, defensive, control, healing, etc.)
		Stores range (melee, ranged, personal, perception)
		Stores area shape (cone, line, burst)
		Generates descriptor names for animation lookup
		Links to underlying game system power (item) and attack data
		
		RELATIONSHIPS:
			USES: Foundry item system
			USED BY: Animation Resolver
			USED BY: Descriptor Sequence
	
	Animation Resolver
		Finds appropriate animation for power
		Checks attached macros (item-flagged, highest priority)
		Searches name-matched macros (by descriptor name)
		Queries AutoRec entries (automated recognition system)
		Generates descriptor-based animation (fallback, lowest priority)
		
		RELATIONSHIPS:
			USES: Power Item characteristics
			USES: Game macro system
			USES: AutoRec system
			TRIGGERS: Descriptor Sequence (when no pre-made animation exists)
	
	Descriptor Sequence (DescriptorSequence class)
		Orchestrates complete animation from power characteristics
		Maps power descriptors to animation themes (fire → fireEffect, ice → iceEffect, etc.)
		Composes all animation phases into unified sequence
		Coordinates cast → projection → area → impact → affected phases
		
		RELATIONSHIPS:
			USES: Power Item characteristics
			CONTAINS: Cast Sequence
			CONTAINS: Projection Sequence
			CONTAINS: Area Sequence
			CONTAINS: Power Effect Sequence
			CONTAINS: Affected By Power Sequence
			GENERATES: Sequencer Script
		
		Cast Sequence (CastSequence class)
			Power gathering animation before release
			Visual buildup at caster location
			Descriptor-themed effects (fire buildup, ice crystallization, etc.)
			Supports multiple source modes (descriptor, macro, autorec)
			
			RELATIONSHIPS:
				USED BY: Descriptor Sequence
				PART OF: Animation Phases
		
		Projection Sequence (ProjectionSequence class)
			Power traveling from caster to target
			Range-based animation selection
			Supports ranged attacks, rays, bolts, missiles
			Descriptor-themed projectiles
			
			RELATIONSHIPS:
				USES: Power Item range
				USED BY: Descriptor Sequence
				PART OF: Animation Phases
		
		Area Sequence (AreaSequence class)
			Area of effect spreading animation
			Shape-based effects (cone, line, burst)
			Positioned at target or template location
			
			RELATIONSHIPS:
				USES: Power Item area shape
				USED BY: Descriptor Sequence
				PART OF: Animation Phases
		
		Power Effect Sequence (PowerEffectSequence class)
			Impact animation when power hits target
			Effect-type based visuals (damage, affliction, control)
			Plays at target location
			
			RELATIONSHIPS:
				USES: Power Item effect type
				USED BY: Descriptor Sequence
				PART OF: Animation Phases
		
		Affected By Power Sequence (AffectedByPowerSequence class)
			Ongoing effect animation on affected targets
			Persistent visual indicating target is under power's influence
			Attached to token, follows movement
			
			RELATIONSHIPS:
				USED BY: Descriptor Sequence
				PART OF: Animation Phases
	
	Movement-Triggered Animation
		Animated visual effects when tokens move based on movement powers
		
		RELATIONSHIPS:
			USES: Power Item and Animation Resolver
			TRIGGERED BY: Token movement
		
		Movement Detector
			Detects when token movement begins
			Hooks into Foundry token drag system
			Triggers movement animations before movement executes
			Can cancel movement for instant-travel powers (teleport)
			
			RELATIONSHIPS:
				HOOKS INTO: Foundry Token drag handlers
				TRIGGERS: Movement Type Detector
		
		Movement Type Detector
			Determines movement type from actor's selected speed
			Maps game system movement modes to animation types
			Supports: flight, leaping, swimming, burrowing, superspeed, teleport, ground
			
			RELATIONSHIPS:
				USES: Actor vitesse (speed) system
				FEEDS: Movement Power Resolver
		
		Movement Power Resolver
			Finds power providing detected movement type
			Searches actor's powers for movement keywords
			Matches movement type to power names, notes, effects
			
			RELATIONSHIPS:
				USES: Movement Type Detector
				USES: Actor power collection
				CREATES: Power Item for animation
				USES: Animation Resolver from parent domain
	
	Animation Customization
		Users configure power animations through visual editor
		
		RELATIONSHIPS:
			MODIFIES: Power Item animation settings
			MODIFIES: Animation Resolver priorities
		
		Sequence Runner Editor (SequenceRunnerEditor class)
			Main animation configuration tool
			Edit button on item sheets opens editor
			Dialog-based interface for animation assembly
			Real-time preview of animation choices
			
			RELATIONSHIPS:
				USES: Foundry dialog system
				CONTAINS: Descriptor Sequence View
				CONTAINS: Sequencer Script View
				TRIGGERED BY: Item sheet render hooks
			
			Descriptor Sequence View (DescriptorSequenceView class)
				Configures animation sequences by phase
				Dropdown selectors for descriptor, macro, or AutoRec sources
				Organizes configuration by cast/projection/area/impact/affected phases
				Integrates phase-specific views (CastSequenceView, ProjectionSequenceView, etc.)
				
				RELATIONSHIPS:
					USED BY: Sequence Runner Editor
					CONTAINS: Cast Sequence View
					CONTAINS: Projection Sequence View
					CONTAINS: Area Sequence View
					CONTAINS: Power Effect Sequence View
					CONTAINS: Affected By Power Sequence View
					UPDATES: Descriptor Sequence
				
				Cast Sequence View (CastSequenceView)
					Configures cast phase animation
					Source mode selector (descriptor/macro/autorec)
					Method selector for chosen source
					
					RELATIONSHIPS:
						UPDATES: Cast Sequence
						PART OF: Descriptor Sequence View
				
				Projection Sequence View (ProjectionSequenceView)
					Configures projection phase animation
					Range-aware configuration
					Source and method selection
					
					RELATIONSHIPS:
						UPDATES: Projection Sequence
						PART OF: Descriptor Sequence View
				
				Area Sequence View (AreaSequenceView)
					Configures area effect animation
					Shape-aware configuration
					Source and method selection
					
					RELATIONSHIPS:
						UPDATES: Area Sequence
						PART OF: Descriptor Sequence View
				
				Power Effect Sequence View (PowerEffectSequenceView)
					Configures impact/effect animation
					Effect-type aware configuration
					Source and method selection
					
					RELATIONSHIPS:
						UPDATES: Power Effect Sequence
						PART OF: Descriptor Sequence View
				
				Affected By Power Sequence View (AffectedByPowerSequenceView)
					Configures ongoing effect animation
					Persistent effect configuration
					Source and method selection
					
					RELATIONSHIPS:
						UPDATES: Affected By Power Sequence
						PART OF: Descriptor Sequence View
			
			Sequencer Script View (SequencerScriptView class)
				Preview panel for executable animation script
				Generated code preview panel
				Test/preview button for live preview
				Shows complete JavaScript for animation sequence
				
				RELATIONSHIPS:
					USES: Sequencer Script
					USED BY: Sequence Runner Editor
		
		Script Generation
			Creates executable animation code from configuration
			
			RELATIONSHIPS:
				USES: Descriptor Sequence configuration
			
			Sequencer Script (SequencerScript class)
				Generates executable animation script from descriptor sequence
				Builds complete JavaScript code for all phases
				Applies range-based logic (melee vs ranged)
				Integrates token helpers and game context
				Executes generated script to run animation
				
				RELATIONSHIPS:
					USES: Descriptor Sequence
					USED BY: Sequencer Script View
					USED BY: Animation Resolver (fallback generation)
		
		Saving Custom Animations
			Saves animation configuration to power for reuse
			Stores as macro or power flag (descriptorMacro)
			Custom animations override defaults
			
			RELATIONSHIPS:
				USES: Foundry flag system
				USES: Foundry macro system
				STORES: Animation configuration
				SUPPORTS: Custom animation priority in Animation Resolver

COMBAT FEEDBACK
	Visual feedback when combat events occur
	
	RELATIONSHIPS:
		USES: Foundry VTT Integration
		TRIGGERED BY: Attack rolls
	
	Combat Data Extractor
		Extracts combat results from chat messages and hooks
		Parses attack outcomes (hit, miss, critical)
		Identifies attacker token, target token, attack data
		
		RELATIONSHIPS:
			USES: Foundry chat messages
			USES: Foundry hooks (attackRolled)
			FEEDS: Attack Result Indicators
	
	Text Animation System
		Creates floating text beside targets for all indicators
		Colors text by alliance and perspective (ally vs enemy)
		Applies fade and movement effects
		Sized appropriately for message importance
		
		RELATIONSHIPS:
			USES: Sequencer Library
			USED BY: Attack Result Indicators
	
	Attack Result Indicators
		Uses Text Animation System to communicate attack outcomes
		
		RELATIONSHIPS:
			USES: Text Animation System
			USES: Combat Data Extractor
		
		Hit Indicators
			"Hit" text beside target when attack succeeds
			Green text for ally hits (player perspective)
			Red text for enemy hits (player perspective)
			
			RELATIONSHIPS:
				USES: Text Animation System
		
		Miss Indicators
			"Miss" text beside target when attack fails
			Green text for ally misses (relief - player perspective)
			Red text for enemy misses (player perspective)
			
			RELATIONSHIPS:
				USES: Text Animation System
		
		Critical Hit Celebration
			"Critical Hit!!!!!" text or special UI effect
			Larger, more dramatic animation
			Different visuals for ally vs enemy perspective
			
			RELATIONSHIPS:
				USES: Text Animation System
				USES: JB2A critical UI effects

SYSTEM INFRASTRUCTURE
	Technical systems enabling all animation domains
	
	RELATIONSHIPS:
		SERVES: Power Activation Animation
		SERVES: Combat Feedback
	
	Foundry VTT Integration
		Game platform integration layer
		
		RELATIONSHIPS:
			PROVIDES: Hooks system
			PROVIDES: Settings system
			PROVIDES: Token system
			PROVIDES: Actor/Item systems
		
		Configuration Management
			Module settings for animation behavior
			Animate on attack toggle
			Show animation button on chat cards toggle
			Animate on movement toggle
			
			RELATIONSHIPS:
				USES: Foundry settings API
				CONTROLS: Feature enablement
		
		Event Detector
			Hook handlers for game events
			Ready hook (initialization)
			rollPower hook (power activation)
			attackRolled hook (combat outcomes)
			rollAttack hook (attack initiation)
			damageSaved hook (save results)
			renderItemSheet hook (animation editor)
			renderActorSheet hook (sheet enhancements)
			renderChatMessage hook (animation buttons)
			
			RELATIONSHIPS:
				USES: Foundry hooks API
				TRIGGERS: Domain-specific handlers
		
		Token Animation Helpers
			Token reference management
			Position and movement tracking
			Selection and targeting utilities
			
			RELATIONSHIPS:
				PROVIDES: Token context for animations
				USED BY: All animation sequences
	
	Sequencer Library
		Third-party animation effects library
		
		RELATIONSHIPS:
			PROVIDES: Animation effect definitions
			PROVIDES: Descriptor effect classes
			PROVIDES: Section manager for effects
			USED BY: All animation sequences
	
	JB2A Assets
		Pre-made animation asset library
		Visual effects for powers and combat
		
		RELATIONSHIPS:
			PROVIDES: Animation files
			USED BY: Animation sequences
	
	AutoRec System
		Automated animation recognition
		Maps power names to animations
		
		RELATIONSHIPS:
			PROVIDES: Name-based animation lookup
			USED BY: Animation Resolver
	
	Game Helper (GameHelper class)
		Utility functions for game operations
		Sleep/delay utilities
		Template placement helpers
		Target selection utilities
		
		RELATIONSHIPS:
			PROVIDES: Common utilities
			USED BY: All domains

