{"_default": {"1": {"action_state": "story_bot.1_shape.gather_context", "status": "started", "timestamp": "2025-12-11T13:31:50.323172"}, "2": {"action_state": "story_bot.1_shape.gather_context", "status": "completed", "timestamp": "2025-12-11T13:31:50.337213", "outputs": {"instructions": {"action": "gather_context", "behavior": "1_shape", "base_instructions": ["**CRITICAL WORKFLOW ENFORCEMENT - NO EXCEPTIONS:**", "", "**When MOVING TO a behavior (switching from a different behavior):** You MUST start at the clarification action (first action). Do NOT skip clarification or planning stages. Do NOT make assumptions about whether clarification/planning has been done. The user can explicitly tell you to skip, but you must NEVER skip on your own initiative.", "", "**When CONTINUING WITHIN the same behavior:** Use the current action from workflow state. Do NOT restart at clarification unless explicitly switching behaviors.", "", "**MANDATORY WORKFLOW RULE (applies when moving TO a behavior):**", "- When switching to a new behavior, you MUST go through clarification for that behavior", "- Do NOT skip clarification stage when moving to a behavior", "- Do NOT make assumptions about whether clarification has been done when moving to a behavior", "- The user can explicitly tell you to skip, but you must NEVER skip on your own", "- Present ALL required questions and wait for answers before proceeding", "- **Note:** If continuing within the same behavior, use the current action from workflow state instead", "", "**MANDATORY CLARIFICATION PROCESS:**", "1. Review all provided context (story maps, increments documents, existing files, conversation history, etc.)", "2. For EACH required question below, THOUGHTFULLY attempt to answer it yourself using the available context", "3. When answering questions:", "   - ACTUALLY ANSWER THE QUESTION - don't just list available options without answering", "   - If the question asks \"what is the scope\", answer what the scope IS based on context", "   - If the question requires a CHOICE/DECISION from the user, identify the available options/deltas and ask the user to choose", "   - Be thoughtful and specific in your answers based on what's available in context", "4. Place your answers directly with each question in the format:", "   **Question:** [question text]", "   **Answer:** [your thoughtful answer based on context]", "   OR if a choice is needed:", "   **Answer:** [your answer based on context]. **Available options:** [list options]. **Which option do you want to choose?**", "   OR if information is missing:", "   **Answer:** \u26a0\ufe0f **NOT ENOUGH INFORMATION - REQUIRES USER INPUT**", "5. Be EXPLICIT and CLEAR when you cannot answer a question - use \"\u26a0\ufe0f **NOT ENOUGH INFORMATION - REQUIRES USER INPUT**\" so the user knows they must provide this information", "6. Do NOT guess or infer answers - if information is not clearly available in context, state that user input is required", "7. When a question requires a decision/choice, identify the available deltas/options from context and ask the user to select", "8. Present ALL questions with your answers to the user", "9. Ask the user to review, confirm, correct, or provide missing answers", "10. Do NOT proceed until the user has reviewed and confirmed/corrected all answers", "", "**MANDATORY: CONTEXT SOURCE LOCATION:**", "11. When reviewing context to answer questions, you MUST check these locations IN ORDER:", "    1. `{project_area}/docs/context/` folder - Original input files, prompts, source material", "    2. `{project_area}/docs/stories/` folder - Generated files (clarification.json, planning.json) if they exist", "    3. Conversation history (if available)", "    4. Existing project files in `{project_area}/`", "    - **PRIMARY SOURCE:** Always start with `{project_area}/docs/context/` folder for original input", "    - **Input files:** Read from `{project_area}/docs/context/input.txt` or similar", "    - **Prompts:** Read from `{project_area}/docs/context/` folder", "    - **Source material:** All original context providers are in `{project_area}/docs/context/`", "", "**MANDATORY STORAGE STEP - IMMEDIATE CHECKPOINT:**", "12. IMMEDIATELY after user confirms all answers are complete and correct, you MUST store clarification data:", "    - Pass `key_questions_answered` and `evidence_provided` as parameters to the behavior action tool (e.g., `mcp_story-bot_shape` with action `gather_context`):", "      * `key_questions_answered`: dict mapping question keys to answer strings", "      * `evidence_provided`: dict mapping evidence types to evidence content", "    - The action will automatically save to `{project_area}/docs/stories/clarification.json`", "      * **CRITICAL: Generated file location - `{project_area}/docs/stories/clarification.json`**", "      * **NOT in `{project_area}/docs/context/` - generated files go in docs/stories/**", "      * Structure: `{\"{behavior}\": {\"key_questions\": {...}, \"evidence\": {...}}}`", "    - DO NOT proceed to next action until storage is confirmed complete", "    - This is a BLOCKING checkpoint - storage must happen before proceeding", "", "Assess the provided context against the required questions and evidence below.", "", "**Required Key Questions:**", "{{key_questions}}   --> load from `{bot}/behaviors/{behavior}/guardrails/required_context/key_questions.json`", "", "**Required Evidence:**", "{{evidence}}  --> load from `{bot}/behaviors/{behavior}/guardrails/required_context/evidence.json`", "", "For each question, provide a thoughtful answer based on available context. If the question requires a choice/decision, identify available options and ask the user to choose. If the answer cannot be determined from available context, clearly state \"\u26a0\ufe0f **NOT ENOUGH INFORMATION - REQUIRES USER INPUT\".", "", "**MANDATORY: PAUSE FOR HUMAN FEEDBACK**", "When this action is complete, AI MUST pause and wait for human feedback. When human says 'done' or confirms completion, you MUST proceed to the next step: **decide_planning_criteria** (call the decide_planning_criteria action tool)."], "guardrails": {"key_questions": ["Who are the distinct types of users (e.g., operational users, power users, compliance consumers, content creators, producers)?", "What are the key goals, behaviors, or decisions each group is trying to accomplish using this capability?", "Who are the primary users or stakeholder groups impacted?", "What is the first thing users will try to do with this new capability or system?", "What problems, inefficiencies, or workarounds is this request trying to eliminate?", "Where are users currently struggling, getting stuck, or experiencing delays in the process we're aiming to improve?", "What other systems, data sources, or tools does this capability need to interact with in order to deliver value?", "What are the key behaviors or integration points that define how these systems support or depend on one another?", "What is the business domain we are modeling?", "What are the core business concepts and their relationships?", "What are the distinct sub-domains or business capabilities?", "What are the boundaries between different parts of the domain?", "What domain events occur in this business domain?", "What are the key business rules and constraints?", "What domain language do business experts use to describe this domain?"], "evidence": ["Business model canvas", "Journey maps or other design thinking artifacts", "Technical specifications", "Product charters", "Business cases", "Business models", "Impact maps", "R&D maps", "User research", "User journey maps", "Similar systems", "User interviews", "Business process documentation", "Domain expert interviews", "Existing system documentation", "Business glossaries or dictionaries", "Financial statements", "Industry literature", "Event storming outputs", "Domain models from similar systems"]}}}}, "3": {"action_state": "story_bot.1_shape.gather_context", "status": "started", "timestamp": "2025-12-11T13:32:18.941757"}, "4": {"action_state": "story_bot.1_shape.gather_context", "status": "completed", "timestamp": "2025-12-11T13:32:18.957797", "outputs": {"instructions": {"action": "gather_context", "behavior": "1_shape", "base_instructions": ["**CRITICAL WORKFLOW ENFORCEMENT - NO EXCEPTIONS:**", "", "**When MOVING TO a behavior (switching from a different behavior):** You MUST start at the clarification action (first action). Do NOT skip clarification or planning stages. Do NOT make assumptions about whether clarification/planning has been done. The user can explicitly tell you to skip, but you must NEVER skip on your own initiative.", "", "**When CONTINUING WITHIN the same behavior:** Use the current action from workflow state. Do NOT restart at clarification unless explicitly switching behaviors.", "", "**MANDATORY WORKFLOW RULE (applies when moving TO a behavior):**", "- When switching to a new behavior, you MUST go through clarification for that behavior", "- Do NOT skip clarification stage when moving to a behavior", "- Do NOT make assumptions about whether clarification has been done when moving to a behavior", "- The user can explicitly tell you to skip, but you must NEVER skip on your own", "- Present ALL required questions and wait for answers before proceeding", "- **Note:** If continuing within the same behavior, use the current action from workflow state instead", "", "**MANDATORY CLARIFICATION PROCESS:**", "1. Review all provided context (story maps, increments documents, existing files, conversation history, etc.)", "2. For EACH required question below, THOUGHTFULLY attempt to answer it yourself using the available context", "3. When answering questions:", "   - ACTUALLY ANSWER THE QUESTION - don't just list available options without answering", "   - If the question asks \"what is the scope\", answer what the scope IS based on context", "   - If the question requires a CHOICE/DECISION from the user, identify the available options/deltas and ask the user to choose", "   - Be thoughtful and specific in your answers based on what's available in context", "4. Place your answers directly with each question in the format:", "   **Question:** [question text]", "   **Answer:** [your thoughtful answer based on context]", "   OR if a choice is needed:", "   **Answer:** [your answer based on context]. **Available options:** [list options]. **Which option do you want to choose?**", "   OR if information is missing:", "   **Answer:** \u26a0\ufe0f **NOT ENOUGH INFORMATION - REQUIRES USER INPUT**", "5. Be EXPLICIT and CLEAR when you cannot answer a question - use \"\u26a0\ufe0f **NOT ENOUGH INFORMATION - REQUIRES USER INPUT**\" so the user knows they must provide this information", "6. Do NOT guess or infer answers - if information is not clearly available in context, state that user input is required", "7. When a question requires a decision/choice, identify the available deltas/options from context and ask the user to select", "8. Present ALL questions with your answers to the user", "9. Ask the user to review, confirm, correct, or provide missing answers", "10. Do NOT proceed until the user has reviewed and confirmed/corrected all answers", "", "**MANDATORY: CONTEXT SOURCE LOCATION:**", "11. When reviewing context to answer questions, you MUST check these locations IN ORDER:", "    1. `{project_area}/docs/context/` folder - Original input files, prompts, source material", "    2. `{project_area}/docs/stories/` folder - Generated files (clarification.json, planning.json) if they exist", "    3. Conversation history (if available)", "    4. Existing project files in `{project_area}/`", "    - **PRIMARY SOURCE:** Always start with `{project_area}/docs/context/` folder for original input", "    - **Input files:** Read from `{project_area}/docs/context/input.txt` or similar", "    - **Prompts:** Read from `{project_area}/docs/context/` folder", "    - **Source material:** All original context providers are in `{project_area}/docs/context/`", "", "**MANDATORY STORAGE STEP - IMMEDIATE CHECKPOINT:**", "12. IMMEDIATELY after user confirms all answers are complete and correct, you MUST store clarification data:", "    - Pass `key_questions_answered` and `evidence_provided` as parameters to the behavior action tool (e.g., `mcp_story-bot_shape` with action `gather_context`):", "      * `key_questions_answered`: dict mapping question keys to answer strings", "      * `evidence_provided`: dict mapping evidence types to evidence content", "    - The action will automatically save to `{project_area}/docs/stories/clarification.json`", "      * **CRITICAL: Generated file location - `{project_area}/docs/stories/clarification.json`**", "      * **NOT in `{project_area}/docs/context/` - generated files go in docs/stories/**", "      * Structure: `{\"{behavior}\": {\"key_questions\": {...}, \"evidence\": {...}}}`", "    - DO NOT proceed to next action until storage is confirmed complete", "    - This is a BLOCKING checkpoint - storage must happen before proceeding", "", "Assess the provided context against the required questions and evidence below.", "", "**Required Key Questions:**", "{{key_questions}}   --> load from `{bot}/behaviors/{behavior}/guardrails/required_context/key_questions.json`", "", "**Required Evidence:**", "{{evidence}}  --> load from `{bot}/behaviors/{behavior}/guardrails/required_context/evidence.json`", "", "For each question, provide a thoughtful answer based on available context. If the question requires a choice/decision, identify available options and ask the user to choose. If the answer cannot be determined from available context, clearly state \"\u26a0\ufe0f **NOT ENOUGH INFORMATION - REQUIRES USER INPUT\".", "", "**MANDATORY: PAUSE FOR HUMAN FEEDBACK**", "When this action is complete, AI MUST pause and wait for human feedback. When human says 'done' or confirms completion, you MUST proceed to the next step: **decide_planning_criteria** (call the decide_planning_criteria action tool)."], "guardrails": {"key_questions": ["Who are the distinct types of users (e.g., operational users, power users, compliance consumers, content creators, producers)?", "What are the key goals, behaviors, or decisions each group is trying to accomplish using this capability?", "Who are the primary users or stakeholder groups impacted?", "What is the first thing users will try to do with this new capability or system?", "What problems, inefficiencies, or workarounds is this request trying to eliminate?", "Where are users currently struggling, getting stuck, or experiencing delays in the process we're aiming to improve?", "What other systems, data sources, or tools does this capability need to interact with in order to deliver value?", "What are the key behaviors or integration points that define how these systems support or depend on one another?", "What is the business domain we are modeling?", "What are the core business concepts and their relationships?", "What are the distinct sub-domains or business capabilities?", "What are the boundaries between different parts of the domain?", "What domain events occur in this business domain?", "What are the key business rules and constraints?", "What domain language do business experts use to describe this domain?"], "evidence": ["Business model canvas", "Journey maps or other design thinking artifacts", "Technical specifications", "Product charters", "Business cases", "Business models", "Impact maps", "R&D maps", "User research", "User journey maps", "Similar systems", "User interviews", "Business process documentation", "Domain expert interviews", "Existing system documentation", "Business glossaries or dictionaries", "Financial statements", "Industry literature", "Event storming outputs", "Domain models from similar systems"]}}}}, "5": {"action_state": "story_bot.1_shape.gather_context", "status": "started", "timestamp": "2025-12-11T13:32:31.208997"}, "6": {"action_state": "story_bot.1_shape.gather_context", "status": "completed", "timestamp": "2025-12-11T13:32:31.221736", "outputs": {"instructions": {"action": "gather_context", "behavior": "1_shape", "base_instructions": ["**CRITICAL WORKFLOW ENFORCEMENT - NO EXCEPTIONS:**", "", "**When MOVING TO a behavior (switching from a different behavior):** You MUST start at the clarification action (first action). Do NOT skip clarification or planning stages. Do NOT make assumptions about whether clarification/planning has been done. The user can explicitly tell you to skip, but you must NEVER skip on your own initiative.", "", "**When CONTINUING WITHIN the same behavior:** Use the current action from workflow state. Do NOT restart at clarification unless explicitly switching behaviors.", "", "**MANDATORY WORKFLOW RULE (applies when moving TO a behavior):**", "- When switching to a new behavior, you MUST go through clarification for that behavior", "- Do NOT skip clarification stage when moving to a behavior", "- Do NOT make assumptions about whether clarification has been done when moving to a behavior", "- The user can explicitly tell you to skip, but you must NEVER skip on your own", "- Present ALL required questions and wait for answers before proceeding", "- **Note:** If continuing within the same behavior, use the current action from workflow state instead", "", "**MANDATORY CLARIFICATION PROCESS:**", "1. Review all provided context (story maps, increments documents, existing files, conversation history, etc.)", "2. For EACH required question below, THOUGHTFULLY attempt to answer it yourself using the available context", "3. When answering questions:", "   - ACTUALLY ANSWER THE QUESTION - don't just list available options without answering", "   - If the question asks \"what is the scope\", answer what the scope IS based on context", "   - If the question requires a CHOICE/DECISION from the user, identify the available options/deltas and ask the user to choose", "   - Be thoughtful and specific in your answers based on what's available in context", "4. Place your answers directly with each question in the format:", "   **Question:** [question text]", "   **Answer:** [your thoughtful answer based on context]", "   OR if a choice is needed:", "   **Answer:** [your answer based on context]. **Available options:** [list options]. **Which option do you want to choose?**", "   OR if information is missing:", "   **Answer:** \u26a0\ufe0f **NOT ENOUGH INFORMATION - REQUIRES USER INPUT**", "5. Be EXPLICIT and CLEAR when you cannot answer a question - use \"\u26a0\ufe0f **NOT ENOUGH INFORMATION - REQUIRES USER INPUT**\" so the user knows they must provide this information", "6. Do NOT guess or infer answers - if information is not clearly available in context, state that user input is required", "7. When a question requires a decision/choice, identify the available deltas/options from context and ask the user to select", "8. Present ALL questions with your answers to the user", "9. Ask the user to review, confirm, correct, or provide missing answers", "10. Do NOT proceed until the user has reviewed and confirmed/corrected all answers", "", "**MANDATORY: CONTEXT SOURCE LOCATION:**", "11. When reviewing context to answer questions, you MUST check these locations IN ORDER:", "    1. `{project_area}/docs/context/` folder - Original input files, prompts, source material", "    2. `{project_area}/docs/stories/` folder - Generated files (clarification.json, planning.json) if they exist", "    3. Conversation history (if available)", "    4. Existing project files in `{project_area}/`", "    - **PRIMARY SOURCE:** Always start with `{project_area}/docs/context/` folder for original input", "    - **Input files:** Read from `{project_area}/docs/context/input.txt` or similar", "    - **Prompts:** Read from `{project_area}/docs/context/` folder", "    - **Source material:** All original context providers are in `{project_area}/docs/context/`", "", "**MANDATORY STORAGE STEP - IMMEDIATE CHECKPOINT:**", "12. IMMEDIATELY after user confirms all answers are complete and correct, you MUST store clarification data:", "    - Pass `key_questions_answered` and `evidence_provided` as parameters to the behavior action tool (e.g., `mcp_story-bot_shape` with action `gather_context`):", "      * `key_questions_answered`: dict mapping question keys to answer strings", "      * `evidence_provided`: dict mapping evidence types to evidence content", "    - The action will automatically save to `{project_area}/docs/stories/clarification.json`", "      * **CRITICAL: Generated file location - `{project_area}/docs/stories/clarification.json`**", "      * **NOT in `{project_area}/docs/context/` - generated files go in docs/stories/**", "      * Structure: `{\"{behavior}\": {\"key_questions\": {...}, \"evidence\": {...}}}`", "    - DO NOT proceed to next action until storage is confirmed complete", "    - This is a BLOCKING checkpoint - storage must happen before proceeding", "", "Assess the provided context against the required questions and evidence below.", "", "**Required Key Questions:**", "{{key_questions}}   --> load from `{bot}/behaviors/{behavior}/guardrails/required_context/key_questions.json`", "", "**Required Evidence:**", "{{evidence}}  --> load from `{bot}/behaviors/{behavior}/guardrails/required_context/evidence.json`", "", "For each question, provide a thoughtful answer based on available context. If the question requires a choice/decision, identify available options and ask the user to choose. If the answer cannot be determined from available context, clearly state \"\u26a0\ufe0f **NOT ENOUGH INFORMATION - REQUIRES USER INPUT\".", "", "**MANDATORY: PAUSE FOR HUMAN FEEDBACK**", "When this action is complete, AI MUST pause and wait for human feedback. When human says 'done' or confirms completion, you MUST proceed to the next step: **decide_planning_criteria** (call the decide_planning_criteria action tool)."], "guardrails": {"key_questions": ["Who are the distinct types of users (e.g., operational users, power users, compliance consumers, content creators, producers)?", "What are the key goals, behaviors, or decisions each group is trying to accomplish using this capability?", "Who are the primary users or stakeholder groups impacted?", "What is the first thing users will try to do with this new capability or system?", "What problems, inefficiencies, or workarounds is this request trying to eliminate?", "Where are users currently struggling, getting stuck, or experiencing delays in the process we're aiming to improve?", "What other systems, data sources, or tools does this capability need to interact with in order to deliver value?", "What are the key behaviors or integration points that define how these systems support or depend on one another?", "What is the business domain we are modeling?", "What are the core business concepts and their relationships?", "What are the distinct sub-domains or business capabilities?", "What are the boundaries between different parts of the domain?", "What domain events occur in this business domain?", "What are the key business rules and constraints?", "What domain language do business experts use to describe this domain?"], "evidence": ["Business model canvas", "Journey maps or other design thinking artifacts", "Technical specifications", "Product charters", "Business cases", "Business models", "Impact maps", "R&D maps", "User research", "User journey maps", "Similar systems", "User interviews", "Business process documentation", "Domain expert interviews", "Existing system documentation", "Business glossaries or dictionaries", "Financial statements", "Industry literature", "Event storming outputs", "Domain models from similar systems"]}}}}, "7": {"action_state": "story_bot.1_shape.gather_context", "status": "started", "timestamp": "2025-12-11T13:33:29.303301"}, "8": {"action_state": "story_bot.1_shape.gather_context", "status": "completed", "timestamp": "2025-12-11T13:33:29.315645", "outputs": {"instructions": {"action": "gather_context", "behavior": "1_shape", "base_instructions": ["**CRITICAL WORKFLOW ENFORCEMENT - NO EXCEPTIONS:**", "", "**When MOVING TO a behavior (switching from a different behavior):** You MUST start at the clarification action (first action). Do NOT skip clarification or planning stages. Do NOT make assumptions about whether clarification/planning has been done. The user can explicitly tell you to skip, but you must NEVER skip on your own initiative.", "", "**When CONTINUING WITHIN the same behavior:** Use the current action from workflow state. Do NOT restart at clarification unless explicitly switching behaviors.", "", "**MANDATORY WORKFLOW RULE (applies when moving TO a behavior):**", "- When switching to a new behavior, you MUST go through clarification for that behavior", "- Do NOT skip clarification stage when moving to a behavior", "- Do NOT make assumptions about whether clarification has been done when moving to a behavior", "- The user can explicitly tell you to skip, but you must NEVER skip on your own", "- Present ALL required questions and wait for answers before proceeding", "- **Note:** If continuing within the same behavior, use the current action from workflow state instead", "", "**MANDATORY CLARIFICATION PROCESS:**", "1. Review all provided context (story maps, increments documents, existing files, conversation history, etc.)", "2. For EACH required question below, THOUGHTFULLY attempt to answer it yourself using the available context", "3. When answering questions:", "   - ACTUALLY ANSWER THE QUESTION - don't just list available options without answering", "   - If the question asks \"what is the scope\", answer what the scope IS based on context", "   - If the question requires a CHOICE/DECISION from the user, identify the available options/deltas and ask the user to choose", "   - Be thoughtful and specific in your answers based on what's available in context", "4. Place your answers directly with each question in the format:", "   **Question:** [question text]", "   **Answer:** [your thoughtful answer based on context]", "   OR if a choice is needed:", "   **Answer:** [your answer based on context]. **Available options:** [list options]. **Which option do you want to choose?**", "   OR if information is missing:", "   **Answer:** \u26a0\ufe0f **NOT ENOUGH INFORMATION - REQUIRES USER INPUT**", "5. Be EXPLICIT and CLEAR when you cannot answer a question - use \"\u26a0\ufe0f **NOT ENOUGH INFORMATION - REQUIRES USER INPUT**\" so the user knows they must provide this information", "6. Do NOT guess or infer answers - if information is not clearly available in context, state that user input is required", "7. When a question requires a decision/choice, identify the available deltas/options from context and ask the user to select", "8. Present ALL questions with your answers to the user", "9. Ask the user to review, confirm, correct, or provide missing answers", "10. Do NOT proceed until the user has reviewed and confirmed/corrected all answers", "", "**MANDATORY: CONTEXT SOURCE LOCATION:**", "11. When reviewing context to answer questions, you MUST check these locations IN ORDER:", "    1. `{project_area}/docs/context/` folder - Original input files, prompts, source material", "    2. `{project_area}/docs/stories/` folder - Generated files (clarification.json, planning.json) if they exist", "    3. Conversation history (if available)", "    4. Existing project files in `{project_area}/`", "    - **PRIMARY SOURCE:** Always start with `{project_area}/docs/context/` folder for original input", "    - **Input files:** Read from `{project_area}/docs/context/input.txt` or similar", "    - **Prompts:** Read from `{project_area}/docs/context/` folder", "    - **Source material:** All original context providers are in `{project_area}/docs/context/`", "", "**MANDATORY STORAGE STEP - IMMEDIATE CHECKPOINT:**", "12. IMMEDIATELY after user confirms all answers are complete and correct, you MUST store clarification data:", "    - Pass `key_questions_answered` and `evidence_provided` as parameters to the behavior action tool (e.g., `mcp_story-bot_shape` with action `gather_context`):", "      * `key_questions_answered`: dict mapping question keys to answer strings", "      * `evidence_provided`: dict mapping evidence types to evidence content", "    - The action will automatically save to `{project_area}/docs/stories/clarification.json`", "      * **CRITICAL: Generated file location - `{project_area}/docs/stories/clarification.json`**", "      * **NOT in `{project_area}/docs/context/` - generated files go in docs/stories/**", "      * Structure: `{\"{behavior}\": {\"key_questions\": {...}, \"evidence\": {...}}}`", "    - DO NOT proceed to next action until storage is confirmed complete", "    - This is a BLOCKING checkpoint - storage must happen before proceeding", "", "Assess the provided context against the required questions and evidence below.", "", "**Required Key Questions:**", "{{key_questions}}   --> load from `{bot}/behaviors/{behavior}/guardrails/required_context/key_questions.json`", "", "**Required Evidence:**", "{{evidence}}  --> load from `{bot}/behaviors/{behavior}/guardrails/required_context/evidence.json`", "", "For each question, provide a thoughtful answer based on available context. If the question requires a choice/decision, identify available options and ask the user to choose. If the answer cannot be determined from available context, clearly state \"\u26a0\ufe0f **NOT ENOUGH INFORMATION - REQUIRES USER INPUT\".", "", "**MANDATORY: PAUSE FOR HUMAN FEEDBACK**", "When this action is complete, AI MUST pause and wait for human feedback. When human says 'done' or confirms completion, you MUST proceed to the next step: **decide_planning_criteria** (call the decide_planning_criteria action tool)."], "guardrails": {"key_questions": ["Who are the distinct types of users (e.g., operational users, power users, compliance consumers, content creators, producers)?", "What are the key goals, behaviors, or decisions each group is trying to accomplish using this capability?", "Who are the primary users or stakeholder groups impacted?", "What is the first thing users will try to do with this new capability or system?", "What problems, inefficiencies, or workarounds is this request trying to eliminate?", "Where are users currently struggling, getting stuck, or experiencing delays in the process we're aiming to improve?", "What other systems, data sources, or tools does this capability need to interact with in order to deliver value?", "What are the key behaviors or integration points that define how these systems support or depend on one another?", "What is the business domain we are modeling?", "What are the core business concepts and their relationships?", "What are the distinct sub-domains or business capabilities?", "What are the boundaries between different parts of the domain?", "What domain events occur in this business domain?", "What are the key business rules and constraints?", "What domain language do business experts use to describe this domain?"], "evidence": ["Business model canvas", "Journey maps or other design thinking artifacts", "Technical specifications", "Product charters", "Business cases", "Business models", "Impact maps", "R&D maps", "User research", "User journey maps", "Similar systems", "User interviews", "Business process documentation", "Domain expert interviews", "Existing system documentation", "Business glossaries or dictionaries", "Financial statements", "Industry literature", "Event storming outputs", "Domain models from similar systems"]}}}}, "9": {"action_state": "story_bot.1_shape.gather_context", "status": "started", "timestamp": "2025-12-11T13:34:07.783694"}, "10": {"action_state": "story_bot.1_shape.gather_context", "status": "completed", "timestamp": "2025-12-11T13:34:07.798532", "outputs": {"instructions": {"action": "gather_context", "behavior": "1_shape", "base_instructions": ["**CRITICAL WORKFLOW ENFORCEMENT - NO EXCEPTIONS:**", "", "**When MOVING TO a behavior (switching from a different behavior):** You MUST start at the clarification action (first action). Do NOT skip clarification or planning stages. Do NOT make assumptions about whether clarification/planning has been done. The user can explicitly tell you to skip, but you must NEVER skip on your own initiative.", "", "**When CONTINUING WITHIN the same behavior:** Use the current action from workflow state. Do NOT restart at clarification unless explicitly switching behaviors.", "", "**MANDATORY WORKFLOW RULE (applies when moving TO a behavior):**", "- When switching to a new behavior, you MUST go through clarification for that behavior", "- Do NOT skip clarification stage when moving to a behavior", "- Do NOT make assumptions about whether clarification has been done when moving to a behavior", "- The user can explicitly tell you to skip, but you must NEVER skip on your own", "- Present ALL required questions and wait for answers before proceeding", "- **Note:** If continuing within the same behavior, use the current action from workflow state instead", "", "**MANDATORY CLARIFICATION PROCESS:**", "1. Review all provided context (story maps, increments documents, existing files, conversation history, etc.)", "2. For EACH required question below, THOUGHTFULLY attempt to answer it yourself using the available context", "3. When answering questions:", "   - ACTUALLY ANSWER THE QUESTION - don't just list available options without answering", "   - If the question asks \"what is the scope\", answer what the scope IS based on context", "   - If the question requires a CHOICE/DECISION from the user, identify the available options/deltas and ask the user to choose", "   - Be thoughtful and specific in your answers based on what's available in context", "4. Place your answers directly with each question in the format:", "   **Question:** [question text]", "   **Answer:** [your thoughtful answer based on context]", "   OR if a choice is needed:", "   **Answer:** [your answer based on context]. **Available options:** [list options]. **Which option do you want to choose?**", "   OR if information is missing:", "   **Answer:** \u26a0\ufe0f **NOT ENOUGH INFORMATION - REQUIRES USER INPUT**", "5. Be EXPLICIT and CLEAR when you cannot answer a question - use \"\u26a0\ufe0f **NOT ENOUGH INFORMATION - REQUIRES USER INPUT**\" so the user knows they must provide this information", "6. Do NOT guess or infer answers - if information is not clearly available in context, state that user input is required", "7. When a question requires a decision/choice, identify the available deltas/options from context and ask the user to select", "8. Present ALL questions with your answers to the user", "9. Ask the user to review, confirm, correct, or provide missing answers", "10. Do NOT proceed until the user has reviewed and confirmed/corrected all answers", "", "**MANDATORY: CONTEXT SOURCE LOCATION:**", "11. When reviewing context to answer questions, you MUST check these locations IN ORDER:", "    1. `{project_area}/docs/context/` folder - Original input files, prompts, source material", "    2. `{project_area}/docs/stories/` folder - Generated files (clarification.json, planning.json) if they exist", "    3. Conversation history (if available)", "    4. Existing project files in `{project_area}/`", "    - **PRIMARY SOURCE:** Always start with `{project_area}/docs/context/` folder for original input", "    - **Input files:** Read from `{project_area}/docs/context/input.txt` or similar", "    - **Prompts:** Read from `{project_area}/docs/context/` folder", "    - **Source material:** All original context providers are in `{project_area}/docs/context/`", "", "**MANDATORY STORAGE STEP - IMMEDIATE CHECKPOINT:**", "12. IMMEDIATELY after user confirms all answers are complete and correct, you MUST store clarification data:", "    - Pass `key_questions_answered` and `evidence_provided` as parameters to the behavior action tool (e.g., `mcp_story-bot_shape` with action `gather_context`):", "      * `key_questions_answered`: dict mapping question keys to answer strings", "      * `evidence_provided`: dict mapping evidence types to evidence content", "    - The action will automatically save to `{project_area}/docs/stories/clarification.json`", "      * **CRITICAL: Generated file location - `{project_area}/docs/stories/clarification.json`**", "      * **NOT in `{project_area}/docs/context/` - generated files go in docs/stories/**", "      * Structure: `{\"{behavior}\": {\"key_questions\": {...}, \"evidence\": {...}}}`", "    - DO NOT proceed to next action until storage is confirmed complete", "    - This is a BLOCKING checkpoint - storage must happen before proceeding", "", "Assess the provided context against the required questions and evidence below.", "", "**Required Key Questions:**", "{{key_questions}}   --> load from `{bot}/behaviors/{behavior}/guardrails/required_context/key_questions.json`", "", "**Required Evidence:**", "{{evidence}}  --> load from `{bot}/behaviors/{behavior}/guardrails/required_context/evidence.json`", "", "For each question, provide a thoughtful answer based on available context. If the question requires a choice/decision, identify available options and ask the user to choose. If the answer cannot be determined from available context, clearly state \"\u26a0\ufe0f **NOT ENOUGH INFORMATION - REQUIRES USER INPUT\".", "", "**MANDATORY: PAUSE FOR HUMAN FEEDBACK**", "When this action is complete, AI MUST pause and wait for human feedback. When human says 'done' or confirms completion, you MUST proceed to the next step: **decide_planning_criteria** (call the decide_planning_criteria action tool)."], "guardrails": {"key_questions": ["Who are the distinct types of users (e.g., operational users, power users, compliance consumers, content creators, producers)?", "What are the key goals, behaviors, or decisions each group is trying to accomplish using this capability?", "Who are the primary users or stakeholder groups impacted?", "What is the first thing users will try to do with this new capability or system?", "What problems, inefficiencies, or workarounds is this request trying to eliminate?", "Where are users currently struggling, getting stuck, or experiencing delays in the process we're aiming to improve?", "What other systems, data sources, or tools does this capability need to interact with in order to deliver value?", "What are the key behaviors or integration points that define how these systems support or depend on one another?", "What is the business domain we are modeling?", "What are the core business concepts and their relationships?", "What are the distinct sub-domains or business capabilities?", "What are the boundaries between different parts of the domain?", "What domain events occur in this business domain?", "What are the key business rules and constraints?", "What domain language do business experts use to describe this domain?"], "evidence": ["Business model canvas", "Journey maps or other design thinking artifacts", "Technical specifications", "Product charters", "Business cases", "Business models", "Impact maps", "R&D maps", "User research", "User journey maps", "Similar systems", "User interviews", "Business process documentation", "Domain expert interviews", "Existing system documentation", "Business glossaries or dictionaries", "Financial statements", "Industry literature", "Event storming outputs", "Domain models from similar systems"]}}}}, "11": {"action_state": "story_bot.1_shape.decide_planning_criteria", "status": "started", "timestamp": "2025-12-11T13:34:23.583681"}, "12": {"action_state": "story_bot.1_shape.decide_planning_criteria", "status": "completed", "timestamp": "2025-12-11T13:34:23.598689", "outputs": {"instructions": {"assumptions": ["Focus on user flow over internal systems", "Cover the end-to-end scenario", "Prioritize customer-facing features", "Assume stories should be independently testable", "Assume each story delivers user value", "Assume technical infrastructure stories are implicit", "Drill down where architectural uncertainty is high \u2013 unknown integration patterns, new technology, or unclear system boundaries require deeper exploration", "Drill down where business complexity is significant \u2013 complex business rules, regulatory requirements, or domain logic that needs clarification", "Drill down where uniqueness creates risk \u2013 novel approaches, first-of-kind features, or untested patterns benefit from detailed shaping", "Drill down where integration complexity exists \u2013 multiple systems, data dependencies, or coordination challenges need detailed mapping", "Drill down where user behavior is highly variable \u2013 diverse user needs, multiple personas, or inconsistent workflows require deeper understanding", "Skip deep drill-down where patterns are well-established \u2013 standard CRUD operations, familiar workflows, or proven integration patterns can stay high-level", "Focus on core domain over supporting domains", "Identify overall domain concepts and relationships before detailed modeling", "Use ubiquitous language from domain sources", "Model domain concepts, not technical implementation", "Separate domain logic from infrastructure concerns, where they are mentioned"], "decision_criteria": {"bounded_context_identification": {"description": "Bounded context identification strategy", "question": "How are we identifying and defining bounded contexts?", "outcome": "Determines how domain boundaries are established", "options": ["By business capability - group by what the business does", "By organizational structure - align with teams or departments", "By data ownership - group by who owns the data", "By integration patterns - group by how systems interact", "By domain complexity - separate complex from simple domains"]}, "depth_of_shaping": {"description": "Depth of shaping", "question": "How deep should we drill down in each shaping phase for the drill-down areas?", "outcome": "Determines the level of detail for each phase in drill-down areas", "options": ["Estimates -> story_count only", "Decompose -> Discover all stories listed", "Workflow -> Figure out logical process, alternate/or conditions", "Extensive -> Specify all scenarios", "Testable -> Specify minimal examples", "Complete -> Specify all examples"], "note": "Select one or more options. For drill-down areas, specify depth for: discovery (all stories listed vs story_count), scenarios (all scenarios vs happy path only), spec examples (all examples vs minimal examples)."}, "drill_down_approach": {"description": "drill down approach", "question": "What areas of the story map do you want to explore more deeply as a part of shaping?", "outcome": "Determines which epics/stories get detailed breakdown", "options": ["Dig deep on business complexity", "Dig deep on system interactions", "Dig deep on architectural pieces", "Dig deep on user workflows", "High and wide across all epics", "Focus on highest value areas", "Dig deep on behavioral complexity", "Dig deep on data and reporting needs", "Dig deep on change management or training impact", "Dig deep on system-of-record versus system-of-engagement boundaries"]}, "drill_down_limits": {"description": "Drill-down limits", "question": "What are the approximate limits for drill-down coverage (to prevent over-detailing)?", "outcome": "Sets boundaries on how many stories/features to drill down on", "options": ["Approximate story limit: 3-5 stories", "Approximate story limit: 5-10 stories", "Approximate story limit: 10-15 stories", "Approximate story limit: 15-20 stories", "Approximate story limit: No limit", "Approximate feature limit: 2-3 features", "Approximate feature limit: 3-5 features", "Approximate feature limit: 5-7 features", "Approximate feature limit: 7-10 features", "Approximate feature limit: No limit"], "note": "Select approximate limits to prevent over-detailing. Can select both story and feature limits, or specify 'No limit' for either."}, "flow_scope_and_granularity": {"description": "Flow scope and granularity", "question": "How wide are we going with the flow and what level of scope are we documenting?", "outcome": "Determines the breadth user-system interactions we're mapping", "options": ["End-to-end user-system behavior \u2013 One user interaction followed by one system response", "Journey level \u2013 Complete user journey across multiple touchpoints, systems, and interactions. Captures full experience flow.", "Intra-system level \u2013 Focus on interactions within a single system, Useful for Solutions with significant backend or service flows.", "Business process plus user-system behavior \u2013 Combine business process steps with detailed user-system interaction points.", "Integration boundary level \u2013 Focus on system-to-system integration points and data flow across boundaries.", "Domain boundary level \u2013 Map flows by business domain boundaries, showing how domains interact.", "Capability level \u2013 High-level flow showing major capabilities and how they connect, without detailed interactions."]}, "structure_exploration_depth": {"description": "Structure exploration depth", "question": "What level of domain acceptance criteria should be explored for structure-focused areas?", "outcome": "Determines whether to explore only domain acceptance criteria or include business acceptance criteria", "options": ["Structure -> Explore Domain AC only", "Behavioral -> Explore Business and Domain AC"], "note": "Structure focuses on domain structure and relationships. Behavioral includes business behavior and outcomes."}}}}}, "13": {"action_state": "story_bot.1_shape.build_knowledge", "status": "started", "timestamp": "2025-12-11T13:34:30.463245"}, "14": {"action_state": "story_bot.1_shape.build_knowledge", "status": "completed", "timestamp": "2025-12-11T13:36:06.562863", "outputs": {"instructions": {"action": "build_knowledge", "behavior": "1_shape", "base_instructions": ["**MANDATORY: Before generating any content, you MUST load and review the project's context files:**", "1. Load `{project_area}/docs/stories/clarification.json` - Contains key questions and evidence (generated file)", "2. Load `{project_area}/docs/stories/planning.json` - Contains assumptions and decisions (generated file)", "3. Load `{project_area}/docs/context/*` (or similar) - Original input/source material (original context)", "", "These files contain critical requirements, decisions, and context that MUST be incorporated into all generated content.", "", "", "**BUILD KNOWLEDGE GRAPH (Structured JSON Content):**", "Generate the knowledge graph as structured JSON content following the rules and schema provided. ", "**Schema:** Use schema '**Schema Rules:**\n- **Hierarchical**: sub_epics can contain: nested sub_epics or story_groups. sequential_order is always an integer (1, 2, 3, 4) - unique within parent, no decimals.\n- **Connector**: Story groups: 'and' or 'or' (null for first group). Stories within groups: 'and' or 'or' (null for first story). Epics and sub_epics don't have connectors.\n- **Domain Placement**: domain_concepts: 'local' if relevant to single sub_epic, 'global' if relevant to multiple sub_epics. Place at most specific level (local preferred), but elevate to parent if used by multiple children.\n\n**Template Structure (JSON Schema):**\n```json\n{\n  \"_explanation\": {\n    \"hierarchical\": \"sub_epics can contain: nested sub_epics or story_groups. sequential_order is always an integer (1, 2, 3, 4) - unique within parent, no decimals.\",\n    \"connector\": \"Story groups: 'and' or 'or' (null for first group). Stories within groups: 'and' or 'or' (null for first story). Epics and sub_epics don't have connectors.\",\n    \"domain_placement\": \"domain_concepts: 'local' if relevant to single sub_epic, 'global' if relevant to multiple sub_epics. Place at most specific level (local preferred), but elevate to parent if used by multiple children.\"\n  },\n  \"epics\": [\n    {\n      \"name\": \"\",\n      \"sequential_order\": 1,\n      \"estimated_stories\": null,\n      \"domain_concepts\": [\n        {\n          \"name\": \"\",\n          \"responsibilities\": [\n            {\n              \"name\": \"\",\n              \"collaborators\": []\n            }\n          ]\n        }\n      ],\n      \"sub_epics\": [\n        {\n          \"name\": \"\",\n          \"sequential_order\": 1,\n          \"estimated_stories\": null,\n          \"domain_concepts\": [\n            {\n              \"name\": \"\",\n              \"responsibilities\": [\n                {\n                  \"name\": \"\",\n                  \"collaborators\": []\n                }\n              ]\n            }\n          ],\n          \"sub_epics\": [],\n          \"story_groups\": [\n            {\n              \"type\": \"and\",\n              \"connector\": null,\n              \"sequential_order\": 1,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 2,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            },\n            {\n              \"type\": \"and\",\n              \"connector\": \"or\",\n              \"sequential_order\": 2,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 2,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 3,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            },\n            {\n              \"type\": \"or\",\n              \"connector\": \"or\",\n              \"sequential_order\": 3,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            }\n          ]\n        }\n      ],\n      \"stories\": []\n    }\n  ]\n}\n```'  --> load from behavior data files", "", "**Description:** Create a story map and domain model outline that captures the user's journey through epics, features, and stories, and captures domain model concepts and requirements Goal: Shape both story map and domain model together from user context - capture domain concepts, responsibilities, and requirements alongside story structure", "", "Hey, going to be going away for a little while to create the knowledge graph. Go get a cup of coffee \ud83d\ude0a", "", "**BUILD KNOWLEDGE GRAPH - STORY GRAPH AND DOMAIN MODEL CREATION:**", "", "Build the initial story graph structure AND domain model from gathered context and planning decisions. Capture domain concepts alongside story structure.", "", "**Configuration:**", "- Reference: build_story_graph_outline.json", "- Template: story-graph-outline.json", "", "**CRITICAL - TEMPLATE STRUCTURE COMPLIANCE:**", "1. The build_knowledge action has injected 'knowledge_graph_template' into your instructions", "2. This template shows the EXACT JSON structure your output MUST match", "3. **DO NOT invent your own schema** - examine the template and replicate its structure", "4. The template includes:", "   - Root level keys (e.g., 'epics' array only, NOT 'capability', 'increments', 'features')", "   - Required fields at each level (e.g., 'sequential_order', 'estimated_stories', 'domain_concepts')", "   - Nested structure (epics \u2192 sub_epics \u2192 story_groups \u2192 stories)", "   - Field types and formats (e.g., 'connector': null vs 'connector': 'and')", "5. Look at the '_explanation' section in the template for structural rules", "6. Your output must be structurally identical - only the values (names, responsibilities, etc.) differ", "", "**CRITICAL: Story Graph Structure - Main Epics Section is Single Source of Truth**", "", "**Two-Section Architecture (if increments are added later):**", "", "1. **Main 'epics' Section (Single Source of Truth)**", "   - Contains ALL story details: name, users, sequential_order, story_type, connector, story_groups, etc.", "   - This is the PRIMARY location - all story details must be here", "   - Used as the source for all views (outline, increments, discovery, exploration)", "", "2. **'increments' Section (Minimal Reference View - if present)**", "   - This is a MINIMAL REFERENCE VIEW - just enough to know which stories belong to which increment", "   - Stories in increments should ONLY contain: name, users (optional), sequential_order", "   - NO story details (no story_type, no connector, no story_groups, no domain_concepts, etc.)", "   - Increments are a COPY of the outline view at the story level - just for mapping stories to increments", "   - All story details come from the main epics section", "", "**Domain Model Creation (Integrated with Story Graph):**", "1. Domain concepts are integrated directly into the story graph structure", "2. Place domain_concepts at epic and sub_epic levels based on relevance", "3. Apply domain shaping rules (context: 'when shaping the domain')", "4. **DO NOT create separate domain_graph.json or domain model files**", "5. All domain modeling is captured within story-graph.json via domain_concepts arrays", "", "**Domain Concept Placement Logic:**", "- **Local placement (preferred)**: Place domain_concepts at the sub_epic level when they are relevant to only that sub_epic", "- **Global placement**: Elevate domain_concepts to parent epic/sub_epic level when they are relevant to multiple child sub_epics", "- **Favor local**: Start with local placement, but elevate if the concept is used by multiple sub_epics", "**Process:**", "1. Use clarification data from docs/stories/clarification.json", "2. Use planning decisions from docs/stories/planning.json", "3. **EXAMINE the knowledge_graph_template structure injected into your instructions**", "4. Build story graph matching that exact structure (root keys, field names, nesting)", "5. Identify domain concepts from clarification and planning data", "6. Map domain concepts to epics/sub_epics based on relevance (see placement logic above)", "7. Populate domain_concepts arrays in story-graph.json with proper placement", "8. Create story-graph.json in project area", "7. Populate domain_concepts arrays in story-graph.json with proper placement", "8. Create story-graph.json and domain model outputs in project area (same location)", "", "**Output:**", "- File: {project_area}/story-graph.json (JSON story graph with epics, sub_epics, story_groups, stories, and domain_concepts integrated)", "", "**Next Step:** Proceed to render step after story graph is created.", "", "", "Before generating any content, review ALL validation rules below. Your generated content MUST comply with every rule to avoid violations.", "", "**Behavior-level rules:**", "", "**Rule:** rules\\maintain_verb_noun_consistency.json", "Maintain verb-noun consistency from epic to feature to story to scenario", "", "**DO:**", "- Use consistent verb-noun language across all levels: Epic: Manage Orders \u2192 Feature: Place Order \u2192 Story: Customer places order \u2192 Scenario: When customer places order...", "- Maintain consistent terminology throughout hierarchy: Epic, feature, story, and scenario all use same verb-noun pattern", "- Use verb-noun language in scenario sentences: When user submits form, then system validates data", "", "**DON'T:**", "- Don't switch formats between levels: Epic: Order Management \u2192 Feature: Place Order (inconsistent format)", "- Don't mix verb-noun with other formats: Epic uses verb-noun, but feature uses noun-only format", "- Don't use different terminology at different levels: Epic says 'Orders', feature says 'Order Processing', story says 'Process Order'", "", "", "**Rule:** rules\\map_sequential_spine_vs_optional_paths.json", "When mapping stories, carefully distinguish between sequential spine (essential path) and optional paths, alternate routes, or additional functionality that is not strictly essential. Sequential stories form the mandatory flow; optional stories are alternatives, enhancements, or non-essential features.", "", "**DO:**", "- Identify the essential spine first: Start by identifying the minimal essential path that delivers core value", "The spine represents the mandatory sequence: Story1 AND Story2 AND Story3", "Spine stories get sequential_order numbers (1, 2, 3, etc.)", "Spine stories are required for the feature to deliver its core purpose", "Ask: 'What is the minimum path to deliver value?'", "- Mark optional paths clearly: Optional stories branch from or enhance the spine but are not required", "Mark optional stories with 'optional: true' in the story structure", "Optional stories may have sequential_order if they're part of an alternative flow", "Optional stories represent: alternate routes, enhancements, nice-to-have features", "Ask: 'Can the feature deliver value without this story?'", "- Distinguish types of optional paths with concrete examples: Alternate routes: User logs in with email (sequential_order: 2) OR User logs in with social media (sequential_order: 2.1, optional: true)", "Enhancements: User views dashboard (sequential_order: 3) AND User customizes dashboard (sequential_order: 3.1, optional: true)", "Additional functionality: User views dashboard (sequential_order: 3) AND User shares dashboard (sequential_order: 3.2, optional: true)", "Error handling: User enters invalid data (sequential_order: 4) AND System shows error message (sequential_order: 4.1, optional: true)", "- Correct mapping examples: Spine: User creates account (sequential_order: 1) AND User logs in (sequential_order: 2) AND User views dashboard (sequential_order: 3)", "Optional alternate: User logs in with email (sequential_order: 2) OR User logs in with social media (sequential_order: 2, optional: true)", "Optional enhancement: User views dashboard (sequential_order: 3) AND User customizes dashboard (optional: true, priority: 1)", "Additional functionality: User views dashboard (sequential_order: 3) AND User shares dashboard (optional: true, priority: 2)", "", "**DON'T:**", "- Don't mark everything as sequential: Don't assign sequential_order to all stories when some are optional", "Don't treat alternate routes as part of the spine", "Don't include enhancements in the mandatory sequential flow", "Don't confuse 'nice to have' with 'must have'", "- Don't omit optional markers: Don't leave optional stories unmarked - be explicit", "Don't assume all stories in a feature are mandatory", "Don't mix optional and mandatory without clear distinction", "Don't fail to identify the spine before adding optional paths", "- Wrong mapping examples: Wrong: User creates account (1) AND User logs in with email (2) AND User logs in with social media (3) - social media should be optional", "Wrong: User views dashboard (1) AND User customizes dashboard (2) AND User shares dashboard (3) - customization and sharing should be optional", "Wrong: All stories marked mandatory when some are clearly alternatives or enhancements", "Wrong: No distinction between essential path and optional features", "", "", "**Rule:** rules\\stories_developed_and_tested_in_days.json", "Write stories that can be developed and tested in a matter of days", "", "**DO:**", "- Create stories sized for days, not weeks: Story takes 3-5 days to develop and test completely", "- Break large work into smaller stories: Large feature broken into multiple stories, each completable in days", "- Focus on delivering complete, testable functionality quickly: Each story delivers a complete piece of functionality that can be tested", "", "**DON'T:**", "- Don't create stories that span multiple weeks: Story requires 3+ weeks to complete (too large)", "- Don't create stories that can't be tested independently: Story requires multiple other stories before it can be tested", "- Don't create stories without clear boundaries: Story is vague about scope and completion criteria", "", "", "**Rule:** rules\\stories_follow_invest_principles.json", "Ensure stories follow INVEST principles (Independent, Negotiable, Valuable, Estimable, Small, Testable)", "", "**DO:**", "- Independent - story can be developed independently: Story doesn't depend on other stories being completed first", "- Negotiable - story details can be negotiated: Story allows for discussion and refinement of requirements", "- Valuable - story delivers value to user or business: Story provides measurable value when completed", "- Estimable - story can be estimated: Story is clear enough to estimate effort", "- Small - story can be completed in short time: Story can be developed and tested in a matter of days", "- Testable - story has clear acceptance criteria: Story has testable outcomes that can be verified", "", "**DON'T:**", "- Don't create stories that depend on multiple other stories: Story requires 5 other stories to be completed first (not independent)", "- Don't create stories that are too large: Story spans multiple weeks and includes multiple features (not small)", "- Don't create stories without clear value: Story doesn't provide measurable value to users or business", "", "", "**Rule:** rules\\story_names_must_follow_verb_noun_format.json", "CRITICAL: Story names MUST follow Verb-Noun format (e.g., 'Move To Mob Leaders Turn', 'Determines Target from Strategy', 'Initiate Mob Attack'), and include italicized description showing component interactions (e.g., '*Combat Tracker moves to any mob member's turn, auto moves to mob leader's turn*'). The story name should be concise and action-oriented, while the description shows the component-to-component interactions.", "", "**DO:**", "- Use concise Verb-Noun format for story names: Move To Mob Leaders Turn, Determines Target from Strategy, Initiate Mob Attack", "- Include italicized description showing component interactions: *Combat Tracker moves to any mob member's turn, auto moves to mob leader's turn*", "- Make story name concise and action-oriented: Story name: 'Initiate Mob Attack' - concise and action-oriented", "- Show component interactions in description: Story description shows how components interact with each other", "", "**DON'T:**", "- Don't use long descriptive names without Verb-Noun format: The system should allow users to move to mob leaders turn when...", "- Don't omit component interaction descriptions: Story name without italicized description of component interactions", "- Don't use vague or non-action-oriented names: Mob Leader Turn System, Attack Mechanism", "", "", "**Rule:** rules\\use_active_behavioral_language.json", "Use active behavioral language with action verbs. Describe behaviors, not tasks or capabilities.", "", "**DO:** Use action verbs to describe what happens", "Use action verbs to describe what happens", "Example: User submits order, System validates payment", "Favor active behavioral language over functional/capability breakup", "Use story maps to outline user and system behavior (NOT tasks)", "Use action verbs: submits, views, validates, sends, displays", "Describe behaviors: [Actor] [action] [object]", "Use active behavior language: Place order (active behavior), Validate payment (active behavior)", "", "**DON'T:** Avoid capability nouns and task language", "Avoid capability nouns that describe functions rather than behaviors", "Don't use functional or capability-based language instead of behavioral language", "Don't use capability nouns: Management, Processing, Administration", "Don't use task verbs: implement, create, build, set up", "Don't use task language", "", "Wrong Examples:", "- Order Management, Payment Processing (capability nouns)", "- Focus on tasks instead of behaviors", "- Order Management (capability), Implement order placement (task)", "", "", "**Rule:** rules\\use_verb_noun_format_for_story_elements.json", "Use verb-noun format for all story elements (epic names, feature names, story titles)", "", "**DO:**", "- Use verb-noun format for epic names: Manage Orders, Create Character, Process Payment", "- Use verb-noun format for feature names: Place Order, Validate Payment, Save Character", "- Use verb-noun format for story titles: Customer places order, System validates payment, User saves character", "- Use verb-noun format for scenario sentences: User submits form, System processes request", "", "**DON'T:**", "- Don't use noun-only or capability-based names: Order Management, Payment Processing, Character System", "- Don't mix verb-noun with other formats: Order Management and Place Order (mixed format)", "- Don't use gerund forms: Ordering, Processing Payments, Creating Characters", "", "", "**Rule:** apply_7_plus_minus_2_hierarchy.json", "Apply 7\u00b12 rule for hierarchy: epics contain 4-9 sub-epics, sub-epics contain 4-9 stories. Split when exceeding, merge when below minimum.", "", "**DO:** Maintain hierarchy within the 7\u00b12 cognitive limit range", "(E) Epic: Contains 4-9 sub-epics", "  - Split into additional Sub-Epics when > 9 sub-epics", "  - Merge with another epic when < 4 sub-epics", "(E) Sub-Epic: Contains 4-9 stories", "  - Split into 2 sub-epics when > 9 stories", "  - Merge with another sub-epic when < 4 stories", "(S) Story: Contains 2-9 acceptance criteria", "  - Split into 2 stories when > 9 AC", "  - Merge with another story when < 2 AC (single AC stories are too small)", "Apply 7\u00b12 cognitive limit principle (optimal range: 5-9, acceptable: 4-9)", "", "Example:", "(E) Manage Orders (10 sub-epics \u2192 SPLIT)", "  and (E) Manage Customer Orders (6 stories) \u2713", "  and (E) Manage Order Fulfillment (4 stories) \u2713", "", "(E) Place Order (12 stories \u2192 SPLIT)", "  and (S) Initiate Order (6 AC) \u2713", "  and (S) Complete Order (6 AC) \u2713", "", "(S) Validate Payment (11 AC \u2192 SPLIT)", "  and (AC) Check Payment Method (5 steps) \u2713", "  and (AC) Process Payment Transaction (6 steps) \u2713", "", "**DON'T:** Don't exceed thresholds or create items below minimum", "Create epics with > 9 sub-epics (use additional Sub-Epics instead)", "Create sub-epics with > 9 stories (split the sub-epic)", "Create stories with > 9 acceptance criteria (split the story)", "Create very small stories with < 2 AC (merge with related story)", "Ignore sizing thresholds during shaping, discovery, or exploration", "", "Wrong Examples:", "- (E) Epic with 15 sub-epics (too many, use additional Sub-Epics)", "- (E) Sub-Epic with 15 stories (too many, split sub-epic)", "- (S) Story with 15 AC (too many, split story)", "- (S) Story with 1 AC (too small, merge with related story)", "", "", "**Rule:** avoid_noun_redundancy.json", "When shaping stories, avoid noun redundancy in domain and concept names", "", "**DO:** INTEGRATE first: nest related capabilities under one domain", "INTEGRATE first: nest related capabilities under one domain (90% of cases)", "Only then rename: use distinct nouns ONLY when integration doesn't make sense", "Test for uniqueness: Can you remove the qualifier and still know what it is?", "Use subject-area nouns when domains are genuinely separate", "Only when integration truly doesn't make sense", "", "**DON'T:** Don't rename without considering integration", "Don't rename without considering integration (this hides the real issue)", "Wrong: Repeat same noun with different prefixes: X Animation, Y Animation, Z Animation", "Don't use vague qualifiers to avoid integration", "Wrong: Animation 1, Animation System", "Don't create parallel domains that should be nested", "Wrong: Integrate related concepts rather than creating redundant structures", "", "", "**Rule:** avoid_technical_implementation_language.json", "When shaping stories, avoid technical implementation language in user-facing story elements", "", "**DO:**", "- Use business language in user-facing elements: Customer places order, User views profile, Admin approves request", "- Focus on what user experiences, not how it's implemented: Story describes user experience, not technical implementation", "", "**DON'T:**", "- Don't use development task language: implement, create, refactor, optimize, fix, build, set up", "- Don't use technical implementation details: query database, call API, update table", "- Don't focus on delivery or development tasks: Implement order system, Create database schema, Set up API endpoints", "- Don't focus on system internals: Optimize query performance, Refactor authentication code, Update configuration", "", "", "**Rule:** avoid_technical_stories.json", "Technical stories represent implementation tasks that do not describe system behavior. They are normally avoided in favor of user stories and system stories. When technical stories are necessary, they should be marked with story_type: 'technical' and kept minimal.", "", "**DO:**", "- Prefer user stories and system stories over technical stories: Instead of 'Set up database schema', use 'Store user data' (user story)", "Instead of 'Create API endpoint', use 'Expose user data via API' (system story)", "Instead of 'Write unit tests', use 'Verify story behavior' (user story)", "- When technical stories are necessary, mark with story_type: 'technical': Story: 'Migrate legacy data format' with story_type: 'technical'", "Story: 'Refactor authentication module' with story_type: 'technical'", "Story: 'Update dependency versions' with story_type: 'technical'", "- Keep technical stories minimal and focused: Technical stories should be rare exceptions", "Technical stories should still follow Verb-Noun format", "Technical stories should be clearly justified", "", "**DON'T:**", "- Don't create technical stories for normal development work: Avoid: 'Write code', 'Create class', 'Add method'", "Avoid: 'Set up CI/CD', 'Configure database', 'Install package'", "These are implementation details, not stories", "- Don't use technical stories to describe system behavior: Use system stories for system-to-system behavior", "Use user stories for user-facing behavior", "Technical stories are for unavoidable implementation tasks only", "", "", "**Rule:** balance_fine_grained_testable_stories.json", "Balance fine-grained stories with testable and valuable independent units. Stories must deliver value and be independently testable.", "", "**DO:** Create stories that are complete interactions with value", "Create stories that are complete interactions with value", "Example: Customer places order (complete interaction, testable, valuable)", "Balance fine-grained stories with testable/valuable stories", "Ensure stories are fine-grained enough to enable frequent feedback", "Ensure stories are grouped into meaningful chunks for high quality feedback", "Stories that deliver measurable value independently", "", "**DON'T:** Avoid stories that are too small or too large", "Avoid stories that are too small and have no value alone", "Don't create stories that are too fine-grained without being testable or valuable", "Don't create stories that are too large to be testable or deliverable quickly", "", "Wrong Examples:", "- Add order button (too fine-grained, no value alone)", "- Change button color (too fine-grained, no value)", "- Customer places order and views history and updates profile (too large, multiple flows)", "", "", "**Rule:** create_lightweight_precise_docs.json", "Create lightweight but precise documentation during shaping. Focus on structure and scope, not detailed specifications.", "", "**DO:** Create lightweight but precise documentation during shaping", "Balance fine-grained stories with testable/valuable stories", "Ensure stories are fine-grained enough to enable frequent feedback", "Ensure stories are grouped into meaningful chunks for high quality feedback", "Validate that a business expert can understand the language of most of the stories", "Focus the language on the business domain", "Create lightweight but precise documentation", "Focus on structure and scope, not detailed specifications", "Make the map easy to walk through (it tells a story)", "", "Example:", "(E) Manage Orders", "  and (E) Place Order", "    and (S) Customer --> places order", "(Shows hierarchy and structure, not detailed specs)", "", "**DON'T:** Don't over-elaborate or add detailed specifications during shaping", "Create stories that are too fine-grained without being testable or valuable", "Create stories that are too large to be testable or deliverable quickly", "Add detailed technical specifications during shaping phase", "Over-elaborate story mapping during shaping", "", "Wrong Example:", "(E) Manage Orders", "  and (E) Place Order", "    and (S) Customer --> places order", "  \u2192 Detailed API specs, database schema, UI mockups", "(Too much detail for shaping phase)", "", "", "**Rule:** discover_relationships_from_story_map.json", "Domain Discovery determines relationships and responsibilities between core domain objects by walking through the story map, then suggests story refinements to rebuild the story map to complement the domain model.", "", "**DO:** Extract keywords from story map and determine relationships and responsibilities", "Go through all stories in increment scope, extract keywords from story titles/descriptions/acceptance criteria, ask clarifying questions for each keyword, map relationships with multiplicities, document responsibilities", "", "**DON'T:** Don't skip keyword identification or build domain model without story map analysis", "Skip going through stories, ignore keywords in acceptance criteria, build domain model without asking what keywords mean, use technical terms instead of domain terms", "", "", "**Rule:** enforce_behavioral_journey_flow.json", "When shaping stories, CRITICAL: Stories must show user/system journey flow, not just list operations. Stories must include context (when/why actions happen) and connect logically. Order by user journey, not technical sequential_order.", "", "**DO:** Show user/system journey with context and flow", "Stories must show WHEN and WHY actions happen, not just WHAT", "Story maps must show logical flow: Initialize \u2192 Validate \u2192 Process \u2192 Confirm \u2192 Complete", "Each story must connect to previous/next stories in the journey", "Order stories by user journey flow, not by technical sequential_order", "", "Correct Examples (with journey context - Payment Domain):", "(E) Process Payment", "  and (E) Process Card Payment", "    and (S) User --> invokes process payment command", "    and (S) System --> validates payment details", "    and (S) System --> authorizes payment", "    and (S) System --> processes payment transaction", "    and (S) System --> confirms payment and sends notification", "", "(E) Refund Payment", "  and (E) Process Refund", "    and (S) User --> invokes refund payment command", "    and (S) System --> validates refund eligibility", "    and (S) System --> processes refund transaction", "    and (S) System --> confirms refund and sends notification", "", "(E) Process Payment", "  and (E) Validate Payment", "    and (S) User --> submits payment request", "    and (S) System --> validates card number", "    and (S) System --> validates amount", "    and (S) System --> validates currency", "    and (S) System --> returns validation result", "", "Note: Individual stories like 'Authorize Payment with Processor' are correct story format (verb-noun, specific), but they need to be part of a journey. Stories should NOT include actors in the name (actors are documented separately).", "", "Correct Individual Stories (but need journey context):", "- 'Authorize Payment with Processor' (correct story format, but needs: when? why? what happens next?)", "- 'Validate Payment Details' (correct story format, but needs: when? why? what triggers this?)", "- 'Process Payment Transaction' (correct story format, but needs: when? why? what happens before/after?)", "", "Journey Flow Requirements:", "- Start with initialization/entry point", "- Show logical progression through operations", "- Include error handling and alternative paths", "- End with completion/save operations", "- Connect stories logically (this leads to that)", "", "**DON'T:** Don't create isolated sets of functions that don't make sense linearly", "Don't group unrelated operations together that don't form a logical journey", "Don't create story maps with random functions that have no linear relationship", "Don't mix unrelated operations from different domains or contexts", "", "Wrong Examples (isolated sets of functions, no linear sense - Payment Domain):", "(E) Payment Operations", "  and (E) Process Payment", "  and (E) Generate Invoice", "  and (E) Send Email", "  and (E) Update Inventory", "  and (E) Calculate Tax", "(unrelated operations, no linear flow - why does email come after payment? why inventory? no journey)", "", "(E) Payment System", "  and (E) Authorize Payment", "  and (E) Create User Account", "  and (E) Process Refund", "  and (E) Generate Report", "  and (E) Delete Transaction", "(random operations, no logical sequence - account creation doesn't follow authorization, deletion doesn't follow processing)", "", "(E) Payment Flow", "  and (S) System --> validates payment", "  and (S) System --> sends notification", "  and (S) System --> authorizes payment", "  and (S) System --> updates database", "  and (S) System --> processes payment", "(wrong order, no linear sense - notification before authorization? database update before processing?)", "", "What Makes It NOT a Linear Journey:", "- Unrelated operations grouped together (payment + inventory + email + tax - why together?)", "- Operations from different contexts mixed (payment + user account + reporting - different domains)", "- No logical sequence (why does X come before Y? no reason)", "- Operations can be in any order (no dependencies, no flow)", "- Random collection of functions (like a function library, not a journey)", "- No user/system goal that connects them (what are we trying to accomplish?)", "", "", "**Rule:** enforce_functional_accomplishment.json", "CRITICAL: Stories must represent complete functional accomplishments, not data access operations or implementation steps. Stories must deliver value independently.", "", "**DO:** Create stories that accomplish complete functions", "Stories must represent complete functional accomplishments", "Stories must deliver value independently (INVEST principle)", "Stories must show end-to-end flow, not just data access", "", "Correct Examples (complete functional accomplishments):", "- 'User loads story graph and system displays epics in diagram' (complete: load + display = accomplishment)", "- 'Developer edits epic name and system updates diagram' (complete: edit + update = accomplishment)", "- 'User requests render and system generates DrawIO file' (complete: request + generate = accomplishment)", "- 'CLI invokes render command and system saves outline diagram' (complete: invoke + save = accomplishment)", "", "Functional Accomplishment Requirements:", "- Story must accomplish something meaningful for user/system", "- Story must be independently valuable (can be tested/delivered alone)", "- Story must show complete flow (start \u2192 process \u2192 outcome)", "- Story must have clear acceptance criteria (how do we know it's done?)", "", "**DON'T:** Don't create stories that are just data access or implementation steps", "Don't create stories that are just data access operations", "Don't create stories that are implementation steps without outcomes", "Don't create stories that aren't independently valuable", "", "Wrong Examples (not complete accomplishments):", "- 'Read All Epics from Diagram' (data access - not accomplishment, what happens with the data?)", "- 'Load All Features In Graph Epic' (data access - not accomplishment)", "- 'Serialize Components to JSON' (implementation step - not accomplishment, part of what story?)", "- 'Convert Diagram to StoryGraph Format' (implementation step - not accomplishment)", "- 'Calculate Component Positions' (implementation step - not accomplishment)", "", "Data Access/Implementation Indicators (REJECT as stories):", "- Just reads/loads data without using it", "- Just converts/formats data without purpose", "- Just calculates/computes without outcome", "- Just serializes/saves without context", "", "These should be STEPS within stories, not stories themselves:", "- Step: 'System reads epics from diagram' (within story: 'User views story map and system displays epics')", "- Step: 'System serializes components' (within story: 'User saves story graph and system writes JSON file')", "- Step: 'System calculates positions' (within story: 'User requests render and system generates positioned diagram')", "", "Instead, ask:", "- What does the user/system accomplish with this?", "- Is this independently valuable?", "- Can this be tested/delivered alone?", "- What's the complete flow from start to finish?", "", "", "**Rule:** enforce_specificity_in_stories.json", "CRITICAL: Stories must be specific about what, when, why, and who. Generic operations like 'Add Sub-Epic' or 'Read Epics' are insufficient - stories must include context and specificity.", "", "**DO:** Create specific stories with full context", "Stories must be specific about what, when, why, and who", "Stories must include context: when does it happen? why? what triggers it?", "Stories must specify actors, objects, and outcomes clearly", "", "Correct Examples (specific with context - Payment Domain):", "- 'User processes payment for order #12345 with amount $50.00 when customer completes checkout' (specific: user, order ID, amount, context)", "- 'Merchant invokes refund command from API and system reverses payment transaction' (specific: merchant, API, command, outcome)", "- 'System validates payment card number 4111-1111-1111-1111 when user submits payment form' (specific: system, card number, trigger)", "- 'User clicks Process Payment button and system prompts for payment method selection' (specific: user, action, UI element, system response)", "", "Specificity Requirements:", "- WHO: Specific actor (User, Merchant, Customer, System, PaymentProcessor, API)", "- WHAT: Specific action and object (processes payment for order #12345 with amount $50.00)", "- WHEN: Specific trigger/context (when customer completes checkout, when user submits payment form)", "- WHY: Purpose in journey (to complete purchase transaction, to reverse payment error)", "- OUTCOME: Specific result (payment processed, transaction ID returned, notification sent)", "", "**DON'T:** Don't create generic stories without context", "Don't create generic operations without specificity", "Don't omit context about when/why actions happen", "Don't use vague descriptions without details", "", "Wrong Examples (generic without context - Payment Domain):", "- 'Process Payment' (which payment? for which order? when? why?)", "- 'Authorize Payment' (which payment? with which card? when? why? what happens next?)", "- 'Exposes Payment API' (which endpoints? to whom? when? why?)", "- 'Refund Payment' (which payment? for which reason? when? why?)", "", "Generic Indicators (REJECT or require more specificity):", "- Single verb + noun without context: 'Process Payment', 'Authorize Payment', 'Refund Payment'", "- No specific objects: 'Process Payment' (which payment? which order?)", "- No context: 'Authorize Payment' (when? why? what triggers this?)", "- No outcome: 'Authorize Payment' (what happens with the authorization result?)", "", "Instead, ask:", "- Which specific object? (payment ID, order number, transaction ID, card number)", "- When does this happen? (trigger, context, user action - when customer completes checkout, when merchant requests refund)", "- Why does this happen? (purpose, user need, journey step - to complete purchase, to reverse error)", "- What's the outcome? (result, system response, user experience - payment processed, transaction ID returned, notification sent)", "", "", "**Rule:** establish_spine_vs_optional_enhanced_behavior.json", "Establish mandatory spine stories vs optional/enhanced behavior stories. When mapping stories, carefully distinguish between sequential spine (essential path) and optional paths, alternate routes, or additional functionality that is not strictly essential. Mandatory stories form the sequential spine (story AND story AND story). Optional stories are alternatives or enhancements (story OR story) that branch from the spine and can return to it. Sequential stories form the mandatory flow; optional stories are alternatives, enhancements, or non-essential sub-epics.", "", "**DO:** Identify the essential spine first", "Start by identifying the minimal essential path that delivers core value", "The spine represents the mandatory sequence: Story1 AND Story2 AND Story3", "Spine stories get sequential_order numbers (1, 2, 3, etc.)", "Spine stories are required for the sub-epic to deliver its core purpose", "Ask: 'What is the minimum path to deliver value?'", "Establish the mandatory spine before identifying optional/enhanced behaviors", "Explicitly distinguish between spine (mandatory) and optional/enhanced behaviors", "", "**DON'T:** Don't mark everything as sequential", "Don't assign sequential_order to all stories when some are optional", "Don't treat alternate routes as part of the spine", "Don't include enhancements in the mandatory sequential flow", "Don't confuse 'nice to have' with 'must have'", "Don't mark all stories as mandatory when some are alternatives or enhancements", "Don't fail to establish the spine before adding optional/enhanced behaviors", "", "**DO:** Mark optional paths clearly", "Optional stories branch from or enhance the spine but are not required", "Mark optional stories with 'optional: true' in the story structure", "Optional stories may have sequential_order if they're part of an alternative flow (e.g., 2.1, 3.1, etc.)", "Optional stories represent: alternate routes, enhancements, nice-to-have sub-epics", "Ask: 'Can the sub-epic deliver value without this story?'", "Optional/enhanced stories can return to the spine after completion", "Sort optional/enhanced stories by priority of delivery within the same sub-epic", "", "**DON'T:** Don't omit optional markers", "Don't leave optional stories unmarked - be explicit", "Don't assume all stories in a sub-epic are mandatory", "Don't mix optional and mandatory without clear distinction", "Don't fail to identify the spine before adding optional paths", "Don't omit the optional marker - be explicit about spine vs optional/enhanced behaviors", "Don't create sub-epics where every story is mandatory when alternatives or enhancements exist", "", "**DO:** Distinguish types of optional paths with concrete examples", "Spine (all stories with and), then OR optional branch (all stories with and), then OR enhanced (all stories with and):", "", "Correct Example:", "Spine (all stories with and):", "  (S) User --> creates account", "  and (S) User --> logs in", "  and (S) User --> views dashboard", "OR optional branch (all stories with and):", "  (S) User --> signs in with social media (optional)", "  and (S) User --> signs in with email (optional)", "OR enhanced (all stories with and):", "  (S) User --> customizes dashboard (enhanced)", "  and (S) User --> shares dashboard (enhanced)", "", "**DON'T:** Wrong mapping examples", "Wrong: All stories marked mandatory when some are clearly alternatives or enhancements", "  and (S) User --> creates account (1)", "  and (S) User --> logs in with email (2)", "  and (S) User --> logs in with social media (3) - social media should be optional", "", "Wrong: No distinction between essential path and optional sub-epics", "  and (S) User --> views dashboard (1)", "  and (S) User --> customizes dashboard (2)", "  and (S) User --> shares dashboard (3) - customization and sharing should be optional", "", "Wrong: Missing optional markers on alternative flows or enhanced behaviors", "Wrong: Optional/enhanced stories not sorted by priority", "Wrong: No clear spine established before adding optional behaviors", "", "", "**Rule:** extract_story_map_checklist.json", "Quick checklist for extracting story maps from code. Follow this process step-by-step.", "", "", "**Rule:** extract_story_map_from_code.json", "CRITICAL: When creating story maps from code, analyze the outermost layer showing end-to-end journey. Locate acceptance tests, human code engagement points (CLI/UI), MCP server definitions, WSDL, API contracts. Analyze operations and domain for major/minor concepts. Create epics/sub-epics based on higher-order goals. Look at distinct behaviors and typical execution order to lay out story journey.", "", "**DO:** Find outermost layer and entry points", "Start with the OUTERMOST LAYER showing end-to-end journey", "Locate all HUMAN CODE ENGAGEMENT points:", "  - CLI commands and entry points (main(), command handlers)", "  - UI entry points (web routes, event handlers, button clicks)", "  - MCP server tool definitions (tool names, parameters, descriptions)", "  - API contracts (REST endpoints, GraphQL queries, WSDL operations)", "  - WebSocket handlers, message queues, event listeners", "", "Locate ACCEPTANCE TESTS:", "  - End-to-end tests that show complete user journeys", "  - Integration tests that show system-to-system flows", "  - Test scenarios that describe 'when X, then Y' behaviors", "  - BDD/Gherkin tests with Given-When-Then structure", "", "Example Entry Points to Find:", "- CLI: 'python -m story_io.story_io_cli render-outline --story-graph file.json'", "- MCP: Tool 'render_outline' with parameters 'story_graph_path', 'output_path'", "- API: POST /api/story-graph/render with body {storyGraph, outputFormat}", "- UI: Button 'Render Outline' that triggers render operation", "- Test: 'test_render_outline_from_json' that shows complete flow", "", "**DON'T:** Don't start with internal implementation details", "Don't start with internal classes or helper functions", "Don't start with data structures or domain models", "Don't start with utility functions or low-level operations", "", "Wrong Starting Points:", "- Internal class: 'StoryIODiagram.load_from_json()' (implementation detail)", "- Helper function: 'parse_story_graph()' (internal mechanism)", "- Data structure: 'Epic' class definition (domain model, not entry point)", "", "These are important but come AFTER identifying the journey", "", "**DO:** Analyze operations and domain for major/minor concepts", "Analyze OPERATIONS from entry points:", "  - What operations are exposed? (render, sync, search, edit, save)", "  - What are the operation names? (render-outline, sync-increments, search-stories)", "  - What parameters do they take? (story_graph_path, output_path, query)", "  - What do they return? (DrawIO file, JSON report, search results)", "", "Analyze DOMAIN CONCEPTS:", "  - MAJOR CONCEPTS: High-level domain entities (StoryGraph, Diagram, Epic, Sub-Epic, Story)", "  - MINOR CONCEPTS: Supporting entities (Position, Boundary, User, Increment)", "  - OPERATIONS: Actions on concepts (Load, Read, Edit, Render, Synchronize, Search, Save)", "  - RELATIONSHIPS: How concepts relate (Epic contains Sub-Epics, Sub-Epic contains Stories)", "", "Example Analysis (Story-IO Domain):", "- Operations: render-outline, render-increments, sync-outline, sync-increments, search, add-user, merge", "- Major Concepts: StoryGraph (main entity), Diagram (visual representation), Epic/Sub-Epic/Story (hierarchy)", "- Minor Concepts: Position (2D coordinate), Boundary (rectangular area), User (story actor), Increment (priority grouping)", "- Relationships: StoryGraph contains Epics, Epic contains Sub-Epics, Sub-Epic contains Stories", "", "Example Analysis (Payment Domain):", "- Operations: process-payment, refund-payment", "- Major Concepts: Payment (main entity), Transaction (financial transaction), Card (payment method), Refund (reversal)", "- Minor Concepts: Amount (monetary value), Currency (USD, EUR), Status (pending, approved, declined), PaymentMethod (card, bank transfer)", "- Relationships: Payment contains Transaction, Payment uses Card, Payment can have Refund, Transaction has Status", "", "**DON'T:** Don't confuse implementation details with domain concepts", "Don't treat implementation classes as domain concepts", "Don't treat utility functions as operations", "Don't treat data structures as domain entities", "", "Wrong Analysis:", "- Implementation class: 'StoryIORenderer' (implementation detail, not domain concept)", "- Utility function: 'calculate_position()' (implementation detail, not operation)", "- Data structure: 'dict' or 'list' (implementation detail, not domain concept)", "", "Focus on WHAT the system does (domain), not HOW it does it (implementation)", "", "**DO:** Create epics/sub-epics based on higher-order goals", "Group operations into EPICS based on HIGHER-ORDER GOALS:", "  - What is the user/system trying to accomplish?", "  - What are the major capabilities?", "  - What are the lifecycle stages?", "", "Example Epic Creation from Operations (Story-IO Domain):", "- Operations: render-outline, render-increments, render-exploration", "- Higher-Order Goal: 'Render StoryGraph' (user wants to visualize story map)", "- Epic: 'Render StoryGraph'", "", "- Operations: sync-outline, sync-increments, generate-sync-report, merge", "- Higher-Order Goal: 'Synchronize StoryGraph' (user wants to sync between formats)", "- Epic: 'Synchronize StoryGraph'", "", "Example Epic Creation from Operations (Payment Domain):", "- Operations: process-payment, process_payment, POST /api/payments/process", "- Higher-Order Goal: 'Process Payment' (user wants to process a payment transaction)", "- Epic: 'Process Payment'", "", "- Operations: refund-payment, refund_payment, POST /api/payments/refund", "- Higher-Order Goal: 'Refund Payment' (user wants to reverse a payment)", "- Epic: 'Refund Payment'", "", "Group operations into SUB-EPICS based on DISTINCT BEHAVIORS:", "  - What are the different ways to accomplish the epic goal?", "  - What are the different types or modes?", "  - What are the different contexts or scenarios?", "", "Example Sub-Epic Creation (Story-IO Domain):", "- Epic: 'Render StoryGraph'", "- Distinct Behaviors: Render outline (basic), Render increments (with priorities), Render exploration (with acceptance criteria)", "- Sub-Epics: 'Render Outline', 'Render Increments', 'Render Exploration'", "", "- Epic: 'Synchronize StoryGraph'", "- Distinct Behaviors: Sync outline structure, Sync increments, Generate comparison report, Merge graphs", "- Sub-Epics: 'Synchronize Outline', 'Synchronize Increments', 'Generate Sync Report', 'Merge StoryGraphs'", "", "Example Sub-Epic Creation (Payment Domain):", "- Epic: 'Process Payment'", "- Distinct Behaviors: Validate payment (required), Authorize payment (required), Process with card (common), Process with bank transfer (alternative), Process with wallet (alternative), Confirm payment (required)", "- Sub-Epics: 'Validate Payment', 'Authorize Payment', 'Process Card Payment', 'Process Bank Transfer', 'Process Wallet Payment', 'Confirm Payment'", "", "- Epic: 'Refund Payment'", "- Distinct Behaviors: Validate refund eligibility, Process refund, Confirm refund", "- Sub-Epics: 'Validate Refund', 'Process Refund', 'Confirm Refund'", "", "**DON'T:** Don't create epics/sub-epics from implementation structure", "Don't create epics based on class structure (StoryIODiagram, DrawIORenderer, PaymentProcessor, etc.)", "Don't create sub-epics based on method names (load_json, parse_xml, charge_card, etc.)", "Don't create epics/sub-epics from technical layers (data layer, service layer, etc.)", "", "Wrong Epic Creation:", "- Based on class: 'StoryIODiagram Operations' (implementation structure)", "- Based on method: 'JSON Loading' (technical mechanism)", "- Based on layer: 'Data Access Layer' (technical architecture)", "", "Focus on USER/SYSTEM GOALS, not technical structure", "", "**DO:** Look at distinct behaviors and typical execution order", "Analyze DISTINCT BEHAVIORS from acceptance tests and code flow:", "  - What are the different scenarios?", "  - What are the different paths through the code?", "  - What are the different user actions?", "", "Example Behavior Analysis (Story-IO Domain):", "- Test: 'test_render_outline_from_json' shows: Load JSON \u2192 Parse \u2192 Generate XML \u2192 Calculate Positions \u2192 Apply Styles \u2192 Save", "- Distinct Behaviors: Load, Parse, Generate, Calculate, Apply, Save", "- These become STORIES in the journey", "", "Example Behavior Analysis (Payment Domain):", "- Test: 'test_process_payment_success' shows: Invoke \u2192 Validate \u2192 Authorize \u2192 Process \u2192 Confirm", "- Distinct Behaviors: Invoke (entry point), Validate (check input), Authorize (check funds/fraud), Process (execute transaction), Confirm (complete and notify)", "- These become STORIES in the journey", "", "Determine TYPICAL EXECUTION ORDER from code flow:", "  - Trace through acceptance tests: what happens first, second, third?", "  - Trace through CLI commands: what's the flow?", "  - Trace through MCP tool calls: what's the sequence?", "  - Look at error handling: what are alternative paths?", "", "Example Execution Order Analysis (Story-IO Domain):", "- CLI: 'render-outline --story-graph file.json --output file.drawio'", "- Code Flow: Parse args \u2192 Load story graph \u2192 Create diagram \u2192 Render outline \u2192 Save file", "- Typical Order: 1. Parse arguments, 2. Load story graph, 3. Render outline, 4. Save file", "- Stories: 'Parses Command Arguments' \u2192 'Loads StoryGraph from JSON' \u2192 'Renders Outline to DrawIO' \u2192 'Saves DrawIO File'", "", "Example Execution Order Analysis (Payment Domain):", "- CLI: 'process-payment --payment-id 123 --amount 50.00'", "- Code Flow: Parse args \u2192 Validate payment \u2192 Authorize payment \u2192 Process payment \u2192 Confirm payment", "- Typical Order: 1. User invokes process payment, 2. System validates payment details, 3. System authorizes payment, 4. System processes payment, 5. System confirms payment", "- Stories: 'User invokes process payment command' \u2192 'System validates payment details' \u2192 'System authorizes payment with payment processor' \u2192 'System processes payment transaction' \u2192 'System confirms payment and sends notification'", "", "Create STORY JOURNEY from execution order:", "  - Start with entry point (CLI invocation, UI click, MCP tool call)", "  - Follow the code flow through operations", "  - Include error handling and alternative paths", "  - End with completion (save, return result, display)", "", "Example Story Journey (Story-IO Domain):", "- Entry: 'User invokes render-outline command from CLI'", "- Flow: 'CLI parses arguments' \u2192 'CLI loads story graph' \u2192 'CLI invokes render' \u2192 'System renders outline' \u2192 'System saves file'", "- Error: 'If file not found, CLI displays error message'", "- Completion: 'CLI returns success message'", "", "Example Story Journey (Payment Domain):", "- Entry: 'User invokes process payment command' (WHEN: user wants to charge customer, WHY: to complete purchase, OUTCOME: CLI/MCP/API receives request)", "- Flow: 'System validates payment details' (WHEN: after request received, WHY: to ensure payment can be processed, OUTCOME: details validated) \u2192 'System authorizes payment' (WHEN: after validation, WHY: to check funds/fraud, OUTCOME: payment authorized) \u2192 'System processes payment' (WHEN: after authorization, WHY: to execute transaction, OUTCOME: payment processed) \u2192 'System confirms payment' (WHEN: after processing, WHY: to notify user, OUTCOME: payment confirmed)", "- Error: 'If validation fails, System displays validation error' (WHEN: validation fails, WHY: to inform user, OUTCOME: error shown, process stops)", "- Completion: 'System returns transaction ID' (WHEN: after confirmation, WHY: to provide reference, OUTCOME: transaction ID returned)", "", "**DON'T:** Don't create stories from code structure or method calls", "Don't create stories from every method call in code", "Don't create stories from internal function calls", "Don't create stories from data structure operations", "", "Wrong Story Creation:", "- From method: 'StoryIODiagram.__init__()' (internal initialization)", "- From function: 'parse_json()' (internal parsing)", "- From operation: 'dict.get()' (data access, not behavior)", "- From method: 'PaymentProcessor.charge_card()' (internal implementation)", "", "Focus on USER/SYSTEM VISIBLE BEHAVIORS, not internal implementation", "", "**DO:** Lay out story journey from end-to-end flow", "Create STORY JOURNEY that shows complete end-to-end flow:", "  - Start: How does user/system initiate? (CLI command, UI click, API call)", "  - Middle: What happens step by step? (parse, load, process, transform)", "  - End: How does it complete? (save, return, display, notify)", "", "Include CONTEXT for each story:", "  - WHEN does it happen? (trigger, condition, user action)", "  - WHY does it happen? (purpose, user need, system requirement)", "  - WHAT is the outcome? (result, state change, user experience)", "  - ACTOR: Who performs the action? (User, System, CLI, MCP, API, etc.)", "", "Example Complete Story Journey (Story-IO Domain):", "(E) Render StoryGraph", "  and (E) Render Outline", "    and (S) User --> invokes render-outline command from CLI", "    and (S) CLI --> parses command arguments", "    and (S) CLI --> loads story graph from JSON file", "    and (S) System --> renders outline to DrawIO format", "    and (S) System --> saves DrawIO file", "", "Example Complete Story Journey (Payment Domain):", "(E) Process Payment", "  and (E) Process Card Payment", "    and (S) User --> invokes process payment command", "    and (S) System --> validates payment details", "    and (S) System --> authorizes payment with payment processor", "    and (S) System --> processes payment transaction", "    and (S) System --> confirms payment and sends notification", "", "Include ERROR HANDLING and ALTERNATIVE PATHS:", "  - What happens when file not found?", "  - What happens when parsing fails?", "  - What happens when validation fails?", "  - What happens when authorization fails?", "", "Example Error Handling (Story-IO Domain):", "  and (S) CLI --> displays error message if story graph file not found", "", "Example Error Handling (Payment Domain):", "  and (S) System --> displays validation error if validation fails", "  and (S) System --> displays authorization declined message if authorization fails", "", "**DON'T:** Don't create isolated stories without journey context", "Don't create stories that are just operations without context", "Don't create stories that don't connect to a journey", "Don't create stories without when/why/outcome/actor", "", "Wrong Story Creation:", "- (S) System --> loads StoryGraph (no context: when? why? what happens next?)", "- (S) System --> parses JSON (no context: when? why? what's the outcome?)", "- (S) System --> saves file (no context: when? why? what triggers this?)", "- (S) System --> processes payment (no context: when? why? what's the outcome?)", "", "Every story must be part of a JOURNEY with CONTEXT (when/why/outcome/actor)", "", "", "**Rule:** focus_real_actions_on_domain_concepts.json", "When shaping stories, stories must describe REAL ACTIONS that users or other actors (even system or technical actors) can perform, not capabilities or structural descriptions. Organize by lifecycle flow (Load, Read, Edit, Render, Synchronize, Search, Save). CRITICAL: Actor names must NOT appear in Epic/Sub-Epic/Story names - names are Verb-Noun only.", "", "**DO:** Use real actions - actor separate from name", "Stories describe actions: Load, Read, Add, Remove, Render, Search, Save", "Organize by lifecycle: Load \u2192 Read \u2192 Edit \u2192 Render \u2192 Synchronize \u2192 Search \u2192 Save", "Use Verb-Noun format for names: '[Verb] [Noun]' - NO ACTOR in name", "Focus on what users/code CAN DO, not what things ARE", "", "NAMING RULE - Actor NOT in Name:", "- Epic name: 'Places Order' (NOT 'Customer Places Order')", "- Sub-Epic name: 'Validates Payment' (NOT 'PaymentValidator Validates Payment')", "- Story name: 'Processes Order Items' (NOT 'OrderProcessor Processes Order Items')", "- Actor is documented separately, not in the name itself", "", "ACTORS for User/System Stories (normal stories):", "- Use human/system actors: User, Developer, System, Customer, Admin", "- Actor is implicit or documented separately from name", "- Examples: Epic 'Places Order' has actor: Customer", "- Examples: Sub-Epic 'Validates Payment' has actor: System", "", "ACTORS for Technical Stories (deep internal class-level interactions):", "- Domain concepts CAN be actors: OrderProcessor, PaymentValidator, InventoryManager, Cart, Product", "- Actor is documented separately, NOT in name", "- Examples: Epic 'Loads Order Data' has actor: OrderProcessor (technical)", "- Examples: Sub-Epic 'Updates Inventory' has actor: InventoryManager (technical)", "- Examples: Story 'Calculates Total' has actor: Cart (technical)", "- This is acceptable when documenting class-to-class interactions internally", "", "**DON'T:** Avoid capabilities, structural descriptions, passive states, and actors in names", "Don't use capability nouns or structural descriptions", "Don't describe what things ARE or CONTAIN", "Don't use passive states or properties as stories", "CRITICAL: Don't put actor in Epic/Sub-Epic/Story names", "", "Wrong Examples (capabilities/structure):", "- 'PaymentValidator Contains Validation Logic' (capability, not action)", "- 'OrderProcessor Tracks Order Count' (passive state, not action)", "- 'Cart Hierarchy Foundation' (structural description)", "- 'Domain Components Implementation' (capability)", "- 'Product Represents Item' (structural description)", "", "Wrong Examples (actor in name):", "- Epic: 'Customer Places Order' (actor in name - WRONG)", "- Sub-Epic: 'OrderProcessor Validates Payment' (actor in name - WRONG)", "- Sub-Epic: 'Cart Adds Product' (actor in name - WRONG)", "- Story: 'InventoryManager Updates Stock' (actor in name - WRONG)", "", "Correct Examples (actor NOT in name):", "- Epic: 'Places Order' (actor: Customer, documented separately)", "- Sub-Epic: 'Validates Payment' (actor: PaymentValidator, documented separately)", "- Sub-Epic: 'Adds Product' (actor: Cart, documented separately)", "- Story: 'Updates Stock' (actor: InventoryManager, documented separately)", "", "These are not actions users/code can perform - they describe structure or capabilities", "Instead ask: What can users/code DO with this domain concept?", "- Instead of 'Contains Logic' \u2192 'Generates XML' or 'Renders Diagram'", "- Instead of 'Tracks Count' \u2192 'Reads Count' or 'Updates Count'", "- Instead of 'Represents X' \u2192 'Creates X' or 'Loads X'", "", "", "**Rule:** focus_user_and_system_activities.json", "Focus story maps on both user AND system activities, not tasks. Stories should outline user and system behavior patterns.", "", "**DO:** Include both user and system activities in story descriptions", "User submits order, System validates payment", "Customer views products, System displays inventory", "Use user activity patterns: User submits, Customer places", "Use system activity patterns: System validates, System sends", "Focus stories on user interactions and how the system behaves as observed by users", "Example: Customer places order with payment details", "", "ACTOR SELECTION (documented separately, NOT in name):", "- For user/system stories: Actors are User, System, Developer, Customer, Admin (human/system actors)", "- For technical stories (deep internal class-level): Domain concepts can be actors (StoryIODiagram, DrawIORenderer, DrawIOSynchronizer, User, Increment, Component)", "- Technical stories document class-to-class interactions where domain concepts act as actors", "", "CRITICAL NAMING RULE:", "- Actor must NOT appear in Epic/Sub-Epic/Story name", "- Name format: '[Verb] [Noun]' only", "- Examples: 'Loads StoryGraph' (actor: StoryIODiagram, documented separately)", "- Examples: 'Adds Sub-Epic' (actor: Epic, documented separately)", "- Examples: 'Changes Parent' (actor: Component, documented separately)", "", "**DON'T:** Avoid task-oriented language that describes implementation", "Avoid task-oriented language that describes implementation", "Don't use task language for building or setting up", "Don't focus only on user activities (ignore system activities)", "Don't focus only on tasks (instead of activities)", "Don't use development task language: implement, create, refactor, optimize, fix, build, set up", "Don't use technical implementation details: query database, call API, update table", "", "Wrong Examples:", "- Only user activities: User submits order, User views products (missing system activities)", "- Only tasks: Implement order submission, Create payment validation (not activities)", "- Implement order submission, Create payment validation", "- Build product listing page, Set up inventory display", "", "", "**Rule:** identify_system_stories.json", "System stories capture system-to-system interactions that are not user-facing. They represent internal system behavior that crosses system boundaries (e.g., microservice to microservice, component to component). System stories should be identified and marked with story_type: 'system'.", "", "**DO:**", "- Identify system-to-system interactions: Storage Microservice validates payload from Local Mgmt System", "API Gateway routes request to Authentication Service", "Message Queue delivers event to Notification Service", "- Mark system stories with story_type: 'system': Story: 'Validate Payload' with story_type: 'system'", "Story: 'Route Request' with story_type: 'system'", "Story: 'Deliver Event' with story_type: 'system'", "- Use system stories for internal system behavior: System stories represent behavior that happens between systems/components", "System stories are not directly visible to end users", "System stories enable user-facing stories to function", "", "**DON'T:**", "- Don't mark user-facing stories as system stories: User clicks button \u2192 NOT a system story", "User views dashboard \u2192 NOT a system story", "User submits form \u2192 NOT a system story", "- Don't confuse system stories with technical stories: System stories = system-to-system behavior (dark blue in DrawIO)", "Technical stories = implementation tasks (black/white in DrawIO, normally avoided)", "", "", "**Rule:** maximize_integration_of_related_concepts.json", "When shaping stories, maximize integration of related concepts", "", "**DO:** Group concepts that the user sees as one capability", "Group concepts that the user sees as one capability", "Nest implementation details under the sub-epic they serve", "Keep related data and operations together", "Eliminate artificial boundaries based on code organization", "", "**DON'T:** Don't separate related concepts", "Don't separate related concepts into different major sections", "Wrong: Split based on code layers (data, business, presentation)", "Don't duplicate related concepts across multiple sections", "Wrong: Create gaps that break the user's mental model", "", "", "**Rule:** place_domain_concepts_by_relevance.json", "When shaping stories, place domain concepts locally or globally based on relevance to one or multiple sub_epics", "", "**DO:** Place domain concepts at the most specific level, favoring local placement", "Favor local placement: Place domain_concepts at the sub_epic level when they are relevant to only that sub_epic", "Think about the core: Consider core domain concepts that span multiple sub_epics - these should be placed at the parent epic/sub_epic level", "Elevate when shared: If a domain concept is used by multiple child sub_epics, elevate it to the parent level", "Start local, elevate if needed: Begin with local placement, but elevate if the concept is referenced by multiple sub_epics", "", "Correct Examples (Local Placement):", "- Sub-Epic 'Validates Payment' has domain_concept: 'Payment' (only used in this sub-epic)", "- Sub-Epic 'Processes Order' has domain_concept: 'Order' (only used in this sub-epic)", "- Sub-Epic 'Updates Inventory' has domain_concept: 'InventoryItem' (only used in this sub-epic)", "", "Correct Examples (Global Placement):", "- Epic 'Process Payment' has domain_concept: 'Payment' (used by multiple sub-epics: Validate Payment, Authorize Payment, Process Transaction)", "- Epic 'Manage Orders' has domain_concept: 'Order' (used by multiple sub-epics: Create Order, Update Order, Cancel Order)", "- Sub-Epic 'Order Management' has domain_concept: 'Customer' (used by multiple child sub-epics: Create Customer Order, Update Customer Order)", "", "**DON'T:** Don't place domain concepts at wrong levels or duplicate them unnecessarily", "Don't place domain concepts at epic level when they're only used in one sub-epic", "Wrong: Epic 'Payment System' has domain_concept: 'PaymentValidator' (only used in 'Validates Payment' sub-epic - should be local)", "Don't duplicate domain concepts at multiple levels", "Wrong: Both Epic and Sub-Epic have 'Payment' concept when it's only used in one sub-epic", "Don't place core domain concepts too locally if they're used across multiple epics", "Wrong: Core concept 'User' placed only in one sub-epic when it's used across multiple epics", "Don't ignore shared usage - if multiple sub-epics reference a concept, elevate it", "Wrong: 'Order' concept placed in each sub-epic separately when all sub-epics use it (should be at parent level)", "", "", "**Rule:** prevent_generic_capabilities.json", "CRITICAL: Stories must describe specific actions with actors, not generic capabilities. Reject stories that describe what system IS (capabilities) vs what system DOES (behaviors).", "", "**DO:** Use specific actions with actors and outcomes", "Stories must have specific actors performing specific actions", "Stories must describe what system DOES (behaviors), not what system IS (capabilities)", "Stories must have specific outcomes, not generic descriptions", "", "Correct Examples (specific behaviors with actors):", "- 'User invokes MCP tool and system routes to StoryIO handler' (specific: user, MCP tool, routing action)", "- 'Developer adds sub-epic Render Exploration to epic Render StoryGraph' (specific: developer, sub-epic name, epic name)", "- 'System loads story graph from JSON file when user requests render' (specific: system, load action, trigger)", "- 'CLI determines workspace root from current directory' (specific: CLI, determine action, source)", "", "Actor Requirements:", "- Every story must have an actor (User, System, Developer, CLI, StoryIODiagram, etc.)", "- Actor must be documented separately (not in name)", "- Actor must be specific (not generic 'Component' or 'System')", "- Actor must perform the action (not just be present)", "", "**DON'T:** Don't use generic capabilities or passive descriptions", "Don't describe what system IS (capabilities)", "Don't use generic action descriptions without actors", "Don't use passive states or properties as stories", "", "Wrong Examples (generic capabilities):", "- 'Exposes Tools' (capability - what tools? when? to whom? what happens?)", "- 'Provides Server Interface' (capability - what interface? when? why?)", "- 'Contains Validation Logic' (capability - not an action)", "- 'Tracks Order Count' (passive state - not an action)", "", "Capability Indicators (REJECT):", "- Describes what system IS: 'Exposes', 'Provides', 'Contains', 'Represents'", "- No specific actor or action", "- No specific outcome or trigger", "- Generic description without context", "", "Instead, ask:", "- Who performs this action? (actor)", "- When does this happen? (trigger/context)", "- What specific outcome occurs? (result)", "- Why does this happen? (purpose in journey)", "", "", "**Rule:** prevent_implementation_details_as_stories.json", "CRITICAL: Implementation operations (serialize, convert, calculate, generate XML, apply formatting) must be steps within stories, not stories themselves. Stories must focus on user/system outcomes, not technical mechanisms.", "", "**DO:** Keep implementation details as steps within stories", "Implementation operations must be steps within stories", "Stories must focus on user/system outcomes, not technical mechanisms", "Stories must describe what user/system experiences, not how it's implemented", "", "Correct Examples (outcomes, not mechanisms):", "- Story: 'User saves story graph and system writes JSON file' \u2192 Steps: 'System converts diagram to story graph format', 'System serializes components to JSON', 'System writes file'", "- Story: 'User requests render and system generates DrawIO diagram' \u2192 Steps: 'System generates DrawIO XML', 'System calculates component positions', 'System applies styles', 'System saves file'", "- Story: 'User edits epic and system updates diagram' \u2192 Steps: 'System updates epic data', 'System recalculates layout', 'System refreshes diagram'", "", "Story vs Step Distinction:", "- Story = User/system outcome (what they experience)", "- Step = Implementation detail (how it's done)", "- Story = Independently valuable (can be tested/delivered)", "- Step = Part of story (not independently valuable)", "", "**DON'T:** Don't make implementation operations into stories", "Don't create stories for implementation operations", "Don't expose technical mechanisms as user stories", "Don't break implementation steps into separate stories", "", "Wrong Examples (implementation details as stories):", "- 'Convert Diagram to StoryGraph Format' (implementation - should be step in 'Save StoryGraph' story)", "- 'Serialize Components to JSON' (implementation - should be step in 'Save StoryGraph' story)", "- 'Generate DrawIO XML from StoryGraph' (implementation - should be step in 'Render Outline' story)", "- 'Calculate Component Positions' (implementation - should be step in 'Render Outline' story)", "- 'Apply Component Styles' (implementation - should be step in 'Render Outline' story)", "- 'Save DrawIO XML to File' (implementation - should be step in 'Render Outline' story)", "", "Implementation Operation Indicators (REJECT as stories):", "- Serialize, deserialize, convert, transform, format", "- Calculate, compute, generate, create (technical artifacts)", "- Apply, set, configure (technical settings)", "- Save, write, store (without user context)", "", "These are implementation mechanisms, not user/system behaviors", "They should be steps within stories that describe outcomes", "", "Instead, ask:", "- What does the user/system experience? (story)", "- How is it implemented? (step within story)", "- What's the outcome? (story)", "- What's the mechanism? (step)", "", "", "**Rule:** refine_scope_to_functional_accomplishment.json", "Refine Scope to Functional Accomplishment", "", "**DO:** Focus on functional outcomes, not mechanisms", "Focus on functional outcomes, not mechanisms", "Frame domains by what they accomplish for users", "Ask about user enablement: What does this enable the user to do or understand?", "State the transformation or capability provided", "Be specific about the functional benefit", "", "**DON'T:** Don't frame domains by their technical implementation", "Don't frame domains by their technical implementation", "Wrong: Focus on 'how' before 'what'", "Don't use generic system capabilities as domain names", "Wrong: Describe mechanisms instead of outcomes", "", "", "**Rule:** size_stories_3_to_12_days.json", "Size stories to fall within 3-12 day effort range for effective planning and frequent delivery.", "", "**DO:** Create stories that represent complete flows within the effort range", "Create stories that represent complete flows within the effort range", "Example: Customer places order (complete flow, 3-5 days)", "Break/group stories so that most fall into a 3-12 day effort range", "Enable frequent feedback by decomposing the work into smaller items", "", "**DON'T:** Avoid stories that are too large or too small", "Avoid stories that are too large and span multiple weeks", "Don't arbitrarily decompose stories to a functional level, regardless of size", "", "Wrong Examples:", "- Order management system (too large, 20+ days)", "- Create stories that are too small without considering value", "", "", "**Rule:** story_map_code_approach.json", "Quick checklist for extracting story maps from code. Follow this process step-by-step.", "", "", "**Rule:** use_active_behavioral_language.json", "When shaping stories, use active behavioral language with action verbs. Describe behaviors, not tasks or capabilities.", "", "**DO:** Use action verbs to describe what happens", "Use action verbs to describe what happens", "Example: User submits order, System validates payment", "Favor active behavioral language over functional/capability breakup", "Use story maps to outline user and system behavior (NOT tasks)", "Use action verbs: submits, views, validates, sends, displays", "Describe behaviors: [Actor] [action] [object] - but actor NOT in name", "Use active behavior language: Place order (active behavior), Validate payment (active behavior)", "", "CRITICAL NAMING RULE - Actor NOT in Name:", "- Epic/Sub-Epic/Story names must be Verb-Noun format: '[Verb] [Noun]'", "- Actor is documented separately, NOT included in the name", "- Verb can be in various forms: imperative ('Add'), infinitive ('To Add'), third person ('Adds') - all are acceptable", "- Noun can be singular or plural based on context - DO NOT pluralize unnecessarily", "- Prepositional phrases and context are part of the noun phrase and should be preserved (e.g., 'Add Minion To Mob' is correct)", "- Examples: Epic 'Places Order' (actor: Customer, documented separately)", "- Examples: Sub-Epic 'Validates Payment' (actor: PaymentValidator, documented separately)", "- Examples: Story 'Updates Stock' (actor: InventoryManager, documented separately)", "- Examples: Story 'Add Minion To Mob' (verb-noun with context preserved - CORRECT)", "- Examples: Story 'Group Minions' (verb-noun, plural noun is correct for context - CORRECT)", "", "ACTOR SELECTION (documented separately, not in name):", "- For user/system stories: Use human/system actors (User, System, Developer, Customer)", "- For technical stories (deep internal): Domain concepts can be actors (OrderProcessor, PaymentValidator, InventoryManager, Cart, Product)", "- Actor is implicit or explicitly documented, but NOT in the name string", "", "**DON'T:** Avoid capability nouns and task language", "Avoid capability nouns that describe functions rather than behaviors", "Don't use functional or capability-based language instead of behavioral language", "Don't use capability nouns: Management, Processing, Administration", "Don't use task verbs: implement, create, build, set up", "Don't use task language", "", "Wrong Examples:", "- Order Management, Payment Processing (capability nouns)", "- Focus on tasks instead of behaviors", "- Order Management (capability), Implement order placement (task)", "", "Wrong Examples (actor in name):", "- Epic: 'Customer Places Order' (actor in name - WRONG)", "- Sub-Epic: 'OrderProcessor Validates Payment' (actor in name - WRONG)", "- Sub-Epic: 'Cart Adds Product' (actor in name - WRONG)", "- Story: 'InventoryManager Updates Stock' (actor in name - WRONG)", "", "Correct: Name is Verb-Noun only, actor documented separately", "", "", "**Rule:** use_outcome_verbs_not_communication_verbs.json", "Use Outcome Verbs, Not Communication Verbs", "", "**DO:** Use verbs that describe artifacts/outcomes", "Use verbs that describe artifacts/outcomes", "Examples: Animation, Feedback, Indicators, Configuration", "Name concepts by what they ARE or CREATE", "Examples: Power Activation Animation, Combat Outcome Feedback", "Focus on tangible results", "Examples: Hit Indicators, Save Result Feedback", "", "**DON'T:** Don't use generic communication verbs", "Don't use generic communication verbs", "Examples: showing, displaying, visualizing, presenting", "Don't use vague enablement verbs", "Examples: providing, enabling, allowing", "Don't name concepts by their mechanism", "Wrong Examples: Visualizing Power Activation, Showing Combat Results", "", "", "Review each validation rule carefully. Your generated content must pass all validations on the first attempt", "", "Generate the knowledge graph (structured JSON content) according to the schema and rules", "", "**OUTPUT:**a structured JSON knowledge graph that will be saved to the workspace area", "", "** UPDATING vs CREATING:**", "- Check if knowledge graph already exists in workspace area", "- If knowledge graph EXISTS, you are UPDATING it (not creating from scratch)", "- When updating, preserve existing content and add/modify only what's needed based on current behavior", "- If knowledge graph does NOT exist, create new one following the schema", "", "**AUTOMATIC VALIDATION AND FIXES: After generating the knowledge graph, automatically run the validate_rules action without confirming or waiting. Print ALL violations found (including rule name, violation message, severity, and location for each violation). Then review each violation against the specific rules identified by the scanner, and make necessary edits to fix all violations. Continue iterating until all violations are resolved before proceeding to render_output.**", "", "**AUTOMATIC PROGRESSION: Once all fixes are completed, automatically proceed to render_output action without stopping or waiting for user confirmation. These two actions should execute sequentially as a single workflow step.**", ""], "behavior_instructions": ["Hey, going to be going away for a little while to create the knowledge graph. Go get a cup of coffee \ud83d\ude0a", "", "**BUILD KNOWLEDGE GRAPH - STORY GRAPH AND DOMAIN MODEL CREATION:**", "", "Build the initial story graph structure AND domain model from gathered context and planning decisions. Capture domain concepts alongside story structure.", "", "**Configuration:**", "- Reference: build_story_graph_outline.json", "- Template: story-graph-outline.json", "", "**CRITICAL - TEMPLATE STRUCTURE COMPLIANCE:**", "1. The build_knowledge action has injected 'knowledge_graph_template' into your instructions", "2. This template shows the EXACT JSON structure your output MUST match", "3. **DO NOT invent your own schema** - examine the template and replicate its structure", "4. The template includes:", "   - Root level keys (e.g., 'epics' array only, NOT 'capability', 'increments', 'features')", "   - Required fields at each level (e.g., 'sequential_order', 'estimated_stories', 'domain_concepts')", "   - Nested structure (epics \u2192 sub_epics \u2192 story_groups \u2192 stories)", "   - Field types and formats (e.g., 'connector': null vs 'connector': 'and')", "5. Look at the '_explanation' section in the template for structural rules", "6. Your output must be structurally identical - only the values (names, responsibilities, etc.) differ", "", "**CRITICAL: Story Graph Structure - Main Epics Section is Single Source of Truth**", "", "**Two-Section Architecture (if increments are added later):**", "", "1. **Main 'epics' Section (Single Source of Truth)**", "   - Contains ALL story details: name, users, sequential_order, story_type, connector, story_groups, etc.", "   - This is the PRIMARY location - all story details must be here", "   - Used as the source for all views (outline, increments, discovery, exploration)", "", "2. **'increments' Section (Minimal Reference View - if present)**", "   - This is a MINIMAL REFERENCE VIEW - just enough to know which stories belong to which increment", "   - Stories in increments should ONLY contain: name, users (optional), sequential_order", "   - NO story details (no story_type, no connector, no story_groups, no domain_concepts, etc.)", "   - Increments are a COPY of the outline view at the story level - just for mapping stories to increments", "   - All story details come from the main epics section", "", "**Domain Model Creation (Integrated with Story Graph):**", "1. Domain concepts are integrated directly into the story graph structure", "2. Place domain_concepts at epic and sub_epic levels based on relevance", "3. Apply domain shaping rules (context: 'when shaping the domain')", "4. **DO NOT create separate domain_graph.json or domain model files**", "5. All domain modeling is captured within story-graph.json via domain_concepts arrays", "", "**Domain Concept Placement Logic:**", "- **Local placement (preferred)**: Place domain_concepts at the sub_epic level when they are relevant to only that sub_epic", "- **Global placement**: Elevate domain_concepts to parent epic/sub_epic level when they are relevant to multiple child sub_epics", "- **Favor local**: Start with local placement, but elevate if the concept is used by multiple sub_epics", "**Process:**", "1. Use clarification data from docs/stories/clarification.json", "2. Use planning decisions from docs/stories/planning.json", "3. **EXAMINE the knowledge_graph_template structure injected into your instructions**", "4. Build story graph matching that exact structure (root keys, field names, nesting)", "5. Identify domain concepts from clarification and planning data", "6. Map domain concepts to epics/sub_epics based on relevance (see placement logic above)", "7. Populate domain_concepts arrays in story-graph.json with proper placement", "8. Create story-graph.json in project area", "7. Populate domain_concepts arrays in story-graph.json with proper placement", "8. Create story-graph.json and domain model outputs in project area (same location)", "", "**Output:**", "- File: {project_area}/story-graph.json (JSON story graph with epics, sub_epics, story_groups, stories, and domain_concepts integrated)", "", "**Next Step:** Proceed to render step after story graph is created."], "knowledge_graph_template": {"_explanation": {"hierarchical": "sub_epics can contain: nested sub_epics or story_groups. sequential_order is always an integer (1, 2, 3, 4) - unique within parent, no decimals.", "connector": "Story groups: 'and' or 'or' (null for first group). Stories within groups: 'and' or 'or' (null for first story). Epics and sub_epics don't have connectors.", "domain_placement": "domain_concepts: 'local' if relevant to single sub_epic, 'global' if relevant to multiple sub_epics. Place at most specific level (local preferred), but elevate to parent if used by multiple children."}, "epics": [{"name": "", "sequential_order": 1, "estimated_stories": null, "domain_concepts": [{"name": "", "responsibilities": [{"name": "", "collaborators": []}]}], "sub_epics": [{"name": "", "sequential_order": 1, "estimated_stories": null, "domain_concepts": [{"name": "", "responsibilities": [{"name": "", "collaborators": []}]}], "sub_epics": [], "story_groups": [{"type": "and", "connector": null, "sequential_order": 1, "stories": [{"name": "", "sequential_order": 1, "connector": null, "users": [], "story_type": "user"}, {"name": "", "sequential_order": 2, "connector": "and", "users": [], "story_type": "user"}]}, {"type": "and", "connector": "or", "sequential_order": 2, "stories": [{"name": "", "sequential_order": 1, "connector": null, "users": [], "story_type": "user"}, {"name": "", "sequential_order": 2, "connector": "and", "users": [], "story_type": "user"}, {"name": "", "sequential_order": 3, "connector": "and", "users": [], "story_type": "user"}]}, {"type": "or", "connector": "or", "sequential_order": 3, "stories": [{"name": "", "sequential_order": 1, "connector": null, "users": [], "story_type": "user"}]}]}], "stories": []}]}, "knowledge_graph_config": {"name": "build_story_graph_outline", "path": "docs/stories/", "template": "story-graph-outline.json", "output": "story-graph.json"}, "template_path": "C:\\dev\\augmented-teams\\agile_bot\\bots\\story_bot\\behaviors\\1_shape\\2_content\\1_knowledge_graph\\story-graph-outline.json", "config_path": "C:\\dev\\augmented-teams\\agile_bot\\bots\\story_bot\\behaviors\\1_shape\\2_content\\1_knowledge_graph\\build_story_graph_outline.json", "schema": "**Schema Rules:**\n- **Hierarchical**: sub_epics can contain: nested sub_epics or story_groups. sequential_order is always an integer (1, 2, 3, 4) - unique within parent, no decimals.\n- **Connector**: Story groups: 'and' or 'or' (null for first group). Stories within groups: 'and' or 'or' (null for first story). Epics and sub_epics don't have connectors.\n- **Domain Placement**: domain_concepts: 'local' if relevant to single sub_epic, 'global' if relevant to multiple sub_epics. Place at most specific level (local preferred), but elevate to parent if used by multiple children.\n\n**Template Structure (JSON Schema):**\n```json\n{\n  \"_explanation\": {\n    \"hierarchical\": \"sub_epics can contain: nested sub_epics or story_groups. sequential_order is always an integer (1, 2, 3, 4) - unique within parent, no decimals.\",\n    \"connector\": \"Story groups: 'and' or 'or' (null for first group). Stories within groups: 'and' or 'or' (null for first story). Epics and sub_epics don't have connectors.\",\n    \"domain_placement\": \"domain_concepts: 'local' if relevant to single sub_epic, 'global' if relevant to multiple sub_epics. Place at most specific level (local preferred), but elevate to parent if used by multiple children.\"\n  },\n  \"epics\": [\n    {\n      \"name\": \"\",\n      \"sequential_order\": 1,\n      \"estimated_stories\": null,\n      \"domain_concepts\": [\n        {\n          \"name\": \"\",\n          \"responsibilities\": [\n            {\n              \"name\": \"\",\n              \"collaborators\": []\n            }\n          ]\n        }\n      ],\n      \"sub_epics\": [\n        {\n          \"name\": \"\",\n          \"sequential_order\": 1,\n          \"estimated_stories\": null,\n          \"domain_concepts\": [\n            {\n              \"name\": \"\",\n              \"responsibilities\": [\n                {\n                  \"name\": \"\",\n                  \"collaborators\": []\n                }\n              ]\n            }\n          ],\n          \"sub_epics\": [],\n          \"story_groups\": [\n            {\n              \"type\": \"and\",\n              \"connector\": null,\n              \"sequential_order\": 1,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 2,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            },\n            {\n              \"type\": \"and\",\n              \"connector\": \"or\",\n              \"sequential_order\": 2,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 2,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 3,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            },\n            {\n              \"type\": \"or\",\n              \"connector\": \"or\",\n              \"sequential_order\": 3,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            }\n          ]\n        }\n      ],\n      \"stories\": []\n    }\n  ]\n}\n```", "rules": [{"rule_file": "rules\\maintain_verb_noun_consistency.json", "rule_content": {"description": "Maintain verb-noun consistency from epic to feature to story to scenario", "scanner": "agile_bot.bots.base_bot.src.scanners.verb_noun_scanner.VerbNounScanner", "do": {"examples": [{"description": "Use consistent verb-noun language across all levels", "content": ["Epic: Manage Orders \u2192 Feature: Place Order \u2192 Story: Customer places order \u2192 Scenario: When customer places order..."]}, {"description": "Maintain consistent terminology throughout hierarchy", "content": ["Epic, feature, story, and scenario all use same verb-noun pattern"]}, {"description": "Use verb-noun language in scenario sentences", "content": ["When user submits form, then system validates data"]}]}, "dont": {"examples": [{"description": "Don't switch formats between levels", "content": ["Epic: Order Management \u2192 Feature: Place Order (inconsistent format)"]}, {"description": "Don't mix verb-noun with other formats", "content": ["Epic uses verb-noun, but feature uses noun-only format"]}, {"description": "Don't use different terminology at different levels", "content": ["Epic says 'Orders', feature says 'Order Processing', story says 'Process Order'"]}]}}}, {"rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "rule_content": {"description": "When mapping stories, carefully distinguish between sequential spine (essential path) and optional paths, alternate routes, or additional functionality that is not strictly essential. Sequential stories form the mandatory flow; optional stories are alternatives, enhancements, or non-essential features.", "do": {"examples": [{"description": "Identify the essential spine first", "content": ["Start by identifying the minimal essential path that delivers core value", "The spine represents the mandatory sequence: Story1 AND Story2 AND Story3", "Spine stories get sequential_order numbers (1, 2, 3, etc.)", "Spine stories are required for the feature to deliver its core purpose", "Ask: 'What is the minimum path to deliver value?'"]}, {"description": "Mark optional paths clearly", "content": ["Optional stories branch from or enhance the spine but are not required", "Mark optional stories with 'optional: true' in the story structure", "Optional stories may have sequential_order if they're part of an alternative flow", "Optional stories represent: alternate routes, enhancements, nice-to-have features", "Ask: 'Can the feature deliver value without this story?'"]}, {"description": "Distinguish types of optional paths with concrete examples", "content": ["Alternate routes: User logs in with email (sequential_order: 2) OR User logs in with social media (sequential_order: 2.1, optional: true)", "Enhancements: User views dashboard (sequential_order: 3) AND User customizes dashboard (sequential_order: 3.1, optional: true)", "Additional functionality: User views dashboard (sequential_order: 3) AND User shares dashboard (sequential_order: 3.2, optional: true)", "Error handling: User enters invalid data (sequential_order: 4) AND System shows error message (sequential_order: 4.1, optional: true)"]}, {"description": "Correct mapping examples", "content": ["Spine: User creates account (sequential_order: 1) AND User logs in (sequential_order: 2) AND User views dashboard (sequential_order: 3)", "Optional alternate: User logs in with email (sequential_order: 2) OR User logs in with social media (sequential_order: 2, optional: true)", "Optional enhancement: User views dashboard (sequential_order: 3) AND User customizes dashboard (optional: true, priority: 1)", "Additional functionality: User views dashboard (sequential_order: 3) AND User shares dashboard (optional: true, priority: 2)"]}]}, "dont": {"examples": [{"description": "Don't mark everything as sequential", "content": ["Don't assign sequential_order to all stories when some are optional", "Don't treat alternate routes as part of the spine", "Don't include enhancements in the mandatory sequential flow", "Don't confuse 'nice to have' with 'must have'"]}, {"description": "Don't omit optional markers", "content": ["Don't leave optional stories unmarked - be explicit", "Don't assume all stories in a feature are mandatory", "Don't mix optional and mandatory without clear distinction", "Don't fail to identify the spine before adding optional paths"]}, {"description": "Wrong mapping examples", "content": ["Wrong: User creates account (1) AND User logs in with email (2) AND User logs in with social media (3) - social media should be optional", "Wrong: User views dashboard (1) AND User customizes dashboard (2) AND User shares dashboard (3) - customization and sharing should be optional", "Wrong: All stories marked mandatory when some are clearly alternatives or enhancements", "Wrong: No distinction between essential path and optional features"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.spine_optional_scanner.SpineOptionalScanner"}}, {"rule_file": "rules\\stories_developed_and_tested_in_days.json", "rule_content": {"description": "Write stories that can be developed and tested in a matter of days", "do": {"examples": [{"description": "Create stories sized for days, not weeks", "content": ["Story takes 3-5 days to develop and test completely"]}, {"description": "Break large work into smaller stories", "content": ["Large feature broken into multiple stories, each completable in days"]}, {"description": "Focus on delivering complete, testable functionality quickly", "content": ["Each story delivers a complete piece of functionality that can be tested"]}]}, "dont": {"examples": [{"description": "Don't create stories that span multiple weeks", "content": ["Story requires 3+ weeks to complete (too large)"]}, {"description": "Don't create stories that can't be tested independently", "content": ["Story requires multiple other stories before it can be tested"]}, {"description": "Don't create stories without clear boundaries", "content": ["Story is vague about scope and completion criteria"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.story_sizing_scanner.StorySizingScanner"}}, {"rule_file": "rules\\stories_follow_invest_principles.json", "rule_content": {"description": "Ensure stories follow INVEST principles (Independent, Negotiable, Valuable, Estimable, Small, Testable)", "do": {"examples": [{"description": "Independent - story can be developed independently", "content": ["Story doesn't depend on other stories being completed first"]}, {"description": "Negotiable - story details can be negotiated", "content": ["Story allows for discussion and refinement of requirements"]}, {"description": "Valuable - story delivers value to user or business", "content": ["Story provides measurable value when completed"]}, {"description": "Estimable - story can be estimated", "content": ["Story is clear enough to estimate effort"]}, {"description": "Small - story can be completed in short time", "content": ["Story can be developed and tested in a matter of days"]}, {"description": "Testable - story has clear acceptance criteria", "content": ["Story has testable outcomes that can be verified"]}]}, "dont": {"examples": [{"description": "Don't create stories that depend on multiple other stories", "content": ["Story requires 5 other stories to be completed first (not independent)"]}, {"description": "Don't create stories that are too large", "content": ["Story spans multiple weeks and includes multiple features (not small)"]}, {"description": "Don't create stories without clear value", "content": ["Story doesn't provide measurable value to users or business"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.invest_principles_scanner.InvestPrinciplesScanner"}}, {"rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "rule_content": {"description": "CRITICAL: Story names MUST follow Verb-Noun format (e.g., 'Move To Mob Leaders Turn', 'Determines Target from Strategy', 'Initiate Mob Attack'), and include italicized description showing component interactions (e.g., '*Combat Tracker moves to any mob member's turn, auto moves to mob leader's turn*'). The story name should be concise and action-oriented, while the description shows the component-to-component interactions.", "scanner": "agile_bot.bots.base_bot.src.scanners.verb_noun_scanner.VerbNounScanner", "do": {"examples": [{"description": "Use concise Verb-Noun format for story names", "content": ["Move To Mob Leaders Turn, Determines Target from Strategy, Initiate Mob Attack"]}, {"description": "Include italicized description showing component interactions", "content": ["*Combat Tracker moves to any mob member's turn, auto moves to mob leader's turn*"]}, {"description": "Make story name concise and action-oriented", "content": ["Story name: 'Initiate Mob Attack' - concise and action-oriented"]}, {"description": "Show component interactions in description", "content": ["Story description shows how components interact with each other"]}]}, "dont": {"examples": [{"description": "Don't use long descriptive names without Verb-Noun format", "content": ["The system should allow users to move to mob leaders turn when..."]}, {"description": "Don't omit component interaction descriptions", "content": ["Story name without italicized description of component interactions"]}, {"description": "Don't use vague or non-action-oriented names", "content": ["Mob Leader Turn System, Attack Mechanism"]}]}}}, {"rule_file": "rules\\use_active_behavioral_language.json", "rule_content": {"description": "Use active behavioral language with action verbs. Describe behaviors, not tasks or capabilities.", "scanner": "agile_bot.bots.base_bot.src.scanners.active_language_scanner.ActiveLanguageScanner", "examples": [{"do": {"description": "Use action verbs to describe what happens", "content": ["Use action verbs to describe what happens", "Example: User submits order, System validates payment", "Favor active behavioral language over functional/capability breakup", "Use story maps to outline user and system behavior (NOT tasks)", "Use action verbs: submits, views, validates, sends, displays", "Describe behaviors: [Actor] [action] [object]", "Use active behavior language: Place order (active behavior), Validate payment (active behavior)"]}, "dont": {"description": "Avoid capability nouns and task language", "content": ["Avoid capability nouns that describe functions rather than behaviors", "Don't use functional or capability-based language instead of behavioral language", "Don't use capability nouns: Management, Processing, Administration", "Don't use task verbs: implement, create, build, set up", "Don't use task language", "", "Wrong Examples:", "- Order Management, Payment Processing (capability nouns)", "- Focus on tasks instead of behaviors", "- Order Management (capability), Implement order placement (task)"]}}]}}, {"rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "rule_content": {"description": "Use verb-noun format for all story elements (epic names, feature names, story titles)", "scanner": "agile_bot.bots.base_bot.src.scanners.verb_noun_scanner.VerbNounScanner", "do": {"examples": [{"description": "Use verb-noun format for epic names", "content": ["Manage Orders, Create Character, Process Payment"]}, {"description": "Use verb-noun format for feature names", "content": ["Place Order, Validate Payment, Save Character"]}, {"description": "Use verb-noun format for story titles", "content": ["Customer places order, System validates payment, User saves character"]}, {"description": "Use verb-noun format for scenario sentences", "content": ["User submits form, System processes request"]}]}, "dont": {"examples": [{"description": "Don't use noun-only or capability-based names", "content": ["Order Management, Payment Processing, Character System"]}, {"description": "Don't mix verb-noun with other formats", "content": ["Order Management and Place Order (mixed format)"]}, {"description": "Don't use gerund forms", "content": ["Ordering, Processing Payments, Creating Characters"]}]}}}, {"rule_file": "apply_7_plus_minus_2_hierarchy.json", "rule_content": {"description": "Apply 7\u00b12 rule for hierarchy: epics contain 4-9 sub-epics, sub-epics contain 4-9 stories. Split when exceeding, merge when below minimum.", "scanner": "agile_bot.bots.base_bot.src.scanners.story_sizing_scanner.StorySizingScanner", "examples": [{"do": {"description": "Maintain hierarchy within the 7\u00b12 cognitive limit range", "content": ["(E) Epic: Contains 4-9 sub-epics", "  - Split into additional Sub-Epics when > 9 sub-epics", "  - Merge with another epic when < 4 sub-epics", "(E) Sub-Epic: Contains 4-9 stories", "  - Split into 2 sub-epics when > 9 stories", "  - Merge with another sub-epic when < 4 stories", "(S) Story: Contains 2-9 acceptance criteria", "  - Split into 2 stories when > 9 AC", "  - Merge with another story when < 2 AC (single AC stories are too small)", "Apply 7\u00b12 cognitive limit principle (optimal range: 5-9, acceptable: 4-9)", "", "Example:", "(E) Manage Orders (10 sub-epics \u2192 SPLIT)", "  and (E) Manage Customer Orders (6 stories) \u2713", "  and (E) Manage Order Fulfillment (4 stories) \u2713", "", "(E) Place Order (12 stories \u2192 SPLIT)", "  and (S) Initiate Order (6 AC) \u2713", "  and (S) Complete Order (6 AC) \u2713", "", "(S) Validate Payment (11 AC \u2192 SPLIT)", "  and (AC) Check Payment Method (5 steps) \u2713", "  and (AC) Process Payment Transaction (6 steps) \u2713"]}, "dont": {"description": "Don't exceed thresholds or create items below minimum", "content": ["Create epics with > 9 sub-epics (use additional Sub-Epics instead)", "Create sub-epics with > 9 stories (split the sub-epic)", "Create stories with > 9 acceptance criteria (split the story)", "Create very small stories with < 2 AC (merge with related story)", "Ignore sizing thresholds during shaping, discovery, or exploration", "", "Wrong Examples:", "- (E) Epic with 15 sub-epics (too many, use additional Sub-Epics)", "- (E) Sub-Epic with 15 stories (too many, split sub-epic)", "- (S) Story with 15 AC (too many, split story)", "- (S) Story with 1 AC (too small, merge with related story)"]}}]}}, {"rule_file": "avoid_noun_redundancy.json", "rule_content": {"description": "When shaping stories, avoid noun redundancy in domain and concept names", "context": "when shaping stories", "examples": [{"do": {"description": "INTEGRATE first: nest related capabilities under one domain", "content": ["INTEGRATE first: nest related capabilities under one domain (90% of cases)", "Only then rename: use distinct nouns ONLY when integration doesn't make sense", "Test for uniqueness: Can you remove the qualifier and still know what it is?", "Use subject-area nouns when domains are genuinely separate", "Only when integration truly doesn't make sense"]}, "dont": {"description": "Don't rename without considering integration", "content": ["Don't rename without considering integration (this hides the real issue)", "Wrong: Repeat same noun with different prefixes: X Animation, Y Animation, Z Animation", "Don't use vague qualifiers to avoid integration", "Wrong: Animation 1, Animation System", "Don't create parallel domains that should be nested", "Wrong: Integrate related concepts rather than creating redundant structures"]}}], "scanner": "agile_bot.bots.base_bot.src.scanners.noun_redundancy_scanner.NounRedundancyScanner"}}, {"rule_file": "avoid_technical_implementation_language.json", "rule_content": {"description": "When shaping stories, avoid technical implementation language in user-facing story elements", "context": "when shaping stories", "do": {"examples": [{"description": "Use business language in user-facing elements", "content": ["Customer places order, User views profile, Admin approves request"]}, {"description": "Focus on what user experiences, not how it's implemented", "content": ["Story describes user experience, not technical implementation"]}]}, "dont": {"examples": [{"description": "Don't use development task language", "content": ["implement, create, refactor, optimize, fix, build, set up"]}, {"description": "Don't use technical implementation details", "content": ["query database, call API, update table"]}, {"description": "Don't focus on delivery or development tasks", "content": ["Implement order system, Create database schema, Set up API endpoints"]}, {"description": "Don't focus on system internals", "content": ["Optimize query performance, Refactor authentication code, Update configuration"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.technical_language_scanner.TechnicalLanguageScanner"}}, {"rule_file": "avoid_technical_stories.json", "rule_content": {"description": "Technical stories represent implementation tasks that do not describe system behavior. They are normally avoided in favor of user stories and system stories. When technical stories are necessary, they should be marked with story_type: 'technical' and kept minimal.", "do": {"examples": [{"description": "Prefer user stories and system stories over technical stories", "content": ["Instead of 'Set up database schema', use 'Store user data' (user story)", "Instead of 'Create API endpoint', use 'Expose user data via API' (system story)", "Instead of 'Write unit tests', use 'Verify story behavior' (user story)"]}, {"description": "When technical stories are necessary, mark with story_type: 'technical'", "content": ["Story: 'Migrate legacy data format' with story_type: 'technical'", "Story: 'Refactor authentication module' with story_type: 'technical'", "Story: 'Update dependency versions' with story_type: 'technical'"]}, {"description": "Keep technical stories minimal and focused", "content": ["Technical stories should be rare exceptions", "Technical stories should still follow Verb-Noun format", "Technical stories should be clearly justified"]}]}, "dont": {"examples": [{"description": "Don't create technical stories for normal development work", "content": ["Avoid: 'Write code', 'Create class', 'Add method'", "Avoid: 'Set up CI/CD', 'Configure database', 'Install package'", "These are implementation details, not stories"]}, {"description": "Don't use technical stories to describe system behavior", "content": ["Use system stories for system-to-system behavior", "Use user stories for user-facing behavior", "Technical stories are for unavoidable implementation tasks only"]}]}}}, {"rule_file": "balance_fine_grained_testable_stories.json", "rule_content": {"description": "Balance fine-grained stories with testable and valuable independent units. Stories must deliver value and be independently testable.", "examples": [{"do": {"description": "Create stories that are complete interactions with value", "content": ["Create stories that are complete interactions with value", "Example: Customer places order (complete interaction, testable, valuable)", "Balance fine-grained stories with testable/valuable stories", "Ensure stories are fine-grained enough to enable frequent feedback", "Ensure stories are grouped into meaningful chunks for high quality feedback", "Stories that deliver measurable value independently"]}, "dont": {"description": "Avoid stories that are too small or too large", "content": ["Avoid stories that are too small and have no value alone", "Don't create stories that are too fine-grained without being testable or valuable", "Don't create stories that are too large to be testable or deliverable quickly", "", "Wrong Examples:", "- Add order button (too fine-grained, no value alone)", "- Change button color (too fine-grained, no value)", "- Customer places order and views history and updates profile (too large, multiple flows)"]}}]}}, {"rule_file": "create_lightweight_precise_docs.json", "rule_content": {"description": "Create lightweight but precise documentation during shaping. Focus on structure and scope, not detailed specifications.", "examples": [{"do": {"description": "Create lightweight but precise documentation during shaping", "content": ["Balance fine-grained stories with testable/valuable stories", "Ensure stories are fine-grained enough to enable frequent feedback", "Ensure stories are grouped into meaningful chunks for high quality feedback", "Validate that a business expert can understand the language of most of the stories", "Focus the language on the business domain", "Create lightweight but precise documentation", "Focus on structure and scope, not detailed specifications", "Make the map easy to walk through (it tells a story)", "", "Example:", "(E) Manage Orders", "  and (E) Place Order", "    and (S) Customer --> places order", "(Shows hierarchy and structure, not detailed specs)"]}, "dont": {"description": "Don't over-elaborate or add detailed specifications during shaping", "content": ["Create stories that are too fine-grained without being testable or valuable", "Create stories that are too large to be testable or deliverable quickly", "Add detailed technical specifications during shaping phase", "Over-elaborate story mapping during shaping", "", "Wrong Example:", "(E) Manage Orders", "  and (E) Place Order", "    and (S) Customer --> places order", "  \u2192 Detailed API specs, database schema, UI mockups", "(Too much detail for shaping phase)"]}}]}}, {"rule_file": "discover_relationships_from_story_map.json", "rule_content": {"description": "Domain Discovery determines relationships and responsibilities between core domain objects by walking through the story map, then suggests story refinements to rebuild the story map to complement the domain model.", "examples": [{"do": {"description": "Extract keywords from story map and determine relationships and responsibilities", "content": "Go through all stories in increment scope, extract keywords from story titles/descriptions/acceptance criteria, ask clarifying questions for each keyword, map relationships with multiplicities, document responsibilities"}, "dont": {"description": "Don't skip keyword identification or build domain model without story map analysis", "content": "Skip going through stories, ignore keywords in acceptance criteria, build domain model without asking what keywords mean, use technical terms instead of domain terms"}}]}}, {"rule_file": "enforce_behavioral_journey_flow.json", "rule_content": {"description": "When shaping stories, CRITICAL: Stories must show user/system journey flow, not just list operations. Stories must include context (when/why actions happen) and connect logically. Order by user journey, not technical sequential_order.", "context": "when shaping stories", "examples": [{"do": {"description": "Show user/system journey with context and flow", "content": ["Stories must show WHEN and WHY actions happen, not just WHAT", "Story maps must show logical flow: Initialize \u2192 Validate \u2192 Process \u2192 Confirm \u2192 Complete", "Each story must connect to previous/next stories in the journey", "Order stories by user journey flow, not by technical sequential_order", "", "Correct Examples (with journey context - Payment Domain):", "(E) Process Payment", "  and (E) Process Card Payment", "    and (S) User --> invokes process payment command", "    and (S) System --> validates payment details", "    and (S) System --> authorizes payment", "    and (S) System --> processes payment transaction", "    and (S) System --> confirms payment and sends notification", "", "(E) Refund Payment", "  and (E) Process Refund", "    and (S) User --> invokes refund payment command", "    and (S) System --> validates refund eligibility", "    and (S) System --> processes refund transaction", "    and (S) System --> confirms refund and sends notification", "", "(E) Process Payment", "  and (E) Validate Payment", "    and (S) User --> submits payment request", "    and (S) System --> validates card number", "    and (S) System --> validates amount", "    and (S) System --> validates currency", "    and (S) System --> returns validation result", "", "Note: Individual stories like 'Authorize Payment with Processor' are correct story format (verb-noun, specific), but they need to be part of a journey. Stories should NOT include actors in the name (actors are documented separately).", "", "Correct Individual Stories (but need journey context):", "- 'Authorize Payment with Processor' (correct story format, but needs: when? why? what happens next?)", "- 'Validate Payment Details' (correct story format, but needs: when? why? what triggers this?)", "- 'Process Payment Transaction' (correct story format, but needs: when? why? what happens before/after?)", "", "Journey Flow Requirements:", "- Start with initialization/entry point", "- Show logical progression through operations", "- Include error handling and alternative paths", "- End with completion/save operations", "- Connect stories logically (this leads to that)"]}, "dont": {"description": "Don't create isolated sets of functions that don't make sense linearly", "content": ["Don't group unrelated operations together that don't form a logical journey", "Don't create story maps with random functions that have no linear relationship", "Don't mix unrelated operations from different domains or contexts", "", "Wrong Examples (isolated sets of functions, no linear sense - Payment Domain):", "(E) Payment Operations", "  and (E) Process Payment", "  and (E) Generate Invoice", "  and (E) Send Email", "  and (E) Update Inventory", "  and (E) Calculate Tax", "(unrelated operations, no linear flow - why does email come after payment? why inventory? no journey)", "", "(E) Payment System", "  and (E) Authorize Payment", "  and (E) Create User Account", "  and (E) Process Refund", "  and (E) Generate Report", "  and (E) Delete Transaction", "(random operations, no logical sequence - account creation doesn't follow authorization, deletion doesn't follow processing)", "", "(E) Payment Flow", "  and (S) System --> validates payment", "  and (S) System --> sends notification", "  and (S) System --> authorizes payment", "  and (S) System --> updates database", "  and (S) System --> processes payment", "(wrong order, no linear sense - notification before authorization? database update before processing?)", "", "What Makes It NOT a Linear Journey:", "- Unrelated operations grouped together (payment + inventory + email + tax - why together?)", "- Operations from different contexts mixed (payment + user account + reporting - different domains)", "- No logical sequence (why does X come before Y? no reason)", "- Operations can be in any order (no dependencies, no flow)", "- Random collection of functions (like a function library, not a journey)", "- No user/system goal that connects them (what are we trying to accomplish?)"]}}]}}, {"rule_file": "enforce_functional_accomplishment.json", "rule_content": {"description": "CRITICAL: Stories must represent complete functional accomplishments, not data access operations or implementation steps. Stories must deliver value independently.", "examples": [{"do": {"description": "Create stories that accomplish complete functions", "content": ["Stories must represent complete functional accomplishments", "Stories must deliver value independently (INVEST principle)", "Stories must show end-to-end flow, not just data access", "", "Correct Examples (complete functional accomplishments):", "- 'User loads story graph and system displays epics in diagram' (complete: load + display = accomplishment)", "- 'Developer edits epic name and system updates diagram' (complete: edit + update = accomplishment)", "- 'User requests render and system generates DrawIO file' (complete: request + generate = accomplishment)", "- 'CLI invokes render command and system saves outline diagram' (complete: invoke + save = accomplishment)", "", "Functional Accomplishment Requirements:", "- Story must accomplish something meaningful for user/system", "- Story must be independently valuable (can be tested/delivered alone)", "- Story must show complete flow (start \u2192 process \u2192 outcome)", "- Story must have clear acceptance criteria (how do we know it's done?)"]}, "dont": {"description": "Don't create stories that are just data access or implementation steps", "content": ["Don't create stories that are just data access operations", "Don't create stories that are implementation steps without outcomes", "Don't create stories that aren't independently valuable", "", "Wrong Examples (not complete accomplishments):", "- 'Read All Epics from Diagram' (data access - not accomplishment, what happens with the data?)", "- 'Load All Features In Graph Epic' (data access - not accomplishment)", "- 'Serialize Components to JSON' (implementation step - not accomplishment, part of what story?)", "- 'Convert Diagram to StoryGraph Format' (implementation step - not accomplishment)", "- 'Calculate Component Positions' (implementation step - not accomplishment)", "", "Data Access/Implementation Indicators (REJECT as stories):", "- Just reads/loads data without using it", "- Just converts/formats data without purpose", "- Just calculates/computes without outcome", "- Just serializes/saves without context", "", "These should be STEPS within stories, not stories themselves:", "- Step: 'System reads epics from diagram' (within story: 'User views story map and system displays epics')", "- Step: 'System serializes components' (within story: 'User saves story graph and system writes JSON file')", "- Step: 'System calculates positions' (within story: 'User requests render and system generates positioned diagram')", "", "Instead, ask:", "- What does the user/system accomplish with this?", "- Is this independently valuable?", "- Can this be tested/delivered alone?", "- What's the complete flow from start to finish?"]}}]}}, {"rule_file": "enforce_specificity_in_stories.json", "rule_content": {"description": "CRITICAL: Stories must be specific about what, when, why, and who. Generic operations like 'Add Sub-Epic' or 'Read Epics' are insufficient - stories must include context and specificity.", "scanner": "agile_bot.bots.base_bot.src.scanners.specificity_scanner.SpecificityScanner", "examples": [{"do": {"description": "Create specific stories with full context", "content": ["Stories must be specific about what, when, why, and who", "Stories must include context: when does it happen? why? what triggers it?", "Stories must specify actors, objects, and outcomes clearly", "", "Correct Examples (specific with context - Payment Domain):", "- 'User processes payment for order #12345 with amount $50.00 when customer completes checkout' (specific: user, order ID, amount, context)", "- 'Merchant invokes refund command from API and system reverses payment transaction' (specific: merchant, API, command, outcome)", "- 'System validates payment card number 4111-1111-1111-1111 when user submits payment form' (specific: system, card number, trigger)", "- 'User clicks Process Payment button and system prompts for payment method selection' (specific: user, action, UI element, system response)", "", "Specificity Requirements:", "- WHO: Specific actor (User, Merchant, Customer, System, PaymentProcessor, API)", "- WHAT: Specific action and object (processes payment for order #12345 with amount $50.00)", "- WHEN: Specific trigger/context (when customer completes checkout, when user submits payment form)", "- WHY: Purpose in journey (to complete purchase transaction, to reverse payment error)", "- OUTCOME: Specific result (payment processed, transaction ID returned, notification sent)"]}, "dont": {"description": "Don't create generic stories without context", "content": ["Don't create generic operations without specificity", "Don't omit context about when/why actions happen", "Don't use vague descriptions without details", "", "Wrong Examples (generic without context - Payment Domain):", "- 'Process Payment' (which payment? for which order? when? why?)", "- 'Authorize Payment' (which payment? with which card? when? why? what happens next?)", "- 'Exposes Payment API' (which endpoints? to whom? when? why?)", "- 'Refund Payment' (which payment? for which reason? when? why?)", "", "Generic Indicators (REJECT or require more specificity):", "- Single verb + noun without context: 'Process Payment', 'Authorize Payment', 'Refund Payment'", "- No specific objects: 'Process Payment' (which payment? which order?)", "- No context: 'Authorize Payment' (when? why? what triggers this?)", "- No outcome: 'Authorize Payment' (what happens with the authorization result?)", "", "Instead, ask:", "- Which specific object? (payment ID, order number, transaction ID, card number)", "- When does this happen? (trigger, context, user action - when customer completes checkout, when merchant requests refund)", "- Why does this happen? (purpose, user need, journey step - to complete purchase, to reverse error)", "- What's the outcome? (result, system response, user experience - payment processed, transaction ID returned, notification sent)"]}}]}}, {"rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "rule_content": {"description": "Establish mandatory spine stories vs optional/enhanced behavior stories. When mapping stories, carefully distinguish between sequential spine (essential path) and optional paths, alternate routes, or additional functionality that is not strictly essential. Mandatory stories form the sequential spine (story AND story AND story). Optional stories are alternatives or enhancements (story OR story) that branch from the spine and can return to it. Sequential stories form the mandatory flow; optional stories are alternatives, enhancements, or non-essential sub-epics.", "scanner": "agile_bot.bots.base_bot.src.scanners.spine_optional_scanner.SpineOptionalScanner", "examples": [{"do": {"description": "Identify the essential spine first", "content": ["Start by identifying the minimal essential path that delivers core value", "The spine represents the mandatory sequence: Story1 AND Story2 AND Story3", "Spine stories get sequential_order numbers (1, 2, 3, etc.)", "Spine stories are required for the sub-epic to deliver its core purpose", "Ask: 'What is the minimum path to deliver value?'", "Establish the mandatory spine before identifying optional/enhanced behaviors", "Explicitly distinguish between spine (mandatory) and optional/enhanced behaviors"]}, "dont": {"description": "Don't mark everything as sequential", "content": ["Don't assign sequential_order to all stories when some are optional", "Don't treat alternate routes as part of the spine", "Don't include enhancements in the mandatory sequential flow", "Don't confuse 'nice to have' with 'must have'", "Don't mark all stories as mandatory when some are alternatives or enhancements", "Don't fail to establish the spine before adding optional/enhanced behaviors"]}}, {"do": {"description": "Mark optional paths clearly", "content": ["Optional stories branch from or enhance the spine but are not required", "Mark optional stories with 'optional: true' in the story structure", "Optional stories may have sequential_order if they're part of an alternative flow (e.g., 2.1, 3.1, etc.)", "Optional stories represent: alternate routes, enhancements, nice-to-have sub-epics", "Ask: 'Can the sub-epic deliver value without this story?'", "Optional/enhanced stories can return to the spine after completion", "Sort optional/enhanced stories by priority of delivery within the same sub-epic"]}, "dont": {"description": "Don't omit optional markers", "content": ["Don't leave optional stories unmarked - be explicit", "Don't assume all stories in a sub-epic are mandatory", "Don't mix optional and mandatory without clear distinction", "Don't fail to identify the spine before adding optional paths", "Don't omit the optional marker - be explicit about spine vs optional/enhanced behaviors", "Don't create sub-epics where every story is mandatory when alternatives or enhancements exist"]}}, {"do": {"description": "Distinguish types of optional paths with concrete examples", "content": ["Spine (all stories with and), then OR optional branch (all stories with and), then OR enhanced (all stories with and):", "", "Correct Example:", "Spine (all stories with and):", "  (S) User --> creates account", "  and (S) User --> logs in", "  and (S) User --> views dashboard", "OR optional branch (all stories with and):", "  (S) User --> signs in with social media (optional)", "  and (S) User --> signs in with email (optional)", "OR enhanced (all stories with and):", "  (S) User --> customizes dashboard (enhanced)", "  and (S) User --> shares dashboard (enhanced)"]}, "dont": {"description": "Wrong mapping examples", "content": ["Wrong: All stories marked mandatory when some are clearly alternatives or enhancements", "  and (S) User --> creates account (1)", "  and (S) User --> logs in with email (2)", "  and (S) User --> logs in with social media (3) - social media should be optional", "", "Wrong: No distinction between essential path and optional sub-epics", "  and (S) User --> views dashboard (1)", "  and (S) User --> customizes dashboard (2)", "  and (S) User --> shares dashboard (3) - customization and sharing should be optional", "", "Wrong: Missing optional markers on alternative flows or enhanced behaviors", "Wrong: Optional/enhanced stories not sorted by priority", "Wrong: No clear spine established before adding optional behaviors"]}}]}}, {"rule_file": "extract_story_map_checklist.json", "rule_content": {"description": "Quick checklist for extracting story maps from code. Follow this process step-by-step.", "steps": [{"step": 1, "title": "Find Outermost Layer and Entry Points", "checklist": ["Locate CLI commands (main(), argparse, command handlers)", "Locate UI entry points (routes, event handlers, button clicks)", "Locate MCP server tool definitions (tool names, parameters)", "Locate API contracts (REST endpoints, GraphQL, WSDL)", "Locate WebSocket handlers, message queues, event listeners", "Locate acceptance tests (end-to-end, integration, BDD/Gherkin)", "Document all entry points with their parameters and return values"]}, {"step": 2, "title": "Analyze Operations and Domain Concepts", "checklist": ["List all operations from entry points (what can be invoked?)", "Identify MAJOR domain concepts (high-level entities)", "Identify MINOR domain concepts (supporting entities)", "Identify relationships between concepts", "Document operation names, parameters, return values", "Document concept names, properties, relationships"]}, {"step": 3, "title": "Create Epics Based on Higher-Order Goals", "checklist": ["Group operations by higher-order goals (what is user/system trying to accomplish?)", "Create epics from goals, not from implementation structure", "Each epic represents a major capability or lifecycle stage", "Validate: Epic name describes a goal, not a technical operation"]}, {"step": 4, "title": "Create Sub-Epics Based on Distinct Behaviors", "checklist": ["For each epic, identify distinct behaviors (different ways to accomplish goal)", "Group behaviors into sub-epics (different types, modes, contexts)", "Each sub-epic represents a distinct path or scenario", "Validate: Sub-epic name describes a behavior, not a technical mechanism"]}, {"step": 5, "title": "Identify Distinct Behaviors from Tests and Code Flow", "checklist": ["Trace through acceptance tests: what happens step by step?", "Trace through CLI commands: what's the execution flow?", "Trace through MCP tool calls: what's the sequence?", "Identify distinct behaviors at each step", "Document typical execution order", "Document error handling and alternative paths"]}, {"step": 6, "title": "Lay Out Story Journey from End-to-End Flow", "checklist": ["Start with entry point (how does user/system initiate?)", "Follow code flow through operations (what happens step by step?)", "Include error handling (what happens when things go wrong?)", "End with completion (how does it finish?)", "For each story, include:", "  - WHEN: trigger, condition, user action", "  - WHY: purpose, user need, system requirement", "  - OUTCOME: result, state change, user experience", "  - ACTOR: who performs the action", "Validate: Stories show complete journey, not isolated operations"]}, {"step": 7, "title": "Validate Story Map Quality", "checklist": ["Stories show user/system journey (not just list operations)", "Stories have context (when/why/outcome)", "Stories are specific (not generic like 'Add Sub-Epic')", "Stories represent complete accomplishments (not data access)", "Implementation details are steps, not stories", "Order follows user journey, not technical sequential_order", "Epics/sub-epics based on goals, not implementation structure"]}], "common_mistakes": ["Starting with internal classes instead of entry points", "Creating epics from class structure instead of goals", "Creating stories from every method call", "Missing context (when/why) in stories", "Making implementation details into stories", "Ordering by technical sequential_order instead of user journey", "Generic stories without specificity"]}}, {"rule_file": "extract_story_map_from_code.json", "rule_content": {"description": "CRITICAL: When creating story maps from code, analyze the outermost layer showing end-to-end journey. Locate acceptance tests, human code engagement points (CLI/UI), MCP server definitions, WSDL, API contracts. Analyze operations and domain for major/minor concepts. Create epics/sub-epics based on higher-order goals. Look at distinct behaviors and typical execution order to lay out story journey.", "examples": [{"do": {"description": "Find outermost layer and entry points", "content": ["Start with the OUTERMOST LAYER showing end-to-end journey", "Locate all HUMAN CODE ENGAGEMENT points:", "  - CLI commands and entry points (main(), command handlers)", "  - UI entry points (web routes, event handlers, button clicks)", "  - MCP server tool definitions (tool names, parameters, descriptions)", "  - API contracts (REST endpoints, GraphQL queries, WSDL operations)", "  - WebSocket handlers, message queues, event listeners", "", "Locate ACCEPTANCE TESTS:", "  - End-to-end tests that show complete user journeys", "  - Integration tests that show system-to-system flows", "  - Test scenarios that describe 'when X, then Y' behaviors", "  - BDD/Gherkin tests with Given-When-Then structure", "", "Example Entry Points to Find:", "- CLI: 'python -m story_io.story_io_cli render-outline --story-graph file.json'", "- MCP: Tool 'render_outline' with parameters 'story_graph_path', 'output_path'", "- API: POST /api/story-graph/render with body {storyGraph, outputFormat}", "- UI: Button 'Render Outline' that triggers render operation", "- Test: 'test_render_outline_from_json' that shows complete flow"]}, "dont": {"description": "Don't start with internal implementation details", "content": ["Don't start with internal classes or helper functions", "Don't start with data structures or domain models", "Don't start with utility functions or low-level operations", "", "Wrong Starting Points:", "- Internal class: 'StoryIODiagram.load_from_json()' (implementation detail)", "- Helper function: 'parse_story_graph()' (internal mechanism)", "- Data structure: 'Epic' class definition (domain model, not entry point)", "", "These are important but come AFTER identifying the journey"]}}, {"do": {"description": "Analyze operations and domain for major/minor concepts", "content": ["Analyze OPERATIONS from entry points:", "  - What operations are exposed? (render, sync, search, edit, save)", "  - What are the operation names? (render-outline, sync-increments, search-stories)", "  - What parameters do they take? (story_graph_path, output_path, query)", "  - What do they return? (DrawIO file, JSON report, search results)", "", "Analyze DOMAIN CONCEPTS:", "  - MAJOR CONCEPTS: High-level domain entities (StoryGraph, Diagram, Epic, Sub-Epic, Story)", "  - MINOR CONCEPTS: Supporting entities (Position, Boundary, User, Increment)", "  - OPERATIONS: Actions on concepts (Load, Read, Edit, Render, Synchronize, Search, Save)", "  - RELATIONSHIPS: How concepts relate (Epic contains Sub-Epics, Sub-Epic contains Stories)", "", "Example Analysis (Story-IO Domain):", "- Operations: render-outline, render-increments, sync-outline, sync-increments, search, add-user, merge", "- Major Concepts: StoryGraph (main entity), Diagram (visual representation), Epic/Sub-Epic/Story (hierarchy)", "- Minor Concepts: Position (2D coordinate), Boundary (rectangular area), User (story actor), Increment (priority grouping)", "- Relationships: StoryGraph contains Epics, Epic contains Sub-Epics, Sub-Epic contains Stories", "", "Example Analysis (Payment Domain):", "- Operations: process-payment, refund-payment", "- Major Concepts: Payment (main entity), Transaction (financial transaction), Card (payment method), Refund (reversal)", "- Minor Concepts: Amount (monetary value), Currency (USD, EUR), Status (pending, approved, declined), PaymentMethod (card, bank transfer)", "- Relationships: Payment contains Transaction, Payment uses Card, Payment can have Refund, Transaction has Status"]}, "dont": {"description": "Don't confuse implementation details with domain concepts", "content": ["Don't treat implementation classes as domain concepts", "Don't treat utility functions as operations", "Don't treat data structures as domain entities", "", "Wrong Analysis:", "- Implementation class: 'StoryIORenderer' (implementation detail, not domain concept)", "- Utility function: 'calculate_position()' (implementation detail, not operation)", "- Data structure: 'dict' or 'list' (implementation detail, not domain concept)", "", "Focus on WHAT the system does (domain), not HOW it does it (implementation)"]}}, {"do": {"description": "Create epics/sub-epics based on higher-order goals", "content": ["Group operations into EPICS based on HIGHER-ORDER GOALS:", "  - What is the user/system trying to accomplish?", "  - What are the major capabilities?", "  - What are the lifecycle stages?", "", "Example Epic Creation from Operations (Story-IO Domain):", "- Operations: render-outline, render-increments, render-exploration", "- Higher-Order Goal: 'Render StoryGraph' (user wants to visualize story map)", "- Epic: 'Render StoryGraph'", "", "- Operations: sync-outline, sync-increments, generate-sync-report, merge", "- Higher-Order Goal: 'Synchronize StoryGraph' (user wants to sync between formats)", "- Epic: 'Synchronize StoryGraph'", "", "Example Epic Creation from Operations (Payment Domain):", "- Operations: process-payment, process_payment, POST /api/payments/process", "- Higher-Order Goal: 'Process Payment' (user wants to process a payment transaction)", "- Epic: 'Process Payment'", "", "- Operations: refund-payment, refund_payment, POST /api/payments/refund", "- Higher-Order Goal: 'Refund Payment' (user wants to reverse a payment)", "- Epic: 'Refund Payment'", "", "Group operations into SUB-EPICS based on DISTINCT BEHAVIORS:", "  - What are the different ways to accomplish the epic goal?", "  - What are the different types or modes?", "  - What are the different contexts or scenarios?", "", "Example Sub-Epic Creation (Story-IO Domain):", "- Epic: 'Render StoryGraph'", "- Distinct Behaviors: Render outline (basic), Render increments (with priorities), Render exploration (with acceptance criteria)", "- Sub-Epics: 'Render Outline', 'Render Increments', 'Render Exploration'", "", "- Epic: 'Synchronize StoryGraph'", "- Distinct Behaviors: Sync outline structure, Sync increments, Generate comparison report, Merge graphs", "- Sub-Epics: 'Synchronize Outline', 'Synchronize Increments', 'Generate Sync Report', 'Merge StoryGraphs'", "", "Example Sub-Epic Creation (Payment Domain):", "- Epic: 'Process Payment'", "- Distinct Behaviors: Validate payment (required), Authorize payment (required), Process with card (common), Process with bank transfer (alternative), Process with wallet (alternative), Confirm payment (required)", "- Sub-Epics: 'Validate Payment', 'Authorize Payment', 'Process Card Payment', 'Process Bank Transfer', 'Process Wallet Payment', 'Confirm Payment'", "", "- Epic: 'Refund Payment'", "- Distinct Behaviors: Validate refund eligibility, Process refund, Confirm refund", "- Sub-Epics: 'Validate Refund', 'Process Refund', 'Confirm Refund'"]}, "dont": {"description": "Don't create epics/sub-epics from implementation structure", "content": ["Don't create epics based on class structure (StoryIODiagram, DrawIORenderer, PaymentProcessor, etc.)", "Don't create sub-epics based on method names (load_json, parse_xml, charge_card, etc.)", "Don't create epics/sub-epics from technical layers (data layer, service layer, etc.)", "", "Wrong Epic Creation:", "- Based on class: 'StoryIODiagram Operations' (implementation structure)", "- Based on method: 'JSON Loading' (technical mechanism)", "- Based on layer: 'Data Access Layer' (technical architecture)", "", "Focus on USER/SYSTEM GOALS, not technical structure"]}}, {"do": {"description": "Look at distinct behaviors and typical execution order", "content": ["Analyze DISTINCT BEHAVIORS from acceptance tests and code flow:", "  - What are the different scenarios?", "  - What are the different paths through the code?", "  - What are the different user actions?", "", "Example Behavior Analysis (Story-IO Domain):", "- Test: 'test_render_outline_from_json' shows: Load JSON \u2192 Parse \u2192 Generate XML \u2192 Calculate Positions \u2192 Apply Styles \u2192 Save", "- Distinct Behaviors: Load, Parse, Generate, Calculate, Apply, Save", "- These become STORIES in the journey", "", "Example Behavior Analysis (Payment Domain):", "- Test: 'test_process_payment_success' shows: Invoke \u2192 Validate \u2192 Authorize \u2192 Process \u2192 Confirm", "- Distinct Behaviors: Invoke (entry point), Validate (check input), Authorize (check funds/fraud), Process (execute transaction), Confirm (complete and notify)", "- These become STORIES in the journey", "", "Determine TYPICAL EXECUTION ORDER from code flow:", "  - Trace through acceptance tests: what happens first, second, third?", "  - Trace through CLI commands: what's the flow?", "  - Trace through MCP tool calls: what's the sequence?", "  - Look at error handling: what are alternative paths?", "", "Example Execution Order Analysis (Story-IO Domain):", "- CLI: 'render-outline --story-graph file.json --output file.drawio'", "- Code Flow: Parse args \u2192 Load story graph \u2192 Create diagram \u2192 Render outline \u2192 Save file", "- Typical Order: 1. Parse arguments, 2. Load story graph, 3. Render outline, 4. Save file", "- Stories: 'Parses Command Arguments' \u2192 'Loads StoryGraph from JSON' \u2192 'Renders Outline to DrawIO' \u2192 'Saves DrawIO File'", "", "Example Execution Order Analysis (Payment Domain):", "- CLI: 'process-payment --payment-id 123 --amount 50.00'", "- Code Flow: Parse args \u2192 Validate payment \u2192 Authorize payment \u2192 Process payment \u2192 Confirm payment", "- Typical Order: 1. User invokes process payment, 2. System validates payment details, 3. System authorizes payment, 4. System processes payment, 5. System confirms payment", "- Stories: 'User invokes process payment command' \u2192 'System validates payment details' \u2192 'System authorizes payment with payment processor' \u2192 'System processes payment transaction' \u2192 'System confirms payment and sends notification'", "", "Create STORY JOURNEY from execution order:", "  - Start with entry point (CLI invocation, UI click, MCP tool call)", "  - Follow the code flow through operations", "  - Include error handling and alternative paths", "  - End with completion (save, return result, display)", "", "Example Story Journey (Story-IO Domain):", "- Entry: 'User invokes render-outline command from CLI'", "- Flow: 'CLI parses arguments' \u2192 'CLI loads story graph' \u2192 'CLI invokes render' \u2192 'System renders outline' \u2192 'System saves file'", "- Error: 'If file not found, CLI displays error message'", "- Completion: 'CLI returns success message'", "", "Example Story Journey (Payment Domain):", "- Entry: 'User invokes process payment command' (WHEN: user wants to charge customer, WHY: to complete purchase, OUTCOME: CLI/MCP/API receives request)", "- Flow: 'System validates payment details' (WHEN: after request received, WHY: to ensure payment can be processed, OUTCOME: details validated) \u2192 'System authorizes payment' (WHEN: after validation, WHY: to check funds/fraud, OUTCOME: payment authorized) \u2192 'System processes payment' (WHEN: after authorization, WHY: to execute transaction, OUTCOME: payment processed) \u2192 'System confirms payment' (WHEN: after processing, WHY: to notify user, OUTCOME: payment confirmed)", "- Error: 'If validation fails, System displays validation error' (WHEN: validation fails, WHY: to inform user, OUTCOME: error shown, process stops)", "- Completion: 'System returns transaction ID' (WHEN: after confirmation, WHY: to provide reference, OUTCOME: transaction ID returned)"]}, "dont": {"description": "Don't create stories from code structure or method calls", "content": ["Don't create stories from every method call in code", "Don't create stories from internal function calls", "Don't create stories from data structure operations", "", "Wrong Story Creation:", "- From method: 'StoryIODiagram.__init__()' (internal initialization)", "- From function: 'parse_json()' (internal parsing)", "- From operation: 'dict.get()' (data access, not behavior)", "- From method: 'PaymentProcessor.charge_card()' (internal implementation)", "", "Focus on USER/SYSTEM VISIBLE BEHAVIORS, not internal implementation"]}}, {"do": {"description": "Lay out story journey from end-to-end flow", "content": ["Create STORY JOURNEY that shows complete end-to-end flow:", "  - Start: How does user/system initiate? (CLI command, UI click, API call)", "  - Middle: What happens step by step? (parse, load, process, transform)", "  - End: How does it complete? (save, return, display, notify)", "", "Include CONTEXT for each story:", "  - WHEN does it happen? (trigger, condition, user action)", "  - WHY does it happen? (purpose, user need, system requirement)", "  - WHAT is the outcome? (result, state change, user experience)", "  - ACTOR: Who performs the action? (User, System, CLI, MCP, API, etc.)", "", "Example Complete Story Journey (Story-IO Domain):", "(E) Render StoryGraph", "  and (E) Render Outline", "    and (S) User --> invokes render-outline command from CLI", "    and (S) CLI --> parses command arguments", "    and (S) CLI --> loads story graph from JSON file", "    and (S) System --> renders outline to DrawIO format", "    and (S) System --> saves DrawIO file", "", "Example Complete Story Journey (Payment Domain):", "(E) Process Payment", "  and (E) Process Card Payment", "    and (S) User --> invokes process payment command", "    and (S) System --> validates payment details", "    and (S) System --> authorizes payment with payment processor", "    and (S) System --> processes payment transaction", "    and (S) System --> confirms payment and sends notification", "", "Include ERROR HANDLING and ALTERNATIVE PATHS:", "  - What happens when file not found?", "  - What happens when parsing fails?", "  - What happens when validation fails?", "  - What happens when authorization fails?", "", "Example Error Handling (Story-IO Domain):", "  and (S) CLI --> displays error message if story graph file not found", "", "Example Error Handling (Payment Domain):", "  and (S) System --> displays validation error if validation fails", "  and (S) System --> displays authorization declined message if authorization fails"]}, "dont": {"description": "Don't create isolated stories without journey context", "content": ["Don't create stories that are just operations without context", "Don't create stories that don't connect to a journey", "Don't create stories without when/why/outcome/actor", "", "Wrong Story Creation:", "- (S) System --> loads StoryGraph (no context: when? why? what happens next?)", "- (S) System --> parses JSON (no context: when? why? what's the outcome?)", "- (S) System --> saves file (no context: when? why? what triggers this?)", "- (S) System --> processes payment (no context: when? why? what's the outcome?)", "", "Every story must be part of a JOURNEY with CONTEXT (when/why/outcome/actor)"]}}]}}, {"rule_file": "focus_real_actions_on_domain_concepts.json", "rule_content": {"description": "When shaping stories, stories must describe REAL ACTIONS that users or other actors (even system or technical actors) can perform, not capabilities or structural descriptions. Organize by lifecycle flow (Load, Read, Edit, Render, Synchronize, Search, Save). CRITICAL: Actor names must NOT appear in Epic/Sub-Epic/Story names - names are Verb-Noun only.", "context": "when shaping stories", "examples": [{"do": {"description": "Use real actions - actor separate from name", "content": ["Stories describe actions: Load, Read, Add, Remove, Render, Search, Save", "Organize by lifecycle: Load \u2192 Read \u2192 Edit \u2192 Render \u2192 Synchronize \u2192 Search \u2192 Save", "Use Verb-Noun format for names: '[Verb] [Noun]' - NO ACTOR in name", "Focus on what users/code CAN DO, not what things ARE", "", "NAMING RULE - Actor NOT in Name:", "- Epic name: 'Places Order' (NOT 'Customer Places Order')", "- Sub-Epic name: 'Validates Payment' (NOT 'PaymentValidator Validates Payment')", "- Story name: 'Processes Order Items' (NOT 'OrderProcessor Processes Order Items')", "- Actor is documented separately, not in the name itself", "", "ACTORS for User/System Stories (normal stories):", "- Use human/system actors: User, Developer, System, Customer, Admin", "- Actor is implicit or documented separately from name", "- Examples: Epic 'Places Order' has actor: Customer", "- Examples: Sub-Epic 'Validates Payment' has actor: System", "", "ACTORS for Technical Stories (deep internal class-level interactions):", "- Domain concepts CAN be actors: OrderProcessor, PaymentValidator, InventoryManager, Cart, Product", "- Actor is documented separately, NOT in name", "- Examples: Epic 'Loads Order Data' has actor: OrderProcessor (technical)", "- Examples: Sub-Epic 'Updates Inventory' has actor: InventoryManager (technical)", "- Examples: Story 'Calculates Total' has actor: Cart (technical)", "- This is acceptable when documenting class-to-class interactions internally"]}, "dont": {"description": "Avoid capabilities, structural descriptions, passive states, and actors in names", "content": ["Don't use capability nouns or structural descriptions", "Don't describe what things ARE or CONTAIN", "Don't use passive states or properties as stories", "CRITICAL: Don't put actor in Epic/Sub-Epic/Story names", "", "Wrong Examples (capabilities/structure):", "- 'PaymentValidator Contains Validation Logic' (capability, not action)", "- 'OrderProcessor Tracks Order Count' (passive state, not action)", "- 'Cart Hierarchy Foundation' (structural description)", "- 'Domain Components Implementation' (capability)", "- 'Product Represents Item' (structural description)", "", "Wrong Examples (actor in name):", "- Epic: 'Customer Places Order' (actor in name - WRONG)", "- Sub-Epic: 'OrderProcessor Validates Payment' (actor in name - WRONG)", "- Sub-Epic: 'Cart Adds Product' (actor in name - WRONG)", "- Story: 'InventoryManager Updates Stock' (actor in name - WRONG)", "", "Correct Examples (actor NOT in name):", "- Epic: 'Places Order' (actor: Customer, documented separately)", "- Sub-Epic: 'Validates Payment' (actor: PaymentValidator, documented separately)", "- Sub-Epic: 'Adds Product' (actor: Cart, documented separately)", "- Story: 'Updates Stock' (actor: InventoryManager, documented separately)", "", "These are not actions users/code can perform - they describe structure or capabilities", "Instead ask: What can users/code DO with this domain concept?", "- Instead of 'Contains Logic' \u2192 'Generates XML' or 'Renders Diagram'", "- Instead of 'Tracks Count' \u2192 'Reads Count' or 'Updates Count'", "- Instead of 'Represents X' \u2192 'Creates X' or 'Loads X'"]}}]}}, {"rule_file": "focus_user_and_system_activities.json", "rule_content": {"description": "Focus story maps on both user AND system activities, not tasks. Stories should outline user and system behavior patterns.", "examples": [{"do": {"description": "Include both user and system activities in story descriptions", "content": ["User submits order, System validates payment", "Customer views products, System displays inventory", "Use user activity patterns: User submits, Customer places", "Use system activity patterns: System validates, System sends", "Focus stories on user interactions and how the system behaves as observed by users", "Example: Customer places order with payment details", "", "ACTOR SELECTION (documented separately, NOT in name):", "- For user/system stories: Actors are User, System, Developer, Customer, Admin (human/system actors)", "- For technical stories (deep internal class-level): Domain concepts can be actors (StoryIODiagram, DrawIORenderer, DrawIOSynchronizer, User, Increment, Component)", "- Technical stories document class-to-class interactions where domain concepts act as actors", "", "CRITICAL NAMING RULE:", "- Actor must NOT appear in Epic/Sub-Epic/Story name", "- Name format: '[Verb] [Noun]' only", "- Examples: 'Loads StoryGraph' (actor: StoryIODiagram, documented separately)", "- Examples: 'Adds Sub-Epic' (actor: Epic, documented separately)", "- Examples: 'Changes Parent' (actor: Component, documented separately)"]}, "dont": {"description": "Avoid task-oriented language that describes implementation", "content": ["Avoid task-oriented language that describes implementation", "Don't use task language for building or setting up", "Don't focus only on user activities (ignore system activities)", "Don't focus only on tasks (instead of activities)", "Don't use development task language: implement, create, refactor, optimize, fix, build, set up", "Don't use technical implementation details: query database, call API, update table", "", "Wrong Examples:", "- Only user activities: User submits order, User views products (missing system activities)", "- Only tasks: Implement order submission, Create payment validation (not activities)", "- Implement order submission, Create payment validation", "- Build product listing page, Set up inventory display"]}}]}}, {"rule_file": "identify_system_stories.json", "rule_content": {"description": "System stories capture system-to-system interactions that are not user-facing. They represent internal system behavior that crosses system boundaries (e.g., microservice to microservice, component to component). System stories should be identified and marked with story_type: 'system'.", "do": {"examples": [{"description": "Identify system-to-system interactions", "content": ["Storage Microservice validates payload from Local Mgmt System", "API Gateway routes request to Authentication Service", "Message Queue delivers event to Notification Service"]}, {"description": "Mark system stories with story_type: 'system'", "content": ["Story: 'Validate Payload' with story_type: 'system'", "Story: 'Route Request' with story_type: 'system'", "Story: 'Deliver Event' with story_type: 'system'"]}, {"description": "Use system stories for internal system behavior", "content": ["System stories represent behavior that happens between systems/components", "System stories are not directly visible to end users", "System stories enable user-facing stories to function"]}]}, "dont": {"examples": [{"description": "Don't mark user-facing stories as system stories", "content": ["User clicks button \u2192 NOT a system story", "User views dashboard \u2192 NOT a system story", "User submits form \u2192 NOT a system story"]}, {"description": "Don't confuse system stories with technical stories", "content": ["System stories = system-to-system behavior (dark blue in DrawIO)", "Technical stories = implementation tasks (black/white in DrawIO, normally avoided)"]}]}}}, {"rule_file": "maximize_integration_of_related_concepts.json", "rule_content": {"description": "When shaping stories, maximize integration of related concepts", "context": "when shaping stories", "examples": [{"do": {"description": "Group concepts that the user sees as one capability", "content": ["Group concepts that the user sees as one capability", "Nest implementation details under the sub-epic they serve", "Keep related data and operations together", "Eliminate artificial boundaries based on code organization"]}, "dont": {"description": "Don't separate related concepts", "content": ["Don't separate related concepts into different major sections", "Wrong: Split based on code layers (data, business, presentation)", "Don't duplicate related concepts across multiple sections", "Wrong: Create gaps that break the user's mental model"]}}]}}, {"rule_file": "place_domain_concepts_by_relevance.json", "rule_content": {"description": "When shaping stories, place domain concepts locally or globally based on relevance to one or multiple sub_epics", "context": "when shaping stories", "examples": [{"do": {"description": "Place domain concepts at the most specific level, favoring local placement", "content": ["Favor local placement: Place domain_concepts at the sub_epic level when they are relevant to only that sub_epic", "Think about the core: Consider core domain concepts that span multiple sub_epics - these should be placed at the parent epic/sub_epic level", "Elevate when shared: If a domain concept is used by multiple child sub_epics, elevate it to the parent level", "Start local, elevate if needed: Begin with local placement, but elevate if the concept is referenced by multiple sub_epics", "", "Correct Examples (Local Placement):", "- Sub-Epic 'Validates Payment' has domain_concept: 'Payment' (only used in this sub-epic)", "- Sub-Epic 'Processes Order' has domain_concept: 'Order' (only used in this sub-epic)", "- Sub-Epic 'Updates Inventory' has domain_concept: 'InventoryItem' (only used in this sub-epic)", "", "Correct Examples (Global Placement):", "- Epic 'Process Payment' has domain_concept: 'Payment' (used by multiple sub-epics: Validate Payment, Authorize Payment, Process Transaction)", "- Epic 'Manage Orders' has domain_concept: 'Order' (used by multiple sub-epics: Create Order, Update Order, Cancel Order)", "- Sub-Epic 'Order Management' has domain_concept: 'Customer' (used by multiple child sub-epics: Create Customer Order, Update Customer Order)"]}, "dont": {"description": "Don't place domain concepts at wrong levels or duplicate them unnecessarily", "content": ["Don't place domain concepts at epic level when they're only used in one sub-epic", "Wrong: Epic 'Payment System' has domain_concept: 'PaymentValidator' (only used in 'Validates Payment' sub-epic - should be local)", "Don't duplicate domain concepts at multiple levels", "Wrong: Both Epic and Sub-Epic have 'Payment' concept when it's only used in one sub-epic", "Don't place core domain concepts too locally if they're used across multiple epics", "Wrong: Core concept 'User' placed only in one sub-epic when it's used across multiple epics", "Don't ignore shared usage - if multiple sub-epics reference a concept, elevate it", "Wrong: 'Order' concept placed in each sub-epic separately when all sub-epics use it (should be at parent level)"]}}]}}, {"rule_file": "prevent_generic_capabilities.json", "rule_content": {"description": "CRITICAL: Stories must describe specific actions with actors, not generic capabilities. Reject stories that describe what system IS (capabilities) vs what system DOES (behaviors).", "scanner": "agile_bot.bots.base_bot.src.scanners.generic_capability_scanner.GenericCapabilityScanner", "examples": [{"do": {"description": "Use specific actions with actors and outcomes", "content": ["Stories must have specific actors performing specific actions", "Stories must describe what system DOES (behaviors), not what system IS (capabilities)", "Stories must have specific outcomes, not generic descriptions", "", "Correct Examples (specific behaviors with actors):", "- 'User invokes MCP tool and system routes to StoryIO handler' (specific: user, MCP tool, routing action)", "- 'Developer adds sub-epic Render Exploration to epic Render StoryGraph' (specific: developer, sub-epic name, epic name)", "- 'System loads story graph from JSON file when user requests render' (specific: system, load action, trigger)", "- 'CLI determines workspace root from current directory' (specific: CLI, determine action, source)", "", "Actor Requirements:", "- Every story must have an actor (User, System, Developer, CLI, StoryIODiagram, etc.)", "- Actor must be documented separately (not in name)", "- Actor must be specific (not generic 'Component' or 'System')", "- Actor must perform the action (not just be present)"]}, "dont": {"description": "Don't use generic capabilities or passive descriptions", "content": ["Don't describe what system IS (capabilities)", "Don't use generic action descriptions without actors", "Don't use passive states or properties as stories", "", "Wrong Examples (generic capabilities):", "- 'Exposes Tools' (capability - what tools? when? to whom? what happens?)", "- 'Provides Server Interface' (capability - what interface? when? why?)", "- 'Contains Validation Logic' (capability - not an action)", "- 'Tracks Order Count' (passive state - not an action)", "", "Capability Indicators (REJECT):", "- Describes what system IS: 'Exposes', 'Provides', 'Contains', 'Represents'", "- No specific actor or action", "- No specific outcome or trigger", "- Generic description without context", "", "Instead, ask:", "- Who performs this action? (actor)", "- When does this happen? (trigger/context)", "- What specific outcome occurs? (result)", "- Why does this happen? (purpose in journey)"]}}]}}, {"rule_file": "prevent_implementation_details_as_stories.json", "rule_content": {"description": "CRITICAL: Implementation operations (serialize, convert, calculate, generate XML, apply formatting) must be steps within stories, not stories themselves. Stories must focus on user/system outcomes, not technical mechanisms.", "examples": [{"do": {"description": "Keep implementation details as steps within stories", "content": ["Implementation operations must be steps within stories", "Stories must focus on user/system outcomes, not technical mechanisms", "Stories must describe what user/system experiences, not how it's implemented", "", "Correct Examples (outcomes, not mechanisms):", "- Story: 'User saves story graph and system writes JSON file' \u2192 Steps: 'System converts diagram to story graph format', 'System serializes components to JSON', 'System writes file'", "- Story: 'User requests render and system generates DrawIO diagram' \u2192 Steps: 'System generates DrawIO XML', 'System calculates component positions', 'System applies styles', 'System saves file'", "- Story: 'User edits epic and system updates diagram' \u2192 Steps: 'System updates epic data', 'System recalculates layout', 'System refreshes diagram'", "", "Story vs Step Distinction:", "- Story = User/system outcome (what they experience)", "- Step = Implementation detail (how it's done)", "- Story = Independently valuable (can be tested/delivered)", "- Step = Part of story (not independently valuable)"]}, "dont": {"description": "Don't make implementation operations into stories", "content": ["Don't create stories for implementation operations", "Don't expose technical mechanisms as user stories", "Don't break implementation steps into separate stories", "", "Wrong Examples (implementation details as stories):", "- 'Convert Diagram to StoryGraph Format' (implementation - should be step in 'Save StoryGraph' story)", "- 'Serialize Components to JSON' (implementation - should be step in 'Save StoryGraph' story)", "- 'Generate DrawIO XML from StoryGraph' (implementation - should be step in 'Render Outline' story)", "- 'Calculate Component Positions' (implementation - should be step in 'Render Outline' story)", "- 'Apply Component Styles' (implementation - should be step in 'Render Outline' story)", "- 'Save DrawIO XML to File' (implementation - should be step in 'Render Outline' story)", "", "Implementation Operation Indicators (REJECT as stories):", "- Serialize, deserialize, convert, transform, format", "- Calculate, compute, generate, create (technical artifacts)", "- Apply, set, configure (technical settings)", "- Save, write, store (without user context)", "", "These are implementation mechanisms, not user/system behaviors", "They should be steps within stories that describe outcomes", "", "Instead, ask:", "- What does the user/system experience? (story)", "- How is it implemented? (step within story)", "- What's the outcome? (story)", "- What's the mechanism? (step)"]}}], "scanner": "agile_bot.bots.base_bot.src.scanners.implementation_details_scanner.ImplementationDetailsScanner"}}, {"rule_file": "refine_scope_to_functional_accomplishment.json", "rule_content": {"description": "Refine Scope to Functional Accomplishment", "examples": [{"do": {"description": "Focus on functional outcomes, not mechanisms", "content": ["Focus on functional outcomes, not mechanisms", "Frame domains by what they accomplish for users", "Ask about user enablement: What does this enable the user to do or understand?", "State the transformation or capability provided", "Be specific about the functional benefit"]}, "dont": {"description": "Don't frame domains by their technical implementation", "content": ["Don't frame domains by their technical implementation", "Wrong: Focus on 'how' before 'what'", "Don't use generic system capabilities as domain names", "Wrong: Describe mechanisms instead of outcomes"]}}]}}, {"rule_file": "size_stories_3_to_12_days.json", "rule_content": {"description": "Size stories to fall within 3-12 day effort range for effective planning and frequent delivery.", "scanner": "agile_bot.bots.base_bot.src.scanners.story_sizing_scanner.StorySizingScanner", "examples": [{"do": {"description": "Create stories that represent complete flows within the effort range", "content": ["Create stories that represent complete flows within the effort range", "Example: Customer places order (complete flow, 3-5 days)", "Break/group stories so that most fall into a 3-12 day effort range", "Enable frequent feedback by decomposing the work into smaller items"]}, "dont": {"description": "Avoid stories that are too large or too small", "content": ["Avoid stories that are too large and span multiple weeks", "Don't arbitrarily decompose stories to a functional level, regardless of size", "", "Wrong Examples:", "- Order management system (too large, 20+ days)", "- Create stories that are too small without considering value"]}}]}}, {"rule_file": "story_map_code_approach.json", "rule_content": {"description": "Quick checklist for extracting story maps from code. Follow this process step-by-step.", "steps": [{"step": 1, "title": "Find Outermost Layer and Entry Points", "checklist": ["Locate CLI commands (main(), argparse, command handlers)", "Locate UI entry points (routes, event handlers, button clicks)", "Locate MCP server tool definitions (tool names, parameters)", "Locate API contracts (REST endpoints, GraphQL, WSDL)", "Locate WebSocket handlers, message queues, event listeners", "Locate acceptance tests (end-to-end, integration, BDD/Gherkin)", "Document all entry points with their parameters and return values"]}, {"step": 2, "title": "Analyze Operations and Domain Concepts", "checklist": ["List all operations from entry points (what can be invoked?)", "Identify MAJOR domain concepts (high-level entities)", "Identify MINOR domain concepts (supporting entities)", "Identify relationships between concepts", "Document operation names, parameters, return values", "Document concept names, properties, relationships"]}, {"step": 3, "title": "Create Epics Based on Higher-Order Goals", "checklist": ["Group operations by higher-order goals (what is user/system trying to accomplish?)", "Create epics from goals, not from implementation structure", "Each epic represents a major capability or lifecycle stage", "Validate: Epic name describes a goal, not a technical operation"]}, {"step": 4, "title": "Create Sub-Epics Based on Distinct Behaviors", "checklist": ["For each epic, identify distinct behaviors (different ways to accomplish goal)", "Group behaviors into sub-epics (different types, modes, contexts)", "Each sub-epic represents a distinct path or scenario", "Validate: Sub-epic name describes a behavior, not a technical mechanism"]}, {"step": 5, "title": "Identify Distinct Behaviors from Tests and Code Flow", "checklist": ["Trace through acceptance tests: what happens step by step?", "Trace through CLI commands: what's the execution flow?", "Trace through MCP tool calls: what's the sequence?", "Identify distinct behaviors at each step", "Document typical execution order", "Document error handling and alternative paths"]}, {"step": 6, "title": "Lay Out Story Journey from End-to-End Flow", "checklist": ["Start with entry point (how does user/system initiate?)", "Follow code flow through operations (what happens step by step?)", "Include error handling (what happens when things go wrong?)", "End with completion (how does it finish?)", "For each story, include:", "  - WHEN: trigger, condition, user action", "  - WHY: purpose, user need, system requirement", "  - OUTCOME: result, state change, user experience", "  - ACTOR: who performs the action", "Validate: Stories show complete journey, not isolated operations"]}, {"step": 7, "title": "Validate Story Map Quality", "checklist": ["Stories show user/system journey (not just list operations)", "Stories have context (when/why/outcome)", "Stories are specific (not generic like 'Add Sub-Epic')", "Stories represent complete accomplishments (not data access)", "Implementation details are steps, not stories", "Order follows user journey, not technical sequential_order", "Epics/sub-epics based on goals, not implementation structure"]}], "common_mistakes": ["Starting with internal classes instead of entry points", "Creating epics from class structure instead of goals", "Creating stories from every method call", "Missing context (when/why) in stories", "Making implementation details into stories", "Ordering by technical sequential_order instead of user journey", "Generic stories without specificity"]}}, {"rule_file": "use_active_behavioral_language.json", "rule_content": {"description": "When shaping stories, use active behavioral language with action verbs. Describe behaviors, not tasks or capabilities.", "context": "when shaping stories", "scanner": "agile_bot.bots.base_bot.src.scanners.active_language_scanner.ActiveLanguageScanner", "examples": [{"do": {"description": "Use action verbs to describe what happens", "content": ["Use action verbs to describe what happens", "Example: User submits order, System validates payment", "Favor active behavioral language over functional/capability breakup", "Use story maps to outline user and system behavior (NOT tasks)", "Use action verbs: submits, views, validates, sends, displays", "Describe behaviors: [Actor] [action] [object] - but actor NOT in name", "Use active behavior language: Place order (active behavior), Validate payment (active behavior)", "", "CRITICAL NAMING RULE - Actor NOT in Name:", "- Epic/Sub-Epic/Story names must be Verb-Noun format: '[Verb] [Noun]'", "- Actor is documented separately, NOT included in the name", "- Verb can be in various forms: imperative ('Add'), infinitive ('To Add'), third person ('Adds') - all are acceptable", "- Noun can be singular or plural based on context - DO NOT pluralize unnecessarily", "- Prepositional phrases and context are part of the noun phrase and should be preserved (e.g., 'Add Minion To Mob' is correct)", "- Examples: Epic 'Places Order' (actor: Customer, documented separately)", "- Examples: Sub-Epic 'Validates Payment' (actor: PaymentValidator, documented separately)", "- Examples: Story 'Updates Stock' (actor: InventoryManager, documented separately)", "- Examples: Story 'Add Minion To Mob' (verb-noun with context preserved - CORRECT)", "- Examples: Story 'Group Minions' (verb-noun, plural noun is correct for context - CORRECT)", "", "ACTOR SELECTION (documented separately, not in name):", "- For user/system stories: Use human/system actors (User, System, Developer, Customer)", "- For technical stories (deep internal): Domain concepts can be actors (OrderProcessor, PaymentValidator, InventoryManager, Cart, Product)", "- Actor is implicit or explicitly documented, but NOT in the name string"]}, "dont": {"description": "Avoid capability nouns and task language", "content": ["Avoid capability nouns that describe functions rather than behaviors", "Don't use functional or capability-based language instead of behavioral language", "Don't use capability nouns: Management, Processing, Administration", "Don't use task verbs: implement, create, build, set up", "Don't use task language", "", "Wrong Examples:", "- Order Management, Payment Processing (capability nouns)", "- Focus on tasks instead of behaviors", "- Order Management (capability), Implement order placement (task)", "", "Wrong Examples (actor in name):", "- Epic: 'Customer Places Order' (actor in name - WRONG)", "- Sub-Epic: 'OrderProcessor Validates Payment' (actor in name - WRONG)", "- Sub-Epic: 'Cart Adds Product' (actor in name - WRONG)", "- Story: 'InventoryManager Updates Stock' (actor in name - WRONG)", "", "Correct: Name is Verb-Noun only, actor documented separately"]}}]}}, {"rule_file": "use_outcome_verbs_not_communication_verbs.json", "rule_content": {"description": "Use Outcome Verbs, Not Communication Verbs", "scanner": "agile_bot.bots.base_bot.src.scanners.communication_verb_scanner.CommunicationVerbScanner", "examples": [{"do": {"description": "Use verbs that describe artifacts/outcomes", "content": ["Use verbs that describe artifacts/outcomes", "Examples: Animation, Feedback, Indicators, Configuration", "Name concepts by what they ARE or CREATE", "Examples: Power Activation Animation, Combat Outcome Feedback", "Focus on tangible results", "Examples: Hit Indicators, Save Result Feedback"]}, "dont": {"description": "Don't use generic communication verbs", "content": ["Don't use generic communication verbs", "Examples: showing, displaying, visualizing, presenting", "Don't use vague enablement verbs", "Examples: providing, enabling, allowing", "Don't name concepts by their mechanism", "Wrong Examples: Visualizing Power Activation, Showing Combat Results"]}}]}}], "token_estimate": 52315}}}, "15": {"action_state": "story_bot.1_shape.build_knowledge", "status": "started", "timestamp": "2025-12-11T13:36:06.625587"}, "16": {"action_state": "story_bot.1_shape.build_knowledge", "status": "completed", "timestamp": "2025-12-11T13:36:06.665703", "outputs": {"instructions": {"action": "build_knowledge", "behavior": "1_shape", "base_instructions": ["**MANDATORY: Before generating any content, you MUST load and review the project's context files:**", "1. Load `{project_area}/docs/stories/clarification.json` - Contains key questions and evidence (generated file)", "2. Load `{project_area}/docs/stories/planning.json` - Contains assumptions and decisions (generated file)", "3. Load `{project_area}/docs/context/*` (or similar) - Original input/source material (original context)", "", "These files contain critical requirements, decisions, and context that MUST be incorporated into all generated content.", "", "", "**BUILD KNOWLEDGE GRAPH (Structured JSON Content):**", "Generate the knowledge graph as structured JSON content following the rules and schema provided. ", "**Schema:** Use schema '**Schema Rules:**\n- **Hierarchical**: sub_epics can contain: nested sub_epics or story_groups. sequential_order is always an integer (1, 2, 3, 4) - unique within parent, no decimals.\n- **Connector**: Story groups: 'and' or 'or' (null for first group). Stories within groups: 'and' or 'or' (null for first story). Epics and sub_epics don't have connectors.\n- **Domain Placement**: domain_concepts: 'local' if relevant to single sub_epic, 'global' if relevant to multiple sub_epics. Place at most specific level (local preferred), but elevate to parent if used by multiple children.\n\n**Template Structure (JSON Schema):**\n```json\n{\n  \"_explanation\": {\n    \"hierarchical\": \"sub_epics can contain: nested sub_epics or story_groups. sequential_order is always an integer (1, 2, 3, 4) - unique within parent, no decimals.\",\n    \"connector\": \"Story groups: 'and' or 'or' (null for first group). Stories within groups: 'and' or 'or' (null for first story). Epics and sub_epics don't have connectors.\",\n    \"domain_placement\": \"domain_concepts: 'local' if relevant to single sub_epic, 'global' if relevant to multiple sub_epics. Place at most specific level (local preferred), but elevate to parent if used by multiple children.\"\n  },\n  \"epics\": [\n    {\n      \"name\": \"\",\n      \"sequential_order\": 1,\n      \"estimated_stories\": null,\n      \"domain_concepts\": [\n        {\n          \"name\": \"\",\n          \"responsibilities\": [\n            {\n              \"name\": \"\",\n              \"collaborators\": []\n            }\n          ]\n        }\n      ],\n      \"sub_epics\": [\n        {\n          \"name\": \"\",\n          \"sequential_order\": 1,\n          \"estimated_stories\": null,\n          \"domain_concepts\": [\n            {\n              \"name\": \"\",\n              \"responsibilities\": [\n                {\n                  \"name\": \"\",\n                  \"collaborators\": []\n                }\n              ]\n            }\n          ],\n          \"sub_epics\": [],\n          \"story_groups\": [\n            {\n              \"type\": \"and\",\n              \"connector\": null,\n              \"sequential_order\": 1,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 2,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            },\n            {\n              \"type\": \"and\",\n              \"connector\": \"or\",\n              \"sequential_order\": 2,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 2,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 3,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            },\n            {\n              \"type\": \"or\",\n              \"connector\": \"or\",\n              \"sequential_order\": 3,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            }\n          ]\n        }\n      ],\n      \"stories\": []\n    }\n  ]\n}\n```'  --> load from behavior data files", "", "**Description:** Create a story map and domain model outline that captures the user's journey through epics, features, and stories, and captures domain model concepts and requirements Goal: Shape both story map and domain model together from user context - capture domain concepts, responsibilities, and requirements alongside story structure", "", "Hey, going to be going away for a little while to create the knowledge graph. Go get a cup of coffee \ud83d\ude0a", "", "**BUILD KNOWLEDGE GRAPH - STORY GRAPH AND DOMAIN MODEL CREATION:**", "", "Build the initial story graph structure AND domain model from gathered context and planning decisions. Capture domain concepts alongside story structure.", "", "**Configuration:**", "- Reference: build_story_graph_outline.json", "- Template: story-graph-outline.json", "", "**CRITICAL - TEMPLATE STRUCTURE COMPLIANCE:**", "1. The build_knowledge action has injected 'knowledge_graph_template' into your instructions", "2. This template shows the EXACT JSON structure your output MUST match", "3. **DO NOT invent your own schema** - examine the template and replicate its structure", "4. The template includes:", "   - Root level keys (e.g., 'epics' array only, NOT 'capability', 'increments', 'features')", "   - Required fields at each level (e.g., 'sequential_order', 'estimated_stories', 'domain_concepts')", "   - Nested structure (epics \u2192 sub_epics \u2192 story_groups \u2192 stories)", "   - Field types and formats (e.g., 'connector': null vs 'connector': 'and')", "5. Look at the '_explanation' section in the template for structural rules", "6. Your output must be structurally identical - only the values (names, responsibilities, etc.) differ", "", "**CRITICAL: Story Graph Structure - Main Epics Section is Single Source of Truth**", "", "**Two-Section Architecture (if increments are added later):**", "", "1. **Main 'epics' Section (Single Source of Truth)**", "   - Contains ALL story details: name, users, sequential_order, story_type, connector, story_groups, etc.", "   - This is the PRIMARY location - all story details must be here", "   - Used as the source for all views (outline, increments, discovery, exploration)", "", "2. **'increments' Section (Minimal Reference View - if present)**", "   - This is a MINIMAL REFERENCE VIEW - just enough to know which stories belong to which increment", "   - Stories in increments should ONLY contain: name, users (optional), sequential_order", "   - NO story details (no story_type, no connector, no story_groups, no domain_concepts, etc.)", "   - Increments are a COPY of the outline view at the story level - just for mapping stories to increments", "   - All story details come from the main epics section", "", "**Domain Model Creation (Integrated with Story Graph):**", "1. Domain concepts are integrated directly into the story graph structure", "2. Place domain_concepts at epic and sub_epic levels based on relevance", "3. Apply domain shaping rules (context: 'when shaping the domain')", "4. **DO NOT create separate domain_graph.json or domain model files**", "5. All domain modeling is captured within story-graph.json via domain_concepts arrays", "", "**Domain Concept Placement Logic:**", "- **Local placement (preferred)**: Place domain_concepts at the sub_epic level when they are relevant to only that sub_epic", "- **Global placement**: Elevate domain_concepts to parent epic/sub_epic level when they are relevant to multiple child sub_epics", "- **Favor local**: Start with local placement, but elevate if the concept is used by multiple sub_epics", "**Process:**", "1. Use clarification data from docs/stories/clarification.json", "2. Use planning decisions from docs/stories/planning.json", "3. **EXAMINE the knowledge_graph_template structure injected into your instructions**", "4. Build story graph matching that exact structure (root keys, field names, nesting)", "5. Identify domain concepts from clarification and planning data", "6. Map domain concepts to epics/sub_epics based on relevance (see placement logic above)", "7. Populate domain_concepts arrays in story-graph.json with proper placement", "8. Create story-graph.json in project area", "7. Populate domain_concepts arrays in story-graph.json with proper placement", "8. Create story-graph.json and domain model outputs in project area (same location)", "", "**Output:**", "- File: {project_area}/story-graph.json (JSON story graph with epics, sub_epics, story_groups, stories, and domain_concepts integrated)", "", "**Next Step:** Proceed to render step after story graph is created.", "", "", "Before generating any content, review ALL validation rules below. Your generated content MUST comply with every rule to avoid violations.", "", "**Behavior-level rules:**", "", "**Rule:** rules\\maintain_verb_noun_consistency.json", "Maintain verb-noun consistency from epic to feature to story to scenario", "", "**DO:**", "- Use consistent verb-noun language across all levels: Epic: Manage Orders \u2192 Feature: Place Order \u2192 Story: Customer places order \u2192 Scenario: When customer places order...", "- Maintain consistent terminology throughout hierarchy: Epic, feature, story, and scenario all use same verb-noun pattern", "- Use verb-noun language in scenario sentences: When user submits form, then system validates data", "", "**DON'T:**", "- Don't switch formats between levels: Epic: Order Management \u2192 Feature: Place Order (inconsistent format)", "- Don't mix verb-noun with other formats: Epic uses verb-noun, but feature uses noun-only format", "- Don't use different terminology at different levels: Epic says 'Orders', feature says 'Order Processing', story says 'Process Order'", "", "", "**Rule:** rules\\map_sequential_spine_vs_optional_paths.json", "When mapping stories, carefully distinguish between sequential spine (essential path) and optional paths, alternate routes, or additional functionality that is not strictly essential. Sequential stories form the mandatory flow; optional stories are alternatives, enhancements, or non-essential features.", "", "**DO:**", "- Identify the essential spine first: Start by identifying the minimal essential path that delivers core value", "The spine represents the mandatory sequence: Story1 AND Story2 AND Story3", "Spine stories get sequential_order numbers (1, 2, 3, etc.)", "Spine stories are required for the feature to deliver its core purpose", "Ask: 'What is the minimum path to deliver value?'", "- Mark optional paths clearly: Optional stories branch from or enhance the spine but are not required", "Mark optional stories with 'optional: true' in the story structure", "Optional stories may have sequential_order if they're part of an alternative flow", "Optional stories represent: alternate routes, enhancements, nice-to-have features", "Ask: 'Can the feature deliver value without this story?'", "- Distinguish types of optional paths with concrete examples: Alternate routes: User logs in with email (sequential_order: 2) OR User logs in with social media (sequential_order: 2.1, optional: true)", "Enhancements: User views dashboard (sequential_order: 3) AND User customizes dashboard (sequential_order: 3.1, optional: true)", "Additional functionality: User views dashboard (sequential_order: 3) AND User shares dashboard (sequential_order: 3.2, optional: true)", "Error handling: User enters invalid data (sequential_order: 4) AND System shows error message (sequential_order: 4.1, optional: true)", "- Correct mapping examples: Spine: User creates account (sequential_order: 1) AND User logs in (sequential_order: 2) AND User views dashboard (sequential_order: 3)", "Optional alternate: User logs in with email (sequential_order: 2) OR User logs in with social media (sequential_order: 2, optional: true)", "Optional enhancement: User views dashboard (sequential_order: 3) AND User customizes dashboard (optional: true, priority: 1)", "Additional functionality: User views dashboard (sequential_order: 3) AND User shares dashboard (optional: true, priority: 2)", "", "**DON'T:**", "- Don't mark everything as sequential: Don't assign sequential_order to all stories when some are optional", "Don't treat alternate routes as part of the spine", "Don't include enhancements in the mandatory sequential flow", "Don't confuse 'nice to have' with 'must have'", "- Don't omit optional markers: Don't leave optional stories unmarked - be explicit", "Don't assume all stories in a feature are mandatory", "Don't mix optional and mandatory without clear distinction", "Don't fail to identify the spine before adding optional paths", "- Wrong mapping examples: Wrong: User creates account (1) AND User logs in with email (2) AND User logs in with social media (3) - social media should be optional", "Wrong: User views dashboard (1) AND User customizes dashboard (2) AND User shares dashboard (3) - customization and sharing should be optional", "Wrong: All stories marked mandatory when some are clearly alternatives or enhancements", "Wrong: No distinction between essential path and optional features", "", "", "**Rule:** rules\\stories_developed_and_tested_in_days.json", "Write stories that can be developed and tested in a matter of days", "", "**DO:**", "- Create stories sized for days, not weeks: Story takes 3-5 days to develop and test completely", "- Break large work into smaller stories: Large feature broken into multiple stories, each completable in days", "- Focus on delivering complete, testable functionality quickly: Each story delivers a complete piece of functionality that can be tested", "", "**DON'T:**", "- Don't create stories that span multiple weeks: Story requires 3+ weeks to complete (too large)", "- Don't create stories that can't be tested independently: Story requires multiple other stories before it can be tested", "- Don't create stories without clear boundaries: Story is vague about scope and completion criteria", "", "", "**Rule:** rules\\stories_follow_invest_principles.json", "Ensure stories follow INVEST principles (Independent, Negotiable, Valuable, Estimable, Small, Testable)", "", "**DO:**", "- Independent - story can be developed independently: Story doesn't depend on other stories being completed first", "- Negotiable - story details can be negotiated: Story allows for discussion and refinement of requirements", "- Valuable - story delivers value to user or business: Story provides measurable value when completed", "- Estimable - story can be estimated: Story is clear enough to estimate effort", "- Small - story can be completed in short time: Story can be developed and tested in a matter of days", "- Testable - story has clear acceptance criteria: Story has testable outcomes that can be verified", "", "**DON'T:**", "- Don't create stories that depend on multiple other stories: Story requires 5 other stories to be completed first (not independent)", "- Don't create stories that are too large: Story spans multiple weeks and includes multiple features (not small)", "- Don't create stories without clear value: Story doesn't provide measurable value to users or business", "", "", "**Rule:** rules\\story_names_must_follow_verb_noun_format.json", "CRITICAL: Story names MUST follow Verb-Noun format (e.g., 'Move To Mob Leaders Turn', 'Determines Target from Strategy', 'Initiate Mob Attack'), and include italicized description showing component interactions (e.g., '*Combat Tracker moves to any mob member's turn, auto moves to mob leader's turn*'). The story name should be concise and action-oriented, while the description shows the component-to-component interactions.", "", "**DO:**", "- Use concise Verb-Noun format for story names: Move To Mob Leaders Turn, Determines Target from Strategy, Initiate Mob Attack", "- Include italicized description showing component interactions: *Combat Tracker moves to any mob member's turn, auto moves to mob leader's turn*", "- Make story name concise and action-oriented: Story name: 'Initiate Mob Attack' - concise and action-oriented", "- Show component interactions in description: Story description shows how components interact with each other", "", "**DON'T:**", "- Don't use long descriptive names without Verb-Noun format: The system should allow users to move to mob leaders turn when...", "- Don't omit component interaction descriptions: Story name without italicized description of component interactions", "- Don't use vague or non-action-oriented names: Mob Leader Turn System, Attack Mechanism", "", "", "**Rule:** rules\\use_active_behavioral_language.json", "Use active behavioral language with action verbs. Describe behaviors, not tasks or capabilities.", "", "**DO:** Use action verbs to describe what happens", "Use action verbs to describe what happens", "Example: User submits order, System validates payment", "Favor active behavioral language over functional/capability breakup", "Use story maps to outline user and system behavior (NOT tasks)", "Use action verbs: submits, views, validates, sends, displays", "Describe behaviors: [Actor] [action] [object]", "Use active behavior language: Place order (active behavior), Validate payment (active behavior)", "", "**DON'T:** Avoid capability nouns and task language", "Avoid capability nouns that describe functions rather than behaviors", "Don't use functional or capability-based language instead of behavioral language", "Don't use capability nouns: Management, Processing, Administration", "Don't use task verbs: implement, create, build, set up", "Don't use task language", "", "Wrong Examples:", "- Order Management, Payment Processing (capability nouns)", "- Focus on tasks instead of behaviors", "- Order Management (capability), Implement order placement (task)", "", "", "**Rule:** rules\\use_verb_noun_format_for_story_elements.json", "Use verb-noun format for all story elements (epic names, feature names, story titles)", "", "**DO:**", "- Use verb-noun format for epic names: Manage Orders, Create Character, Process Payment", "- Use verb-noun format for feature names: Place Order, Validate Payment, Save Character", "- Use verb-noun format for story titles: Customer places order, System validates payment, User saves character", "- Use verb-noun format for scenario sentences: User submits form, System processes request", "", "**DON'T:**", "- Don't use noun-only or capability-based names: Order Management, Payment Processing, Character System", "- Don't mix verb-noun with other formats: Order Management and Place Order (mixed format)", "- Don't use gerund forms: Ordering, Processing Payments, Creating Characters", "", "", "**Rule:** apply_7_plus_minus_2_hierarchy.json", "Apply 7\u00b12 rule for hierarchy: epics contain 4-9 sub-epics, sub-epics contain 4-9 stories. Split when exceeding, merge when below minimum.", "", "**DO:** Maintain hierarchy within the 7\u00b12 cognitive limit range", "(E) Epic: Contains 4-9 sub-epics", "  - Split into additional Sub-Epics when > 9 sub-epics", "  - Merge with another epic when < 4 sub-epics", "(E) Sub-Epic: Contains 4-9 stories", "  - Split into 2 sub-epics when > 9 stories", "  - Merge with another sub-epic when < 4 stories", "(S) Story: Contains 2-9 acceptance criteria", "  - Split into 2 stories when > 9 AC", "  - Merge with another story when < 2 AC (single AC stories are too small)", "Apply 7\u00b12 cognitive limit principle (optimal range: 5-9, acceptable: 4-9)", "", "Example:", "(E) Manage Orders (10 sub-epics \u2192 SPLIT)", "  and (E) Manage Customer Orders (6 stories) \u2713", "  and (E) Manage Order Fulfillment (4 stories) \u2713", "", "(E) Place Order (12 stories \u2192 SPLIT)", "  and (S) Initiate Order (6 AC) \u2713", "  and (S) Complete Order (6 AC) \u2713", "", "(S) Validate Payment (11 AC \u2192 SPLIT)", "  and (AC) Check Payment Method (5 steps) \u2713", "  and (AC) Process Payment Transaction (6 steps) \u2713", "", "**DON'T:** Don't exceed thresholds or create items below minimum", "Create epics with > 9 sub-epics (use additional Sub-Epics instead)", "Create sub-epics with > 9 stories (split the sub-epic)", "Create stories with > 9 acceptance criteria (split the story)", "Create very small stories with < 2 AC (merge with related story)", "Ignore sizing thresholds during shaping, discovery, or exploration", "", "Wrong Examples:", "- (E) Epic with 15 sub-epics (too many, use additional Sub-Epics)", "- (E) Sub-Epic with 15 stories (too many, split sub-epic)", "- (S) Story with 15 AC (too many, split story)", "- (S) Story with 1 AC (too small, merge with related story)", "", "", "**Rule:** avoid_noun_redundancy.json", "When shaping stories, avoid noun redundancy in domain and concept names", "", "**DO:** INTEGRATE first: nest related capabilities under one domain", "INTEGRATE first: nest related capabilities under one domain (90% of cases)", "Only then rename: use distinct nouns ONLY when integration doesn't make sense", "Test for uniqueness: Can you remove the qualifier and still know what it is?", "Use subject-area nouns when domains are genuinely separate", "Only when integration truly doesn't make sense", "", "**DON'T:** Don't rename without considering integration", "Don't rename without considering integration (this hides the real issue)", "Wrong: Repeat same noun with different prefixes: X Animation, Y Animation, Z Animation", "Don't use vague qualifiers to avoid integration", "Wrong: Animation 1, Animation System", "Don't create parallel domains that should be nested", "Wrong: Integrate related concepts rather than creating redundant structures", "", "", "**Rule:** avoid_technical_implementation_language.json", "When shaping stories, avoid technical implementation language in user-facing story elements", "", "**DO:**", "- Use business language in user-facing elements: Customer places order, User views profile, Admin approves request", "- Focus on what user experiences, not how it's implemented: Story describes user experience, not technical implementation", "", "**DON'T:**", "- Don't use development task language: implement, create, refactor, optimize, fix, build, set up", "- Don't use technical implementation details: query database, call API, update table", "- Don't focus on delivery or development tasks: Implement order system, Create database schema, Set up API endpoints", "- Don't focus on system internals: Optimize query performance, Refactor authentication code, Update configuration", "", "", "**Rule:** avoid_technical_stories.json", "Technical stories represent implementation tasks that do not describe system behavior. They are normally avoided in favor of user stories and system stories. When technical stories are necessary, they should be marked with story_type: 'technical' and kept minimal.", "", "**DO:**", "- Prefer user stories and system stories over technical stories: Instead of 'Set up database schema', use 'Store user data' (user story)", "Instead of 'Create API endpoint', use 'Expose user data via API' (system story)", "Instead of 'Write unit tests', use 'Verify story behavior' (user story)", "- When technical stories are necessary, mark with story_type: 'technical': Story: 'Migrate legacy data format' with story_type: 'technical'", "Story: 'Refactor authentication module' with story_type: 'technical'", "Story: 'Update dependency versions' with story_type: 'technical'", "- Keep technical stories minimal and focused: Technical stories should be rare exceptions", "Technical stories should still follow Verb-Noun format", "Technical stories should be clearly justified", "", "**DON'T:**", "- Don't create technical stories for normal development work: Avoid: 'Write code', 'Create class', 'Add method'", "Avoid: 'Set up CI/CD', 'Configure database', 'Install package'", "These are implementation details, not stories", "- Don't use technical stories to describe system behavior: Use system stories for system-to-system behavior", "Use user stories for user-facing behavior", "Technical stories are for unavoidable implementation tasks only", "", "", "**Rule:** balance_fine_grained_testable_stories.json", "Balance fine-grained stories with testable and valuable independent units. Stories must deliver value and be independently testable.", "", "**DO:** Create stories that are complete interactions with value", "Create stories that are complete interactions with value", "Example: Customer places order (complete interaction, testable, valuable)", "Balance fine-grained stories with testable/valuable stories", "Ensure stories are fine-grained enough to enable frequent feedback", "Ensure stories are grouped into meaningful chunks for high quality feedback", "Stories that deliver measurable value independently", "", "**DON'T:** Avoid stories that are too small or too large", "Avoid stories that are too small and have no value alone", "Don't create stories that are too fine-grained without being testable or valuable", "Don't create stories that are too large to be testable or deliverable quickly", "", "Wrong Examples:", "- Add order button (too fine-grained, no value alone)", "- Change button color (too fine-grained, no value)", "- Customer places order and views history and updates profile (too large, multiple flows)", "", "", "**Rule:** create_lightweight_precise_docs.json", "Create lightweight but precise documentation during shaping. Focus on structure and scope, not detailed specifications.", "", "**DO:** Create lightweight but precise documentation during shaping", "Balance fine-grained stories with testable/valuable stories", "Ensure stories are fine-grained enough to enable frequent feedback", "Ensure stories are grouped into meaningful chunks for high quality feedback", "Validate that a business expert can understand the language of most of the stories", "Focus the language on the business domain", "Create lightweight but precise documentation", "Focus on structure and scope, not detailed specifications", "Make the map easy to walk through (it tells a story)", "", "Example:", "(E) Manage Orders", "  and (E) Place Order", "    and (S) Customer --> places order", "(Shows hierarchy and structure, not detailed specs)", "", "**DON'T:** Don't over-elaborate or add detailed specifications during shaping", "Create stories that are too fine-grained without being testable or valuable", "Create stories that are too large to be testable or deliverable quickly", "Add detailed technical specifications during shaping phase", "Over-elaborate story mapping during shaping", "", "Wrong Example:", "(E) Manage Orders", "  and (E) Place Order", "    and (S) Customer --> places order", "  \u2192 Detailed API specs, database schema, UI mockups", "(Too much detail for shaping phase)", "", "", "**Rule:** discover_relationships_from_story_map.json", "Domain Discovery determines relationships and responsibilities between core domain objects by walking through the story map, then suggests story refinements to rebuild the story map to complement the domain model.", "", "**DO:** Extract keywords from story map and determine relationships and responsibilities", "Go through all stories in increment scope, extract keywords from story titles/descriptions/acceptance criteria, ask clarifying questions for each keyword, map relationships with multiplicities, document responsibilities", "", "**DON'T:** Don't skip keyword identification or build domain model without story map analysis", "Skip going through stories, ignore keywords in acceptance criteria, build domain model without asking what keywords mean, use technical terms instead of domain terms", "", "", "**Rule:** enforce_behavioral_journey_flow.json", "When shaping stories, CRITICAL: Stories must show user/system journey flow, not just list operations. Stories must include context (when/why actions happen) and connect logically. Order by user journey, not technical sequential_order.", "", "**DO:** Show user/system journey with context and flow", "Stories must show WHEN and WHY actions happen, not just WHAT", "Story maps must show logical flow: Initialize \u2192 Validate \u2192 Process \u2192 Confirm \u2192 Complete", "Each story must connect to previous/next stories in the journey", "Order stories by user journey flow, not by technical sequential_order", "", "Correct Examples (with journey context - Payment Domain):", "(E) Process Payment", "  and (E) Process Card Payment", "    and (S) User --> invokes process payment command", "    and (S) System --> validates payment details", "    and (S) System --> authorizes payment", "    and (S) System --> processes payment transaction", "    and (S) System --> confirms payment and sends notification", "", "(E) Refund Payment", "  and (E) Process Refund", "    and (S) User --> invokes refund payment command", "    and (S) System --> validates refund eligibility", "    and (S) System --> processes refund transaction", "    and (S) System --> confirms refund and sends notification", "", "(E) Process Payment", "  and (E) Validate Payment", "    and (S) User --> submits payment request", "    and (S) System --> validates card number", "    and (S) System --> validates amount", "    and (S) System --> validates currency", "    and (S) System --> returns validation result", "", "Note: Individual stories like 'Authorize Payment with Processor' are correct story format (verb-noun, specific), but they need to be part of a journey. Stories should NOT include actors in the name (actors are documented separately).", "", "Correct Individual Stories (but need journey context):", "- 'Authorize Payment with Processor' (correct story format, but needs: when? why? what happens next?)", "- 'Validate Payment Details' (correct story format, but needs: when? why? what triggers this?)", "- 'Process Payment Transaction' (correct story format, but needs: when? why? what happens before/after?)", "", "Journey Flow Requirements:", "- Start with initialization/entry point", "- Show logical progression through operations", "- Include error handling and alternative paths", "- End with completion/save operations", "- Connect stories logically (this leads to that)", "", "**DON'T:** Don't create isolated sets of functions that don't make sense linearly", "Don't group unrelated operations together that don't form a logical journey", "Don't create story maps with random functions that have no linear relationship", "Don't mix unrelated operations from different domains or contexts", "", "Wrong Examples (isolated sets of functions, no linear sense - Payment Domain):", "(E) Payment Operations", "  and (E) Process Payment", "  and (E) Generate Invoice", "  and (E) Send Email", "  and (E) Update Inventory", "  and (E) Calculate Tax", "(unrelated operations, no linear flow - why does email come after payment? why inventory? no journey)", "", "(E) Payment System", "  and (E) Authorize Payment", "  and (E) Create User Account", "  and (E) Process Refund", "  and (E) Generate Report", "  and (E) Delete Transaction", "(random operations, no logical sequence - account creation doesn't follow authorization, deletion doesn't follow processing)", "", "(E) Payment Flow", "  and (S) System --> validates payment", "  and (S) System --> sends notification", "  and (S) System --> authorizes payment", "  and (S) System --> updates database", "  and (S) System --> processes payment", "(wrong order, no linear sense - notification before authorization? database update before processing?)", "", "What Makes It NOT a Linear Journey:", "- Unrelated operations grouped together (payment + inventory + email + tax - why together?)", "- Operations from different contexts mixed (payment + user account + reporting - different domains)", "- No logical sequence (why does X come before Y? no reason)", "- Operations can be in any order (no dependencies, no flow)", "- Random collection of functions (like a function library, not a journey)", "- No user/system goal that connects them (what are we trying to accomplish?)", "", "", "**Rule:** enforce_functional_accomplishment.json", "CRITICAL: Stories must represent complete functional accomplishments, not data access operations or implementation steps. Stories must deliver value independently.", "", "**DO:** Create stories that accomplish complete functions", "Stories must represent complete functional accomplishments", "Stories must deliver value independently (INVEST principle)", "Stories must show end-to-end flow, not just data access", "", "Correct Examples (complete functional accomplishments):", "- 'User loads story graph and system displays epics in diagram' (complete: load + display = accomplishment)", "- 'Developer edits epic name and system updates diagram' (complete: edit + update = accomplishment)", "- 'User requests render and system generates DrawIO file' (complete: request + generate = accomplishment)", "- 'CLI invokes render command and system saves outline diagram' (complete: invoke + save = accomplishment)", "", "Functional Accomplishment Requirements:", "- Story must accomplish something meaningful for user/system", "- Story must be independently valuable (can be tested/delivered alone)", "- Story must show complete flow (start \u2192 process \u2192 outcome)", "- Story must have clear acceptance criteria (how do we know it's done?)", "", "**DON'T:** Don't create stories that are just data access or implementation steps", "Don't create stories that are just data access operations", "Don't create stories that are implementation steps without outcomes", "Don't create stories that aren't independently valuable", "", "Wrong Examples (not complete accomplishments):", "- 'Read All Epics from Diagram' (data access - not accomplishment, what happens with the data?)", "- 'Load All Features In Graph Epic' (data access - not accomplishment)", "- 'Serialize Components to JSON' (implementation step - not accomplishment, part of what story?)", "- 'Convert Diagram to StoryGraph Format' (implementation step - not accomplishment)", "- 'Calculate Component Positions' (implementation step - not accomplishment)", "", "Data Access/Implementation Indicators (REJECT as stories):", "- Just reads/loads data without using it", "- Just converts/formats data without purpose", "- Just calculates/computes without outcome", "- Just serializes/saves without context", "", "These should be STEPS within stories, not stories themselves:", "- Step: 'System reads epics from diagram' (within story: 'User views story map and system displays epics')", "- Step: 'System serializes components' (within story: 'User saves story graph and system writes JSON file')", "- Step: 'System calculates positions' (within story: 'User requests render and system generates positioned diagram')", "", "Instead, ask:", "- What does the user/system accomplish with this?", "- Is this independently valuable?", "- Can this be tested/delivered alone?", "- What's the complete flow from start to finish?", "", "", "**Rule:** enforce_specificity_in_stories.json", "CRITICAL: Stories must be specific about what, when, why, and who. Generic operations like 'Add Sub-Epic' or 'Read Epics' are insufficient - stories must include context and specificity.", "", "**DO:** Create specific stories with full context", "Stories must be specific about what, when, why, and who", "Stories must include context: when does it happen? why? what triggers it?", "Stories must specify actors, objects, and outcomes clearly", "", "Correct Examples (specific with context - Payment Domain):", "- 'User processes payment for order #12345 with amount $50.00 when customer completes checkout' (specific: user, order ID, amount, context)", "- 'Merchant invokes refund command from API and system reverses payment transaction' (specific: merchant, API, command, outcome)", "- 'System validates payment card number 4111-1111-1111-1111 when user submits payment form' (specific: system, card number, trigger)", "- 'User clicks Process Payment button and system prompts for payment method selection' (specific: user, action, UI element, system response)", "", "Specificity Requirements:", "- WHO: Specific actor (User, Merchant, Customer, System, PaymentProcessor, API)", "- WHAT: Specific action and object (processes payment for order #12345 with amount $50.00)", "- WHEN: Specific trigger/context (when customer completes checkout, when user submits payment form)", "- WHY: Purpose in journey (to complete purchase transaction, to reverse payment error)", "- OUTCOME: Specific result (payment processed, transaction ID returned, notification sent)", "", "**DON'T:** Don't create generic stories without context", "Don't create generic operations without specificity", "Don't omit context about when/why actions happen", "Don't use vague descriptions without details", "", "Wrong Examples (generic without context - Payment Domain):", "- 'Process Payment' (which payment? for which order? when? why?)", "- 'Authorize Payment' (which payment? with which card? when? why? what happens next?)", "- 'Exposes Payment API' (which endpoints? to whom? when? why?)", "- 'Refund Payment' (which payment? for which reason? when? why?)", "", "Generic Indicators (REJECT or require more specificity):", "- Single verb + noun without context: 'Process Payment', 'Authorize Payment', 'Refund Payment'", "- No specific objects: 'Process Payment' (which payment? which order?)", "- No context: 'Authorize Payment' (when? why? what triggers this?)", "- No outcome: 'Authorize Payment' (what happens with the authorization result?)", "", "Instead, ask:", "- Which specific object? (payment ID, order number, transaction ID, card number)", "- When does this happen? (trigger, context, user action - when customer completes checkout, when merchant requests refund)", "- Why does this happen? (purpose, user need, journey step - to complete purchase, to reverse error)", "- What's the outcome? (result, system response, user experience - payment processed, transaction ID returned, notification sent)", "", "", "**Rule:** establish_spine_vs_optional_enhanced_behavior.json", "Establish mandatory spine stories vs optional/enhanced behavior stories. When mapping stories, carefully distinguish between sequential spine (essential path) and optional paths, alternate routes, or additional functionality that is not strictly essential. Mandatory stories form the sequential spine (story AND story AND story). Optional stories are alternatives or enhancements (story OR story) that branch from the spine and can return to it. Sequential stories form the mandatory flow; optional stories are alternatives, enhancements, or non-essential sub-epics.", "", "**DO:** Identify the essential spine first", "Start by identifying the minimal essential path that delivers core value", "The spine represents the mandatory sequence: Story1 AND Story2 AND Story3", "Spine stories get sequential_order numbers (1, 2, 3, etc.)", "Spine stories are required for the sub-epic to deliver its core purpose", "Ask: 'What is the minimum path to deliver value?'", "Establish the mandatory spine before identifying optional/enhanced behaviors", "Explicitly distinguish between spine (mandatory) and optional/enhanced behaviors", "", "**DON'T:** Don't mark everything as sequential", "Don't assign sequential_order to all stories when some are optional", "Don't treat alternate routes as part of the spine", "Don't include enhancements in the mandatory sequential flow", "Don't confuse 'nice to have' with 'must have'", "Don't mark all stories as mandatory when some are alternatives or enhancements", "Don't fail to establish the spine before adding optional/enhanced behaviors", "", "**DO:** Mark optional paths clearly", "Optional stories branch from or enhance the spine but are not required", "Mark optional stories with 'optional: true' in the story structure", "Optional stories may have sequential_order if they're part of an alternative flow (e.g., 2.1, 3.1, etc.)", "Optional stories represent: alternate routes, enhancements, nice-to-have sub-epics", "Ask: 'Can the sub-epic deliver value without this story?'", "Optional/enhanced stories can return to the spine after completion", "Sort optional/enhanced stories by priority of delivery within the same sub-epic", "", "**DON'T:** Don't omit optional markers", "Don't leave optional stories unmarked - be explicit", "Don't assume all stories in a sub-epic are mandatory", "Don't mix optional and mandatory without clear distinction", "Don't fail to identify the spine before adding optional paths", "Don't omit the optional marker - be explicit about spine vs optional/enhanced behaviors", "Don't create sub-epics where every story is mandatory when alternatives or enhancements exist", "", "**DO:** Distinguish types of optional paths with concrete examples", "Spine (all stories with and), then OR optional branch (all stories with and), then OR enhanced (all stories with and):", "", "Correct Example:", "Spine (all stories with and):", "  (S) User --> creates account", "  and (S) User --> logs in", "  and (S) User --> views dashboard", "OR optional branch (all stories with and):", "  (S) User --> signs in with social media (optional)", "  and (S) User --> signs in with email (optional)", "OR enhanced (all stories with and):", "  (S) User --> customizes dashboard (enhanced)", "  and (S) User --> shares dashboard (enhanced)", "", "**DON'T:** Wrong mapping examples", "Wrong: All stories marked mandatory when some are clearly alternatives or enhancements", "  and (S) User --> creates account (1)", "  and (S) User --> logs in with email (2)", "  and (S) User --> logs in with social media (3) - social media should be optional", "", "Wrong: No distinction between essential path and optional sub-epics", "  and (S) User --> views dashboard (1)", "  and (S) User --> customizes dashboard (2)", "  and (S) User --> shares dashboard (3) - customization and sharing should be optional", "", "Wrong: Missing optional markers on alternative flows or enhanced behaviors", "Wrong: Optional/enhanced stories not sorted by priority", "Wrong: No clear spine established before adding optional behaviors", "", "", "**Rule:** extract_story_map_checklist.json", "Quick checklist for extracting story maps from code. Follow this process step-by-step.", "", "", "**Rule:** extract_story_map_from_code.json", "CRITICAL: When creating story maps from code, analyze the outermost layer showing end-to-end journey. Locate acceptance tests, human code engagement points (CLI/UI), MCP server definitions, WSDL, API contracts. Analyze operations and domain for major/minor concepts. Create epics/sub-epics based on higher-order goals. Look at distinct behaviors and typical execution order to lay out story journey.", "", "**DO:** Find outermost layer and entry points", "Start with the OUTERMOST LAYER showing end-to-end journey", "Locate all HUMAN CODE ENGAGEMENT points:", "  - CLI commands and entry points (main(), command handlers)", "  - UI entry points (web routes, event handlers, button clicks)", "  - MCP server tool definitions (tool names, parameters, descriptions)", "  - API contracts (REST endpoints, GraphQL queries, WSDL operations)", "  - WebSocket handlers, message queues, event listeners", "", "Locate ACCEPTANCE TESTS:", "  - End-to-end tests that show complete user journeys", "  - Integration tests that show system-to-system flows", "  - Test scenarios that describe 'when X, then Y' behaviors", "  - BDD/Gherkin tests with Given-When-Then structure", "", "Example Entry Points to Find:", "- CLI: 'python -m story_io.story_io_cli render-outline --story-graph file.json'", "- MCP: Tool 'render_outline' with parameters 'story_graph_path', 'output_path'", "- API: POST /api/story-graph/render with body {storyGraph, outputFormat}", "- UI: Button 'Render Outline' that triggers render operation", "- Test: 'test_render_outline_from_json' that shows complete flow", "", "**DON'T:** Don't start with internal implementation details", "Don't start with internal classes or helper functions", "Don't start with data structures or domain models", "Don't start with utility functions or low-level operations", "", "Wrong Starting Points:", "- Internal class: 'StoryIODiagram.load_from_json()' (implementation detail)", "- Helper function: 'parse_story_graph()' (internal mechanism)", "- Data structure: 'Epic' class definition (domain model, not entry point)", "", "These are important but come AFTER identifying the journey", "", "**DO:** Analyze operations and domain for major/minor concepts", "Analyze OPERATIONS from entry points:", "  - What operations are exposed? (render, sync, search, edit, save)", "  - What are the operation names? (render-outline, sync-increments, search-stories)", "  - What parameters do they take? (story_graph_path, output_path, query)", "  - What do they return? (DrawIO file, JSON report, search results)", "", "Analyze DOMAIN CONCEPTS:", "  - MAJOR CONCEPTS: High-level domain entities (StoryGraph, Diagram, Epic, Sub-Epic, Story)", "  - MINOR CONCEPTS: Supporting entities (Position, Boundary, User, Increment)", "  - OPERATIONS: Actions on concepts (Load, Read, Edit, Render, Synchronize, Search, Save)", "  - RELATIONSHIPS: How concepts relate (Epic contains Sub-Epics, Sub-Epic contains Stories)", "", "Example Analysis (Story-IO Domain):", "- Operations: render-outline, render-increments, sync-outline, sync-increments, search, add-user, merge", "- Major Concepts: StoryGraph (main entity), Diagram (visual representation), Epic/Sub-Epic/Story (hierarchy)", "- Minor Concepts: Position (2D coordinate), Boundary (rectangular area), User (story actor), Increment (priority grouping)", "- Relationships: StoryGraph contains Epics, Epic contains Sub-Epics, Sub-Epic contains Stories", "", "Example Analysis (Payment Domain):", "- Operations: process-payment, refund-payment", "- Major Concepts: Payment (main entity), Transaction (financial transaction), Card (payment method), Refund (reversal)", "- Minor Concepts: Amount (monetary value), Currency (USD, EUR), Status (pending, approved, declined), PaymentMethod (card, bank transfer)", "- Relationships: Payment contains Transaction, Payment uses Card, Payment can have Refund, Transaction has Status", "", "**DON'T:** Don't confuse implementation details with domain concepts", "Don't treat implementation classes as domain concepts", "Don't treat utility functions as operations", "Don't treat data structures as domain entities", "", "Wrong Analysis:", "- Implementation class: 'StoryIORenderer' (implementation detail, not domain concept)", "- Utility function: 'calculate_position()' (implementation detail, not operation)", "- Data structure: 'dict' or 'list' (implementation detail, not domain concept)", "", "Focus on WHAT the system does (domain), not HOW it does it (implementation)", "", "**DO:** Create epics/sub-epics based on higher-order goals", "Group operations into EPICS based on HIGHER-ORDER GOALS:", "  - What is the user/system trying to accomplish?", "  - What are the major capabilities?", "  - What are the lifecycle stages?", "", "Example Epic Creation from Operations (Story-IO Domain):", "- Operations: render-outline, render-increments, render-exploration", "- Higher-Order Goal: 'Render StoryGraph' (user wants to visualize story map)", "- Epic: 'Render StoryGraph'", "", "- Operations: sync-outline, sync-increments, generate-sync-report, merge", "- Higher-Order Goal: 'Synchronize StoryGraph' (user wants to sync between formats)", "- Epic: 'Synchronize StoryGraph'", "", "Example Epic Creation from Operations (Payment Domain):", "- Operations: process-payment, process_payment, POST /api/payments/process", "- Higher-Order Goal: 'Process Payment' (user wants to process a payment transaction)", "- Epic: 'Process Payment'", "", "- Operations: refund-payment, refund_payment, POST /api/payments/refund", "- Higher-Order Goal: 'Refund Payment' (user wants to reverse a payment)", "- Epic: 'Refund Payment'", "", "Group operations into SUB-EPICS based on DISTINCT BEHAVIORS:", "  - What are the different ways to accomplish the epic goal?", "  - What are the different types or modes?", "  - What are the different contexts or scenarios?", "", "Example Sub-Epic Creation (Story-IO Domain):", "- Epic: 'Render StoryGraph'", "- Distinct Behaviors: Render outline (basic), Render increments (with priorities), Render exploration (with acceptance criteria)", "- Sub-Epics: 'Render Outline', 'Render Increments', 'Render Exploration'", "", "- Epic: 'Synchronize StoryGraph'", "- Distinct Behaviors: Sync outline structure, Sync increments, Generate comparison report, Merge graphs", "- Sub-Epics: 'Synchronize Outline', 'Synchronize Increments', 'Generate Sync Report', 'Merge StoryGraphs'", "", "Example Sub-Epic Creation (Payment Domain):", "- Epic: 'Process Payment'", "- Distinct Behaviors: Validate payment (required), Authorize payment (required), Process with card (common), Process with bank transfer (alternative), Process with wallet (alternative), Confirm payment (required)", "- Sub-Epics: 'Validate Payment', 'Authorize Payment', 'Process Card Payment', 'Process Bank Transfer', 'Process Wallet Payment', 'Confirm Payment'", "", "- Epic: 'Refund Payment'", "- Distinct Behaviors: Validate refund eligibility, Process refund, Confirm refund", "- Sub-Epics: 'Validate Refund', 'Process Refund', 'Confirm Refund'", "", "**DON'T:** Don't create epics/sub-epics from implementation structure", "Don't create epics based on class structure (StoryIODiagram, DrawIORenderer, PaymentProcessor, etc.)", "Don't create sub-epics based on method names (load_json, parse_xml, charge_card, etc.)", "Don't create epics/sub-epics from technical layers (data layer, service layer, etc.)", "", "Wrong Epic Creation:", "- Based on class: 'StoryIODiagram Operations' (implementation structure)", "- Based on method: 'JSON Loading' (technical mechanism)", "- Based on layer: 'Data Access Layer' (technical architecture)", "", "Focus on USER/SYSTEM GOALS, not technical structure", "", "**DO:** Look at distinct behaviors and typical execution order", "Analyze DISTINCT BEHAVIORS from acceptance tests and code flow:", "  - What are the different scenarios?", "  - What are the different paths through the code?", "  - What are the different user actions?", "", "Example Behavior Analysis (Story-IO Domain):", "- Test: 'test_render_outline_from_json' shows: Load JSON \u2192 Parse \u2192 Generate XML \u2192 Calculate Positions \u2192 Apply Styles \u2192 Save", "- Distinct Behaviors: Load, Parse, Generate, Calculate, Apply, Save", "- These become STORIES in the journey", "", "Example Behavior Analysis (Payment Domain):", "- Test: 'test_process_payment_success' shows: Invoke \u2192 Validate \u2192 Authorize \u2192 Process \u2192 Confirm", "- Distinct Behaviors: Invoke (entry point), Validate (check input), Authorize (check funds/fraud), Process (execute transaction), Confirm (complete and notify)", "- These become STORIES in the journey", "", "Determine TYPICAL EXECUTION ORDER from code flow:", "  - Trace through acceptance tests: what happens first, second, third?", "  - Trace through CLI commands: what's the flow?", "  - Trace through MCP tool calls: what's the sequence?", "  - Look at error handling: what are alternative paths?", "", "Example Execution Order Analysis (Story-IO Domain):", "- CLI: 'render-outline --story-graph file.json --output file.drawio'", "- Code Flow: Parse args \u2192 Load story graph \u2192 Create diagram \u2192 Render outline \u2192 Save file", "- Typical Order: 1. Parse arguments, 2. Load story graph, 3. Render outline, 4. Save file", "- Stories: 'Parses Command Arguments' \u2192 'Loads StoryGraph from JSON' \u2192 'Renders Outline to DrawIO' \u2192 'Saves DrawIO File'", "", "Example Execution Order Analysis (Payment Domain):", "- CLI: 'process-payment --payment-id 123 --amount 50.00'", "- Code Flow: Parse args \u2192 Validate payment \u2192 Authorize payment \u2192 Process payment \u2192 Confirm payment", "- Typical Order: 1. User invokes process payment, 2. System validates payment details, 3. System authorizes payment, 4. System processes payment, 5. System confirms payment", "- Stories: 'User invokes process payment command' \u2192 'System validates payment details' \u2192 'System authorizes payment with payment processor' \u2192 'System processes payment transaction' \u2192 'System confirms payment and sends notification'", "", "Create STORY JOURNEY from execution order:", "  - Start with entry point (CLI invocation, UI click, MCP tool call)", "  - Follow the code flow through operations", "  - Include error handling and alternative paths", "  - End with completion (save, return result, display)", "", "Example Story Journey (Story-IO Domain):", "- Entry: 'User invokes render-outline command from CLI'", "- Flow: 'CLI parses arguments' \u2192 'CLI loads story graph' \u2192 'CLI invokes render' \u2192 'System renders outline' \u2192 'System saves file'", "- Error: 'If file not found, CLI displays error message'", "- Completion: 'CLI returns success message'", "", "Example Story Journey (Payment Domain):", "- Entry: 'User invokes process payment command' (WHEN: user wants to charge customer, WHY: to complete purchase, OUTCOME: CLI/MCP/API receives request)", "- Flow: 'System validates payment details' (WHEN: after request received, WHY: to ensure payment can be processed, OUTCOME: details validated) \u2192 'System authorizes payment' (WHEN: after validation, WHY: to check funds/fraud, OUTCOME: payment authorized) \u2192 'System processes payment' (WHEN: after authorization, WHY: to execute transaction, OUTCOME: payment processed) \u2192 'System confirms payment' (WHEN: after processing, WHY: to notify user, OUTCOME: payment confirmed)", "- Error: 'If validation fails, System displays validation error' (WHEN: validation fails, WHY: to inform user, OUTCOME: error shown, process stops)", "- Completion: 'System returns transaction ID' (WHEN: after confirmation, WHY: to provide reference, OUTCOME: transaction ID returned)", "", "**DON'T:** Don't create stories from code structure or method calls", "Don't create stories from every method call in code", "Don't create stories from internal function calls", "Don't create stories from data structure operations", "", "Wrong Story Creation:", "- From method: 'StoryIODiagram.__init__()' (internal initialization)", "- From function: 'parse_json()' (internal parsing)", "- From operation: 'dict.get()' (data access, not behavior)", "- From method: 'PaymentProcessor.charge_card()' (internal implementation)", "", "Focus on USER/SYSTEM VISIBLE BEHAVIORS, not internal implementation", "", "**DO:** Lay out story journey from end-to-end flow", "Create STORY JOURNEY that shows complete end-to-end flow:", "  - Start: How does user/system initiate? (CLI command, UI click, API call)", "  - Middle: What happens step by step? (parse, load, process, transform)", "  - End: How does it complete? (save, return, display, notify)", "", "Include CONTEXT for each story:", "  - WHEN does it happen? (trigger, condition, user action)", "  - WHY does it happen? (purpose, user need, system requirement)", "  - WHAT is the outcome? (result, state change, user experience)", "  - ACTOR: Who performs the action? (User, System, CLI, MCP, API, etc.)", "", "Example Complete Story Journey (Story-IO Domain):", "(E) Render StoryGraph", "  and (E) Render Outline", "    and (S) User --> invokes render-outline command from CLI", "    and (S) CLI --> parses command arguments", "    and (S) CLI --> loads story graph from JSON file", "    and (S) System --> renders outline to DrawIO format", "    and (S) System --> saves DrawIO file", "", "Example Complete Story Journey (Payment Domain):", "(E) Process Payment", "  and (E) Process Card Payment", "    and (S) User --> invokes process payment command", "    and (S) System --> validates payment details", "    and (S) System --> authorizes payment with payment processor", "    and (S) System --> processes payment transaction", "    and (S) System --> confirms payment and sends notification", "", "Include ERROR HANDLING and ALTERNATIVE PATHS:", "  - What happens when file not found?", "  - What happens when parsing fails?", "  - What happens when validation fails?", "  - What happens when authorization fails?", "", "Example Error Handling (Story-IO Domain):", "  and (S) CLI --> displays error message if story graph file not found", "", "Example Error Handling (Payment Domain):", "  and (S) System --> displays validation error if validation fails", "  and (S) System --> displays authorization declined message if authorization fails", "", "**DON'T:** Don't create isolated stories without journey context", "Don't create stories that are just operations without context", "Don't create stories that don't connect to a journey", "Don't create stories without when/why/outcome/actor", "", "Wrong Story Creation:", "- (S) System --> loads StoryGraph (no context: when? why? what happens next?)", "- (S) System --> parses JSON (no context: when? why? what's the outcome?)", "- (S) System --> saves file (no context: when? why? what triggers this?)", "- (S) System --> processes payment (no context: when? why? what's the outcome?)", "", "Every story must be part of a JOURNEY with CONTEXT (when/why/outcome/actor)", "", "", "**Rule:** focus_real_actions_on_domain_concepts.json", "When shaping stories, stories must describe REAL ACTIONS that users or other actors (even system or technical actors) can perform, not capabilities or structural descriptions. Organize by lifecycle flow (Load, Read, Edit, Render, Synchronize, Search, Save). CRITICAL: Actor names must NOT appear in Epic/Sub-Epic/Story names - names are Verb-Noun only.", "", "**DO:** Use real actions - actor separate from name", "Stories describe actions: Load, Read, Add, Remove, Render, Search, Save", "Organize by lifecycle: Load \u2192 Read \u2192 Edit \u2192 Render \u2192 Synchronize \u2192 Search \u2192 Save", "Use Verb-Noun format for names: '[Verb] [Noun]' - NO ACTOR in name", "Focus on what users/code CAN DO, not what things ARE", "", "NAMING RULE - Actor NOT in Name:", "- Epic name: 'Places Order' (NOT 'Customer Places Order')", "- Sub-Epic name: 'Validates Payment' (NOT 'PaymentValidator Validates Payment')", "- Story name: 'Processes Order Items' (NOT 'OrderProcessor Processes Order Items')", "- Actor is documented separately, not in the name itself", "", "ACTORS for User/System Stories (normal stories):", "- Use human/system actors: User, Developer, System, Customer, Admin", "- Actor is implicit or documented separately from name", "- Examples: Epic 'Places Order' has actor: Customer", "- Examples: Sub-Epic 'Validates Payment' has actor: System", "", "ACTORS for Technical Stories (deep internal class-level interactions):", "- Domain concepts CAN be actors: OrderProcessor, PaymentValidator, InventoryManager, Cart, Product", "- Actor is documented separately, NOT in name", "- Examples: Epic 'Loads Order Data' has actor: OrderProcessor (technical)", "- Examples: Sub-Epic 'Updates Inventory' has actor: InventoryManager (technical)", "- Examples: Story 'Calculates Total' has actor: Cart (technical)", "- This is acceptable when documenting class-to-class interactions internally", "", "**DON'T:** Avoid capabilities, structural descriptions, passive states, and actors in names", "Don't use capability nouns or structural descriptions", "Don't describe what things ARE or CONTAIN", "Don't use passive states or properties as stories", "CRITICAL: Don't put actor in Epic/Sub-Epic/Story names", "", "Wrong Examples (capabilities/structure):", "- 'PaymentValidator Contains Validation Logic' (capability, not action)", "- 'OrderProcessor Tracks Order Count' (passive state, not action)", "- 'Cart Hierarchy Foundation' (structural description)", "- 'Domain Components Implementation' (capability)", "- 'Product Represents Item' (structural description)", "", "Wrong Examples (actor in name):", "- Epic: 'Customer Places Order' (actor in name - WRONG)", "- Sub-Epic: 'OrderProcessor Validates Payment' (actor in name - WRONG)", "- Sub-Epic: 'Cart Adds Product' (actor in name - WRONG)", "- Story: 'InventoryManager Updates Stock' (actor in name - WRONG)", "", "Correct Examples (actor NOT in name):", "- Epic: 'Places Order' (actor: Customer, documented separately)", "- Sub-Epic: 'Validates Payment' (actor: PaymentValidator, documented separately)", "- Sub-Epic: 'Adds Product' (actor: Cart, documented separately)", "- Story: 'Updates Stock' (actor: InventoryManager, documented separately)", "", "These are not actions users/code can perform - they describe structure or capabilities", "Instead ask: What can users/code DO with this domain concept?", "- Instead of 'Contains Logic' \u2192 'Generates XML' or 'Renders Diagram'", "- Instead of 'Tracks Count' \u2192 'Reads Count' or 'Updates Count'", "- Instead of 'Represents X' \u2192 'Creates X' or 'Loads X'", "", "", "**Rule:** focus_user_and_system_activities.json", "Focus story maps on both user AND system activities, not tasks. Stories should outline user and system behavior patterns.", "", "**DO:** Include both user and system activities in story descriptions", "User submits order, System validates payment", "Customer views products, System displays inventory", "Use user activity patterns: User submits, Customer places", "Use system activity patterns: System validates, System sends", "Focus stories on user interactions and how the system behaves as observed by users", "Example: Customer places order with payment details", "", "ACTOR SELECTION (documented separately, NOT in name):", "- For user/system stories: Actors are User, System, Developer, Customer, Admin (human/system actors)", "- For technical stories (deep internal class-level): Domain concepts can be actors (StoryIODiagram, DrawIORenderer, DrawIOSynchronizer, User, Increment, Component)", "- Technical stories document class-to-class interactions where domain concepts act as actors", "", "CRITICAL NAMING RULE:", "- Actor must NOT appear in Epic/Sub-Epic/Story name", "- Name format: '[Verb] [Noun]' only", "- Examples: 'Loads StoryGraph' (actor: StoryIODiagram, documented separately)", "- Examples: 'Adds Sub-Epic' (actor: Epic, documented separately)", "- Examples: 'Changes Parent' (actor: Component, documented separately)", "", "**DON'T:** Avoid task-oriented language that describes implementation", "Avoid task-oriented language that describes implementation", "Don't use task language for building or setting up", "Don't focus only on user activities (ignore system activities)", "Don't focus only on tasks (instead of activities)", "Don't use development task language: implement, create, refactor, optimize, fix, build, set up", "Don't use technical implementation details: query database, call API, update table", "", "Wrong Examples:", "- Only user activities: User submits order, User views products (missing system activities)", "- Only tasks: Implement order submission, Create payment validation (not activities)", "- Implement order submission, Create payment validation", "- Build product listing page, Set up inventory display", "", "", "**Rule:** identify_system_stories.json", "System stories capture system-to-system interactions that are not user-facing. They represent internal system behavior that crosses system boundaries (e.g., microservice to microservice, component to component). System stories should be identified and marked with story_type: 'system'.", "", "**DO:**", "- Identify system-to-system interactions: Storage Microservice validates payload from Local Mgmt System", "API Gateway routes request to Authentication Service", "Message Queue delivers event to Notification Service", "- Mark system stories with story_type: 'system': Story: 'Validate Payload' with story_type: 'system'", "Story: 'Route Request' with story_type: 'system'", "Story: 'Deliver Event' with story_type: 'system'", "- Use system stories for internal system behavior: System stories represent behavior that happens between systems/components", "System stories are not directly visible to end users", "System stories enable user-facing stories to function", "", "**DON'T:**", "- Don't mark user-facing stories as system stories: User clicks button \u2192 NOT a system story", "User views dashboard \u2192 NOT a system story", "User submits form \u2192 NOT a system story", "- Don't confuse system stories with technical stories: System stories = system-to-system behavior (dark blue in DrawIO)", "Technical stories = implementation tasks (black/white in DrawIO, normally avoided)", "", "", "**Rule:** maximize_integration_of_related_concepts.json", "When shaping stories, maximize integration of related concepts", "", "**DO:** Group concepts that the user sees as one capability", "Group concepts that the user sees as one capability", "Nest implementation details under the sub-epic they serve", "Keep related data and operations together", "Eliminate artificial boundaries based on code organization", "", "**DON'T:** Don't separate related concepts", "Don't separate related concepts into different major sections", "Wrong: Split based on code layers (data, business, presentation)", "Don't duplicate related concepts across multiple sections", "Wrong: Create gaps that break the user's mental model", "", "", "**Rule:** place_domain_concepts_by_relevance.json", "When shaping stories, place domain concepts locally or globally based on relevance to one or multiple sub_epics", "", "**DO:** Place domain concepts at the most specific level, favoring local placement", "Favor local placement: Place domain_concepts at the sub_epic level when they are relevant to only that sub_epic", "Think about the core: Consider core domain concepts that span multiple sub_epics - these should be placed at the parent epic/sub_epic level", "Elevate when shared: If a domain concept is used by multiple child sub_epics, elevate it to the parent level", "Start local, elevate if needed: Begin with local placement, but elevate if the concept is referenced by multiple sub_epics", "", "Correct Examples (Local Placement):", "- Sub-Epic 'Validates Payment' has domain_concept: 'Payment' (only used in this sub-epic)", "- Sub-Epic 'Processes Order' has domain_concept: 'Order' (only used in this sub-epic)", "- Sub-Epic 'Updates Inventory' has domain_concept: 'InventoryItem' (only used in this sub-epic)", "", "Correct Examples (Global Placement):", "- Epic 'Process Payment' has domain_concept: 'Payment' (used by multiple sub-epics: Validate Payment, Authorize Payment, Process Transaction)", "- Epic 'Manage Orders' has domain_concept: 'Order' (used by multiple sub-epics: Create Order, Update Order, Cancel Order)", "- Sub-Epic 'Order Management' has domain_concept: 'Customer' (used by multiple child sub-epics: Create Customer Order, Update Customer Order)", "", "**DON'T:** Don't place domain concepts at wrong levels or duplicate them unnecessarily", "Don't place domain concepts at epic level when they're only used in one sub-epic", "Wrong: Epic 'Payment System' has domain_concept: 'PaymentValidator' (only used in 'Validates Payment' sub-epic - should be local)", "Don't duplicate domain concepts at multiple levels", "Wrong: Both Epic and Sub-Epic have 'Payment' concept when it's only used in one sub-epic", "Don't place core domain concepts too locally if they're used across multiple epics", "Wrong: Core concept 'User' placed only in one sub-epic when it's used across multiple epics", "Don't ignore shared usage - if multiple sub-epics reference a concept, elevate it", "Wrong: 'Order' concept placed in each sub-epic separately when all sub-epics use it (should be at parent level)", "", "", "**Rule:** prevent_generic_capabilities.json", "CRITICAL: Stories must describe specific actions with actors, not generic capabilities. Reject stories that describe what system IS (capabilities) vs what system DOES (behaviors).", "", "**DO:** Use specific actions with actors and outcomes", "Stories must have specific actors performing specific actions", "Stories must describe what system DOES (behaviors), not what system IS (capabilities)", "Stories must have specific outcomes, not generic descriptions", "", "Correct Examples (specific behaviors with actors):", "- 'User invokes MCP tool and system routes to StoryIO handler' (specific: user, MCP tool, routing action)", "- 'Developer adds sub-epic Render Exploration to epic Render StoryGraph' (specific: developer, sub-epic name, epic name)", "- 'System loads story graph from JSON file when user requests render' (specific: system, load action, trigger)", "- 'CLI determines workspace root from current directory' (specific: CLI, determine action, source)", "", "Actor Requirements:", "- Every story must have an actor (User, System, Developer, CLI, StoryIODiagram, etc.)", "- Actor must be documented separately (not in name)", "- Actor must be specific (not generic 'Component' or 'System')", "- Actor must perform the action (not just be present)", "", "**DON'T:** Don't use generic capabilities or passive descriptions", "Don't describe what system IS (capabilities)", "Don't use generic action descriptions without actors", "Don't use passive states or properties as stories", "", "Wrong Examples (generic capabilities):", "- 'Exposes Tools' (capability - what tools? when? to whom? what happens?)", "- 'Provides Server Interface' (capability - what interface? when? why?)", "- 'Contains Validation Logic' (capability - not an action)", "- 'Tracks Order Count' (passive state - not an action)", "", "Capability Indicators (REJECT):", "- Describes what system IS: 'Exposes', 'Provides', 'Contains', 'Represents'", "- No specific actor or action", "- No specific outcome or trigger", "- Generic description without context", "", "Instead, ask:", "- Who performs this action? (actor)", "- When does this happen? (trigger/context)", "- What specific outcome occurs? (result)", "- Why does this happen? (purpose in journey)", "", "", "**Rule:** prevent_implementation_details_as_stories.json", "CRITICAL: Implementation operations (serialize, convert, calculate, generate XML, apply formatting) must be steps within stories, not stories themselves. Stories must focus on user/system outcomes, not technical mechanisms.", "", "**DO:** Keep implementation details as steps within stories", "Implementation operations must be steps within stories", "Stories must focus on user/system outcomes, not technical mechanisms", "Stories must describe what user/system experiences, not how it's implemented", "", "Correct Examples (outcomes, not mechanisms):", "- Story: 'User saves story graph and system writes JSON file' \u2192 Steps: 'System converts diagram to story graph format', 'System serializes components to JSON', 'System writes file'", "- Story: 'User requests render and system generates DrawIO diagram' \u2192 Steps: 'System generates DrawIO XML', 'System calculates component positions', 'System applies styles', 'System saves file'", "- Story: 'User edits epic and system updates diagram' \u2192 Steps: 'System updates epic data', 'System recalculates layout', 'System refreshes diagram'", "", "Story vs Step Distinction:", "- Story = User/system outcome (what they experience)", "- Step = Implementation detail (how it's done)", "- Story = Independently valuable (can be tested/delivered)", "- Step = Part of story (not independently valuable)", "", "**DON'T:** Don't make implementation operations into stories", "Don't create stories for implementation operations", "Don't expose technical mechanisms as user stories", "Don't break implementation steps into separate stories", "", "Wrong Examples (implementation details as stories):", "- 'Convert Diagram to StoryGraph Format' (implementation - should be step in 'Save StoryGraph' story)", "- 'Serialize Components to JSON' (implementation - should be step in 'Save StoryGraph' story)", "- 'Generate DrawIO XML from StoryGraph' (implementation - should be step in 'Render Outline' story)", "- 'Calculate Component Positions' (implementation - should be step in 'Render Outline' story)", "- 'Apply Component Styles' (implementation - should be step in 'Render Outline' story)", "- 'Save DrawIO XML to File' (implementation - should be step in 'Render Outline' story)", "", "Implementation Operation Indicators (REJECT as stories):", "- Serialize, deserialize, convert, transform, format", "- Calculate, compute, generate, create (technical artifacts)", "- Apply, set, configure (technical settings)", "- Save, write, store (without user context)", "", "These are implementation mechanisms, not user/system behaviors", "They should be steps within stories that describe outcomes", "", "Instead, ask:", "- What does the user/system experience? (story)", "- How is it implemented? (step within story)", "- What's the outcome? (story)", "- What's the mechanism? (step)", "", "", "**Rule:** refine_scope_to_functional_accomplishment.json", "Refine Scope to Functional Accomplishment", "", "**DO:** Focus on functional outcomes, not mechanisms", "Focus on functional outcomes, not mechanisms", "Frame domains by what they accomplish for users", "Ask about user enablement: What does this enable the user to do or understand?", "State the transformation or capability provided", "Be specific about the functional benefit", "", "**DON'T:** Don't frame domains by their technical implementation", "Don't frame domains by their technical implementation", "Wrong: Focus on 'how' before 'what'", "Don't use generic system capabilities as domain names", "Wrong: Describe mechanisms instead of outcomes", "", "", "**Rule:** size_stories_3_to_12_days.json", "Size stories to fall within 3-12 day effort range for effective planning and frequent delivery.", "", "**DO:** Create stories that represent complete flows within the effort range", "Create stories that represent complete flows within the effort range", "Example: Customer places order (complete flow, 3-5 days)", "Break/group stories so that most fall into a 3-12 day effort range", "Enable frequent feedback by decomposing the work into smaller items", "", "**DON'T:** Avoid stories that are too large or too small", "Avoid stories that are too large and span multiple weeks", "Don't arbitrarily decompose stories to a functional level, regardless of size", "", "Wrong Examples:", "- Order management system (too large, 20+ days)", "- Create stories that are too small without considering value", "", "", "**Rule:** story_map_code_approach.json", "Quick checklist for extracting story maps from code. Follow this process step-by-step.", "", "", "**Rule:** use_active_behavioral_language.json", "When shaping stories, use active behavioral language with action verbs. Describe behaviors, not tasks or capabilities.", "", "**DO:** Use action verbs to describe what happens", "Use action verbs to describe what happens", "Example: User submits order, System validates payment", "Favor active behavioral language over functional/capability breakup", "Use story maps to outline user and system behavior (NOT tasks)", "Use action verbs: submits, views, validates, sends, displays", "Describe behaviors: [Actor] [action] [object] - but actor NOT in name", "Use active behavior language: Place order (active behavior), Validate payment (active behavior)", "", "CRITICAL NAMING RULE - Actor NOT in Name:", "- Epic/Sub-Epic/Story names must be Verb-Noun format: '[Verb] [Noun]'", "- Actor is documented separately, NOT included in the name", "- Verb can be in various forms: imperative ('Add'), infinitive ('To Add'), third person ('Adds') - all are acceptable", "- Noun can be singular or plural based on context - DO NOT pluralize unnecessarily", "- Prepositional phrases and context are part of the noun phrase and should be preserved (e.g., 'Add Minion To Mob' is correct)", "- Examples: Epic 'Places Order' (actor: Customer, documented separately)", "- Examples: Sub-Epic 'Validates Payment' (actor: PaymentValidator, documented separately)", "- Examples: Story 'Updates Stock' (actor: InventoryManager, documented separately)", "- Examples: Story 'Add Minion To Mob' (verb-noun with context preserved - CORRECT)", "- Examples: Story 'Group Minions' (verb-noun, plural noun is correct for context - CORRECT)", "", "ACTOR SELECTION (documented separately, not in name):", "- For user/system stories: Use human/system actors (User, System, Developer, Customer)", "- For technical stories (deep internal): Domain concepts can be actors (OrderProcessor, PaymentValidator, InventoryManager, Cart, Product)", "- Actor is implicit or explicitly documented, but NOT in the name string", "", "**DON'T:** Avoid capability nouns and task language", "Avoid capability nouns that describe functions rather than behaviors", "Don't use functional or capability-based language instead of behavioral language", "Don't use capability nouns: Management, Processing, Administration", "Don't use task verbs: implement, create, build, set up", "Don't use task language", "", "Wrong Examples:", "- Order Management, Payment Processing (capability nouns)", "- Focus on tasks instead of behaviors", "- Order Management (capability), Implement order placement (task)", "", "Wrong Examples (actor in name):", "- Epic: 'Customer Places Order' (actor in name - WRONG)", "- Sub-Epic: 'OrderProcessor Validates Payment' (actor in name - WRONG)", "- Sub-Epic: 'Cart Adds Product' (actor in name - WRONG)", "- Story: 'InventoryManager Updates Stock' (actor in name - WRONG)", "", "Correct: Name is Verb-Noun only, actor documented separately", "", "", "**Rule:** use_outcome_verbs_not_communication_verbs.json", "Use Outcome Verbs, Not Communication Verbs", "", "**DO:** Use verbs that describe artifacts/outcomes", "Use verbs that describe artifacts/outcomes", "Examples: Animation, Feedback, Indicators, Configuration", "Name concepts by what they ARE or CREATE", "Examples: Power Activation Animation, Combat Outcome Feedback", "Focus on tangible results", "Examples: Hit Indicators, Save Result Feedback", "", "**DON'T:** Don't use generic communication verbs", "Don't use generic communication verbs", "Examples: showing, displaying, visualizing, presenting", "Don't use vague enablement verbs", "Examples: providing, enabling, allowing", "Don't name concepts by their mechanism", "Wrong Examples: Visualizing Power Activation, Showing Combat Results", "", "", "Review each validation rule carefully. Your generated content must pass all validations on the first attempt", "", "Generate the knowledge graph (structured JSON content) according to the schema and rules", "", "**OUTPUT:**a structured JSON knowledge graph that will be saved to the workspace area", "", "** UPDATING vs CREATING:**", "- Check if knowledge graph already exists in workspace area", "- If knowledge graph EXISTS, you are UPDATING it (not creating from scratch)", "- When updating, preserve existing content and add/modify only what's needed based on current behavior", "- If knowledge graph does NOT exist, create new one following the schema", "", "**AUTOMATIC VALIDATION AND FIXES: After generating the knowledge graph, automatically run the validate_rules action without confirming or waiting. Print ALL violations found (including rule name, violation message, severity, and location for each violation). Then review each violation against the specific rules identified by the scanner, and make necessary edits to fix all violations. Continue iterating until all violations are resolved before proceeding to render_output.**", "", "**AUTOMATIC PROGRESSION: Once all fixes are completed, automatically proceed to render_output action without stopping or waiting for user confirmation. These two actions should execute sequentially as a single workflow step.**", ""], "behavior_instructions": ["Hey, going to be going away for a little while to create the knowledge graph. Go get a cup of coffee \ud83d\ude0a", "", "**BUILD KNOWLEDGE GRAPH - STORY GRAPH AND DOMAIN MODEL CREATION:**", "", "Build the initial story graph structure AND domain model from gathered context and planning decisions. Capture domain concepts alongside story structure.", "", "**Configuration:**", "- Reference: build_story_graph_outline.json", "- Template: story-graph-outline.json", "", "**CRITICAL - TEMPLATE STRUCTURE COMPLIANCE:**", "1. The build_knowledge action has injected 'knowledge_graph_template' into your instructions", "2. This template shows the EXACT JSON structure your output MUST match", "3. **DO NOT invent your own schema** - examine the template and replicate its structure", "4. The template includes:", "   - Root level keys (e.g., 'epics' array only, NOT 'capability', 'increments', 'features')", "   - Required fields at each level (e.g., 'sequential_order', 'estimated_stories', 'domain_concepts')", "   - Nested structure (epics \u2192 sub_epics \u2192 story_groups \u2192 stories)", "   - Field types and formats (e.g., 'connector': null vs 'connector': 'and')", "5. Look at the '_explanation' section in the template for structural rules", "6. Your output must be structurally identical - only the values (names, responsibilities, etc.) differ", "", "**CRITICAL: Story Graph Structure - Main Epics Section is Single Source of Truth**", "", "**Two-Section Architecture (if increments are added later):**", "", "1. **Main 'epics' Section (Single Source of Truth)**", "   - Contains ALL story details: name, users, sequential_order, story_type, connector, story_groups, etc.", "   - This is the PRIMARY location - all story details must be here", "   - Used as the source for all views (outline, increments, discovery, exploration)", "", "2. **'increments' Section (Minimal Reference View - if present)**", "   - This is a MINIMAL REFERENCE VIEW - just enough to know which stories belong to which increment", "   - Stories in increments should ONLY contain: name, users (optional), sequential_order", "   - NO story details (no story_type, no connector, no story_groups, no domain_concepts, etc.)", "   - Increments are a COPY of the outline view at the story level - just for mapping stories to increments", "   - All story details come from the main epics section", "", "**Domain Model Creation (Integrated with Story Graph):**", "1. Domain concepts are integrated directly into the story graph structure", "2. Place domain_concepts at epic and sub_epic levels based on relevance", "3. Apply domain shaping rules (context: 'when shaping the domain')", "4. **DO NOT create separate domain_graph.json or domain model files**", "5. All domain modeling is captured within story-graph.json via domain_concepts arrays", "", "**Domain Concept Placement Logic:**", "- **Local placement (preferred)**: Place domain_concepts at the sub_epic level when they are relevant to only that sub_epic", "- **Global placement**: Elevate domain_concepts to parent epic/sub_epic level when they are relevant to multiple child sub_epics", "- **Favor local**: Start with local placement, but elevate if the concept is used by multiple sub_epics", "**Process:**", "1. Use clarification data from docs/stories/clarification.json", "2. Use planning decisions from docs/stories/planning.json", "3. **EXAMINE the knowledge_graph_template structure injected into your instructions**", "4. Build story graph matching that exact structure (root keys, field names, nesting)", "5. Identify domain concepts from clarification and planning data", "6. Map domain concepts to epics/sub_epics based on relevance (see placement logic above)", "7. Populate domain_concepts arrays in story-graph.json with proper placement", "8. Create story-graph.json in project area", "7. Populate domain_concepts arrays in story-graph.json with proper placement", "8. Create story-graph.json and domain model outputs in project area (same location)", "", "**Output:**", "- File: {project_area}/story-graph.json (JSON story graph with epics, sub_epics, story_groups, stories, and domain_concepts integrated)", "", "**Next Step:** Proceed to render step after story graph is created."], "knowledge_graph_template": {"_explanation": {"hierarchical": "sub_epics can contain: nested sub_epics or story_groups. sequential_order is always an integer (1, 2, 3, 4) - unique within parent, no decimals.", "connector": "Story groups: 'and' or 'or' (null for first group). Stories within groups: 'and' or 'or' (null for first story). Epics and sub_epics don't have connectors.", "domain_placement": "domain_concepts: 'local' if relevant to single sub_epic, 'global' if relevant to multiple sub_epics. Place at most specific level (local preferred), but elevate to parent if used by multiple children."}, "epics": [{"name": "", "sequential_order": 1, "estimated_stories": null, "domain_concepts": [{"name": "", "responsibilities": [{"name": "", "collaborators": []}]}], "sub_epics": [{"name": "", "sequential_order": 1, "estimated_stories": null, "domain_concepts": [{"name": "", "responsibilities": [{"name": "", "collaborators": []}]}], "sub_epics": [], "story_groups": [{"type": "and", "connector": null, "sequential_order": 1, "stories": [{"name": "", "sequential_order": 1, "connector": null, "users": [], "story_type": "user"}, {"name": "", "sequential_order": 2, "connector": "and", "users": [], "story_type": "user"}]}, {"type": "and", "connector": "or", "sequential_order": 2, "stories": [{"name": "", "sequential_order": 1, "connector": null, "users": [], "story_type": "user"}, {"name": "", "sequential_order": 2, "connector": "and", "users": [], "story_type": "user"}, {"name": "", "sequential_order": 3, "connector": "and", "users": [], "story_type": "user"}]}, {"type": "or", "connector": "or", "sequential_order": 3, "stories": [{"name": "", "sequential_order": 1, "connector": null, "users": [], "story_type": "user"}]}]}], "stories": []}]}, "knowledge_graph_config": {"name": "build_story_graph_outline", "path": "docs/stories/", "template": "story-graph-outline.json", "output": "story-graph.json"}, "template_path": "C:\\dev\\augmented-teams\\agile_bot\\bots\\story_bot\\behaviors\\1_shape\\2_content\\1_knowledge_graph\\story-graph-outline.json", "config_path": "C:\\dev\\augmented-teams\\agile_bot\\bots\\story_bot\\behaviors\\1_shape\\2_content\\1_knowledge_graph\\build_story_graph_outline.json", "schema": "**Schema Rules:**\n- **Hierarchical**: sub_epics can contain: nested sub_epics or story_groups. sequential_order is always an integer (1, 2, 3, 4) - unique within parent, no decimals.\n- **Connector**: Story groups: 'and' or 'or' (null for first group). Stories within groups: 'and' or 'or' (null for first story). Epics and sub_epics don't have connectors.\n- **Domain Placement**: domain_concepts: 'local' if relevant to single sub_epic, 'global' if relevant to multiple sub_epics. Place at most specific level (local preferred), but elevate to parent if used by multiple children.\n\n**Template Structure (JSON Schema):**\n```json\n{\n  \"_explanation\": {\n    \"hierarchical\": \"sub_epics can contain: nested sub_epics or story_groups. sequential_order is always an integer (1, 2, 3, 4) - unique within parent, no decimals.\",\n    \"connector\": \"Story groups: 'and' or 'or' (null for first group). Stories within groups: 'and' or 'or' (null for first story). Epics and sub_epics don't have connectors.\",\n    \"domain_placement\": \"domain_concepts: 'local' if relevant to single sub_epic, 'global' if relevant to multiple sub_epics. Place at most specific level (local preferred), but elevate to parent if used by multiple children.\"\n  },\n  \"epics\": [\n    {\n      \"name\": \"\",\n      \"sequential_order\": 1,\n      \"estimated_stories\": null,\n      \"domain_concepts\": [\n        {\n          \"name\": \"\",\n          \"responsibilities\": [\n            {\n              \"name\": \"\",\n              \"collaborators\": []\n            }\n          ]\n        }\n      ],\n      \"sub_epics\": [\n        {\n          \"name\": \"\",\n          \"sequential_order\": 1,\n          \"estimated_stories\": null,\n          \"domain_concepts\": [\n            {\n              \"name\": \"\",\n              \"responsibilities\": [\n                {\n                  \"name\": \"\",\n                  \"collaborators\": []\n                }\n              ]\n            }\n          ],\n          \"sub_epics\": [],\n          \"story_groups\": [\n            {\n              \"type\": \"and\",\n              \"connector\": null,\n              \"sequential_order\": 1,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 2,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            },\n            {\n              \"type\": \"and\",\n              \"connector\": \"or\",\n              \"sequential_order\": 2,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 2,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 3,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            },\n            {\n              \"type\": \"or\",\n              \"connector\": \"or\",\n              \"sequential_order\": 3,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            }\n          ]\n        }\n      ],\n      \"stories\": []\n    }\n  ]\n}\n```", "rules": [{"rule_file": "rules\\maintain_verb_noun_consistency.json", "rule_content": {"description": "Maintain verb-noun consistency from epic to feature to story to scenario", "scanner": "agile_bot.bots.base_bot.src.scanners.verb_noun_scanner.VerbNounScanner", "do": {"examples": [{"description": "Use consistent verb-noun language across all levels", "content": ["Epic: Manage Orders \u2192 Feature: Place Order \u2192 Story: Customer places order \u2192 Scenario: When customer places order..."]}, {"description": "Maintain consistent terminology throughout hierarchy", "content": ["Epic, feature, story, and scenario all use same verb-noun pattern"]}, {"description": "Use verb-noun language in scenario sentences", "content": ["When user submits form, then system validates data"]}]}, "dont": {"examples": [{"description": "Don't switch formats between levels", "content": ["Epic: Order Management \u2192 Feature: Place Order (inconsistent format)"]}, {"description": "Don't mix verb-noun with other formats", "content": ["Epic uses verb-noun, but feature uses noun-only format"]}, {"description": "Don't use different terminology at different levels", "content": ["Epic says 'Orders', feature says 'Order Processing', story says 'Process Order'"]}]}}}, {"rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "rule_content": {"description": "When mapping stories, carefully distinguish between sequential spine (essential path) and optional paths, alternate routes, or additional functionality that is not strictly essential. Sequential stories form the mandatory flow; optional stories are alternatives, enhancements, or non-essential features.", "do": {"examples": [{"description": "Identify the essential spine first", "content": ["Start by identifying the minimal essential path that delivers core value", "The spine represents the mandatory sequence: Story1 AND Story2 AND Story3", "Spine stories get sequential_order numbers (1, 2, 3, etc.)", "Spine stories are required for the feature to deliver its core purpose", "Ask: 'What is the minimum path to deliver value?'"]}, {"description": "Mark optional paths clearly", "content": ["Optional stories branch from or enhance the spine but are not required", "Mark optional stories with 'optional: true' in the story structure", "Optional stories may have sequential_order if they're part of an alternative flow", "Optional stories represent: alternate routes, enhancements, nice-to-have features", "Ask: 'Can the feature deliver value without this story?'"]}, {"description": "Distinguish types of optional paths with concrete examples", "content": ["Alternate routes: User logs in with email (sequential_order: 2) OR User logs in with social media (sequential_order: 2.1, optional: true)", "Enhancements: User views dashboard (sequential_order: 3) AND User customizes dashboard (sequential_order: 3.1, optional: true)", "Additional functionality: User views dashboard (sequential_order: 3) AND User shares dashboard (sequential_order: 3.2, optional: true)", "Error handling: User enters invalid data (sequential_order: 4) AND System shows error message (sequential_order: 4.1, optional: true)"]}, {"description": "Correct mapping examples", "content": ["Spine: User creates account (sequential_order: 1) AND User logs in (sequential_order: 2) AND User views dashboard (sequential_order: 3)", "Optional alternate: User logs in with email (sequential_order: 2) OR User logs in with social media (sequential_order: 2, optional: true)", "Optional enhancement: User views dashboard (sequential_order: 3) AND User customizes dashboard (optional: true, priority: 1)", "Additional functionality: User views dashboard (sequential_order: 3) AND User shares dashboard (optional: true, priority: 2)"]}]}, "dont": {"examples": [{"description": "Don't mark everything as sequential", "content": ["Don't assign sequential_order to all stories when some are optional", "Don't treat alternate routes as part of the spine", "Don't include enhancements in the mandatory sequential flow", "Don't confuse 'nice to have' with 'must have'"]}, {"description": "Don't omit optional markers", "content": ["Don't leave optional stories unmarked - be explicit", "Don't assume all stories in a feature are mandatory", "Don't mix optional and mandatory without clear distinction", "Don't fail to identify the spine before adding optional paths"]}, {"description": "Wrong mapping examples", "content": ["Wrong: User creates account (1) AND User logs in with email (2) AND User logs in with social media (3) - social media should be optional", "Wrong: User views dashboard (1) AND User customizes dashboard (2) AND User shares dashboard (3) - customization and sharing should be optional", "Wrong: All stories marked mandatory when some are clearly alternatives or enhancements", "Wrong: No distinction between essential path and optional features"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.spine_optional_scanner.SpineOptionalScanner"}}, {"rule_file": "rules\\stories_developed_and_tested_in_days.json", "rule_content": {"description": "Write stories that can be developed and tested in a matter of days", "do": {"examples": [{"description": "Create stories sized for days, not weeks", "content": ["Story takes 3-5 days to develop and test completely"]}, {"description": "Break large work into smaller stories", "content": ["Large feature broken into multiple stories, each completable in days"]}, {"description": "Focus on delivering complete, testable functionality quickly", "content": ["Each story delivers a complete piece of functionality that can be tested"]}]}, "dont": {"examples": [{"description": "Don't create stories that span multiple weeks", "content": ["Story requires 3+ weeks to complete (too large)"]}, {"description": "Don't create stories that can't be tested independently", "content": ["Story requires multiple other stories before it can be tested"]}, {"description": "Don't create stories without clear boundaries", "content": ["Story is vague about scope and completion criteria"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.story_sizing_scanner.StorySizingScanner"}}, {"rule_file": "rules\\stories_follow_invest_principles.json", "rule_content": {"description": "Ensure stories follow INVEST principles (Independent, Negotiable, Valuable, Estimable, Small, Testable)", "do": {"examples": [{"description": "Independent - story can be developed independently", "content": ["Story doesn't depend on other stories being completed first"]}, {"description": "Negotiable - story details can be negotiated", "content": ["Story allows for discussion and refinement of requirements"]}, {"description": "Valuable - story delivers value to user or business", "content": ["Story provides measurable value when completed"]}, {"description": "Estimable - story can be estimated", "content": ["Story is clear enough to estimate effort"]}, {"description": "Small - story can be completed in short time", "content": ["Story can be developed and tested in a matter of days"]}, {"description": "Testable - story has clear acceptance criteria", "content": ["Story has testable outcomes that can be verified"]}]}, "dont": {"examples": [{"description": "Don't create stories that depend on multiple other stories", "content": ["Story requires 5 other stories to be completed first (not independent)"]}, {"description": "Don't create stories that are too large", "content": ["Story spans multiple weeks and includes multiple features (not small)"]}, {"description": "Don't create stories without clear value", "content": ["Story doesn't provide measurable value to users or business"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.invest_principles_scanner.InvestPrinciplesScanner"}}, {"rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "rule_content": {"description": "CRITICAL: Story names MUST follow Verb-Noun format (e.g., 'Move To Mob Leaders Turn', 'Determines Target from Strategy', 'Initiate Mob Attack'), and include italicized description showing component interactions (e.g., '*Combat Tracker moves to any mob member's turn, auto moves to mob leader's turn*'). The story name should be concise and action-oriented, while the description shows the component-to-component interactions.", "scanner": "agile_bot.bots.base_bot.src.scanners.verb_noun_scanner.VerbNounScanner", "do": {"examples": [{"description": "Use concise Verb-Noun format for story names", "content": ["Move To Mob Leaders Turn, Determines Target from Strategy, Initiate Mob Attack"]}, {"description": "Include italicized description showing component interactions", "content": ["*Combat Tracker moves to any mob member's turn, auto moves to mob leader's turn*"]}, {"description": "Make story name concise and action-oriented", "content": ["Story name: 'Initiate Mob Attack' - concise and action-oriented"]}, {"description": "Show component interactions in description", "content": ["Story description shows how components interact with each other"]}]}, "dont": {"examples": [{"description": "Don't use long descriptive names without Verb-Noun format", "content": ["The system should allow users to move to mob leaders turn when..."]}, {"description": "Don't omit component interaction descriptions", "content": ["Story name without italicized description of component interactions"]}, {"description": "Don't use vague or non-action-oriented names", "content": ["Mob Leader Turn System, Attack Mechanism"]}]}}}, {"rule_file": "rules\\use_active_behavioral_language.json", "rule_content": {"description": "Use active behavioral language with action verbs. Describe behaviors, not tasks or capabilities.", "scanner": "agile_bot.bots.base_bot.src.scanners.active_language_scanner.ActiveLanguageScanner", "examples": [{"do": {"description": "Use action verbs to describe what happens", "content": ["Use action verbs to describe what happens", "Example: User submits order, System validates payment", "Favor active behavioral language over functional/capability breakup", "Use story maps to outline user and system behavior (NOT tasks)", "Use action verbs: submits, views, validates, sends, displays", "Describe behaviors: [Actor] [action] [object]", "Use active behavior language: Place order (active behavior), Validate payment (active behavior)"]}, "dont": {"description": "Avoid capability nouns and task language", "content": ["Avoid capability nouns that describe functions rather than behaviors", "Don't use functional or capability-based language instead of behavioral language", "Don't use capability nouns: Management, Processing, Administration", "Don't use task verbs: implement, create, build, set up", "Don't use task language", "", "Wrong Examples:", "- Order Management, Payment Processing (capability nouns)", "- Focus on tasks instead of behaviors", "- Order Management (capability), Implement order placement (task)"]}}]}}, {"rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "rule_content": {"description": "Use verb-noun format for all story elements (epic names, feature names, story titles)", "scanner": "agile_bot.bots.base_bot.src.scanners.verb_noun_scanner.VerbNounScanner", "do": {"examples": [{"description": "Use verb-noun format for epic names", "content": ["Manage Orders, Create Character, Process Payment"]}, {"description": "Use verb-noun format for feature names", "content": ["Place Order, Validate Payment, Save Character"]}, {"description": "Use verb-noun format for story titles", "content": ["Customer places order, System validates payment, User saves character"]}, {"description": "Use verb-noun format for scenario sentences", "content": ["User submits form, System processes request"]}]}, "dont": {"examples": [{"description": "Don't use noun-only or capability-based names", "content": ["Order Management, Payment Processing, Character System"]}, {"description": "Don't mix verb-noun with other formats", "content": ["Order Management and Place Order (mixed format)"]}, {"description": "Don't use gerund forms", "content": ["Ordering, Processing Payments, Creating Characters"]}]}}}, {"rule_file": "apply_7_plus_minus_2_hierarchy.json", "rule_content": {"description": "Apply 7\u00b12 rule for hierarchy: epics contain 4-9 sub-epics, sub-epics contain 4-9 stories. Split when exceeding, merge when below minimum.", "scanner": "agile_bot.bots.base_bot.src.scanners.story_sizing_scanner.StorySizingScanner", "examples": [{"do": {"description": "Maintain hierarchy within the 7\u00b12 cognitive limit range", "content": ["(E) Epic: Contains 4-9 sub-epics", "  - Split into additional Sub-Epics when > 9 sub-epics", "  - Merge with another epic when < 4 sub-epics", "(E) Sub-Epic: Contains 4-9 stories", "  - Split into 2 sub-epics when > 9 stories", "  - Merge with another sub-epic when < 4 stories", "(S) Story: Contains 2-9 acceptance criteria", "  - Split into 2 stories when > 9 AC", "  - Merge with another story when < 2 AC (single AC stories are too small)", "Apply 7\u00b12 cognitive limit principle (optimal range: 5-9, acceptable: 4-9)", "", "Example:", "(E) Manage Orders (10 sub-epics \u2192 SPLIT)", "  and (E) Manage Customer Orders (6 stories) \u2713", "  and (E) Manage Order Fulfillment (4 stories) \u2713", "", "(E) Place Order (12 stories \u2192 SPLIT)", "  and (S) Initiate Order (6 AC) \u2713", "  and (S) Complete Order (6 AC) \u2713", "", "(S) Validate Payment (11 AC \u2192 SPLIT)", "  and (AC) Check Payment Method (5 steps) \u2713", "  and (AC) Process Payment Transaction (6 steps) \u2713"]}, "dont": {"description": "Don't exceed thresholds or create items below minimum", "content": ["Create epics with > 9 sub-epics (use additional Sub-Epics instead)", "Create sub-epics with > 9 stories (split the sub-epic)", "Create stories with > 9 acceptance criteria (split the story)", "Create very small stories with < 2 AC (merge with related story)", "Ignore sizing thresholds during shaping, discovery, or exploration", "", "Wrong Examples:", "- (E) Epic with 15 sub-epics (too many, use additional Sub-Epics)", "- (E) Sub-Epic with 15 stories (too many, split sub-epic)", "- (S) Story with 15 AC (too many, split story)", "- (S) Story with 1 AC (too small, merge with related story)"]}}]}}, {"rule_file": "avoid_noun_redundancy.json", "rule_content": {"description": "When shaping stories, avoid noun redundancy in domain and concept names", "context": "when shaping stories", "examples": [{"do": {"description": "INTEGRATE first: nest related capabilities under one domain", "content": ["INTEGRATE first: nest related capabilities under one domain (90% of cases)", "Only then rename: use distinct nouns ONLY when integration doesn't make sense", "Test for uniqueness: Can you remove the qualifier and still know what it is?", "Use subject-area nouns when domains are genuinely separate", "Only when integration truly doesn't make sense"]}, "dont": {"description": "Don't rename without considering integration", "content": ["Don't rename without considering integration (this hides the real issue)", "Wrong: Repeat same noun with different prefixes: X Animation, Y Animation, Z Animation", "Don't use vague qualifiers to avoid integration", "Wrong: Animation 1, Animation System", "Don't create parallel domains that should be nested", "Wrong: Integrate related concepts rather than creating redundant structures"]}}], "scanner": "agile_bot.bots.base_bot.src.scanners.noun_redundancy_scanner.NounRedundancyScanner"}}, {"rule_file": "avoid_technical_implementation_language.json", "rule_content": {"description": "When shaping stories, avoid technical implementation language in user-facing story elements", "context": "when shaping stories", "do": {"examples": [{"description": "Use business language in user-facing elements", "content": ["Customer places order, User views profile, Admin approves request"]}, {"description": "Focus on what user experiences, not how it's implemented", "content": ["Story describes user experience, not technical implementation"]}]}, "dont": {"examples": [{"description": "Don't use development task language", "content": ["implement, create, refactor, optimize, fix, build, set up"]}, {"description": "Don't use technical implementation details", "content": ["query database, call API, update table"]}, {"description": "Don't focus on delivery or development tasks", "content": ["Implement order system, Create database schema, Set up API endpoints"]}, {"description": "Don't focus on system internals", "content": ["Optimize query performance, Refactor authentication code, Update configuration"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.technical_language_scanner.TechnicalLanguageScanner"}}, {"rule_file": "avoid_technical_stories.json", "rule_content": {"description": "Technical stories represent implementation tasks that do not describe system behavior. They are normally avoided in favor of user stories and system stories. When technical stories are necessary, they should be marked with story_type: 'technical' and kept minimal.", "do": {"examples": [{"description": "Prefer user stories and system stories over technical stories", "content": ["Instead of 'Set up database schema', use 'Store user data' (user story)", "Instead of 'Create API endpoint', use 'Expose user data via API' (system story)", "Instead of 'Write unit tests', use 'Verify story behavior' (user story)"]}, {"description": "When technical stories are necessary, mark with story_type: 'technical'", "content": ["Story: 'Migrate legacy data format' with story_type: 'technical'", "Story: 'Refactor authentication module' with story_type: 'technical'", "Story: 'Update dependency versions' with story_type: 'technical'"]}, {"description": "Keep technical stories minimal and focused", "content": ["Technical stories should be rare exceptions", "Technical stories should still follow Verb-Noun format", "Technical stories should be clearly justified"]}]}, "dont": {"examples": [{"description": "Don't create technical stories for normal development work", "content": ["Avoid: 'Write code', 'Create class', 'Add method'", "Avoid: 'Set up CI/CD', 'Configure database', 'Install package'", "These are implementation details, not stories"]}, {"description": "Don't use technical stories to describe system behavior", "content": ["Use system stories for system-to-system behavior", "Use user stories for user-facing behavior", "Technical stories are for unavoidable implementation tasks only"]}]}}}, {"rule_file": "balance_fine_grained_testable_stories.json", "rule_content": {"description": "Balance fine-grained stories with testable and valuable independent units. Stories must deliver value and be independently testable.", "examples": [{"do": {"description": "Create stories that are complete interactions with value", "content": ["Create stories that are complete interactions with value", "Example: Customer places order (complete interaction, testable, valuable)", "Balance fine-grained stories with testable/valuable stories", "Ensure stories are fine-grained enough to enable frequent feedback", "Ensure stories are grouped into meaningful chunks for high quality feedback", "Stories that deliver measurable value independently"]}, "dont": {"description": "Avoid stories that are too small or too large", "content": ["Avoid stories that are too small and have no value alone", "Don't create stories that are too fine-grained without being testable or valuable", "Don't create stories that are too large to be testable or deliverable quickly", "", "Wrong Examples:", "- Add order button (too fine-grained, no value alone)", "- Change button color (too fine-grained, no value)", "- Customer places order and views history and updates profile (too large, multiple flows)"]}}]}}, {"rule_file": "create_lightweight_precise_docs.json", "rule_content": {"description": "Create lightweight but precise documentation during shaping. Focus on structure and scope, not detailed specifications.", "examples": [{"do": {"description": "Create lightweight but precise documentation during shaping", "content": ["Balance fine-grained stories with testable/valuable stories", "Ensure stories are fine-grained enough to enable frequent feedback", "Ensure stories are grouped into meaningful chunks for high quality feedback", "Validate that a business expert can understand the language of most of the stories", "Focus the language on the business domain", "Create lightweight but precise documentation", "Focus on structure and scope, not detailed specifications", "Make the map easy to walk through (it tells a story)", "", "Example:", "(E) Manage Orders", "  and (E) Place Order", "    and (S) Customer --> places order", "(Shows hierarchy and structure, not detailed specs)"]}, "dont": {"description": "Don't over-elaborate or add detailed specifications during shaping", "content": ["Create stories that are too fine-grained without being testable or valuable", "Create stories that are too large to be testable or deliverable quickly", "Add detailed technical specifications during shaping phase", "Over-elaborate story mapping during shaping", "", "Wrong Example:", "(E) Manage Orders", "  and (E) Place Order", "    and (S) Customer --> places order", "  \u2192 Detailed API specs, database schema, UI mockups", "(Too much detail for shaping phase)"]}}]}}, {"rule_file": "discover_relationships_from_story_map.json", "rule_content": {"description": "Domain Discovery determines relationships and responsibilities between core domain objects by walking through the story map, then suggests story refinements to rebuild the story map to complement the domain model.", "examples": [{"do": {"description": "Extract keywords from story map and determine relationships and responsibilities", "content": "Go through all stories in increment scope, extract keywords from story titles/descriptions/acceptance criteria, ask clarifying questions for each keyword, map relationships with multiplicities, document responsibilities"}, "dont": {"description": "Don't skip keyword identification or build domain model without story map analysis", "content": "Skip going through stories, ignore keywords in acceptance criteria, build domain model without asking what keywords mean, use technical terms instead of domain terms"}}]}}, {"rule_file": "enforce_behavioral_journey_flow.json", "rule_content": {"description": "When shaping stories, CRITICAL: Stories must show user/system journey flow, not just list operations. Stories must include context (when/why actions happen) and connect logically. Order by user journey, not technical sequential_order.", "context": "when shaping stories", "examples": [{"do": {"description": "Show user/system journey with context and flow", "content": ["Stories must show WHEN and WHY actions happen, not just WHAT", "Story maps must show logical flow: Initialize \u2192 Validate \u2192 Process \u2192 Confirm \u2192 Complete", "Each story must connect to previous/next stories in the journey", "Order stories by user journey flow, not by technical sequential_order", "", "Correct Examples (with journey context - Payment Domain):", "(E) Process Payment", "  and (E) Process Card Payment", "    and (S) User --> invokes process payment command", "    and (S) System --> validates payment details", "    and (S) System --> authorizes payment", "    and (S) System --> processes payment transaction", "    and (S) System --> confirms payment and sends notification", "", "(E) Refund Payment", "  and (E) Process Refund", "    and (S) User --> invokes refund payment command", "    and (S) System --> validates refund eligibility", "    and (S) System --> processes refund transaction", "    and (S) System --> confirms refund and sends notification", "", "(E) Process Payment", "  and (E) Validate Payment", "    and (S) User --> submits payment request", "    and (S) System --> validates card number", "    and (S) System --> validates amount", "    and (S) System --> validates currency", "    and (S) System --> returns validation result", "", "Note: Individual stories like 'Authorize Payment with Processor' are correct story format (verb-noun, specific), but they need to be part of a journey. Stories should NOT include actors in the name (actors are documented separately).", "", "Correct Individual Stories (but need journey context):", "- 'Authorize Payment with Processor' (correct story format, but needs: when? why? what happens next?)", "- 'Validate Payment Details' (correct story format, but needs: when? why? what triggers this?)", "- 'Process Payment Transaction' (correct story format, but needs: when? why? what happens before/after?)", "", "Journey Flow Requirements:", "- Start with initialization/entry point", "- Show logical progression through operations", "- Include error handling and alternative paths", "- End with completion/save operations", "- Connect stories logically (this leads to that)"]}, "dont": {"description": "Don't create isolated sets of functions that don't make sense linearly", "content": ["Don't group unrelated operations together that don't form a logical journey", "Don't create story maps with random functions that have no linear relationship", "Don't mix unrelated operations from different domains or contexts", "", "Wrong Examples (isolated sets of functions, no linear sense - Payment Domain):", "(E) Payment Operations", "  and (E) Process Payment", "  and (E) Generate Invoice", "  and (E) Send Email", "  and (E) Update Inventory", "  and (E) Calculate Tax", "(unrelated operations, no linear flow - why does email come after payment? why inventory? no journey)", "", "(E) Payment System", "  and (E) Authorize Payment", "  and (E) Create User Account", "  and (E) Process Refund", "  and (E) Generate Report", "  and (E) Delete Transaction", "(random operations, no logical sequence - account creation doesn't follow authorization, deletion doesn't follow processing)", "", "(E) Payment Flow", "  and (S) System --> validates payment", "  and (S) System --> sends notification", "  and (S) System --> authorizes payment", "  and (S) System --> updates database", "  and (S) System --> processes payment", "(wrong order, no linear sense - notification before authorization? database update before processing?)", "", "What Makes It NOT a Linear Journey:", "- Unrelated operations grouped together (payment + inventory + email + tax - why together?)", "- Operations from different contexts mixed (payment + user account + reporting - different domains)", "- No logical sequence (why does X come before Y? no reason)", "- Operations can be in any order (no dependencies, no flow)", "- Random collection of functions (like a function library, not a journey)", "- No user/system goal that connects them (what are we trying to accomplish?)"]}}]}}, {"rule_file": "enforce_functional_accomplishment.json", "rule_content": {"description": "CRITICAL: Stories must represent complete functional accomplishments, not data access operations or implementation steps. Stories must deliver value independently.", "examples": [{"do": {"description": "Create stories that accomplish complete functions", "content": ["Stories must represent complete functional accomplishments", "Stories must deliver value independently (INVEST principle)", "Stories must show end-to-end flow, not just data access", "", "Correct Examples (complete functional accomplishments):", "- 'User loads story graph and system displays epics in diagram' (complete: load + display = accomplishment)", "- 'Developer edits epic name and system updates diagram' (complete: edit + update = accomplishment)", "- 'User requests render and system generates DrawIO file' (complete: request + generate = accomplishment)", "- 'CLI invokes render command and system saves outline diagram' (complete: invoke + save = accomplishment)", "", "Functional Accomplishment Requirements:", "- Story must accomplish something meaningful for user/system", "- Story must be independently valuable (can be tested/delivered alone)", "- Story must show complete flow (start \u2192 process \u2192 outcome)", "- Story must have clear acceptance criteria (how do we know it's done?)"]}, "dont": {"description": "Don't create stories that are just data access or implementation steps", "content": ["Don't create stories that are just data access operations", "Don't create stories that are implementation steps without outcomes", "Don't create stories that aren't independently valuable", "", "Wrong Examples (not complete accomplishments):", "- 'Read All Epics from Diagram' (data access - not accomplishment, what happens with the data?)", "- 'Load All Features In Graph Epic' (data access - not accomplishment)", "- 'Serialize Components to JSON' (implementation step - not accomplishment, part of what story?)", "- 'Convert Diagram to StoryGraph Format' (implementation step - not accomplishment)", "- 'Calculate Component Positions' (implementation step - not accomplishment)", "", "Data Access/Implementation Indicators (REJECT as stories):", "- Just reads/loads data without using it", "- Just converts/formats data without purpose", "- Just calculates/computes without outcome", "- Just serializes/saves without context", "", "These should be STEPS within stories, not stories themselves:", "- Step: 'System reads epics from diagram' (within story: 'User views story map and system displays epics')", "- Step: 'System serializes components' (within story: 'User saves story graph and system writes JSON file')", "- Step: 'System calculates positions' (within story: 'User requests render and system generates positioned diagram')", "", "Instead, ask:", "- What does the user/system accomplish with this?", "- Is this independently valuable?", "- Can this be tested/delivered alone?", "- What's the complete flow from start to finish?"]}}]}}, {"rule_file": "enforce_specificity_in_stories.json", "rule_content": {"description": "CRITICAL: Stories must be specific about what, when, why, and who. Generic operations like 'Add Sub-Epic' or 'Read Epics' are insufficient - stories must include context and specificity.", "scanner": "agile_bot.bots.base_bot.src.scanners.specificity_scanner.SpecificityScanner", "examples": [{"do": {"description": "Create specific stories with full context", "content": ["Stories must be specific about what, when, why, and who", "Stories must include context: when does it happen? why? what triggers it?", "Stories must specify actors, objects, and outcomes clearly", "", "Correct Examples (specific with context - Payment Domain):", "- 'User processes payment for order #12345 with amount $50.00 when customer completes checkout' (specific: user, order ID, amount, context)", "- 'Merchant invokes refund command from API and system reverses payment transaction' (specific: merchant, API, command, outcome)", "- 'System validates payment card number 4111-1111-1111-1111 when user submits payment form' (specific: system, card number, trigger)", "- 'User clicks Process Payment button and system prompts for payment method selection' (specific: user, action, UI element, system response)", "", "Specificity Requirements:", "- WHO: Specific actor (User, Merchant, Customer, System, PaymentProcessor, API)", "- WHAT: Specific action and object (processes payment for order #12345 with amount $50.00)", "- WHEN: Specific trigger/context (when customer completes checkout, when user submits payment form)", "- WHY: Purpose in journey (to complete purchase transaction, to reverse payment error)", "- OUTCOME: Specific result (payment processed, transaction ID returned, notification sent)"]}, "dont": {"description": "Don't create generic stories without context", "content": ["Don't create generic operations without specificity", "Don't omit context about when/why actions happen", "Don't use vague descriptions without details", "", "Wrong Examples (generic without context - Payment Domain):", "- 'Process Payment' (which payment? for which order? when? why?)", "- 'Authorize Payment' (which payment? with which card? when? why? what happens next?)", "- 'Exposes Payment API' (which endpoints? to whom? when? why?)", "- 'Refund Payment' (which payment? for which reason? when? why?)", "", "Generic Indicators (REJECT or require more specificity):", "- Single verb + noun without context: 'Process Payment', 'Authorize Payment', 'Refund Payment'", "- No specific objects: 'Process Payment' (which payment? which order?)", "- No context: 'Authorize Payment' (when? why? what triggers this?)", "- No outcome: 'Authorize Payment' (what happens with the authorization result?)", "", "Instead, ask:", "- Which specific object? (payment ID, order number, transaction ID, card number)", "- When does this happen? (trigger, context, user action - when customer completes checkout, when merchant requests refund)", "- Why does this happen? (purpose, user need, journey step - to complete purchase, to reverse error)", "- What's the outcome? (result, system response, user experience - payment processed, transaction ID returned, notification sent)"]}}]}}, {"rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "rule_content": {"description": "Establish mandatory spine stories vs optional/enhanced behavior stories. When mapping stories, carefully distinguish between sequential spine (essential path) and optional paths, alternate routes, or additional functionality that is not strictly essential. Mandatory stories form the sequential spine (story AND story AND story). Optional stories are alternatives or enhancements (story OR story) that branch from the spine and can return to it. Sequential stories form the mandatory flow; optional stories are alternatives, enhancements, or non-essential sub-epics.", "scanner": "agile_bot.bots.base_bot.src.scanners.spine_optional_scanner.SpineOptionalScanner", "examples": [{"do": {"description": "Identify the essential spine first", "content": ["Start by identifying the minimal essential path that delivers core value", "The spine represents the mandatory sequence: Story1 AND Story2 AND Story3", "Spine stories get sequential_order numbers (1, 2, 3, etc.)", "Spine stories are required for the sub-epic to deliver its core purpose", "Ask: 'What is the minimum path to deliver value?'", "Establish the mandatory spine before identifying optional/enhanced behaviors", "Explicitly distinguish between spine (mandatory) and optional/enhanced behaviors"]}, "dont": {"description": "Don't mark everything as sequential", "content": ["Don't assign sequential_order to all stories when some are optional", "Don't treat alternate routes as part of the spine", "Don't include enhancements in the mandatory sequential flow", "Don't confuse 'nice to have' with 'must have'", "Don't mark all stories as mandatory when some are alternatives or enhancements", "Don't fail to establish the spine before adding optional/enhanced behaviors"]}}, {"do": {"description": "Mark optional paths clearly", "content": ["Optional stories branch from or enhance the spine but are not required", "Mark optional stories with 'optional: true' in the story structure", "Optional stories may have sequential_order if they're part of an alternative flow (e.g., 2.1, 3.1, etc.)", "Optional stories represent: alternate routes, enhancements, nice-to-have sub-epics", "Ask: 'Can the sub-epic deliver value without this story?'", "Optional/enhanced stories can return to the spine after completion", "Sort optional/enhanced stories by priority of delivery within the same sub-epic"]}, "dont": {"description": "Don't omit optional markers", "content": ["Don't leave optional stories unmarked - be explicit", "Don't assume all stories in a sub-epic are mandatory", "Don't mix optional and mandatory without clear distinction", "Don't fail to identify the spine before adding optional paths", "Don't omit the optional marker - be explicit about spine vs optional/enhanced behaviors", "Don't create sub-epics where every story is mandatory when alternatives or enhancements exist"]}}, {"do": {"description": "Distinguish types of optional paths with concrete examples", "content": ["Spine (all stories with and), then OR optional branch (all stories with and), then OR enhanced (all stories with and):", "", "Correct Example:", "Spine (all stories with and):", "  (S) User --> creates account", "  and (S) User --> logs in", "  and (S) User --> views dashboard", "OR optional branch (all stories with and):", "  (S) User --> signs in with social media (optional)", "  and (S) User --> signs in with email (optional)", "OR enhanced (all stories with and):", "  (S) User --> customizes dashboard (enhanced)", "  and (S) User --> shares dashboard (enhanced)"]}, "dont": {"description": "Wrong mapping examples", "content": ["Wrong: All stories marked mandatory when some are clearly alternatives or enhancements", "  and (S) User --> creates account (1)", "  and (S) User --> logs in with email (2)", "  and (S) User --> logs in with social media (3) - social media should be optional", "", "Wrong: No distinction between essential path and optional sub-epics", "  and (S) User --> views dashboard (1)", "  and (S) User --> customizes dashboard (2)", "  and (S) User --> shares dashboard (3) - customization and sharing should be optional", "", "Wrong: Missing optional markers on alternative flows or enhanced behaviors", "Wrong: Optional/enhanced stories not sorted by priority", "Wrong: No clear spine established before adding optional behaviors"]}}]}}, {"rule_file": "extract_story_map_checklist.json", "rule_content": {"description": "Quick checklist for extracting story maps from code. Follow this process step-by-step.", "steps": [{"step": 1, "title": "Find Outermost Layer and Entry Points", "checklist": ["Locate CLI commands (main(), argparse, command handlers)", "Locate UI entry points (routes, event handlers, button clicks)", "Locate MCP server tool definitions (tool names, parameters)", "Locate API contracts (REST endpoints, GraphQL, WSDL)", "Locate WebSocket handlers, message queues, event listeners", "Locate acceptance tests (end-to-end, integration, BDD/Gherkin)", "Document all entry points with their parameters and return values"]}, {"step": 2, "title": "Analyze Operations and Domain Concepts", "checklist": ["List all operations from entry points (what can be invoked?)", "Identify MAJOR domain concepts (high-level entities)", "Identify MINOR domain concepts (supporting entities)", "Identify relationships between concepts", "Document operation names, parameters, return values", "Document concept names, properties, relationships"]}, {"step": 3, "title": "Create Epics Based on Higher-Order Goals", "checklist": ["Group operations by higher-order goals (what is user/system trying to accomplish?)", "Create epics from goals, not from implementation structure", "Each epic represents a major capability or lifecycle stage", "Validate: Epic name describes a goal, not a technical operation"]}, {"step": 4, "title": "Create Sub-Epics Based on Distinct Behaviors", "checklist": ["For each epic, identify distinct behaviors (different ways to accomplish goal)", "Group behaviors into sub-epics (different types, modes, contexts)", "Each sub-epic represents a distinct path or scenario", "Validate: Sub-epic name describes a behavior, not a technical mechanism"]}, {"step": 5, "title": "Identify Distinct Behaviors from Tests and Code Flow", "checklist": ["Trace through acceptance tests: what happens step by step?", "Trace through CLI commands: what's the execution flow?", "Trace through MCP tool calls: what's the sequence?", "Identify distinct behaviors at each step", "Document typical execution order", "Document error handling and alternative paths"]}, {"step": 6, "title": "Lay Out Story Journey from End-to-End Flow", "checklist": ["Start with entry point (how does user/system initiate?)", "Follow code flow through operations (what happens step by step?)", "Include error handling (what happens when things go wrong?)", "End with completion (how does it finish?)", "For each story, include:", "  - WHEN: trigger, condition, user action", "  - WHY: purpose, user need, system requirement", "  - OUTCOME: result, state change, user experience", "  - ACTOR: who performs the action", "Validate: Stories show complete journey, not isolated operations"]}, {"step": 7, "title": "Validate Story Map Quality", "checklist": ["Stories show user/system journey (not just list operations)", "Stories have context (when/why/outcome)", "Stories are specific (not generic like 'Add Sub-Epic')", "Stories represent complete accomplishments (not data access)", "Implementation details are steps, not stories", "Order follows user journey, not technical sequential_order", "Epics/sub-epics based on goals, not implementation structure"]}], "common_mistakes": ["Starting with internal classes instead of entry points", "Creating epics from class structure instead of goals", "Creating stories from every method call", "Missing context (when/why) in stories", "Making implementation details into stories", "Ordering by technical sequential_order instead of user journey", "Generic stories without specificity"]}}, {"rule_file": "extract_story_map_from_code.json", "rule_content": {"description": "CRITICAL: When creating story maps from code, analyze the outermost layer showing end-to-end journey. Locate acceptance tests, human code engagement points (CLI/UI), MCP server definitions, WSDL, API contracts. Analyze operations and domain for major/minor concepts. Create epics/sub-epics based on higher-order goals. Look at distinct behaviors and typical execution order to lay out story journey.", "examples": [{"do": {"description": "Find outermost layer and entry points", "content": ["Start with the OUTERMOST LAYER showing end-to-end journey", "Locate all HUMAN CODE ENGAGEMENT points:", "  - CLI commands and entry points (main(), command handlers)", "  - UI entry points (web routes, event handlers, button clicks)", "  - MCP server tool definitions (tool names, parameters, descriptions)", "  - API contracts (REST endpoints, GraphQL queries, WSDL operations)", "  - WebSocket handlers, message queues, event listeners", "", "Locate ACCEPTANCE TESTS:", "  - End-to-end tests that show complete user journeys", "  - Integration tests that show system-to-system flows", "  - Test scenarios that describe 'when X, then Y' behaviors", "  - BDD/Gherkin tests with Given-When-Then structure", "", "Example Entry Points to Find:", "- CLI: 'python -m story_io.story_io_cli render-outline --story-graph file.json'", "- MCP: Tool 'render_outline' with parameters 'story_graph_path', 'output_path'", "- API: POST /api/story-graph/render with body {storyGraph, outputFormat}", "- UI: Button 'Render Outline' that triggers render operation", "- Test: 'test_render_outline_from_json' that shows complete flow"]}, "dont": {"description": "Don't start with internal implementation details", "content": ["Don't start with internal classes or helper functions", "Don't start with data structures or domain models", "Don't start with utility functions or low-level operations", "", "Wrong Starting Points:", "- Internal class: 'StoryIODiagram.load_from_json()' (implementation detail)", "- Helper function: 'parse_story_graph()' (internal mechanism)", "- Data structure: 'Epic' class definition (domain model, not entry point)", "", "These are important but come AFTER identifying the journey"]}}, {"do": {"description": "Analyze operations and domain for major/minor concepts", "content": ["Analyze OPERATIONS from entry points:", "  - What operations are exposed? (render, sync, search, edit, save)", "  - What are the operation names? (render-outline, sync-increments, search-stories)", "  - What parameters do they take? (story_graph_path, output_path, query)", "  - What do they return? (DrawIO file, JSON report, search results)", "", "Analyze DOMAIN CONCEPTS:", "  - MAJOR CONCEPTS: High-level domain entities (StoryGraph, Diagram, Epic, Sub-Epic, Story)", "  - MINOR CONCEPTS: Supporting entities (Position, Boundary, User, Increment)", "  - OPERATIONS: Actions on concepts (Load, Read, Edit, Render, Synchronize, Search, Save)", "  - RELATIONSHIPS: How concepts relate (Epic contains Sub-Epics, Sub-Epic contains Stories)", "", "Example Analysis (Story-IO Domain):", "- Operations: render-outline, render-increments, sync-outline, sync-increments, search, add-user, merge", "- Major Concepts: StoryGraph (main entity), Diagram (visual representation), Epic/Sub-Epic/Story (hierarchy)", "- Minor Concepts: Position (2D coordinate), Boundary (rectangular area), User (story actor), Increment (priority grouping)", "- Relationships: StoryGraph contains Epics, Epic contains Sub-Epics, Sub-Epic contains Stories", "", "Example Analysis (Payment Domain):", "- Operations: process-payment, refund-payment", "- Major Concepts: Payment (main entity), Transaction (financial transaction), Card (payment method), Refund (reversal)", "- Minor Concepts: Amount (monetary value), Currency (USD, EUR), Status (pending, approved, declined), PaymentMethod (card, bank transfer)", "- Relationships: Payment contains Transaction, Payment uses Card, Payment can have Refund, Transaction has Status"]}, "dont": {"description": "Don't confuse implementation details with domain concepts", "content": ["Don't treat implementation classes as domain concepts", "Don't treat utility functions as operations", "Don't treat data structures as domain entities", "", "Wrong Analysis:", "- Implementation class: 'StoryIORenderer' (implementation detail, not domain concept)", "- Utility function: 'calculate_position()' (implementation detail, not operation)", "- Data structure: 'dict' or 'list' (implementation detail, not domain concept)", "", "Focus on WHAT the system does (domain), not HOW it does it (implementation)"]}}, {"do": {"description": "Create epics/sub-epics based on higher-order goals", "content": ["Group operations into EPICS based on HIGHER-ORDER GOALS:", "  - What is the user/system trying to accomplish?", "  - What are the major capabilities?", "  - What are the lifecycle stages?", "", "Example Epic Creation from Operations (Story-IO Domain):", "- Operations: render-outline, render-increments, render-exploration", "- Higher-Order Goal: 'Render StoryGraph' (user wants to visualize story map)", "- Epic: 'Render StoryGraph'", "", "- Operations: sync-outline, sync-increments, generate-sync-report, merge", "- Higher-Order Goal: 'Synchronize StoryGraph' (user wants to sync between formats)", "- Epic: 'Synchronize StoryGraph'", "", "Example Epic Creation from Operations (Payment Domain):", "- Operations: process-payment, process_payment, POST /api/payments/process", "- Higher-Order Goal: 'Process Payment' (user wants to process a payment transaction)", "- Epic: 'Process Payment'", "", "- Operations: refund-payment, refund_payment, POST /api/payments/refund", "- Higher-Order Goal: 'Refund Payment' (user wants to reverse a payment)", "- Epic: 'Refund Payment'", "", "Group operations into SUB-EPICS based on DISTINCT BEHAVIORS:", "  - What are the different ways to accomplish the epic goal?", "  - What are the different types or modes?", "  - What are the different contexts or scenarios?", "", "Example Sub-Epic Creation (Story-IO Domain):", "- Epic: 'Render StoryGraph'", "- Distinct Behaviors: Render outline (basic), Render increments (with priorities), Render exploration (with acceptance criteria)", "- Sub-Epics: 'Render Outline', 'Render Increments', 'Render Exploration'", "", "- Epic: 'Synchronize StoryGraph'", "- Distinct Behaviors: Sync outline structure, Sync increments, Generate comparison report, Merge graphs", "- Sub-Epics: 'Synchronize Outline', 'Synchronize Increments', 'Generate Sync Report', 'Merge StoryGraphs'", "", "Example Sub-Epic Creation (Payment Domain):", "- Epic: 'Process Payment'", "- Distinct Behaviors: Validate payment (required), Authorize payment (required), Process with card (common), Process with bank transfer (alternative), Process with wallet (alternative), Confirm payment (required)", "- Sub-Epics: 'Validate Payment', 'Authorize Payment', 'Process Card Payment', 'Process Bank Transfer', 'Process Wallet Payment', 'Confirm Payment'", "", "- Epic: 'Refund Payment'", "- Distinct Behaviors: Validate refund eligibility, Process refund, Confirm refund", "- Sub-Epics: 'Validate Refund', 'Process Refund', 'Confirm Refund'"]}, "dont": {"description": "Don't create epics/sub-epics from implementation structure", "content": ["Don't create epics based on class structure (StoryIODiagram, DrawIORenderer, PaymentProcessor, etc.)", "Don't create sub-epics based on method names (load_json, parse_xml, charge_card, etc.)", "Don't create epics/sub-epics from technical layers (data layer, service layer, etc.)", "", "Wrong Epic Creation:", "- Based on class: 'StoryIODiagram Operations' (implementation structure)", "- Based on method: 'JSON Loading' (technical mechanism)", "- Based on layer: 'Data Access Layer' (technical architecture)", "", "Focus on USER/SYSTEM GOALS, not technical structure"]}}, {"do": {"description": "Look at distinct behaviors and typical execution order", "content": ["Analyze DISTINCT BEHAVIORS from acceptance tests and code flow:", "  - What are the different scenarios?", "  - What are the different paths through the code?", "  - What are the different user actions?", "", "Example Behavior Analysis (Story-IO Domain):", "- Test: 'test_render_outline_from_json' shows: Load JSON \u2192 Parse \u2192 Generate XML \u2192 Calculate Positions \u2192 Apply Styles \u2192 Save", "- Distinct Behaviors: Load, Parse, Generate, Calculate, Apply, Save", "- These become STORIES in the journey", "", "Example Behavior Analysis (Payment Domain):", "- Test: 'test_process_payment_success' shows: Invoke \u2192 Validate \u2192 Authorize \u2192 Process \u2192 Confirm", "- Distinct Behaviors: Invoke (entry point), Validate (check input), Authorize (check funds/fraud), Process (execute transaction), Confirm (complete and notify)", "- These become STORIES in the journey", "", "Determine TYPICAL EXECUTION ORDER from code flow:", "  - Trace through acceptance tests: what happens first, second, third?", "  - Trace through CLI commands: what's the flow?", "  - Trace through MCP tool calls: what's the sequence?", "  - Look at error handling: what are alternative paths?", "", "Example Execution Order Analysis (Story-IO Domain):", "- CLI: 'render-outline --story-graph file.json --output file.drawio'", "- Code Flow: Parse args \u2192 Load story graph \u2192 Create diagram \u2192 Render outline \u2192 Save file", "- Typical Order: 1. Parse arguments, 2. Load story graph, 3. Render outline, 4. Save file", "- Stories: 'Parses Command Arguments' \u2192 'Loads StoryGraph from JSON' \u2192 'Renders Outline to DrawIO' \u2192 'Saves DrawIO File'", "", "Example Execution Order Analysis (Payment Domain):", "- CLI: 'process-payment --payment-id 123 --amount 50.00'", "- Code Flow: Parse args \u2192 Validate payment \u2192 Authorize payment \u2192 Process payment \u2192 Confirm payment", "- Typical Order: 1. User invokes process payment, 2. System validates payment details, 3. System authorizes payment, 4. System processes payment, 5. System confirms payment", "- Stories: 'User invokes process payment command' \u2192 'System validates payment details' \u2192 'System authorizes payment with payment processor' \u2192 'System processes payment transaction' \u2192 'System confirms payment and sends notification'", "", "Create STORY JOURNEY from execution order:", "  - Start with entry point (CLI invocation, UI click, MCP tool call)", "  - Follow the code flow through operations", "  - Include error handling and alternative paths", "  - End with completion (save, return result, display)", "", "Example Story Journey (Story-IO Domain):", "- Entry: 'User invokes render-outline command from CLI'", "- Flow: 'CLI parses arguments' \u2192 'CLI loads story graph' \u2192 'CLI invokes render' \u2192 'System renders outline' \u2192 'System saves file'", "- Error: 'If file not found, CLI displays error message'", "- Completion: 'CLI returns success message'", "", "Example Story Journey (Payment Domain):", "- Entry: 'User invokes process payment command' (WHEN: user wants to charge customer, WHY: to complete purchase, OUTCOME: CLI/MCP/API receives request)", "- Flow: 'System validates payment details' (WHEN: after request received, WHY: to ensure payment can be processed, OUTCOME: details validated) \u2192 'System authorizes payment' (WHEN: after validation, WHY: to check funds/fraud, OUTCOME: payment authorized) \u2192 'System processes payment' (WHEN: after authorization, WHY: to execute transaction, OUTCOME: payment processed) \u2192 'System confirms payment' (WHEN: after processing, WHY: to notify user, OUTCOME: payment confirmed)", "- Error: 'If validation fails, System displays validation error' (WHEN: validation fails, WHY: to inform user, OUTCOME: error shown, process stops)", "- Completion: 'System returns transaction ID' (WHEN: after confirmation, WHY: to provide reference, OUTCOME: transaction ID returned)"]}, "dont": {"description": "Don't create stories from code structure or method calls", "content": ["Don't create stories from every method call in code", "Don't create stories from internal function calls", "Don't create stories from data structure operations", "", "Wrong Story Creation:", "- From method: 'StoryIODiagram.__init__()' (internal initialization)", "- From function: 'parse_json()' (internal parsing)", "- From operation: 'dict.get()' (data access, not behavior)", "- From method: 'PaymentProcessor.charge_card()' (internal implementation)", "", "Focus on USER/SYSTEM VISIBLE BEHAVIORS, not internal implementation"]}}, {"do": {"description": "Lay out story journey from end-to-end flow", "content": ["Create STORY JOURNEY that shows complete end-to-end flow:", "  - Start: How does user/system initiate? (CLI command, UI click, API call)", "  - Middle: What happens step by step? (parse, load, process, transform)", "  - End: How does it complete? (save, return, display, notify)", "", "Include CONTEXT for each story:", "  - WHEN does it happen? (trigger, condition, user action)", "  - WHY does it happen? (purpose, user need, system requirement)", "  - WHAT is the outcome? (result, state change, user experience)", "  - ACTOR: Who performs the action? (User, System, CLI, MCP, API, etc.)", "", "Example Complete Story Journey (Story-IO Domain):", "(E) Render StoryGraph", "  and (E) Render Outline", "    and (S) User --> invokes render-outline command from CLI", "    and (S) CLI --> parses command arguments", "    and (S) CLI --> loads story graph from JSON file", "    and (S) System --> renders outline to DrawIO format", "    and (S) System --> saves DrawIO file", "", "Example Complete Story Journey (Payment Domain):", "(E) Process Payment", "  and (E) Process Card Payment", "    and (S) User --> invokes process payment command", "    and (S) System --> validates payment details", "    and (S) System --> authorizes payment with payment processor", "    and (S) System --> processes payment transaction", "    and (S) System --> confirms payment and sends notification", "", "Include ERROR HANDLING and ALTERNATIVE PATHS:", "  - What happens when file not found?", "  - What happens when parsing fails?", "  - What happens when validation fails?", "  - What happens when authorization fails?", "", "Example Error Handling (Story-IO Domain):", "  and (S) CLI --> displays error message if story graph file not found", "", "Example Error Handling (Payment Domain):", "  and (S) System --> displays validation error if validation fails", "  and (S) System --> displays authorization declined message if authorization fails"]}, "dont": {"description": "Don't create isolated stories without journey context", "content": ["Don't create stories that are just operations without context", "Don't create stories that don't connect to a journey", "Don't create stories without when/why/outcome/actor", "", "Wrong Story Creation:", "- (S) System --> loads StoryGraph (no context: when? why? what happens next?)", "- (S) System --> parses JSON (no context: when? why? what's the outcome?)", "- (S) System --> saves file (no context: when? why? what triggers this?)", "- (S) System --> processes payment (no context: when? why? what's the outcome?)", "", "Every story must be part of a JOURNEY with CONTEXT (when/why/outcome/actor)"]}}]}}, {"rule_file": "focus_real_actions_on_domain_concepts.json", "rule_content": {"description": "When shaping stories, stories must describe REAL ACTIONS that users or other actors (even system or technical actors) can perform, not capabilities or structural descriptions. Organize by lifecycle flow (Load, Read, Edit, Render, Synchronize, Search, Save). CRITICAL: Actor names must NOT appear in Epic/Sub-Epic/Story names - names are Verb-Noun only.", "context": "when shaping stories", "examples": [{"do": {"description": "Use real actions - actor separate from name", "content": ["Stories describe actions: Load, Read, Add, Remove, Render, Search, Save", "Organize by lifecycle: Load \u2192 Read \u2192 Edit \u2192 Render \u2192 Synchronize \u2192 Search \u2192 Save", "Use Verb-Noun format for names: '[Verb] [Noun]' - NO ACTOR in name", "Focus on what users/code CAN DO, not what things ARE", "", "NAMING RULE - Actor NOT in Name:", "- Epic name: 'Places Order' (NOT 'Customer Places Order')", "- Sub-Epic name: 'Validates Payment' (NOT 'PaymentValidator Validates Payment')", "- Story name: 'Processes Order Items' (NOT 'OrderProcessor Processes Order Items')", "- Actor is documented separately, not in the name itself", "", "ACTORS for User/System Stories (normal stories):", "- Use human/system actors: User, Developer, System, Customer, Admin", "- Actor is implicit or documented separately from name", "- Examples: Epic 'Places Order' has actor: Customer", "- Examples: Sub-Epic 'Validates Payment' has actor: System", "", "ACTORS for Technical Stories (deep internal class-level interactions):", "- Domain concepts CAN be actors: OrderProcessor, PaymentValidator, InventoryManager, Cart, Product", "- Actor is documented separately, NOT in name", "- Examples: Epic 'Loads Order Data' has actor: OrderProcessor (technical)", "- Examples: Sub-Epic 'Updates Inventory' has actor: InventoryManager (technical)", "- Examples: Story 'Calculates Total' has actor: Cart (technical)", "- This is acceptable when documenting class-to-class interactions internally"]}, "dont": {"description": "Avoid capabilities, structural descriptions, passive states, and actors in names", "content": ["Don't use capability nouns or structural descriptions", "Don't describe what things ARE or CONTAIN", "Don't use passive states or properties as stories", "CRITICAL: Don't put actor in Epic/Sub-Epic/Story names", "", "Wrong Examples (capabilities/structure):", "- 'PaymentValidator Contains Validation Logic' (capability, not action)", "- 'OrderProcessor Tracks Order Count' (passive state, not action)", "- 'Cart Hierarchy Foundation' (structural description)", "- 'Domain Components Implementation' (capability)", "- 'Product Represents Item' (structural description)", "", "Wrong Examples (actor in name):", "- Epic: 'Customer Places Order' (actor in name - WRONG)", "- Sub-Epic: 'OrderProcessor Validates Payment' (actor in name - WRONG)", "- Sub-Epic: 'Cart Adds Product' (actor in name - WRONG)", "- Story: 'InventoryManager Updates Stock' (actor in name - WRONG)", "", "Correct Examples (actor NOT in name):", "- Epic: 'Places Order' (actor: Customer, documented separately)", "- Sub-Epic: 'Validates Payment' (actor: PaymentValidator, documented separately)", "- Sub-Epic: 'Adds Product' (actor: Cart, documented separately)", "- Story: 'Updates Stock' (actor: InventoryManager, documented separately)", "", "These are not actions users/code can perform - they describe structure or capabilities", "Instead ask: What can users/code DO with this domain concept?", "- Instead of 'Contains Logic' \u2192 'Generates XML' or 'Renders Diagram'", "- Instead of 'Tracks Count' \u2192 'Reads Count' or 'Updates Count'", "- Instead of 'Represents X' \u2192 'Creates X' or 'Loads X'"]}}]}}, {"rule_file": "focus_user_and_system_activities.json", "rule_content": {"description": "Focus story maps on both user AND system activities, not tasks. Stories should outline user and system behavior patterns.", "examples": [{"do": {"description": "Include both user and system activities in story descriptions", "content": ["User submits order, System validates payment", "Customer views products, System displays inventory", "Use user activity patterns: User submits, Customer places", "Use system activity patterns: System validates, System sends", "Focus stories on user interactions and how the system behaves as observed by users", "Example: Customer places order with payment details", "", "ACTOR SELECTION (documented separately, NOT in name):", "- For user/system stories: Actors are User, System, Developer, Customer, Admin (human/system actors)", "- For technical stories (deep internal class-level): Domain concepts can be actors (StoryIODiagram, DrawIORenderer, DrawIOSynchronizer, User, Increment, Component)", "- Technical stories document class-to-class interactions where domain concepts act as actors", "", "CRITICAL NAMING RULE:", "- Actor must NOT appear in Epic/Sub-Epic/Story name", "- Name format: '[Verb] [Noun]' only", "- Examples: 'Loads StoryGraph' (actor: StoryIODiagram, documented separately)", "- Examples: 'Adds Sub-Epic' (actor: Epic, documented separately)", "- Examples: 'Changes Parent' (actor: Component, documented separately)"]}, "dont": {"description": "Avoid task-oriented language that describes implementation", "content": ["Avoid task-oriented language that describes implementation", "Don't use task language for building or setting up", "Don't focus only on user activities (ignore system activities)", "Don't focus only on tasks (instead of activities)", "Don't use development task language: implement, create, refactor, optimize, fix, build, set up", "Don't use technical implementation details: query database, call API, update table", "", "Wrong Examples:", "- Only user activities: User submits order, User views products (missing system activities)", "- Only tasks: Implement order submission, Create payment validation (not activities)", "- Implement order submission, Create payment validation", "- Build product listing page, Set up inventory display"]}}]}}, {"rule_file": "identify_system_stories.json", "rule_content": {"description": "System stories capture system-to-system interactions that are not user-facing. They represent internal system behavior that crosses system boundaries (e.g., microservice to microservice, component to component). System stories should be identified and marked with story_type: 'system'.", "do": {"examples": [{"description": "Identify system-to-system interactions", "content": ["Storage Microservice validates payload from Local Mgmt System", "API Gateway routes request to Authentication Service", "Message Queue delivers event to Notification Service"]}, {"description": "Mark system stories with story_type: 'system'", "content": ["Story: 'Validate Payload' with story_type: 'system'", "Story: 'Route Request' with story_type: 'system'", "Story: 'Deliver Event' with story_type: 'system'"]}, {"description": "Use system stories for internal system behavior", "content": ["System stories represent behavior that happens between systems/components", "System stories are not directly visible to end users", "System stories enable user-facing stories to function"]}]}, "dont": {"examples": [{"description": "Don't mark user-facing stories as system stories", "content": ["User clicks button \u2192 NOT a system story", "User views dashboard \u2192 NOT a system story", "User submits form \u2192 NOT a system story"]}, {"description": "Don't confuse system stories with technical stories", "content": ["System stories = system-to-system behavior (dark blue in DrawIO)", "Technical stories = implementation tasks (black/white in DrawIO, normally avoided)"]}]}}}, {"rule_file": "maximize_integration_of_related_concepts.json", "rule_content": {"description": "When shaping stories, maximize integration of related concepts", "context": "when shaping stories", "examples": [{"do": {"description": "Group concepts that the user sees as one capability", "content": ["Group concepts that the user sees as one capability", "Nest implementation details under the sub-epic they serve", "Keep related data and operations together", "Eliminate artificial boundaries based on code organization"]}, "dont": {"description": "Don't separate related concepts", "content": ["Don't separate related concepts into different major sections", "Wrong: Split based on code layers (data, business, presentation)", "Don't duplicate related concepts across multiple sections", "Wrong: Create gaps that break the user's mental model"]}}]}}, {"rule_file": "place_domain_concepts_by_relevance.json", "rule_content": {"description": "When shaping stories, place domain concepts locally or globally based on relevance to one or multiple sub_epics", "context": "when shaping stories", "examples": [{"do": {"description": "Place domain concepts at the most specific level, favoring local placement", "content": ["Favor local placement: Place domain_concepts at the sub_epic level when they are relevant to only that sub_epic", "Think about the core: Consider core domain concepts that span multiple sub_epics - these should be placed at the parent epic/sub_epic level", "Elevate when shared: If a domain concept is used by multiple child sub_epics, elevate it to the parent level", "Start local, elevate if needed: Begin with local placement, but elevate if the concept is referenced by multiple sub_epics", "", "Correct Examples (Local Placement):", "- Sub-Epic 'Validates Payment' has domain_concept: 'Payment' (only used in this sub-epic)", "- Sub-Epic 'Processes Order' has domain_concept: 'Order' (only used in this sub-epic)", "- Sub-Epic 'Updates Inventory' has domain_concept: 'InventoryItem' (only used in this sub-epic)", "", "Correct Examples (Global Placement):", "- Epic 'Process Payment' has domain_concept: 'Payment' (used by multiple sub-epics: Validate Payment, Authorize Payment, Process Transaction)", "- Epic 'Manage Orders' has domain_concept: 'Order' (used by multiple sub-epics: Create Order, Update Order, Cancel Order)", "- Sub-Epic 'Order Management' has domain_concept: 'Customer' (used by multiple child sub-epics: Create Customer Order, Update Customer Order)"]}, "dont": {"description": "Don't place domain concepts at wrong levels or duplicate them unnecessarily", "content": ["Don't place domain concepts at epic level when they're only used in one sub-epic", "Wrong: Epic 'Payment System' has domain_concept: 'PaymentValidator' (only used in 'Validates Payment' sub-epic - should be local)", "Don't duplicate domain concepts at multiple levels", "Wrong: Both Epic and Sub-Epic have 'Payment' concept when it's only used in one sub-epic", "Don't place core domain concepts too locally if they're used across multiple epics", "Wrong: Core concept 'User' placed only in one sub-epic when it's used across multiple epics", "Don't ignore shared usage - if multiple sub-epics reference a concept, elevate it", "Wrong: 'Order' concept placed in each sub-epic separately when all sub-epics use it (should be at parent level)"]}}]}}, {"rule_file": "prevent_generic_capabilities.json", "rule_content": {"description": "CRITICAL: Stories must describe specific actions with actors, not generic capabilities. Reject stories that describe what system IS (capabilities) vs what system DOES (behaviors).", "scanner": "agile_bot.bots.base_bot.src.scanners.generic_capability_scanner.GenericCapabilityScanner", "examples": [{"do": {"description": "Use specific actions with actors and outcomes", "content": ["Stories must have specific actors performing specific actions", "Stories must describe what system DOES (behaviors), not what system IS (capabilities)", "Stories must have specific outcomes, not generic descriptions", "", "Correct Examples (specific behaviors with actors):", "- 'User invokes MCP tool and system routes to StoryIO handler' (specific: user, MCP tool, routing action)", "- 'Developer adds sub-epic Render Exploration to epic Render StoryGraph' (specific: developer, sub-epic name, epic name)", "- 'System loads story graph from JSON file when user requests render' (specific: system, load action, trigger)", "- 'CLI determines workspace root from current directory' (specific: CLI, determine action, source)", "", "Actor Requirements:", "- Every story must have an actor (User, System, Developer, CLI, StoryIODiagram, etc.)", "- Actor must be documented separately (not in name)", "- Actor must be specific (not generic 'Component' or 'System')", "- Actor must perform the action (not just be present)"]}, "dont": {"description": "Don't use generic capabilities or passive descriptions", "content": ["Don't describe what system IS (capabilities)", "Don't use generic action descriptions without actors", "Don't use passive states or properties as stories", "", "Wrong Examples (generic capabilities):", "- 'Exposes Tools' (capability - what tools? when? to whom? what happens?)", "- 'Provides Server Interface' (capability - what interface? when? why?)", "- 'Contains Validation Logic' (capability - not an action)", "- 'Tracks Order Count' (passive state - not an action)", "", "Capability Indicators (REJECT):", "- Describes what system IS: 'Exposes', 'Provides', 'Contains', 'Represents'", "- No specific actor or action", "- No specific outcome or trigger", "- Generic description without context", "", "Instead, ask:", "- Who performs this action? (actor)", "- When does this happen? (trigger/context)", "- What specific outcome occurs? (result)", "- Why does this happen? (purpose in journey)"]}}]}}, {"rule_file": "prevent_implementation_details_as_stories.json", "rule_content": {"description": "CRITICAL: Implementation operations (serialize, convert, calculate, generate XML, apply formatting) must be steps within stories, not stories themselves. Stories must focus on user/system outcomes, not technical mechanisms.", "examples": [{"do": {"description": "Keep implementation details as steps within stories", "content": ["Implementation operations must be steps within stories", "Stories must focus on user/system outcomes, not technical mechanisms", "Stories must describe what user/system experiences, not how it's implemented", "", "Correct Examples (outcomes, not mechanisms):", "- Story: 'User saves story graph and system writes JSON file' \u2192 Steps: 'System converts diagram to story graph format', 'System serializes components to JSON', 'System writes file'", "- Story: 'User requests render and system generates DrawIO diagram' \u2192 Steps: 'System generates DrawIO XML', 'System calculates component positions', 'System applies styles', 'System saves file'", "- Story: 'User edits epic and system updates diagram' \u2192 Steps: 'System updates epic data', 'System recalculates layout', 'System refreshes diagram'", "", "Story vs Step Distinction:", "- Story = User/system outcome (what they experience)", "- Step = Implementation detail (how it's done)", "- Story = Independently valuable (can be tested/delivered)", "- Step = Part of story (not independently valuable)"]}, "dont": {"description": "Don't make implementation operations into stories", "content": ["Don't create stories for implementation operations", "Don't expose technical mechanisms as user stories", "Don't break implementation steps into separate stories", "", "Wrong Examples (implementation details as stories):", "- 'Convert Diagram to StoryGraph Format' (implementation - should be step in 'Save StoryGraph' story)", "- 'Serialize Components to JSON' (implementation - should be step in 'Save StoryGraph' story)", "- 'Generate DrawIO XML from StoryGraph' (implementation - should be step in 'Render Outline' story)", "- 'Calculate Component Positions' (implementation - should be step in 'Render Outline' story)", "- 'Apply Component Styles' (implementation - should be step in 'Render Outline' story)", "- 'Save DrawIO XML to File' (implementation - should be step in 'Render Outline' story)", "", "Implementation Operation Indicators (REJECT as stories):", "- Serialize, deserialize, convert, transform, format", "- Calculate, compute, generate, create (technical artifacts)", "- Apply, set, configure (technical settings)", "- Save, write, store (without user context)", "", "These are implementation mechanisms, not user/system behaviors", "They should be steps within stories that describe outcomes", "", "Instead, ask:", "- What does the user/system experience? (story)", "- How is it implemented? (step within story)", "- What's the outcome? (story)", "- What's the mechanism? (step)"]}}], "scanner": "agile_bot.bots.base_bot.src.scanners.implementation_details_scanner.ImplementationDetailsScanner"}}, {"rule_file": "refine_scope_to_functional_accomplishment.json", "rule_content": {"description": "Refine Scope to Functional Accomplishment", "examples": [{"do": {"description": "Focus on functional outcomes, not mechanisms", "content": ["Focus on functional outcomes, not mechanisms", "Frame domains by what they accomplish for users", "Ask about user enablement: What does this enable the user to do or understand?", "State the transformation or capability provided", "Be specific about the functional benefit"]}, "dont": {"description": "Don't frame domains by their technical implementation", "content": ["Don't frame domains by their technical implementation", "Wrong: Focus on 'how' before 'what'", "Don't use generic system capabilities as domain names", "Wrong: Describe mechanisms instead of outcomes"]}}]}}, {"rule_file": "size_stories_3_to_12_days.json", "rule_content": {"description": "Size stories to fall within 3-12 day effort range for effective planning and frequent delivery.", "scanner": "agile_bot.bots.base_bot.src.scanners.story_sizing_scanner.StorySizingScanner", "examples": [{"do": {"description": "Create stories that represent complete flows within the effort range", "content": ["Create stories that represent complete flows within the effort range", "Example: Customer places order (complete flow, 3-5 days)", "Break/group stories so that most fall into a 3-12 day effort range", "Enable frequent feedback by decomposing the work into smaller items"]}, "dont": {"description": "Avoid stories that are too large or too small", "content": ["Avoid stories that are too large and span multiple weeks", "Don't arbitrarily decompose stories to a functional level, regardless of size", "", "Wrong Examples:", "- Order management system (too large, 20+ days)", "- Create stories that are too small without considering value"]}}]}}, {"rule_file": "story_map_code_approach.json", "rule_content": {"description": "Quick checklist for extracting story maps from code. Follow this process step-by-step.", "steps": [{"step": 1, "title": "Find Outermost Layer and Entry Points", "checklist": ["Locate CLI commands (main(), argparse, command handlers)", "Locate UI entry points (routes, event handlers, button clicks)", "Locate MCP server tool definitions (tool names, parameters)", "Locate API contracts (REST endpoints, GraphQL, WSDL)", "Locate WebSocket handlers, message queues, event listeners", "Locate acceptance tests (end-to-end, integration, BDD/Gherkin)", "Document all entry points with their parameters and return values"]}, {"step": 2, "title": "Analyze Operations and Domain Concepts", "checklist": ["List all operations from entry points (what can be invoked?)", "Identify MAJOR domain concepts (high-level entities)", "Identify MINOR domain concepts (supporting entities)", "Identify relationships between concepts", "Document operation names, parameters, return values", "Document concept names, properties, relationships"]}, {"step": 3, "title": "Create Epics Based on Higher-Order Goals", "checklist": ["Group operations by higher-order goals (what is user/system trying to accomplish?)", "Create epics from goals, not from implementation structure", "Each epic represents a major capability or lifecycle stage", "Validate: Epic name describes a goal, not a technical operation"]}, {"step": 4, "title": "Create Sub-Epics Based on Distinct Behaviors", "checklist": ["For each epic, identify distinct behaviors (different ways to accomplish goal)", "Group behaviors into sub-epics (different types, modes, contexts)", "Each sub-epic represents a distinct path or scenario", "Validate: Sub-epic name describes a behavior, not a technical mechanism"]}, {"step": 5, "title": "Identify Distinct Behaviors from Tests and Code Flow", "checklist": ["Trace through acceptance tests: what happens step by step?", "Trace through CLI commands: what's the execution flow?", "Trace through MCP tool calls: what's the sequence?", "Identify distinct behaviors at each step", "Document typical execution order", "Document error handling and alternative paths"]}, {"step": 6, "title": "Lay Out Story Journey from End-to-End Flow", "checklist": ["Start with entry point (how does user/system initiate?)", "Follow code flow through operations (what happens step by step?)", "Include error handling (what happens when things go wrong?)", "End with completion (how does it finish?)", "For each story, include:", "  - WHEN: trigger, condition, user action", "  - WHY: purpose, user need, system requirement", "  - OUTCOME: result, state change, user experience", "  - ACTOR: who performs the action", "Validate: Stories show complete journey, not isolated operations"]}, {"step": 7, "title": "Validate Story Map Quality", "checklist": ["Stories show user/system journey (not just list operations)", "Stories have context (when/why/outcome)", "Stories are specific (not generic like 'Add Sub-Epic')", "Stories represent complete accomplishments (not data access)", "Implementation details are steps, not stories", "Order follows user journey, not technical sequential_order", "Epics/sub-epics based on goals, not implementation structure"]}], "common_mistakes": ["Starting with internal classes instead of entry points", "Creating epics from class structure instead of goals", "Creating stories from every method call", "Missing context (when/why) in stories", "Making implementation details into stories", "Ordering by technical sequential_order instead of user journey", "Generic stories without specificity"]}}, {"rule_file": "use_active_behavioral_language.json", "rule_content": {"description": "When shaping stories, use active behavioral language with action verbs. Describe behaviors, not tasks or capabilities.", "context": "when shaping stories", "scanner": "agile_bot.bots.base_bot.src.scanners.active_language_scanner.ActiveLanguageScanner", "examples": [{"do": {"description": "Use action verbs to describe what happens", "content": ["Use action verbs to describe what happens", "Example: User submits order, System validates payment", "Favor active behavioral language over functional/capability breakup", "Use story maps to outline user and system behavior (NOT tasks)", "Use action verbs: submits, views, validates, sends, displays", "Describe behaviors: [Actor] [action] [object] - but actor NOT in name", "Use active behavior language: Place order (active behavior), Validate payment (active behavior)", "", "CRITICAL NAMING RULE - Actor NOT in Name:", "- Epic/Sub-Epic/Story names must be Verb-Noun format: '[Verb] [Noun]'", "- Actor is documented separately, NOT included in the name", "- Verb can be in various forms: imperative ('Add'), infinitive ('To Add'), third person ('Adds') - all are acceptable", "- Noun can be singular or plural based on context - DO NOT pluralize unnecessarily", "- Prepositional phrases and context are part of the noun phrase and should be preserved (e.g., 'Add Minion To Mob' is correct)", "- Examples: Epic 'Places Order' (actor: Customer, documented separately)", "- Examples: Sub-Epic 'Validates Payment' (actor: PaymentValidator, documented separately)", "- Examples: Story 'Updates Stock' (actor: InventoryManager, documented separately)", "- Examples: Story 'Add Minion To Mob' (verb-noun with context preserved - CORRECT)", "- Examples: Story 'Group Minions' (verb-noun, plural noun is correct for context - CORRECT)", "", "ACTOR SELECTION (documented separately, not in name):", "- For user/system stories: Use human/system actors (User, System, Developer, Customer)", "- For technical stories (deep internal): Domain concepts can be actors (OrderProcessor, PaymentValidator, InventoryManager, Cart, Product)", "- Actor is implicit or explicitly documented, but NOT in the name string"]}, "dont": {"description": "Avoid capability nouns and task language", "content": ["Avoid capability nouns that describe functions rather than behaviors", "Don't use functional or capability-based language instead of behavioral language", "Don't use capability nouns: Management, Processing, Administration", "Don't use task verbs: implement, create, build, set up", "Don't use task language", "", "Wrong Examples:", "- Order Management, Payment Processing (capability nouns)", "- Focus on tasks instead of behaviors", "- Order Management (capability), Implement order placement (task)", "", "Wrong Examples (actor in name):", "- Epic: 'Customer Places Order' (actor in name - WRONG)", "- Sub-Epic: 'OrderProcessor Validates Payment' (actor in name - WRONG)", "- Sub-Epic: 'Cart Adds Product' (actor in name - WRONG)", "- Story: 'InventoryManager Updates Stock' (actor in name - WRONG)", "", "Correct: Name is Verb-Noun only, actor documented separately"]}}]}}, {"rule_file": "use_outcome_verbs_not_communication_verbs.json", "rule_content": {"description": "Use Outcome Verbs, Not Communication Verbs", "scanner": "agile_bot.bots.base_bot.src.scanners.communication_verb_scanner.CommunicationVerbScanner", "examples": [{"do": {"description": "Use verbs that describe artifacts/outcomes", "content": ["Use verbs that describe artifacts/outcomes", "Examples: Animation, Feedback, Indicators, Configuration", "Name concepts by what they ARE or CREATE", "Examples: Power Activation Animation, Combat Outcome Feedback", "Focus on tangible results", "Examples: Hit Indicators, Save Result Feedback"]}, "dont": {"description": "Don't use generic communication verbs", "content": ["Don't use generic communication verbs", "Examples: showing, displaying, visualizing, presenting", "Don't use vague enablement verbs", "Examples: providing, enabling, allowing", "Don't name concepts by their mechanism", "Wrong Examples: Visualizing Power Activation, Showing Combat Results"]}}]}}], "token_estimate": 52315}}}, "17": {"action_state": "story_bot.1_shape.build_knowledge", "status": "started", "timestamp": "2025-12-11T13:36:46.853650"}, "18": {"action_state": "story_bot.1_shape.build_knowledge", "status": "completed", "timestamp": "2025-12-11T13:36:46.883736", "outputs": {"instructions": {"action": "build_knowledge", "behavior": "1_shape", "base_instructions": ["**MANDATORY: Before generating any content, you MUST load and review the project's context files:**", "1. Load `{project_area}/docs/stories/clarification.json` - Contains key questions and evidence (generated file)", "2. Load `{project_area}/docs/stories/planning.json` - Contains assumptions and decisions (generated file)", "3. Load `{project_area}/docs/context/*` (or similar) - Original input/source material (original context)", "", "These files contain critical requirements, decisions, and context that MUST be incorporated into all generated content.", "", "", "**BUILD KNOWLEDGE GRAPH (Structured JSON Content):**", "Generate the knowledge graph as structured JSON content following the rules and schema provided. ", "**Schema:** Use schema '**Schema Rules:**\n- **Hierarchical**: sub_epics can contain: nested sub_epics or story_groups. sequential_order is always an integer (1, 2, 3, 4) - unique within parent, no decimals.\n- **Connector**: Story groups: 'and' or 'or' (null for first group). Stories within groups: 'and' or 'or' (null for first story). Epics and sub_epics don't have connectors.\n- **Domain Placement**: domain_concepts: 'local' if relevant to single sub_epic, 'global' if relevant to multiple sub_epics. Place at most specific level (local preferred), but elevate to parent if used by multiple children.\n\n**Template Structure (JSON Schema):**\n```json\n{\n  \"_explanation\": {\n    \"hierarchical\": \"sub_epics can contain: nested sub_epics or story_groups. sequential_order is always an integer (1, 2, 3, 4) - unique within parent, no decimals.\",\n    \"connector\": \"Story groups: 'and' or 'or' (null for first group). Stories within groups: 'and' or 'or' (null for first story). Epics and sub_epics don't have connectors.\",\n    \"domain_placement\": \"domain_concepts: 'local' if relevant to single sub_epic, 'global' if relevant to multiple sub_epics. Place at most specific level (local preferred), but elevate to parent if used by multiple children.\"\n  },\n  \"epics\": [\n    {\n      \"name\": \"\",\n      \"sequential_order\": 1,\n      \"estimated_stories\": null,\n      \"domain_concepts\": [\n        {\n          \"name\": \"\",\n          \"responsibilities\": [\n            {\n              \"name\": \"\",\n              \"collaborators\": []\n            }\n          ]\n        }\n      ],\n      \"sub_epics\": [\n        {\n          \"name\": \"\",\n          \"sequential_order\": 1,\n          \"estimated_stories\": null,\n          \"domain_concepts\": [\n            {\n              \"name\": \"\",\n              \"responsibilities\": [\n                {\n                  \"name\": \"\",\n                  \"collaborators\": []\n                }\n              ]\n            }\n          ],\n          \"sub_epics\": [],\n          \"story_groups\": [\n            {\n              \"type\": \"and\",\n              \"connector\": null,\n              \"sequential_order\": 1,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 2,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            },\n            {\n              \"type\": \"and\",\n              \"connector\": \"or\",\n              \"sequential_order\": 2,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 2,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 3,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            },\n            {\n              \"type\": \"or\",\n              \"connector\": \"or\",\n              \"sequential_order\": 3,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            }\n          ]\n        }\n      ],\n      \"stories\": []\n    }\n  ]\n}\n```'  --> load from behavior data files", "", "**Description:** Create a story map and domain model outline that captures the user's journey through epics, features, and stories, and captures domain model concepts and requirements Goal: Shape both story map and domain model together from user context - capture domain concepts, responsibilities, and requirements alongside story structure", "", "Hey, going to be going away for a little while to create the knowledge graph. Go get a cup of coffee \ud83d\ude0a", "", "**BUILD KNOWLEDGE GRAPH - STORY GRAPH AND DOMAIN MODEL CREATION:**", "", "Build the initial story graph structure AND domain model from gathered context and planning decisions. Capture domain concepts alongside story structure.", "", "**Configuration:**", "- Reference: build_story_graph_outline.json", "- Template: story-graph-outline.json", "", "**CRITICAL - TEMPLATE STRUCTURE COMPLIANCE:**", "1. The build_knowledge action has injected 'knowledge_graph_template' into your instructions", "2. This template shows the EXACT JSON structure your output MUST match", "3. **DO NOT invent your own schema** - examine the template and replicate its structure", "4. The template includes:", "   - Root level keys (e.g., 'epics' array only, NOT 'capability', 'increments', 'features')", "   - Required fields at each level (e.g., 'sequential_order', 'estimated_stories', 'domain_concepts')", "   - Nested structure (epics \u2192 sub_epics \u2192 story_groups \u2192 stories)", "   - Field types and formats (e.g., 'connector': null vs 'connector': 'and')", "5. Look at the '_explanation' section in the template for structural rules", "6. Your output must be structurally identical - only the values (names, responsibilities, etc.) differ", "", "**CRITICAL: Story Graph Structure - Main Epics Section is Single Source of Truth**", "", "**Two-Section Architecture (if increments are added later):**", "", "1. **Main 'epics' Section (Single Source of Truth)**", "   - Contains ALL story details: name, users, sequential_order, story_type, connector, story_groups, etc.", "   - This is the PRIMARY location - all story details must be here", "   - Used as the source for all views (outline, increments, discovery, exploration)", "", "2. **'increments' Section (Minimal Reference View - if present)**", "   - This is a MINIMAL REFERENCE VIEW - just enough to know which stories belong to which increment", "   - Stories in increments should ONLY contain: name, users (optional), sequential_order", "   - NO story details (no story_type, no connector, no story_groups, no domain_concepts, etc.)", "   - Increments are a COPY of the outline view at the story level - just for mapping stories to increments", "   - All story details come from the main epics section", "", "**Domain Model Creation (Integrated with Story Graph):**", "1. Domain concepts are integrated directly into the story graph structure", "2. Place domain_concepts at epic and sub_epic levels based on relevance", "3. Apply domain shaping rules (context: 'when shaping the domain')", "4. **DO NOT create separate domain_graph.json or domain model files**", "5. All domain modeling is captured within story-graph.json via domain_concepts arrays", "", "**Domain Concept Placement Logic:**", "- **Local placement (preferred)**: Place domain_concepts at the sub_epic level when they are relevant to only that sub_epic", "- **Global placement**: Elevate domain_concepts to parent epic/sub_epic level when they are relevant to multiple child sub_epics", "- **Favor local**: Start with local placement, but elevate if the concept is used by multiple sub_epics", "**Process:**", "1. Use clarification data from docs/stories/clarification.json", "2. Use planning decisions from docs/stories/planning.json", "3. **EXAMINE the knowledge_graph_template structure injected into your instructions**", "4. Build story graph matching that exact structure (root keys, field names, nesting)", "5. Identify domain concepts from clarification and planning data", "6. Map domain concepts to epics/sub_epics based on relevance (see placement logic above)", "7. Populate domain_concepts arrays in story-graph.json with proper placement", "8. Create story-graph.json in project area", "7. Populate domain_concepts arrays in story-graph.json with proper placement", "8. Create story-graph.json and domain model outputs in project area (same location)", "", "**Output:**", "- File: {project_area}/story-graph.json (JSON story graph with epics, sub_epics, story_groups, stories, and domain_concepts integrated)", "", "**Next Step:** Proceed to render step after story graph is created.", "", "", "Before generating any content, review ALL validation rules below. Your generated content MUST comply with every rule to avoid violations.", "", "**Behavior-level rules:**", "", "**Rule:** rules\\maintain_verb_noun_consistency.json", "Maintain verb-noun consistency from epic to feature to story to scenario", "", "**DO:**", "- Use consistent verb-noun language across all levels: Epic: Manage Orders \u2192 Feature: Place Order \u2192 Story: Customer places order \u2192 Scenario: When customer places order...", "- Maintain consistent terminology throughout hierarchy: Epic, feature, story, and scenario all use same verb-noun pattern", "- Use verb-noun language in scenario sentences: When user submits form, then system validates data", "", "**DON'T:**", "- Don't switch formats between levels: Epic: Order Management \u2192 Feature: Place Order (inconsistent format)", "- Don't mix verb-noun with other formats: Epic uses verb-noun, but feature uses noun-only format", "- Don't use different terminology at different levels: Epic says 'Orders', feature says 'Order Processing', story says 'Process Order'", "", "", "**Rule:** rules\\map_sequential_spine_vs_optional_paths.json", "When mapping stories, carefully distinguish between sequential spine (essential path) and optional paths, alternate routes, or additional functionality that is not strictly essential. Sequential stories form the mandatory flow; optional stories are alternatives, enhancements, or non-essential features.", "", "**DO:**", "- Identify the essential spine first: Start by identifying the minimal essential path that delivers core value", "The spine represents the mandatory sequence: Story1 AND Story2 AND Story3", "Spine stories get sequential_order numbers (1, 2, 3, etc.)", "Spine stories are required for the feature to deliver its core purpose", "Ask: 'What is the minimum path to deliver value?'", "- Mark optional paths clearly: Optional stories branch from or enhance the spine but are not required", "Mark optional stories with 'optional: true' in the story structure", "Optional stories may have sequential_order if they're part of an alternative flow", "Optional stories represent: alternate routes, enhancements, nice-to-have features", "Ask: 'Can the feature deliver value without this story?'", "- Distinguish types of optional paths with concrete examples: Alternate routes: User logs in with email (sequential_order: 2) OR User logs in with social media (sequential_order: 2.1, optional: true)", "Enhancements: User views dashboard (sequential_order: 3) AND User customizes dashboard (sequential_order: 3.1, optional: true)", "Additional functionality: User views dashboard (sequential_order: 3) AND User shares dashboard (sequential_order: 3.2, optional: true)", "Error handling: User enters invalid data (sequential_order: 4) AND System shows error message (sequential_order: 4.1, optional: true)", "- Correct mapping examples: Spine: User creates account (sequential_order: 1) AND User logs in (sequential_order: 2) AND User views dashboard (sequential_order: 3)", "Optional alternate: User logs in with email (sequential_order: 2) OR User logs in with social media (sequential_order: 2, optional: true)", "Optional enhancement: User views dashboard (sequential_order: 3) AND User customizes dashboard (optional: true, priority: 1)", "Additional functionality: User views dashboard (sequential_order: 3) AND User shares dashboard (optional: true, priority: 2)", "", "**DON'T:**", "- Don't mark everything as sequential: Don't assign sequential_order to all stories when some are optional", "Don't treat alternate routes as part of the spine", "Don't include enhancements in the mandatory sequential flow", "Don't confuse 'nice to have' with 'must have'", "- Don't omit optional markers: Don't leave optional stories unmarked - be explicit", "Don't assume all stories in a feature are mandatory", "Don't mix optional and mandatory without clear distinction", "Don't fail to identify the spine before adding optional paths", "- Wrong mapping examples: Wrong: User creates account (1) AND User logs in with email (2) AND User logs in with social media (3) - social media should be optional", "Wrong: User views dashboard (1) AND User customizes dashboard (2) AND User shares dashboard (3) - customization and sharing should be optional", "Wrong: All stories marked mandatory when some are clearly alternatives or enhancements", "Wrong: No distinction between essential path and optional features", "", "", "**Rule:** rules\\stories_developed_and_tested_in_days.json", "Write stories that can be developed and tested in a matter of days", "", "**DO:**", "- Create stories sized for days, not weeks: Story takes 3-5 days to develop and test completely", "- Break large work into smaller stories: Large feature broken into multiple stories, each completable in days", "- Focus on delivering complete, testable functionality quickly: Each story delivers a complete piece of functionality that can be tested", "", "**DON'T:**", "- Don't create stories that span multiple weeks: Story requires 3+ weeks to complete (too large)", "- Don't create stories that can't be tested independently: Story requires multiple other stories before it can be tested", "- Don't create stories without clear boundaries: Story is vague about scope and completion criteria", "", "", "**Rule:** rules\\stories_follow_invest_principles.json", "Ensure stories follow INVEST principles (Independent, Negotiable, Valuable, Estimable, Small, Testable)", "", "**DO:**", "- Independent - story can be developed independently: Story doesn't depend on other stories being completed first", "- Negotiable - story details can be negotiated: Story allows for discussion and refinement of requirements", "- Valuable - story delivers value to user or business: Story provides measurable value when completed", "- Estimable - story can be estimated: Story is clear enough to estimate effort", "- Small - story can be completed in short time: Story can be developed and tested in a matter of days", "- Testable - story has clear acceptance criteria: Story has testable outcomes that can be verified", "", "**DON'T:**", "- Don't create stories that depend on multiple other stories: Story requires 5 other stories to be completed first (not independent)", "- Don't create stories that are too large: Story spans multiple weeks and includes multiple features (not small)", "- Don't create stories without clear value: Story doesn't provide measurable value to users or business", "", "", "**Rule:** rules\\story_names_must_follow_verb_noun_format.json", "CRITICAL: Story names MUST follow Verb-Noun format (e.g., 'Move To Mob Leaders Turn', 'Determines Target from Strategy', 'Initiate Mob Attack'), and include italicized description showing component interactions (e.g., '*Combat Tracker moves to any mob member's turn, auto moves to mob leader's turn*'). The story name should be concise and action-oriented, while the description shows the component-to-component interactions.", "", "**DO:**", "- Use concise Verb-Noun format for story names: Move To Mob Leaders Turn, Determines Target from Strategy, Initiate Mob Attack", "- Include italicized description showing component interactions: *Combat Tracker moves to any mob member's turn, auto moves to mob leader's turn*", "- Make story name concise and action-oriented: Story name: 'Initiate Mob Attack' - concise and action-oriented", "- Show component interactions in description: Story description shows how components interact with each other", "", "**DON'T:**", "- Don't use long descriptive names without Verb-Noun format: The system should allow users to move to mob leaders turn when...", "- Don't omit component interaction descriptions: Story name without italicized description of component interactions", "- Don't use vague or non-action-oriented names: Mob Leader Turn System, Attack Mechanism", "", "", "**Rule:** rules\\use_active_behavioral_language.json", "Use active behavioral language with action verbs. Describe behaviors, not tasks or capabilities.", "", "**DO:** Use action verbs to describe what happens", "Use action verbs to describe what happens", "Example: User submits order, System validates payment", "Favor active behavioral language over functional/capability breakup", "Use story maps to outline user and system behavior (NOT tasks)", "Use action verbs: submits, views, validates, sends, displays", "Describe behaviors: [Actor] [action] [object]", "Use active behavior language: Place order (active behavior), Validate payment (active behavior)", "", "**DON'T:** Avoid capability nouns and task language", "Avoid capability nouns that describe functions rather than behaviors", "Don't use functional or capability-based language instead of behavioral language", "Don't use capability nouns: Management, Processing, Administration", "Don't use task verbs: implement, create, build, set up", "Don't use task language", "", "Wrong Examples:", "- Order Management, Payment Processing (capability nouns)", "- Focus on tasks instead of behaviors", "- Order Management (capability), Implement order placement (task)", "", "", "**Rule:** rules\\use_verb_noun_format_for_story_elements.json", "Use verb-noun format for all story elements (epic names, feature names, story titles)", "", "**DO:**", "- Use verb-noun format for epic names: Manage Orders, Create Character, Process Payment", "- Use verb-noun format for feature names: Place Order, Validate Payment, Save Character", "- Use verb-noun format for story titles: Customer places order, System validates payment, User saves character", "- Use verb-noun format for scenario sentences: User submits form, System processes request", "", "**DON'T:**", "- Don't use noun-only or capability-based names: Order Management, Payment Processing, Character System", "- Don't mix verb-noun with other formats: Order Management and Place Order (mixed format)", "- Don't use gerund forms: Ordering, Processing Payments, Creating Characters", "", "", "**Rule:** apply_7_plus_minus_2_hierarchy.json", "Apply 7\u00b12 rule for hierarchy: epics contain 4-9 sub-epics, sub-epics contain 4-9 stories. Split when exceeding, merge when below minimum.", "", "**DO:** Maintain hierarchy within the 7\u00b12 cognitive limit range", "(E) Epic: Contains 4-9 sub-epics", "  - Split into additional Sub-Epics when > 9 sub-epics", "  - Merge with another epic when < 4 sub-epics", "(E) Sub-Epic: Contains 4-9 stories", "  - Split into 2 sub-epics when > 9 stories", "  - Merge with another sub-epic when < 4 stories", "(S) Story: Contains 2-9 acceptance criteria", "  - Split into 2 stories when > 9 AC", "  - Merge with another story when < 2 AC (single AC stories are too small)", "Apply 7\u00b12 cognitive limit principle (optimal range: 5-9, acceptable: 4-9)", "", "Example:", "(E) Manage Orders (10 sub-epics \u2192 SPLIT)", "  and (E) Manage Customer Orders (6 stories) \u2713", "  and (E) Manage Order Fulfillment (4 stories) \u2713", "", "(E) Place Order (12 stories \u2192 SPLIT)", "  and (S) Initiate Order (6 AC) \u2713", "  and (S) Complete Order (6 AC) \u2713", "", "(S) Validate Payment (11 AC \u2192 SPLIT)", "  and (AC) Check Payment Method (5 steps) \u2713", "  and (AC) Process Payment Transaction (6 steps) \u2713", "", "**DON'T:** Don't exceed thresholds or create items below minimum", "Create epics with > 9 sub-epics (use additional Sub-Epics instead)", "Create sub-epics with > 9 stories (split the sub-epic)", "Create stories with > 9 acceptance criteria (split the story)", "Create very small stories with < 2 AC (merge with related story)", "Ignore sizing thresholds during shaping, discovery, or exploration", "", "Wrong Examples:", "- (E) Epic with 15 sub-epics (too many, use additional Sub-Epics)", "- (E) Sub-Epic with 15 stories (too many, split sub-epic)", "- (S) Story with 15 AC (too many, split story)", "- (S) Story with 1 AC (too small, merge with related story)", "", "", "**Rule:** avoid_noun_redundancy.json", "When shaping stories, avoid noun redundancy in domain and concept names", "", "**DO:** INTEGRATE first: nest related capabilities under one domain", "INTEGRATE first: nest related capabilities under one domain (90% of cases)", "Only then rename: use distinct nouns ONLY when integration doesn't make sense", "Test for uniqueness: Can you remove the qualifier and still know what it is?", "Use subject-area nouns when domains are genuinely separate", "Only when integration truly doesn't make sense", "", "**DON'T:** Don't rename without considering integration", "Don't rename without considering integration (this hides the real issue)", "Wrong: Repeat same noun with different prefixes: X Animation, Y Animation, Z Animation", "Don't use vague qualifiers to avoid integration", "Wrong: Animation 1, Animation System", "Don't create parallel domains that should be nested", "Wrong: Integrate related concepts rather than creating redundant structures", "", "", "**Rule:** avoid_technical_implementation_language.json", "When shaping stories, avoid technical implementation language in user-facing story elements", "", "**DO:**", "- Use business language in user-facing elements: Customer places order, User views profile, Admin approves request", "- Focus on what user experiences, not how it's implemented: Story describes user experience, not technical implementation", "", "**DON'T:**", "- Don't use development task language: implement, create, refactor, optimize, fix, build, set up", "- Don't use technical implementation details: query database, call API, update table", "- Don't focus on delivery or development tasks: Implement order system, Create database schema, Set up API endpoints", "- Don't focus on system internals: Optimize query performance, Refactor authentication code, Update configuration", "", "", "**Rule:** avoid_technical_stories.json", "Technical stories represent implementation tasks that do not describe system behavior. They are normally avoided in favor of user stories and system stories. When technical stories are necessary, they should be marked with story_type: 'technical' and kept minimal.", "", "**DO:**", "- Prefer user stories and system stories over technical stories: Instead of 'Set up database schema', use 'Store user data' (user story)", "Instead of 'Create API endpoint', use 'Expose user data via API' (system story)", "Instead of 'Write unit tests', use 'Verify story behavior' (user story)", "- When technical stories are necessary, mark with story_type: 'technical': Story: 'Migrate legacy data format' with story_type: 'technical'", "Story: 'Refactor authentication module' with story_type: 'technical'", "Story: 'Update dependency versions' with story_type: 'technical'", "- Keep technical stories minimal and focused: Technical stories should be rare exceptions", "Technical stories should still follow Verb-Noun format", "Technical stories should be clearly justified", "", "**DON'T:**", "- Don't create technical stories for normal development work: Avoid: 'Write code', 'Create class', 'Add method'", "Avoid: 'Set up CI/CD', 'Configure database', 'Install package'", "These are implementation details, not stories", "- Don't use technical stories to describe system behavior: Use system stories for system-to-system behavior", "Use user stories for user-facing behavior", "Technical stories are for unavoidable implementation tasks only", "", "", "**Rule:** balance_fine_grained_testable_stories.json", "Balance fine-grained stories with testable and valuable independent units. Stories must deliver value and be independently testable.", "", "**DO:** Create stories that are complete interactions with value", "Create stories that are complete interactions with value", "Example: Customer places order (complete interaction, testable, valuable)", "Balance fine-grained stories with testable/valuable stories", "Ensure stories are fine-grained enough to enable frequent feedback", "Ensure stories are grouped into meaningful chunks for high quality feedback", "Stories that deliver measurable value independently", "", "**DON'T:** Avoid stories that are too small or too large", "Avoid stories that are too small and have no value alone", "Don't create stories that are too fine-grained without being testable or valuable", "Don't create stories that are too large to be testable or deliverable quickly", "", "Wrong Examples:", "- Add order button (too fine-grained, no value alone)", "- Change button color (too fine-grained, no value)", "- Customer places order and views history and updates profile (too large, multiple flows)", "", "", "**Rule:** create_lightweight_precise_docs.json", "Create lightweight but precise documentation during shaping. Focus on structure and scope, not detailed specifications.", "", "**DO:** Create lightweight but precise documentation during shaping", "Balance fine-grained stories with testable/valuable stories", "Ensure stories are fine-grained enough to enable frequent feedback", "Ensure stories are grouped into meaningful chunks for high quality feedback", "Validate that a business expert can understand the language of most of the stories", "Focus the language on the business domain", "Create lightweight but precise documentation", "Focus on structure and scope, not detailed specifications", "Make the map easy to walk through (it tells a story)", "", "Example:", "(E) Manage Orders", "  and (E) Place Order", "    and (S) Customer --> places order", "(Shows hierarchy and structure, not detailed specs)", "", "**DON'T:** Don't over-elaborate or add detailed specifications during shaping", "Create stories that are too fine-grained without being testable or valuable", "Create stories that are too large to be testable or deliverable quickly", "Add detailed technical specifications during shaping phase", "Over-elaborate story mapping during shaping", "", "Wrong Example:", "(E) Manage Orders", "  and (E) Place Order", "    and (S) Customer --> places order", "  \u2192 Detailed API specs, database schema, UI mockups", "(Too much detail for shaping phase)", "", "", "**Rule:** discover_relationships_from_story_map.json", "Domain Discovery determines relationships and responsibilities between core domain objects by walking through the story map, then suggests story refinements to rebuild the story map to complement the domain model.", "", "**DO:** Extract keywords from story map and determine relationships and responsibilities", "Go through all stories in increment scope, extract keywords from story titles/descriptions/acceptance criteria, ask clarifying questions for each keyword, map relationships with multiplicities, document responsibilities", "", "**DON'T:** Don't skip keyword identification or build domain model without story map analysis", "Skip going through stories, ignore keywords in acceptance criteria, build domain model without asking what keywords mean, use technical terms instead of domain terms", "", "", "**Rule:** enforce_behavioral_journey_flow.json", "When shaping stories, CRITICAL: Stories must show user/system journey flow, not just list operations. Stories must include context (when/why actions happen) and connect logically. Order by user journey, not technical sequential_order.", "", "**DO:** Show user/system journey with context and flow", "Stories must show WHEN and WHY actions happen, not just WHAT", "Story maps must show logical flow: Initialize \u2192 Validate \u2192 Process \u2192 Confirm \u2192 Complete", "Each story must connect to previous/next stories in the journey", "Order stories by user journey flow, not by technical sequential_order", "", "Correct Examples (with journey context - Payment Domain):", "(E) Process Payment", "  and (E) Process Card Payment", "    and (S) User --> invokes process payment command", "    and (S) System --> validates payment details", "    and (S) System --> authorizes payment", "    and (S) System --> processes payment transaction", "    and (S) System --> confirms payment and sends notification", "", "(E) Refund Payment", "  and (E) Process Refund", "    and (S) User --> invokes refund payment command", "    and (S) System --> validates refund eligibility", "    and (S) System --> processes refund transaction", "    and (S) System --> confirms refund and sends notification", "", "(E) Process Payment", "  and (E) Validate Payment", "    and (S) User --> submits payment request", "    and (S) System --> validates card number", "    and (S) System --> validates amount", "    and (S) System --> validates currency", "    and (S) System --> returns validation result", "", "Note: Individual stories like 'Authorize Payment with Processor' are correct story format (verb-noun, specific), but they need to be part of a journey. Stories should NOT include actors in the name (actors are documented separately).", "", "Correct Individual Stories (but need journey context):", "- 'Authorize Payment with Processor' (correct story format, but needs: when? why? what happens next?)", "- 'Validate Payment Details' (correct story format, but needs: when? why? what triggers this?)", "- 'Process Payment Transaction' (correct story format, but needs: when? why? what happens before/after?)", "", "Journey Flow Requirements:", "- Start with initialization/entry point", "- Show logical progression through operations", "- Include error handling and alternative paths", "- End with completion/save operations", "- Connect stories logically (this leads to that)", "", "**DON'T:** Don't create isolated sets of functions that don't make sense linearly", "Don't group unrelated operations together that don't form a logical journey", "Don't create story maps with random functions that have no linear relationship", "Don't mix unrelated operations from different domains or contexts", "", "Wrong Examples (isolated sets of functions, no linear sense - Payment Domain):", "(E) Payment Operations", "  and (E) Process Payment", "  and (E) Generate Invoice", "  and (E) Send Email", "  and (E) Update Inventory", "  and (E) Calculate Tax", "(unrelated operations, no linear flow - why does email come after payment? why inventory? no journey)", "", "(E) Payment System", "  and (E) Authorize Payment", "  and (E) Create User Account", "  and (E) Process Refund", "  and (E) Generate Report", "  and (E) Delete Transaction", "(random operations, no logical sequence - account creation doesn't follow authorization, deletion doesn't follow processing)", "", "(E) Payment Flow", "  and (S) System --> validates payment", "  and (S) System --> sends notification", "  and (S) System --> authorizes payment", "  and (S) System --> updates database", "  and (S) System --> processes payment", "(wrong order, no linear sense - notification before authorization? database update before processing?)", "", "What Makes It NOT a Linear Journey:", "- Unrelated operations grouped together (payment + inventory + email + tax - why together?)", "- Operations from different contexts mixed (payment + user account + reporting - different domains)", "- No logical sequence (why does X come before Y? no reason)", "- Operations can be in any order (no dependencies, no flow)", "- Random collection of functions (like a function library, not a journey)", "- No user/system goal that connects them (what are we trying to accomplish?)", "", "", "**Rule:** enforce_functional_accomplishment.json", "CRITICAL: Stories must represent complete functional accomplishments, not data access operations or implementation steps. Stories must deliver value independently.", "", "**DO:** Create stories that accomplish complete functions", "Stories must represent complete functional accomplishments", "Stories must deliver value independently (INVEST principle)", "Stories must show end-to-end flow, not just data access", "", "Correct Examples (complete functional accomplishments):", "- 'User loads story graph and system displays epics in diagram' (complete: load + display = accomplishment)", "- 'Developer edits epic name and system updates diagram' (complete: edit + update = accomplishment)", "- 'User requests render and system generates DrawIO file' (complete: request + generate = accomplishment)", "- 'CLI invokes render command and system saves outline diagram' (complete: invoke + save = accomplishment)", "", "Functional Accomplishment Requirements:", "- Story must accomplish something meaningful for user/system", "- Story must be independently valuable (can be tested/delivered alone)", "- Story must show complete flow (start \u2192 process \u2192 outcome)", "- Story must have clear acceptance criteria (how do we know it's done?)", "", "**DON'T:** Don't create stories that are just data access or implementation steps", "Don't create stories that are just data access operations", "Don't create stories that are implementation steps without outcomes", "Don't create stories that aren't independently valuable", "", "Wrong Examples (not complete accomplishments):", "- 'Read All Epics from Diagram' (data access - not accomplishment, what happens with the data?)", "- 'Load All Features In Graph Epic' (data access - not accomplishment)", "- 'Serialize Components to JSON' (implementation step - not accomplishment, part of what story?)", "- 'Convert Diagram to StoryGraph Format' (implementation step - not accomplishment)", "- 'Calculate Component Positions' (implementation step - not accomplishment)", "", "Data Access/Implementation Indicators (REJECT as stories):", "- Just reads/loads data without using it", "- Just converts/formats data without purpose", "- Just calculates/computes without outcome", "- Just serializes/saves without context", "", "These should be STEPS within stories, not stories themselves:", "- Step: 'System reads epics from diagram' (within story: 'User views story map and system displays epics')", "- Step: 'System serializes components' (within story: 'User saves story graph and system writes JSON file')", "- Step: 'System calculates positions' (within story: 'User requests render and system generates positioned diagram')", "", "Instead, ask:", "- What does the user/system accomplish with this?", "- Is this independently valuable?", "- Can this be tested/delivered alone?", "- What's the complete flow from start to finish?", "", "", "**Rule:** enforce_specificity_in_stories.json", "CRITICAL: Stories must be specific about what, when, why, and who. Generic operations like 'Add Sub-Epic' or 'Read Epics' are insufficient - stories must include context and specificity.", "", "**DO:** Create specific stories with full context", "Stories must be specific about what, when, why, and who", "Stories must include context: when does it happen? why? what triggers it?", "Stories must specify actors, objects, and outcomes clearly", "", "Correct Examples (specific with context - Payment Domain):", "- 'User processes payment for order #12345 with amount $50.00 when customer completes checkout' (specific: user, order ID, amount, context)", "- 'Merchant invokes refund command from API and system reverses payment transaction' (specific: merchant, API, command, outcome)", "- 'System validates payment card number 4111-1111-1111-1111 when user submits payment form' (specific: system, card number, trigger)", "- 'User clicks Process Payment button and system prompts for payment method selection' (specific: user, action, UI element, system response)", "", "Specificity Requirements:", "- WHO: Specific actor (User, Merchant, Customer, System, PaymentProcessor, API)", "- WHAT: Specific action and object (processes payment for order #12345 with amount $50.00)", "- WHEN: Specific trigger/context (when customer completes checkout, when user submits payment form)", "- WHY: Purpose in journey (to complete purchase transaction, to reverse payment error)", "- OUTCOME: Specific result (payment processed, transaction ID returned, notification sent)", "", "**DON'T:** Don't create generic stories without context", "Don't create generic operations without specificity", "Don't omit context about when/why actions happen", "Don't use vague descriptions without details", "", "Wrong Examples (generic without context - Payment Domain):", "- 'Process Payment' (which payment? for which order? when? why?)", "- 'Authorize Payment' (which payment? with which card? when? why? what happens next?)", "- 'Exposes Payment API' (which endpoints? to whom? when? why?)", "- 'Refund Payment' (which payment? for which reason? when? why?)", "", "Generic Indicators (REJECT or require more specificity):", "- Single verb + noun without context: 'Process Payment', 'Authorize Payment', 'Refund Payment'", "- No specific objects: 'Process Payment' (which payment? which order?)", "- No context: 'Authorize Payment' (when? why? what triggers this?)", "- No outcome: 'Authorize Payment' (what happens with the authorization result?)", "", "Instead, ask:", "- Which specific object? (payment ID, order number, transaction ID, card number)", "- When does this happen? (trigger, context, user action - when customer completes checkout, when merchant requests refund)", "- Why does this happen? (purpose, user need, journey step - to complete purchase, to reverse error)", "- What's the outcome? (result, system response, user experience - payment processed, transaction ID returned, notification sent)", "", "", "**Rule:** establish_spine_vs_optional_enhanced_behavior.json", "Establish mandatory spine stories vs optional/enhanced behavior stories. When mapping stories, carefully distinguish between sequential spine (essential path) and optional paths, alternate routes, or additional functionality that is not strictly essential. Mandatory stories form the sequential spine (story AND story AND story). Optional stories are alternatives or enhancements (story OR story) that branch from the spine and can return to it. Sequential stories form the mandatory flow; optional stories are alternatives, enhancements, or non-essential sub-epics.", "", "**DO:** Identify the essential spine first", "Start by identifying the minimal essential path that delivers core value", "The spine represents the mandatory sequence: Story1 AND Story2 AND Story3", "Spine stories get sequential_order numbers (1, 2, 3, etc.)", "Spine stories are required for the sub-epic to deliver its core purpose", "Ask: 'What is the minimum path to deliver value?'", "Establish the mandatory spine before identifying optional/enhanced behaviors", "Explicitly distinguish between spine (mandatory) and optional/enhanced behaviors", "", "**DON'T:** Don't mark everything as sequential", "Don't assign sequential_order to all stories when some are optional", "Don't treat alternate routes as part of the spine", "Don't include enhancements in the mandatory sequential flow", "Don't confuse 'nice to have' with 'must have'", "Don't mark all stories as mandatory when some are alternatives or enhancements", "Don't fail to establish the spine before adding optional/enhanced behaviors", "", "**DO:** Mark optional paths clearly", "Optional stories branch from or enhance the spine but are not required", "Mark optional stories with 'optional: true' in the story structure", "Optional stories may have sequential_order if they're part of an alternative flow (e.g., 2.1, 3.1, etc.)", "Optional stories represent: alternate routes, enhancements, nice-to-have sub-epics", "Ask: 'Can the sub-epic deliver value without this story?'", "Optional/enhanced stories can return to the spine after completion", "Sort optional/enhanced stories by priority of delivery within the same sub-epic", "", "**DON'T:** Don't omit optional markers", "Don't leave optional stories unmarked - be explicit", "Don't assume all stories in a sub-epic are mandatory", "Don't mix optional and mandatory without clear distinction", "Don't fail to identify the spine before adding optional paths", "Don't omit the optional marker - be explicit about spine vs optional/enhanced behaviors", "Don't create sub-epics where every story is mandatory when alternatives or enhancements exist", "", "**DO:** Distinguish types of optional paths with concrete examples", "Spine (all stories with and), then OR optional branch (all stories with and), then OR enhanced (all stories with and):", "", "Correct Example:", "Spine (all stories with and):", "  (S) User --> creates account", "  and (S) User --> logs in", "  and (S) User --> views dashboard", "OR optional branch (all stories with and):", "  (S) User --> signs in with social media (optional)", "  and (S) User --> signs in with email (optional)", "OR enhanced (all stories with and):", "  (S) User --> customizes dashboard (enhanced)", "  and (S) User --> shares dashboard (enhanced)", "", "**DON'T:** Wrong mapping examples", "Wrong: All stories marked mandatory when some are clearly alternatives or enhancements", "  and (S) User --> creates account (1)", "  and (S) User --> logs in with email (2)", "  and (S) User --> logs in with social media (3) - social media should be optional", "", "Wrong: No distinction between essential path and optional sub-epics", "  and (S) User --> views dashboard (1)", "  and (S) User --> customizes dashboard (2)", "  and (S) User --> shares dashboard (3) - customization and sharing should be optional", "", "Wrong: Missing optional markers on alternative flows or enhanced behaviors", "Wrong: Optional/enhanced stories not sorted by priority", "Wrong: No clear spine established before adding optional behaviors", "", "", "**Rule:** extract_story_map_checklist.json", "Quick checklist for extracting story maps from code. Follow this process step-by-step.", "", "", "**Rule:** extract_story_map_from_code.json", "CRITICAL: When creating story maps from code, analyze the outermost layer showing end-to-end journey. Locate acceptance tests, human code engagement points (CLI/UI), MCP server definitions, WSDL, API contracts. Analyze operations and domain for major/minor concepts. Create epics/sub-epics based on higher-order goals. Look at distinct behaviors and typical execution order to lay out story journey.", "", "**DO:** Find outermost layer and entry points", "Start with the OUTERMOST LAYER showing end-to-end journey", "Locate all HUMAN CODE ENGAGEMENT points:", "  - CLI commands and entry points (main(), command handlers)", "  - UI entry points (web routes, event handlers, button clicks)", "  - MCP server tool definitions (tool names, parameters, descriptions)", "  - API contracts (REST endpoints, GraphQL queries, WSDL operations)", "  - WebSocket handlers, message queues, event listeners", "", "Locate ACCEPTANCE TESTS:", "  - End-to-end tests that show complete user journeys", "  - Integration tests that show system-to-system flows", "  - Test scenarios that describe 'when X, then Y' behaviors", "  - BDD/Gherkin tests with Given-When-Then structure", "", "Example Entry Points to Find:", "- CLI: 'python -m story_io.story_io_cli render-outline --story-graph file.json'", "- MCP: Tool 'render_outline' with parameters 'story_graph_path', 'output_path'", "- API: POST /api/story-graph/render with body {storyGraph, outputFormat}", "- UI: Button 'Render Outline' that triggers render operation", "- Test: 'test_render_outline_from_json' that shows complete flow", "", "**DON'T:** Don't start with internal implementation details", "Don't start with internal classes or helper functions", "Don't start with data structures or domain models", "Don't start with utility functions or low-level operations", "", "Wrong Starting Points:", "- Internal class: 'StoryIODiagram.load_from_json()' (implementation detail)", "- Helper function: 'parse_story_graph()' (internal mechanism)", "- Data structure: 'Epic' class definition (domain model, not entry point)", "", "These are important but come AFTER identifying the journey", "", "**DO:** Analyze operations and domain for major/minor concepts", "Analyze OPERATIONS from entry points:", "  - What operations are exposed? (render, sync, search, edit, save)", "  - What are the operation names? (render-outline, sync-increments, search-stories)", "  - What parameters do they take? (story_graph_path, output_path, query)", "  - What do they return? (DrawIO file, JSON report, search results)", "", "Analyze DOMAIN CONCEPTS:", "  - MAJOR CONCEPTS: High-level domain entities (StoryGraph, Diagram, Epic, Sub-Epic, Story)", "  - MINOR CONCEPTS: Supporting entities (Position, Boundary, User, Increment)", "  - OPERATIONS: Actions on concepts (Load, Read, Edit, Render, Synchronize, Search, Save)", "  - RELATIONSHIPS: How concepts relate (Epic contains Sub-Epics, Sub-Epic contains Stories)", "", "Example Analysis (Story-IO Domain):", "- Operations: render-outline, render-increments, sync-outline, sync-increments, search, add-user, merge", "- Major Concepts: StoryGraph (main entity), Diagram (visual representation), Epic/Sub-Epic/Story (hierarchy)", "- Minor Concepts: Position (2D coordinate), Boundary (rectangular area), User (story actor), Increment (priority grouping)", "- Relationships: StoryGraph contains Epics, Epic contains Sub-Epics, Sub-Epic contains Stories", "", "Example Analysis (Payment Domain):", "- Operations: process-payment, refund-payment", "- Major Concepts: Payment (main entity), Transaction (financial transaction), Card (payment method), Refund (reversal)", "- Minor Concepts: Amount (monetary value), Currency (USD, EUR), Status (pending, approved, declined), PaymentMethod (card, bank transfer)", "- Relationships: Payment contains Transaction, Payment uses Card, Payment can have Refund, Transaction has Status", "", "**DON'T:** Don't confuse implementation details with domain concepts", "Don't treat implementation classes as domain concepts", "Don't treat utility functions as operations", "Don't treat data structures as domain entities", "", "Wrong Analysis:", "- Implementation class: 'StoryIORenderer' (implementation detail, not domain concept)", "- Utility function: 'calculate_position()' (implementation detail, not operation)", "- Data structure: 'dict' or 'list' (implementation detail, not domain concept)", "", "Focus on WHAT the system does (domain), not HOW it does it (implementation)", "", "**DO:** Create epics/sub-epics based on higher-order goals", "Group operations into EPICS based on HIGHER-ORDER GOALS:", "  - What is the user/system trying to accomplish?", "  - What are the major capabilities?", "  - What are the lifecycle stages?", "", "Example Epic Creation from Operations (Story-IO Domain):", "- Operations: render-outline, render-increments, render-exploration", "- Higher-Order Goal: 'Render StoryGraph' (user wants to visualize story map)", "- Epic: 'Render StoryGraph'", "", "- Operations: sync-outline, sync-increments, generate-sync-report, merge", "- Higher-Order Goal: 'Synchronize StoryGraph' (user wants to sync between formats)", "- Epic: 'Synchronize StoryGraph'", "", "Example Epic Creation from Operations (Payment Domain):", "- Operations: process-payment, process_payment, POST /api/payments/process", "- Higher-Order Goal: 'Process Payment' (user wants to process a payment transaction)", "- Epic: 'Process Payment'", "", "- Operations: refund-payment, refund_payment, POST /api/payments/refund", "- Higher-Order Goal: 'Refund Payment' (user wants to reverse a payment)", "- Epic: 'Refund Payment'", "", "Group operations into SUB-EPICS based on DISTINCT BEHAVIORS:", "  - What are the different ways to accomplish the epic goal?", "  - What are the different types or modes?", "  - What are the different contexts or scenarios?", "", "Example Sub-Epic Creation (Story-IO Domain):", "- Epic: 'Render StoryGraph'", "- Distinct Behaviors: Render outline (basic), Render increments (with priorities), Render exploration (with acceptance criteria)", "- Sub-Epics: 'Render Outline', 'Render Increments', 'Render Exploration'", "", "- Epic: 'Synchronize StoryGraph'", "- Distinct Behaviors: Sync outline structure, Sync increments, Generate comparison report, Merge graphs", "- Sub-Epics: 'Synchronize Outline', 'Synchronize Increments', 'Generate Sync Report', 'Merge StoryGraphs'", "", "Example Sub-Epic Creation (Payment Domain):", "- Epic: 'Process Payment'", "- Distinct Behaviors: Validate payment (required), Authorize payment (required), Process with card (common), Process with bank transfer (alternative), Process with wallet (alternative), Confirm payment (required)", "- Sub-Epics: 'Validate Payment', 'Authorize Payment', 'Process Card Payment', 'Process Bank Transfer', 'Process Wallet Payment', 'Confirm Payment'", "", "- Epic: 'Refund Payment'", "- Distinct Behaviors: Validate refund eligibility, Process refund, Confirm refund", "- Sub-Epics: 'Validate Refund', 'Process Refund', 'Confirm Refund'", "", "**DON'T:** Don't create epics/sub-epics from implementation structure", "Don't create epics based on class structure (StoryIODiagram, DrawIORenderer, PaymentProcessor, etc.)", "Don't create sub-epics based on method names (load_json, parse_xml, charge_card, etc.)", "Don't create epics/sub-epics from technical layers (data layer, service layer, etc.)", "", "Wrong Epic Creation:", "- Based on class: 'StoryIODiagram Operations' (implementation structure)", "- Based on method: 'JSON Loading' (technical mechanism)", "- Based on layer: 'Data Access Layer' (technical architecture)", "", "Focus on USER/SYSTEM GOALS, not technical structure", "", "**DO:** Look at distinct behaviors and typical execution order", "Analyze DISTINCT BEHAVIORS from acceptance tests and code flow:", "  - What are the different scenarios?", "  - What are the different paths through the code?", "  - What are the different user actions?", "", "Example Behavior Analysis (Story-IO Domain):", "- Test: 'test_render_outline_from_json' shows: Load JSON \u2192 Parse \u2192 Generate XML \u2192 Calculate Positions \u2192 Apply Styles \u2192 Save", "- Distinct Behaviors: Load, Parse, Generate, Calculate, Apply, Save", "- These become STORIES in the journey", "", "Example Behavior Analysis (Payment Domain):", "- Test: 'test_process_payment_success' shows: Invoke \u2192 Validate \u2192 Authorize \u2192 Process \u2192 Confirm", "- Distinct Behaviors: Invoke (entry point), Validate (check input), Authorize (check funds/fraud), Process (execute transaction), Confirm (complete and notify)", "- These become STORIES in the journey", "", "Determine TYPICAL EXECUTION ORDER from code flow:", "  - Trace through acceptance tests: what happens first, second, third?", "  - Trace through CLI commands: what's the flow?", "  - Trace through MCP tool calls: what's the sequence?", "  - Look at error handling: what are alternative paths?", "", "Example Execution Order Analysis (Story-IO Domain):", "- CLI: 'render-outline --story-graph file.json --output file.drawio'", "- Code Flow: Parse args \u2192 Load story graph \u2192 Create diagram \u2192 Render outline \u2192 Save file", "- Typical Order: 1. Parse arguments, 2. Load story graph, 3. Render outline, 4. Save file", "- Stories: 'Parses Command Arguments' \u2192 'Loads StoryGraph from JSON' \u2192 'Renders Outline to DrawIO' \u2192 'Saves DrawIO File'", "", "Example Execution Order Analysis (Payment Domain):", "- CLI: 'process-payment --payment-id 123 --amount 50.00'", "- Code Flow: Parse args \u2192 Validate payment \u2192 Authorize payment \u2192 Process payment \u2192 Confirm payment", "- Typical Order: 1. User invokes process payment, 2. System validates payment details, 3. System authorizes payment, 4. System processes payment, 5. System confirms payment", "- Stories: 'User invokes process payment command' \u2192 'System validates payment details' \u2192 'System authorizes payment with payment processor' \u2192 'System processes payment transaction' \u2192 'System confirms payment and sends notification'", "", "Create STORY JOURNEY from execution order:", "  - Start with entry point (CLI invocation, UI click, MCP tool call)", "  - Follow the code flow through operations", "  - Include error handling and alternative paths", "  - End with completion (save, return result, display)", "", "Example Story Journey (Story-IO Domain):", "- Entry: 'User invokes render-outline command from CLI'", "- Flow: 'CLI parses arguments' \u2192 'CLI loads story graph' \u2192 'CLI invokes render' \u2192 'System renders outline' \u2192 'System saves file'", "- Error: 'If file not found, CLI displays error message'", "- Completion: 'CLI returns success message'", "", "Example Story Journey (Payment Domain):", "- Entry: 'User invokes process payment command' (WHEN: user wants to charge customer, WHY: to complete purchase, OUTCOME: CLI/MCP/API receives request)", "- Flow: 'System validates payment details' (WHEN: after request received, WHY: to ensure payment can be processed, OUTCOME: details validated) \u2192 'System authorizes payment' (WHEN: after validation, WHY: to check funds/fraud, OUTCOME: payment authorized) \u2192 'System processes payment' (WHEN: after authorization, WHY: to execute transaction, OUTCOME: payment processed) \u2192 'System confirms payment' (WHEN: after processing, WHY: to notify user, OUTCOME: payment confirmed)", "- Error: 'If validation fails, System displays validation error' (WHEN: validation fails, WHY: to inform user, OUTCOME: error shown, process stops)", "- Completion: 'System returns transaction ID' (WHEN: after confirmation, WHY: to provide reference, OUTCOME: transaction ID returned)", "", "**DON'T:** Don't create stories from code structure or method calls", "Don't create stories from every method call in code", "Don't create stories from internal function calls", "Don't create stories from data structure operations", "", "Wrong Story Creation:", "- From method: 'StoryIODiagram.__init__()' (internal initialization)", "- From function: 'parse_json()' (internal parsing)", "- From operation: 'dict.get()' (data access, not behavior)", "- From method: 'PaymentProcessor.charge_card()' (internal implementation)", "", "Focus on USER/SYSTEM VISIBLE BEHAVIORS, not internal implementation", "", "**DO:** Lay out story journey from end-to-end flow", "Create STORY JOURNEY that shows complete end-to-end flow:", "  - Start: How does user/system initiate? (CLI command, UI click, API call)", "  - Middle: What happens step by step? (parse, load, process, transform)", "  - End: How does it complete? (save, return, display, notify)", "", "Include CONTEXT for each story:", "  - WHEN does it happen? (trigger, condition, user action)", "  - WHY does it happen? (purpose, user need, system requirement)", "  - WHAT is the outcome? (result, state change, user experience)", "  - ACTOR: Who performs the action? (User, System, CLI, MCP, API, etc.)", "", "Example Complete Story Journey (Story-IO Domain):", "(E) Render StoryGraph", "  and (E) Render Outline", "    and (S) User --> invokes render-outline command from CLI", "    and (S) CLI --> parses command arguments", "    and (S) CLI --> loads story graph from JSON file", "    and (S) System --> renders outline to DrawIO format", "    and (S) System --> saves DrawIO file", "", "Example Complete Story Journey (Payment Domain):", "(E) Process Payment", "  and (E) Process Card Payment", "    and (S) User --> invokes process payment command", "    and (S) System --> validates payment details", "    and (S) System --> authorizes payment with payment processor", "    and (S) System --> processes payment transaction", "    and (S) System --> confirms payment and sends notification", "", "Include ERROR HANDLING and ALTERNATIVE PATHS:", "  - What happens when file not found?", "  - What happens when parsing fails?", "  - What happens when validation fails?", "  - What happens when authorization fails?", "", "Example Error Handling (Story-IO Domain):", "  and (S) CLI --> displays error message if story graph file not found", "", "Example Error Handling (Payment Domain):", "  and (S) System --> displays validation error if validation fails", "  and (S) System --> displays authorization declined message if authorization fails", "", "**DON'T:** Don't create isolated stories without journey context", "Don't create stories that are just operations without context", "Don't create stories that don't connect to a journey", "Don't create stories without when/why/outcome/actor", "", "Wrong Story Creation:", "- (S) System --> loads StoryGraph (no context: when? why? what happens next?)", "- (S) System --> parses JSON (no context: when? why? what's the outcome?)", "- (S) System --> saves file (no context: when? why? what triggers this?)", "- (S) System --> processes payment (no context: when? why? what's the outcome?)", "", "Every story must be part of a JOURNEY with CONTEXT (when/why/outcome/actor)", "", "", "**Rule:** focus_real_actions_on_domain_concepts.json", "When shaping stories, stories must describe REAL ACTIONS that users or other actors (even system or technical actors) can perform, not capabilities or structural descriptions. Organize by lifecycle flow (Load, Read, Edit, Render, Synchronize, Search, Save). CRITICAL: Actor names must NOT appear in Epic/Sub-Epic/Story names - names are Verb-Noun only.", "", "**DO:** Use real actions - actor separate from name", "Stories describe actions: Load, Read, Add, Remove, Render, Search, Save", "Organize by lifecycle: Load \u2192 Read \u2192 Edit \u2192 Render \u2192 Synchronize \u2192 Search \u2192 Save", "Use Verb-Noun format for names: '[Verb] [Noun]' - NO ACTOR in name", "Focus on what users/code CAN DO, not what things ARE", "", "NAMING RULE - Actor NOT in Name:", "- Epic name: 'Places Order' (NOT 'Customer Places Order')", "- Sub-Epic name: 'Validates Payment' (NOT 'PaymentValidator Validates Payment')", "- Story name: 'Processes Order Items' (NOT 'OrderProcessor Processes Order Items')", "- Actor is documented separately, not in the name itself", "", "ACTORS for User/System Stories (normal stories):", "- Use human/system actors: User, Developer, System, Customer, Admin", "- Actor is implicit or documented separately from name", "- Examples: Epic 'Places Order' has actor: Customer", "- Examples: Sub-Epic 'Validates Payment' has actor: System", "", "ACTORS for Technical Stories (deep internal class-level interactions):", "- Domain concepts CAN be actors: OrderProcessor, PaymentValidator, InventoryManager, Cart, Product", "- Actor is documented separately, NOT in name", "- Examples: Epic 'Loads Order Data' has actor: OrderProcessor (technical)", "- Examples: Sub-Epic 'Updates Inventory' has actor: InventoryManager (technical)", "- Examples: Story 'Calculates Total' has actor: Cart (technical)", "- This is acceptable when documenting class-to-class interactions internally", "", "**DON'T:** Avoid capabilities, structural descriptions, passive states, and actors in names", "Don't use capability nouns or structural descriptions", "Don't describe what things ARE or CONTAIN", "Don't use passive states or properties as stories", "CRITICAL: Don't put actor in Epic/Sub-Epic/Story names", "", "Wrong Examples (capabilities/structure):", "- 'PaymentValidator Contains Validation Logic' (capability, not action)", "- 'OrderProcessor Tracks Order Count' (passive state, not action)", "- 'Cart Hierarchy Foundation' (structural description)", "- 'Domain Components Implementation' (capability)", "- 'Product Represents Item' (structural description)", "", "Wrong Examples (actor in name):", "- Epic: 'Customer Places Order' (actor in name - WRONG)", "- Sub-Epic: 'OrderProcessor Validates Payment' (actor in name - WRONG)", "- Sub-Epic: 'Cart Adds Product' (actor in name - WRONG)", "- Story: 'InventoryManager Updates Stock' (actor in name - WRONG)", "", "Correct Examples (actor NOT in name):", "- Epic: 'Places Order' (actor: Customer, documented separately)", "- Sub-Epic: 'Validates Payment' (actor: PaymentValidator, documented separately)", "- Sub-Epic: 'Adds Product' (actor: Cart, documented separately)", "- Story: 'Updates Stock' (actor: InventoryManager, documented separately)", "", "These are not actions users/code can perform - they describe structure or capabilities", "Instead ask: What can users/code DO with this domain concept?", "- Instead of 'Contains Logic' \u2192 'Generates XML' or 'Renders Diagram'", "- Instead of 'Tracks Count' \u2192 'Reads Count' or 'Updates Count'", "- Instead of 'Represents X' \u2192 'Creates X' or 'Loads X'", "", "", "**Rule:** focus_user_and_system_activities.json", "Focus story maps on both user AND system activities, not tasks. Stories should outline user and system behavior patterns.", "", "**DO:** Include both user and system activities in story descriptions", "User submits order, System validates payment", "Customer views products, System displays inventory", "Use user activity patterns: User submits, Customer places", "Use system activity patterns: System validates, System sends", "Focus stories on user interactions and how the system behaves as observed by users", "Example: Customer places order with payment details", "", "ACTOR SELECTION (documented separately, NOT in name):", "- For user/system stories: Actors are User, System, Developer, Customer, Admin (human/system actors)", "- For technical stories (deep internal class-level): Domain concepts can be actors (StoryIODiagram, DrawIORenderer, DrawIOSynchronizer, User, Increment, Component)", "- Technical stories document class-to-class interactions where domain concepts act as actors", "", "CRITICAL NAMING RULE:", "- Actor must NOT appear in Epic/Sub-Epic/Story name", "- Name format: '[Verb] [Noun]' only", "- Examples: 'Loads StoryGraph' (actor: StoryIODiagram, documented separately)", "- Examples: 'Adds Sub-Epic' (actor: Epic, documented separately)", "- Examples: 'Changes Parent' (actor: Component, documented separately)", "", "**DON'T:** Avoid task-oriented language that describes implementation", "Avoid task-oriented language that describes implementation", "Don't use task language for building or setting up", "Don't focus only on user activities (ignore system activities)", "Don't focus only on tasks (instead of activities)", "Don't use development task language: implement, create, refactor, optimize, fix, build, set up", "Don't use technical implementation details: query database, call API, update table", "", "Wrong Examples:", "- Only user activities: User submits order, User views products (missing system activities)", "- Only tasks: Implement order submission, Create payment validation (not activities)", "- Implement order submission, Create payment validation", "- Build product listing page, Set up inventory display", "", "", "**Rule:** identify_system_stories.json", "System stories capture system-to-system interactions that are not user-facing. They represent internal system behavior that crosses system boundaries (e.g., microservice to microservice, component to component). System stories should be identified and marked with story_type: 'system'.", "", "**DO:**", "- Identify system-to-system interactions: Storage Microservice validates payload from Local Mgmt System", "API Gateway routes request to Authentication Service", "Message Queue delivers event to Notification Service", "- Mark system stories with story_type: 'system': Story: 'Validate Payload' with story_type: 'system'", "Story: 'Route Request' with story_type: 'system'", "Story: 'Deliver Event' with story_type: 'system'", "- Use system stories for internal system behavior: System stories represent behavior that happens between systems/components", "System stories are not directly visible to end users", "System stories enable user-facing stories to function", "", "**DON'T:**", "- Don't mark user-facing stories as system stories: User clicks button \u2192 NOT a system story", "User views dashboard \u2192 NOT a system story", "User submits form \u2192 NOT a system story", "- Don't confuse system stories with technical stories: System stories = system-to-system behavior (dark blue in DrawIO)", "Technical stories = implementation tasks (black/white in DrawIO, normally avoided)", "", "", "**Rule:** maximize_integration_of_related_concepts.json", "When shaping stories, maximize integration of related concepts", "", "**DO:** Group concepts that the user sees as one capability", "Group concepts that the user sees as one capability", "Nest implementation details under the sub-epic they serve", "Keep related data and operations together", "Eliminate artificial boundaries based on code organization", "", "**DON'T:** Don't separate related concepts", "Don't separate related concepts into different major sections", "Wrong: Split based on code layers (data, business, presentation)", "Don't duplicate related concepts across multiple sections", "Wrong: Create gaps that break the user's mental model", "", "", "**Rule:** place_domain_concepts_by_relevance.json", "When shaping stories, place domain concepts locally or globally based on relevance to one or multiple sub_epics", "", "**DO:** Place domain concepts at the most specific level, favoring local placement", "Favor local placement: Place domain_concepts at the sub_epic level when they are relevant to only that sub_epic", "Think about the core: Consider core domain concepts that span multiple sub_epics - these should be placed at the parent epic/sub_epic level", "Elevate when shared: If a domain concept is used by multiple child sub_epics, elevate it to the parent level", "Start local, elevate if needed: Begin with local placement, but elevate if the concept is referenced by multiple sub_epics", "", "Correct Examples (Local Placement):", "- Sub-Epic 'Validates Payment' has domain_concept: 'Payment' (only used in this sub-epic)", "- Sub-Epic 'Processes Order' has domain_concept: 'Order' (only used in this sub-epic)", "- Sub-Epic 'Updates Inventory' has domain_concept: 'InventoryItem' (only used in this sub-epic)", "", "Correct Examples (Global Placement):", "- Epic 'Process Payment' has domain_concept: 'Payment' (used by multiple sub-epics: Validate Payment, Authorize Payment, Process Transaction)", "- Epic 'Manage Orders' has domain_concept: 'Order' (used by multiple sub-epics: Create Order, Update Order, Cancel Order)", "- Sub-Epic 'Order Management' has domain_concept: 'Customer' (used by multiple child sub-epics: Create Customer Order, Update Customer Order)", "", "**DON'T:** Don't place domain concepts at wrong levels or duplicate them unnecessarily", "Don't place domain concepts at epic level when they're only used in one sub-epic", "Wrong: Epic 'Payment System' has domain_concept: 'PaymentValidator' (only used in 'Validates Payment' sub-epic - should be local)", "Don't duplicate domain concepts at multiple levels", "Wrong: Both Epic and Sub-Epic have 'Payment' concept when it's only used in one sub-epic", "Don't place core domain concepts too locally if they're used across multiple epics", "Wrong: Core concept 'User' placed only in one sub-epic when it's used across multiple epics", "Don't ignore shared usage - if multiple sub-epics reference a concept, elevate it", "Wrong: 'Order' concept placed in each sub-epic separately when all sub-epics use it (should be at parent level)", "", "", "**Rule:** prevent_generic_capabilities.json", "CRITICAL: Stories must describe specific actions with actors, not generic capabilities. Reject stories that describe what system IS (capabilities) vs what system DOES (behaviors).", "", "**DO:** Use specific actions with actors and outcomes", "Stories must have specific actors performing specific actions", "Stories must describe what system DOES (behaviors), not what system IS (capabilities)", "Stories must have specific outcomes, not generic descriptions", "", "Correct Examples (specific behaviors with actors):", "- 'User invokes MCP tool and system routes to StoryIO handler' (specific: user, MCP tool, routing action)", "- 'Developer adds sub-epic Render Exploration to epic Render StoryGraph' (specific: developer, sub-epic name, epic name)", "- 'System loads story graph from JSON file when user requests render' (specific: system, load action, trigger)", "- 'CLI determines workspace root from current directory' (specific: CLI, determine action, source)", "", "Actor Requirements:", "- Every story must have an actor (User, System, Developer, CLI, StoryIODiagram, etc.)", "- Actor must be documented separately (not in name)", "- Actor must be specific (not generic 'Component' or 'System')", "- Actor must perform the action (not just be present)", "", "**DON'T:** Don't use generic capabilities or passive descriptions", "Don't describe what system IS (capabilities)", "Don't use generic action descriptions without actors", "Don't use passive states or properties as stories", "", "Wrong Examples (generic capabilities):", "- 'Exposes Tools' (capability - what tools? when? to whom? what happens?)", "- 'Provides Server Interface' (capability - what interface? when? why?)", "- 'Contains Validation Logic' (capability - not an action)", "- 'Tracks Order Count' (passive state - not an action)", "", "Capability Indicators (REJECT):", "- Describes what system IS: 'Exposes', 'Provides', 'Contains', 'Represents'", "- No specific actor or action", "- No specific outcome or trigger", "- Generic description without context", "", "Instead, ask:", "- Who performs this action? (actor)", "- When does this happen? (trigger/context)", "- What specific outcome occurs? (result)", "- Why does this happen? (purpose in journey)", "", "", "**Rule:** prevent_implementation_details_as_stories.json", "CRITICAL: Implementation operations (serialize, convert, calculate, generate XML, apply formatting) must be steps within stories, not stories themselves. Stories must focus on user/system outcomes, not technical mechanisms.", "", "**DO:** Keep implementation details as steps within stories", "Implementation operations must be steps within stories", "Stories must focus on user/system outcomes, not technical mechanisms", "Stories must describe what user/system experiences, not how it's implemented", "", "Correct Examples (outcomes, not mechanisms):", "- Story: 'User saves story graph and system writes JSON file' \u2192 Steps: 'System converts diagram to story graph format', 'System serializes components to JSON', 'System writes file'", "- Story: 'User requests render and system generates DrawIO diagram' \u2192 Steps: 'System generates DrawIO XML', 'System calculates component positions', 'System applies styles', 'System saves file'", "- Story: 'User edits epic and system updates diagram' \u2192 Steps: 'System updates epic data', 'System recalculates layout', 'System refreshes diagram'", "", "Story vs Step Distinction:", "- Story = User/system outcome (what they experience)", "- Step = Implementation detail (how it's done)", "- Story = Independently valuable (can be tested/delivered)", "- Step = Part of story (not independently valuable)", "", "**DON'T:** Don't make implementation operations into stories", "Don't create stories for implementation operations", "Don't expose technical mechanisms as user stories", "Don't break implementation steps into separate stories", "", "Wrong Examples (implementation details as stories):", "- 'Convert Diagram to StoryGraph Format' (implementation - should be step in 'Save StoryGraph' story)", "- 'Serialize Components to JSON' (implementation - should be step in 'Save StoryGraph' story)", "- 'Generate DrawIO XML from StoryGraph' (implementation - should be step in 'Render Outline' story)", "- 'Calculate Component Positions' (implementation - should be step in 'Render Outline' story)", "- 'Apply Component Styles' (implementation - should be step in 'Render Outline' story)", "- 'Save DrawIO XML to File' (implementation - should be step in 'Render Outline' story)", "", "Implementation Operation Indicators (REJECT as stories):", "- Serialize, deserialize, convert, transform, format", "- Calculate, compute, generate, create (technical artifacts)", "- Apply, set, configure (technical settings)", "- Save, write, store (without user context)", "", "These are implementation mechanisms, not user/system behaviors", "They should be steps within stories that describe outcomes", "", "Instead, ask:", "- What does the user/system experience? (story)", "- How is it implemented? (step within story)", "- What's the outcome? (story)", "- What's the mechanism? (step)", "", "", "**Rule:** refine_scope_to_functional_accomplishment.json", "Refine Scope to Functional Accomplishment", "", "**DO:** Focus on functional outcomes, not mechanisms", "Focus on functional outcomes, not mechanisms", "Frame domains by what they accomplish for users", "Ask about user enablement: What does this enable the user to do or understand?", "State the transformation or capability provided", "Be specific about the functional benefit", "", "**DON'T:** Don't frame domains by their technical implementation", "Don't frame domains by their technical implementation", "Wrong: Focus on 'how' before 'what'", "Don't use generic system capabilities as domain names", "Wrong: Describe mechanisms instead of outcomes", "", "", "**Rule:** size_stories_3_to_12_days.json", "Size stories to fall within 3-12 day effort range for effective planning and frequent delivery.", "", "**DO:** Create stories that represent complete flows within the effort range", "Create stories that represent complete flows within the effort range", "Example: Customer places order (complete flow, 3-5 days)", "Break/group stories so that most fall into a 3-12 day effort range", "Enable frequent feedback by decomposing the work into smaller items", "", "**DON'T:** Avoid stories that are too large or too small", "Avoid stories that are too large and span multiple weeks", "Don't arbitrarily decompose stories to a functional level, regardless of size", "", "Wrong Examples:", "- Order management system (too large, 20+ days)", "- Create stories that are too small without considering value", "", "", "**Rule:** story_map_code_approach.json", "Quick checklist for extracting story maps from code. Follow this process step-by-step.", "", "", "**Rule:** use_active_behavioral_language.json", "When shaping stories, use active behavioral language with action verbs. Describe behaviors, not tasks or capabilities.", "", "**DO:** Use action verbs to describe what happens", "Use action verbs to describe what happens", "Example: User submits order, System validates payment", "Favor active behavioral language over functional/capability breakup", "Use story maps to outline user and system behavior (NOT tasks)", "Use action verbs: submits, views, validates, sends, displays", "Describe behaviors: [Actor] [action] [object] - but actor NOT in name", "Use active behavior language: Place order (active behavior), Validate payment (active behavior)", "", "CRITICAL NAMING RULE - Actor NOT in Name:", "- Epic/Sub-Epic/Story names must be Verb-Noun format: '[Verb] [Noun]'", "- Actor is documented separately, NOT included in the name", "- Verb can be in various forms: imperative ('Add'), infinitive ('To Add'), third person ('Adds') - all are acceptable", "- Noun can be singular or plural based on context - DO NOT pluralize unnecessarily", "- Prepositional phrases and context are part of the noun phrase and should be preserved (e.g., 'Add Minion To Mob' is correct)", "- Examples: Epic 'Places Order' (actor: Customer, documented separately)", "- Examples: Sub-Epic 'Validates Payment' (actor: PaymentValidator, documented separately)", "- Examples: Story 'Updates Stock' (actor: InventoryManager, documented separately)", "- Examples: Story 'Add Minion To Mob' (verb-noun with context preserved - CORRECT)", "- Examples: Story 'Group Minions' (verb-noun, plural noun is correct for context - CORRECT)", "", "ACTOR SELECTION (documented separately, not in name):", "- For user/system stories: Use human/system actors (User, System, Developer, Customer)", "- For technical stories (deep internal): Domain concepts can be actors (OrderProcessor, PaymentValidator, InventoryManager, Cart, Product)", "- Actor is implicit or explicitly documented, but NOT in the name string", "", "**DON'T:** Avoid capability nouns and task language", "Avoid capability nouns that describe functions rather than behaviors", "Don't use functional or capability-based language instead of behavioral language", "Don't use capability nouns: Management, Processing, Administration", "Don't use task verbs: implement, create, build, set up", "Don't use task language", "", "Wrong Examples:", "- Order Management, Payment Processing (capability nouns)", "- Focus on tasks instead of behaviors", "- Order Management (capability), Implement order placement (task)", "", "Wrong Examples (actor in name):", "- Epic: 'Customer Places Order' (actor in name - WRONG)", "- Sub-Epic: 'OrderProcessor Validates Payment' (actor in name - WRONG)", "- Sub-Epic: 'Cart Adds Product' (actor in name - WRONG)", "- Story: 'InventoryManager Updates Stock' (actor in name - WRONG)", "", "Correct: Name is Verb-Noun only, actor documented separately", "", "", "**Rule:** use_outcome_verbs_not_communication_verbs.json", "Use Outcome Verbs, Not Communication Verbs", "", "**DO:** Use verbs that describe artifacts/outcomes", "Use verbs that describe artifacts/outcomes", "Examples: Animation, Feedback, Indicators, Configuration", "Name concepts by what they ARE or CREATE", "Examples: Power Activation Animation, Combat Outcome Feedback", "Focus on tangible results", "Examples: Hit Indicators, Save Result Feedback", "", "**DON'T:** Don't use generic communication verbs", "Don't use generic communication verbs", "Examples: showing, displaying, visualizing, presenting", "Don't use vague enablement verbs", "Examples: providing, enabling, allowing", "Don't name concepts by their mechanism", "Wrong Examples: Visualizing Power Activation, Showing Combat Results", "", "", "Review each validation rule carefully. Your generated content must pass all validations on the first attempt", "", "Generate the knowledge graph (structured JSON content) according to the schema and rules", "", "**OUTPUT:**a structured JSON knowledge graph that will be saved to the workspace area", "", "** UPDATING vs CREATING:**", "- Check if knowledge graph already exists in workspace area", "- If knowledge graph EXISTS, you are UPDATING it (not creating from scratch)", "- When updating, preserve existing content and add/modify only what's needed based on current behavior", "- If knowledge graph does NOT exist, create new one following the schema", "", "**AUTOMATIC VALIDATION AND FIXES: After generating the knowledge graph, automatically run the validate_rules action without confirming or waiting. Print ALL violations found (including rule name, violation message, severity, and location for each violation). Then review each violation against the specific rules identified by the scanner, and make necessary edits to fix all violations. Continue iterating until all violations are resolved before proceeding to render_output.**", "", "**AUTOMATIC PROGRESSION: Once all fixes are completed, automatically proceed to render_output action without stopping or waiting for user confirmation. These two actions should execute sequentially as a single workflow step.**", ""], "behavior_instructions": ["Hey, going to be going away for a little while to create the knowledge graph. Go get a cup of coffee \ud83d\ude0a", "", "**BUILD KNOWLEDGE GRAPH - STORY GRAPH AND DOMAIN MODEL CREATION:**", "", "Build the initial story graph structure AND domain model from gathered context and planning decisions. Capture domain concepts alongside story structure.", "", "**Configuration:**", "- Reference: build_story_graph_outline.json", "- Template: story-graph-outline.json", "", "**CRITICAL - TEMPLATE STRUCTURE COMPLIANCE:**", "1. The build_knowledge action has injected 'knowledge_graph_template' into your instructions", "2. This template shows the EXACT JSON structure your output MUST match", "3. **DO NOT invent your own schema** - examine the template and replicate its structure", "4. The template includes:", "   - Root level keys (e.g., 'epics' array only, NOT 'capability', 'increments', 'features')", "   - Required fields at each level (e.g., 'sequential_order', 'estimated_stories', 'domain_concepts')", "   - Nested structure (epics \u2192 sub_epics \u2192 story_groups \u2192 stories)", "   - Field types and formats (e.g., 'connector': null vs 'connector': 'and')", "5. Look at the '_explanation' section in the template for structural rules", "6. Your output must be structurally identical - only the values (names, responsibilities, etc.) differ", "", "**CRITICAL: Story Graph Structure - Main Epics Section is Single Source of Truth**", "", "**Two-Section Architecture (if increments are added later):**", "", "1. **Main 'epics' Section (Single Source of Truth)**", "   - Contains ALL story details: name, users, sequential_order, story_type, connector, story_groups, etc.", "   - This is the PRIMARY location - all story details must be here", "   - Used as the source for all views (outline, increments, discovery, exploration)", "", "2. **'increments' Section (Minimal Reference View - if present)**", "   - This is a MINIMAL REFERENCE VIEW - just enough to know which stories belong to which increment", "   - Stories in increments should ONLY contain: name, users (optional), sequential_order", "   - NO story details (no story_type, no connector, no story_groups, no domain_concepts, etc.)", "   - Increments are a COPY of the outline view at the story level - just for mapping stories to increments", "   - All story details come from the main epics section", "", "**Domain Model Creation (Integrated with Story Graph):**", "1. Domain concepts are integrated directly into the story graph structure", "2. Place domain_concepts at epic and sub_epic levels based on relevance", "3. Apply domain shaping rules (context: 'when shaping the domain')", "4. **DO NOT create separate domain_graph.json or domain model files**", "5. All domain modeling is captured within story-graph.json via domain_concepts arrays", "", "**Domain Concept Placement Logic:**", "- **Local placement (preferred)**: Place domain_concepts at the sub_epic level when they are relevant to only that sub_epic", "- **Global placement**: Elevate domain_concepts to parent epic/sub_epic level when they are relevant to multiple child sub_epics", "- **Favor local**: Start with local placement, but elevate if the concept is used by multiple sub_epics", "**Process:**", "1. Use clarification data from docs/stories/clarification.json", "2. Use planning decisions from docs/stories/planning.json", "3. **EXAMINE the knowledge_graph_template structure injected into your instructions**", "4. Build story graph matching that exact structure (root keys, field names, nesting)", "5. Identify domain concepts from clarification and planning data", "6. Map domain concepts to epics/sub_epics based on relevance (see placement logic above)", "7. Populate domain_concepts arrays in story-graph.json with proper placement", "8. Create story-graph.json in project area", "7. Populate domain_concepts arrays in story-graph.json with proper placement", "8. Create story-graph.json and domain model outputs in project area (same location)", "", "**Output:**", "- File: {project_area}/story-graph.json (JSON story graph with epics, sub_epics, story_groups, stories, and domain_concepts integrated)", "", "**Next Step:** Proceed to render step after story graph is created."], "knowledge_graph_template": {"_explanation": {"hierarchical": "sub_epics can contain: nested sub_epics or story_groups. sequential_order is always an integer (1, 2, 3, 4) - unique within parent, no decimals.", "connector": "Story groups: 'and' or 'or' (null for first group). Stories within groups: 'and' or 'or' (null for first story). Epics and sub_epics don't have connectors.", "domain_placement": "domain_concepts: 'local' if relevant to single sub_epic, 'global' if relevant to multiple sub_epics. Place at most specific level (local preferred), but elevate to parent if used by multiple children."}, "epics": [{"name": "", "sequential_order": 1, "estimated_stories": null, "domain_concepts": [{"name": "", "responsibilities": [{"name": "", "collaborators": []}]}], "sub_epics": [{"name": "", "sequential_order": 1, "estimated_stories": null, "domain_concepts": [{"name": "", "responsibilities": [{"name": "", "collaborators": []}]}], "sub_epics": [], "story_groups": [{"type": "and", "connector": null, "sequential_order": 1, "stories": [{"name": "", "sequential_order": 1, "connector": null, "users": [], "story_type": "user"}, {"name": "", "sequential_order": 2, "connector": "and", "users": [], "story_type": "user"}]}, {"type": "and", "connector": "or", "sequential_order": 2, "stories": [{"name": "", "sequential_order": 1, "connector": null, "users": [], "story_type": "user"}, {"name": "", "sequential_order": 2, "connector": "and", "users": [], "story_type": "user"}, {"name": "", "sequential_order": 3, "connector": "and", "users": [], "story_type": "user"}]}, {"type": "or", "connector": "or", "sequential_order": 3, "stories": [{"name": "", "sequential_order": 1, "connector": null, "users": [], "story_type": "user"}]}]}], "stories": []}]}, "knowledge_graph_config": {"name": "build_story_graph_outline", "path": "docs/stories/", "template": "story-graph-outline.json", "output": "story-graph.json"}, "template_path": "C:\\dev\\augmented-teams\\agile_bot\\bots\\story_bot\\behaviors\\1_shape\\2_content\\1_knowledge_graph\\story-graph-outline.json", "config_path": "C:\\dev\\augmented-teams\\agile_bot\\bots\\story_bot\\behaviors\\1_shape\\2_content\\1_knowledge_graph\\build_story_graph_outline.json", "schema": "**Schema Rules:**\n- **Hierarchical**: sub_epics can contain: nested sub_epics or story_groups. sequential_order is always an integer (1, 2, 3, 4) - unique within parent, no decimals.\n- **Connector**: Story groups: 'and' or 'or' (null for first group). Stories within groups: 'and' or 'or' (null for first story). Epics and sub_epics don't have connectors.\n- **Domain Placement**: domain_concepts: 'local' if relevant to single sub_epic, 'global' if relevant to multiple sub_epics. Place at most specific level (local preferred), but elevate to parent if used by multiple children.\n\n**Template Structure (JSON Schema):**\n```json\n{\n  \"_explanation\": {\n    \"hierarchical\": \"sub_epics can contain: nested sub_epics or story_groups. sequential_order is always an integer (1, 2, 3, 4) - unique within parent, no decimals.\",\n    \"connector\": \"Story groups: 'and' or 'or' (null for first group). Stories within groups: 'and' or 'or' (null for first story). Epics and sub_epics don't have connectors.\",\n    \"domain_placement\": \"domain_concepts: 'local' if relevant to single sub_epic, 'global' if relevant to multiple sub_epics. Place at most specific level (local preferred), but elevate to parent if used by multiple children.\"\n  },\n  \"epics\": [\n    {\n      \"name\": \"\",\n      \"sequential_order\": 1,\n      \"estimated_stories\": null,\n      \"domain_concepts\": [\n        {\n          \"name\": \"\",\n          \"responsibilities\": [\n            {\n              \"name\": \"\",\n              \"collaborators\": []\n            }\n          ]\n        }\n      ],\n      \"sub_epics\": [\n        {\n          \"name\": \"\",\n          \"sequential_order\": 1,\n          \"estimated_stories\": null,\n          \"domain_concepts\": [\n            {\n              \"name\": \"\",\n              \"responsibilities\": [\n                {\n                  \"name\": \"\",\n                  \"collaborators\": []\n                }\n              ]\n            }\n          ],\n          \"sub_epics\": [],\n          \"story_groups\": [\n            {\n              \"type\": \"and\",\n              \"connector\": null,\n              \"sequential_order\": 1,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 2,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            },\n            {\n              \"type\": \"and\",\n              \"connector\": \"or\",\n              \"sequential_order\": 2,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 2,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 3,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            },\n            {\n              \"type\": \"or\",\n              \"connector\": \"or\",\n              \"sequential_order\": 3,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            }\n          ]\n        }\n      ],\n      \"stories\": []\n    }\n  ]\n}\n```", "rules": [{"rule_file": "rules\\maintain_verb_noun_consistency.json", "rule_content": {"description": "Maintain verb-noun consistency from epic to feature to story to scenario", "scanner": "agile_bot.bots.base_bot.src.scanners.verb_noun_scanner.VerbNounScanner", "do": {"examples": [{"description": "Use consistent verb-noun language across all levels", "content": ["Epic: Manage Orders \u2192 Feature: Place Order \u2192 Story: Customer places order \u2192 Scenario: When customer places order..."]}, {"description": "Maintain consistent terminology throughout hierarchy", "content": ["Epic, feature, story, and scenario all use same verb-noun pattern"]}, {"description": "Use verb-noun language in scenario sentences", "content": ["When user submits form, then system validates data"]}]}, "dont": {"examples": [{"description": "Don't switch formats between levels", "content": ["Epic: Order Management \u2192 Feature: Place Order (inconsistent format)"]}, {"description": "Don't mix verb-noun with other formats", "content": ["Epic uses verb-noun, but feature uses noun-only format"]}, {"description": "Don't use different terminology at different levels", "content": ["Epic says 'Orders', feature says 'Order Processing', story says 'Process Order'"]}]}}}, {"rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "rule_content": {"description": "When mapping stories, carefully distinguish between sequential spine (essential path) and optional paths, alternate routes, or additional functionality that is not strictly essential. Sequential stories form the mandatory flow; optional stories are alternatives, enhancements, or non-essential features.", "do": {"examples": [{"description": "Identify the essential spine first", "content": ["Start by identifying the minimal essential path that delivers core value", "The spine represents the mandatory sequence: Story1 AND Story2 AND Story3", "Spine stories get sequential_order numbers (1, 2, 3, etc.)", "Spine stories are required for the feature to deliver its core purpose", "Ask: 'What is the minimum path to deliver value?'"]}, {"description": "Mark optional paths clearly", "content": ["Optional stories branch from or enhance the spine but are not required", "Mark optional stories with 'optional: true' in the story structure", "Optional stories may have sequential_order if they're part of an alternative flow", "Optional stories represent: alternate routes, enhancements, nice-to-have features", "Ask: 'Can the feature deliver value without this story?'"]}, {"description": "Distinguish types of optional paths with concrete examples", "content": ["Alternate routes: User logs in with email (sequential_order: 2) OR User logs in with social media (sequential_order: 2.1, optional: true)", "Enhancements: User views dashboard (sequential_order: 3) AND User customizes dashboard (sequential_order: 3.1, optional: true)", "Additional functionality: User views dashboard (sequential_order: 3) AND User shares dashboard (sequential_order: 3.2, optional: true)", "Error handling: User enters invalid data (sequential_order: 4) AND System shows error message (sequential_order: 4.1, optional: true)"]}, {"description": "Correct mapping examples", "content": ["Spine: User creates account (sequential_order: 1) AND User logs in (sequential_order: 2) AND User views dashboard (sequential_order: 3)", "Optional alternate: User logs in with email (sequential_order: 2) OR User logs in with social media (sequential_order: 2, optional: true)", "Optional enhancement: User views dashboard (sequential_order: 3) AND User customizes dashboard (optional: true, priority: 1)", "Additional functionality: User views dashboard (sequential_order: 3) AND User shares dashboard (optional: true, priority: 2)"]}]}, "dont": {"examples": [{"description": "Don't mark everything as sequential", "content": ["Don't assign sequential_order to all stories when some are optional", "Don't treat alternate routes as part of the spine", "Don't include enhancements in the mandatory sequential flow", "Don't confuse 'nice to have' with 'must have'"]}, {"description": "Don't omit optional markers", "content": ["Don't leave optional stories unmarked - be explicit", "Don't assume all stories in a feature are mandatory", "Don't mix optional and mandatory without clear distinction", "Don't fail to identify the spine before adding optional paths"]}, {"description": "Wrong mapping examples", "content": ["Wrong: User creates account (1) AND User logs in with email (2) AND User logs in with social media (3) - social media should be optional", "Wrong: User views dashboard (1) AND User customizes dashboard (2) AND User shares dashboard (3) - customization and sharing should be optional", "Wrong: All stories marked mandatory when some are clearly alternatives or enhancements", "Wrong: No distinction between essential path and optional features"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.spine_optional_scanner.SpineOptionalScanner"}}, {"rule_file": "rules\\stories_developed_and_tested_in_days.json", "rule_content": {"description": "Write stories that can be developed and tested in a matter of days", "do": {"examples": [{"description": "Create stories sized for days, not weeks", "content": ["Story takes 3-5 days to develop and test completely"]}, {"description": "Break large work into smaller stories", "content": ["Large feature broken into multiple stories, each completable in days"]}, {"description": "Focus on delivering complete, testable functionality quickly", "content": ["Each story delivers a complete piece of functionality that can be tested"]}]}, "dont": {"examples": [{"description": "Don't create stories that span multiple weeks", "content": ["Story requires 3+ weeks to complete (too large)"]}, {"description": "Don't create stories that can't be tested independently", "content": ["Story requires multiple other stories before it can be tested"]}, {"description": "Don't create stories without clear boundaries", "content": ["Story is vague about scope and completion criteria"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.story_sizing_scanner.StorySizingScanner"}}, {"rule_file": "rules\\stories_follow_invest_principles.json", "rule_content": {"description": "Ensure stories follow INVEST principles (Independent, Negotiable, Valuable, Estimable, Small, Testable)", "do": {"examples": [{"description": "Independent - story can be developed independently", "content": ["Story doesn't depend on other stories being completed first"]}, {"description": "Negotiable - story details can be negotiated", "content": ["Story allows for discussion and refinement of requirements"]}, {"description": "Valuable - story delivers value to user or business", "content": ["Story provides measurable value when completed"]}, {"description": "Estimable - story can be estimated", "content": ["Story is clear enough to estimate effort"]}, {"description": "Small - story can be completed in short time", "content": ["Story can be developed and tested in a matter of days"]}, {"description": "Testable - story has clear acceptance criteria", "content": ["Story has testable outcomes that can be verified"]}]}, "dont": {"examples": [{"description": "Don't create stories that depend on multiple other stories", "content": ["Story requires 5 other stories to be completed first (not independent)"]}, {"description": "Don't create stories that are too large", "content": ["Story spans multiple weeks and includes multiple features (not small)"]}, {"description": "Don't create stories without clear value", "content": ["Story doesn't provide measurable value to users or business"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.invest_principles_scanner.InvestPrinciplesScanner"}}, {"rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "rule_content": {"description": "CRITICAL: Story names MUST follow Verb-Noun format (e.g., 'Move To Mob Leaders Turn', 'Determines Target from Strategy', 'Initiate Mob Attack'), and include italicized description showing component interactions (e.g., '*Combat Tracker moves to any mob member's turn, auto moves to mob leader's turn*'). The story name should be concise and action-oriented, while the description shows the component-to-component interactions.", "scanner": "agile_bot.bots.base_bot.src.scanners.verb_noun_scanner.VerbNounScanner", "do": {"examples": [{"description": "Use concise Verb-Noun format for story names", "content": ["Move To Mob Leaders Turn, Determines Target from Strategy, Initiate Mob Attack"]}, {"description": "Include italicized description showing component interactions", "content": ["*Combat Tracker moves to any mob member's turn, auto moves to mob leader's turn*"]}, {"description": "Make story name concise and action-oriented", "content": ["Story name: 'Initiate Mob Attack' - concise and action-oriented"]}, {"description": "Show component interactions in description", "content": ["Story description shows how components interact with each other"]}]}, "dont": {"examples": [{"description": "Don't use long descriptive names without Verb-Noun format", "content": ["The system should allow users to move to mob leaders turn when..."]}, {"description": "Don't omit component interaction descriptions", "content": ["Story name without italicized description of component interactions"]}, {"description": "Don't use vague or non-action-oriented names", "content": ["Mob Leader Turn System, Attack Mechanism"]}]}}}, {"rule_file": "rules\\use_active_behavioral_language.json", "rule_content": {"description": "Use active behavioral language with action verbs. Describe behaviors, not tasks or capabilities.", "scanner": "agile_bot.bots.base_bot.src.scanners.active_language_scanner.ActiveLanguageScanner", "examples": [{"do": {"description": "Use action verbs to describe what happens", "content": ["Use action verbs to describe what happens", "Example: User submits order, System validates payment", "Favor active behavioral language over functional/capability breakup", "Use story maps to outline user and system behavior (NOT tasks)", "Use action verbs: submits, views, validates, sends, displays", "Describe behaviors: [Actor] [action] [object]", "Use active behavior language: Place order (active behavior), Validate payment (active behavior)"]}, "dont": {"description": "Avoid capability nouns and task language", "content": ["Avoid capability nouns that describe functions rather than behaviors", "Don't use functional or capability-based language instead of behavioral language", "Don't use capability nouns: Management, Processing, Administration", "Don't use task verbs: implement, create, build, set up", "Don't use task language", "", "Wrong Examples:", "- Order Management, Payment Processing (capability nouns)", "- Focus on tasks instead of behaviors", "- Order Management (capability), Implement order placement (task)"]}}]}}, {"rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "rule_content": {"description": "Use verb-noun format for all story elements (epic names, feature names, story titles)", "scanner": "agile_bot.bots.base_bot.src.scanners.verb_noun_scanner.VerbNounScanner", "do": {"examples": [{"description": "Use verb-noun format for epic names", "content": ["Manage Orders, Create Character, Process Payment"]}, {"description": "Use verb-noun format for feature names", "content": ["Place Order, Validate Payment, Save Character"]}, {"description": "Use verb-noun format for story titles", "content": ["Customer places order, System validates payment, User saves character"]}, {"description": "Use verb-noun format for scenario sentences", "content": ["User submits form, System processes request"]}]}, "dont": {"examples": [{"description": "Don't use noun-only or capability-based names", "content": ["Order Management, Payment Processing, Character System"]}, {"description": "Don't mix verb-noun with other formats", "content": ["Order Management and Place Order (mixed format)"]}, {"description": "Don't use gerund forms", "content": ["Ordering, Processing Payments, Creating Characters"]}]}}}, {"rule_file": "apply_7_plus_minus_2_hierarchy.json", "rule_content": {"description": "Apply 7\u00b12 rule for hierarchy: epics contain 4-9 sub-epics, sub-epics contain 4-9 stories. Split when exceeding, merge when below minimum.", "scanner": "agile_bot.bots.base_bot.src.scanners.story_sizing_scanner.StorySizingScanner", "examples": [{"do": {"description": "Maintain hierarchy within the 7\u00b12 cognitive limit range", "content": ["(E) Epic: Contains 4-9 sub-epics", "  - Split into additional Sub-Epics when > 9 sub-epics", "  - Merge with another epic when < 4 sub-epics", "(E) Sub-Epic: Contains 4-9 stories", "  - Split into 2 sub-epics when > 9 stories", "  - Merge with another sub-epic when < 4 stories", "(S) Story: Contains 2-9 acceptance criteria", "  - Split into 2 stories when > 9 AC", "  - Merge with another story when < 2 AC (single AC stories are too small)", "Apply 7\u00b12 cognitive limit principle (optimal range: 5-9, acceptable: 4-9)", "", "Example:", "(E) Manage Orders (10 sub-epics \u2192 SPLIT)", "  and (E) Manage Customer Orders (6 stories) \u2713", "  and (E) Manage Order Fulfillment (4 stories) \u2713", "", "(E) Place Order (12 stories \u2192 SPLIT)", "  and (S) Initiate Order (6 AC) \u2713", "  and (S) Complete Order (6 AC) \u2713", "", "(S) Validate Payment (11 AC \u2192 SPLIT)", "  and (AC) Check Payment Method (5 steps) \u2713", "  and (AC) Process Payment Transaction (6 steps) \u2713"]}, "dont": {"description": "Don't exceed thresholds or create items below minimum", "content": ["Create epics with > 9 sub-epics (use additional Sub-Epics instead)", "Create sub-epics with > 9 stories (split the sub-epic)", "Create stories with > 9 acceptance criteria (split the story)", "Create very small stories with < 2 AC (merge with related story)", "Ignore sizing thresholds during shaping, discovery, or exploration", "", "Wrong Examples:", "- (E) Epic with 15 sub-epics (too many, use additional Sub-Epics)", "- (E) Sub-Epic with 15 stories (too many, split sub-epic)", "- (S) Story with 15 AC (too many, split story)", "- (S) Story with 1 AC (too small, merge with related story)"]}}]}}, {"rule_file": "avoid_noun_redundancy.json", "rule_content": {"description": "When shaping stories, avoid noun redundancy in domain and concept names", "context": "when shaping stories", "examples": [{"do": {"description": "INTEGRATE first: nest related capabilities under one domain", "content": ["INTEGRATE first: nest related capabilities under one domain (90% of cases)", "Only then rename: use distinct nouns ONLY when integration doesn't make sense", "Test for uniqueness: Can you remove the qualifier and still know what it is?", "Use subject-area nouns when domains are genuinely separate", "Only when integration truly doesn't make sense"]}, "dont": {"description": "Don't rename without considering integration", "content": ["Don't rename without considering integration (this hides the real issue)", "Wrong: Repeat same noun with different prefixes: X Animation, Y Animation, Z Animation", "Don't use vague qualifiers to avoid integration", "Wrong: Animation 1, Animation System", "Don't create parallel domains that should be nested", "Wrong: Integrate related concepts rather than creating redundant structures"]}}], "scanner": "agile_bot.bots.base_bot.src.scanners.noun_redundancy_scanner.NounRedundancyScanner"}}, {"rule_file": "avoid_technical_implementation_language.json", "rule_content": {"description": "When shaping stories, avoid technical implementation language in user-facing story elements", "context": "when shaping stories", "do": {"examples": [{"description": "Use business language in user-facing elements", "content": ["Customer places order, User views profile, Admin approves request"]}, {"description": "Focus on what user experiences, not how it's implemented", "content": ["Story describes user experience, not technical implementation"]}]}, "dont": {"examples": [{"description": "Don't use development task language", "content": ["implement, create, refactor, optimize, fix, build, set up"]}, {"description": "Don't use technical implementation details", "content": ["query database, call API, update table"]}, {"description": "Don't focus on delivery or development tasks", "content": ["Implement order system, Create database schema, Set up API endpoints"]}, {"description": "Don't focus on system internals", "content": ["Optimize query performance, Refactor authentication code, Update configuration"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.technical_language_scanner.TechnicalLanguageScanner"}}, {"rule_file": "avoid_technical_stories.json", "rule_content": {"description": "Technical stories represent implementation tasks that do not describe system behavior. They are normally avoided in favor of user stories and system stories. When technical stories are necessary, they should be marked with story_type: 'technical' and kept minimal.", "do": {"examples": [{"description": "Prefer user stories and system stories over technical stories", "content": ["Instead of 'Set up database schema', use 'Store user data' (user story)", "Instead of 'Create API endpoint', use 'Expose user data via API' (system story)", "Instead of 'Write unit tests', use 'Verify story behavior' (user story)"]}, {"description": "When technical stories are necessary, mark with story_type: 'technical'", "content": ["Story: 'Migrate legacy data format' with story_type: 'technical'", "Story: 'Refactor authentication module' with story_type: 'technical'", "Story: 'Update dependency versions' with story_type: 'technical'"]}, {"description": "Keep technical stories minimal and focused", "content": ["Technical stories should be rare exceptions", "Technical stories should still follow Verb-Noun format", "Technical stories should be clearly justified"]}]}, "dont": {"examples": [{"description": "Don't create technical stories for normal development work", "content": ["Avoid: 'Write code', 'Create class', 'Add method'", "Avoid: 'Set up CI/CD', 'Configure database', 'Install package'", "These are implementation details, not stories"]}, {"description": "Don't use technical stories to describe system behavior", "content": ["Use system stories for system-to-system behavior", "Use user stories for user-facing behavior", "Technical stories are for unavoidable implementation tasks only"]}]}}}, {"rule_file": "balance_fine_grained_testable_stories.json", "rule_content": {"description": "Balance fine-grained stories with testable and valuable independent units. Stories must deliver value and be independently testable.", "examples": [{"do": {"description": "Create stories that are complete interactions with value", "content": ["Create stories that are complete interactions with value", "Example: Customer places order (complete interaction, testable, valuable)", "Balance fine-grained stories with testable/valuable stories", "Ensure stories are fine-grained enough to enable frequent feedback", "Ensure stories are grouped into meaningful chunks for high quality feedback", "Stories that deliver measurable value independently"]}, "dont": {"description": "Avoid stories that are too small or too large", "content": ["Avoid stories that are too small and have no value alone", "Don't create stories that are too fine-grained without being testable or valuable", "Don't create stories that are too large to be testable or deliverable quickly", "", "Wrong Examples:", "- Add order button (too fine-grained, no value alone)", "- Change button color (too fine-grained, no value)", "- Customer places order and views history and updates profile (too large, multiple flows)"]}}]}}, {"rule_file": "create_lightweight_precise_docs.json", "rule_content": {"description": "Create lightweight but precise documentation during shaping. Focus on structure and scope, not detailed specifications.", "examples": [{"do": {"description": "Create lightweight but precise documentation during shaping", "content": ["Balance fine-grained stories with testable/valuable stories", "Ensure stories are fine-grained enough to enable frequent feedback", "Ensure stories are grouped into meaningful chunks for high quality feedback", "Validate that a business expert can understand the language of most of the stories", "Focus the language on the business domain", "Create lightweight but precise documentation", "Focus on structure and scope, not detailed specifications", "Make the map easy to walk through (it tells a story)", "", "Example:", "(E) Manage Orders", "  and (E) Place Order", "    and (S) Customer --> places order", "(Shows hierarchy and structure, not detailed specs)"]}, "dont": {"description": "Don't over-elaborate or add detailed specifications during shaping", "content": ["Create stories that are too fine-grained without being testable or valuable", "Create stories that are too large to be testable or deliverable quickly", "Add detailed technical specifications during shaping phase", "Over-elaborate story mapping during shaping", "", "Wrong Example:", "(E) Manage Orders", "  and (E) Place Order", "    and (S) Customer --> places order", "  \u2192 Detailed API specs, database schema, UI mockups", "(Too much detail for shaping phase)"]}}]}}, {"rule_file": "discover_relationships_from_story_map.json", "rule_content": {"description": "Domain Discovery determines relationships and responsibilities between core domain objects by walking through the story map, then suggests story refinements to rebuild the story map to complement the domain model.", "examples": [{"do": {"description": "Extract keywords from story map and determine relationships and responsibilities", "content": "Go through all stories in increment scope, extract keywords from story titles/descriptions/acceptance criteria, ask clarifying questions for each keyword, map relationships with multiplicities, document responsibilities"}, "dont": {"description": "Don't skip keyword identification or build domain model without story map analysis", "content": "Skip going through stories, ignore keywords in acceptance criteria, build domain model without asking what keywords mean, use technical terms instead of domain terms"}}]}}, {"rule_file": "enforce_behavioral_journey_flow.json", "rule_content": {"description": "When shaping stories, CRITICAL: Stories must show user/system journey flow, not just list operations. Stories must include context (when/why actions happen) and connect logically. Order by user journey, not technical sequential_order.", "context": "when shaping stories", "examples": [{"do": {"description": "Show user/system journey with context and flow", "content": ["Stories must show WHEN and WHY actions happen, not just WHAT", "Story maps must show logical flow: Initialize \u2192 Validate \u2192 Process \u2192 Confirm \u2192 Complete", "Each story must connect to previous/next stories in the journey", "Order stories by user journey flow, not by technical sequential_order", "", "Correct Examples (with journey context - Payment Domain):", "(E) Process Payment", "  and (E) Process Card Payment", "    and (S) User --> invokes process payment command", "    and (S) System --> validates payment details", "    and (S) System --> authorizes payment", "    and (S) System --> processes payment transaction", "    and (S) System --> confirms payment and sends notification", "", "(E) Refund Payment", "  and (E) Process Refund", "    and (S) User --> invokes refund payment command", "    and (S) System --> validates refund eligibility", "    and (S) System --> processes refund transaction", "    and (S) System --> confirms refund and sends notification", "", "(E) Process Payment", "  and (E) Validate Payment", "    and (S) User --> submits payment request", "    and (S) System --> validates card number", "    and (S) System --> validates amount", "    and (S) System --> validates currency", "    and (S) System --> returns validation result", "", "Note: Individual stories like 'Authorize Payment with Processor' are correct story format (verb-noun, specific), but they need to be part of a journey. Stories should NOT include actors in the name (actors are documented separately).", "", "Correct Individual Stories (but need journey context):", "- 'Authorize Payment with Processor' (correct story format, but needs: when? why? what happens next?)", "- 'Validate Payment Details' (correct story format, but needs: when? why? what triggers this?)", "- 'Process Payment Transaction' (correct story format, but needs: when? why? what happens before/after?)", "", "Journey Flow Requirements:", "- Start with initialization/entry point", "- Show logical progression through operations", "- Include error handling and alternative paths", "- End with completion/save operations", "- Connect stories logically (this leads to that)"]}, "dont": {"description": "Don't create isolated sets of functions that don't make sense linearly", "content": ["Don't group unrelated operations together that don't form a logical journey", "Don't create story maps with random functions that have no linear relationship", "Don't mix unrelated operations from different domains or contexts", "", "Wrong Examples (isolated sets of functions, no linear sense - Payment Domain):", "(E) Payment Operations", "  and (E) Process Payment", "  and (E) Generate Invoice", "  and (E) Send Email", "  and (E) Update Inventory", "  and (E) Calculate Tax", "(unrelated operations, no linear flow - why does email come after payment? why inventory? no journey)", "", "(E) Payment System", "  and (E) Authorize Payment", "  and (E) Create User Account", "  and (E) Process Refund", "  and (E) Generate Report", "  and (E) Delete Transaction", "(random operations, no logical sequence - account creation doesn't follow authorization, deletion doesn't follow processing)", "", "(E) Payment Flow", "  and (S) System --> validates payment", "  and (S) System --> sends notification", "  and (S) System --> authorizes payment", "  and (S) System --> updates database", "  and (S) System --> processes payment", "(wrong order, no linear sense - notification before authorization? database update before processing?)", "", "What Makes It NOT a Linear Journey:", "- Unrelated operations grouped together (payment + inventory + email + tax - why together?)", "- Operations from different contexts mixed (payment + user account + reporting - different domains)", "- No logical sequence (why does X come before Y? no reason)", "- Operations can be in any order (no dependencies, no flow)", "- Random collection of functions (like a function library, not a journey)", "- No user/system goal that connects them (what are we trying to accomplish?)"]}}]}}, {"rule_file": "enforce_functional_accomplishment.json", "rule_content": {"description": "CRITICAL: Stories must represent complete functional accomplishments, not data access operations or implementation steps. Stories must deliver value independently.", "examples": [{"do": {"description": "Create stories that accomplish complete functions", "content": ["Stories must represent complete functional accomplishments", "Stories must deliver value independently (INVEST principle)", "Stories must show end-to-end flow, not just data access", "", "Correct Examples (complete functional accomplishments):", "- 'User loads story graph and system displays epics in diagram' (complete: load + display = accomplishment)", "- 'Developer edits epic name and system updates diagram' (complete: edit + update = accomplishment)", "- 'User requests render and system generates DrawIO file' (complete: request + generate = accomplishment)", "- 'CLI invokes render command and system saves outline diagram' (complete: invoke + save = accomplishment)", "", "Functional Accomplishment Requirements:", "- Story must accomplish something meaningful for user/system", "- Story must be independently valuable (can be tested/delivered alone)", "- Story must show complete flow (start \u2192 process \u2192 outcome)", "- Story must have clear acceptance criteria (how do we know it's done?)"]}, "dont": {"description": "Don't create stories that are just data access or implementation steps", "content": ["Don't create stories that are just data access operations", "Don't create stories that are implementation steps without outcomes", "Don't create stories that aren't independently valuable", "", "Wrong Examples (not complete accomplishments):", "- 'Read All Epics from Diagram' (data access - not accomplishment, what happens with the data?)", "- 'Load All Features In Graph Epic' (data access - not accomplishment)", "- 'Serialize Components to JSON' (implementation step - not accomplishment, part of what story?)", "- 'Convert Diagram to StoryGraph Format' (implementation step - not accomplishment)", "- 'Calculate Component Positions' (implementation step - not accomplishment)", "", "Data Access/Implementation Indicators (REJECT as stories):", "- Just reads/loads data without using it", "- Just converts/formats data without purpose", "- Just calculates/computes without outcome", "- Just serializes/saves without context", "", "These should be STEPS within stories, not stories themselves:", "- Step: 'System reads epics from diagram' (within story: 'User views story map and system displays epics')", "- Step: 'System serializes components' (within story: 'User saves story graph and system writes JSON file')", "- Step: 'System calculates positions' (within story: 'User requests render and system generates positioned diagram')", "", "Instead, ask:", "- What does the user/system accomplish with this?", "- Is this independently valuable?", "- Can this be tested/delivered alone?", "- What's the complete flow from start to finish?"]}}]}}, {"rule_file": "enforce_specificity_in_stories.json", "rule_content": {"description": "CRITICAL: Stories must be specific about what, when, why, and who. Generic operations like 'Add Sub-Epic' or 'Read Epics' are insufficient - stories must include context and specificity.", "scanner": "agile_bot.bots.base_bot.src.scanners.specificity_scanner.SpecificityScanner", "examples": [{"do": {"description": "Create specific stories with full context", "content": ["Stories must be specific about what, when, why, and who", "Stories must include context: when does it happen? why? what triggers it?", "Stories must specify actors, objects, and outcomes clearly", "", "Correct Examples (specific with context - Payment Domain):", "- 'User processes payment for order #12345 with amount $50.00 when customer completes checkout' (specific: user, order ID, amount, context)", "- 'Merchant invokes refund command from API and system reverses payment transaction' (specific: merchant, API, command, outcome)", "- 'System validates payment card number 4111-1111-1111-1111 when user submits payment form' (specific: system, card number, trigger)", "- 'User clicks Process Payment button and system prompts for payment method selection' (specific: user, action, UI element, system response)", "", "Specificity Requirements:", "- WHO: Specific actor (User, Merchant, Customer, System, PaymentProcessor, API)", "- WHAT: Specific action and object (processes payment for order #12345 with amount $50.00)", "- WHEN: Specific trigger/context (when customer completes checkout, when user submits payment form)", "- WHY: Purpose in journey (to complete purchase transaction, to reverse payment error)", "- OUTCOME: Specific result (payment processed, transaction ID returned, notification sent)"]}, "dont": {"description": "Don't create generic stories without context", "content": ["Don't create generic operations without specificity", "Don't omit context about when/why actions happen", "Don't use vague descriptions without details", "", "Wrong Examples (generic without context - Payment Domain):", "- 'Process Payment' (which payment? for which order? when? why?)", "- 'Authorize Payment' (which payment? with which card? when? why? what happens next?)", "- 'Exposes Payment API' (which endpoints? to whom? when? why?)", "- 'Refund Payment' (which payment? for which reason? when? why?)", "", "Generic Indicators (REJECT or require more specificity):", "- Single verb + noun without context: 'Process Payment', 'Authorize Payment', 'Refund Payment'", "- No specific objects: 'Process Payment' (which payment? which order?)", "- No context: 'Authorize Payment' (when? why? what triggers this?)", "- No outcome: 'Authorize Payment' (what happens with the authorization result?)", "", "Instead, ask:", "- Which specific object? (payment ID, order number, transaction ID, card number)", "- When does this happen? (trigger, context, user action - when customer completes checkout, when merchant requests refund)", "- Why does this happen? (purpose, user need, journey step - to complete purchase, to reverse error)", "- What's the outcome? (result, system response, user experience - payment processed, transaction ID returned, notification sent)"]}}]}}, {"rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "rule_content": {"description": "Establish mandatory spine stories vs optional/enhanced behavior stories. When mapping stories, carefully distinguish between sequential spine (essential path) and optional paths, alternate routes, or additional functionality that is not strictly essential. Mandatory stories form the sequential spine (story AND story AND story). Optional stories are alternatives or enhancements (story OR story) that branch from the spine and can return to it. Sequential stories form the mandatory flow; optional stories are alternatives, enhancements, or non-essential sub-epics.", "scanner": "agile_bot.bots.base_bot.src.scanners.spine_optional_scanner.SpineOptionalScanner", "examples": [{"do": {"description": "Identify the essential spine first", "content": ["Start by identifying the minimal essential path that delivers core value", "The spine represents the mandatory sequence: Story1 AND Story2 AND Story3", "Spine stories get sequential_order numbers (1, 2, 3, etc.)", "Spine stories are required for the sub-epic to deliver its core purpose", "Ask: 'What is the minimum path to deliver value?'", "Establish the mandatory spine before identifying optional/enhanced behaviors", "Explicitly distinguish between spine (mandatory) and optional/enhanced behaviors"]}, "dont": {"description": "Don't mark everything as sequential", "content": ["Don't assign sequential_order to all stories when some are optional", "Don't treat alternate routes as part of the spine", "Don't include enhancements in the mandatory sequential flow", "Don't confuse 'nice to have' with 'must have'", "Don't mark all stories as mandatory when some are alternatives or enhancements", "Don't fail to establish the spine before adding optional/enhanced behaviors"]}}, {"do": {"description": "Mark optional paths clearly", "content": ["Optional stories branch from or enhance the spine but are not required", "Mark optional stories with 'optional: true' in the story structure", "Optional stories may have sequential_order if they're part of an alternative flow (e.g., 2.1, 3.1, etc.)", "Optional stories represent: alternate routes, enhancements, nice-to-have sub-epics", "Ask: 'Can the sub-epic deliver value without this story?'", "Optional/enhanced stories can return to the spine after completion", "Sort optional/enhanced stories by priority of delivery within the same sub-epic"]}, "dont": {"description": "Don't omit optional markers", "content": ["Don't leave optional stories unmarked - be explicit", "Don't assume all stories in a sub-epic are mandatory", "Don't mix optional and mandatory without clear distinction", "Don't fail to identify the spine before adding optional paths", "Don't omit the optional marker - be explicit about spine vs optional/enhanced behaviors", "Don't create sub-epics where every story is mandatory when alternatives or enhancements exist"]}}, {"do": {"description": "Distinguish types of optional paths with concrete examples", "content": ["Spine (all stories with and), then OR optional branch (all stories with and), then OR enhanced (all stories with and):", "", "Correct Example:", "Spine (all stories with and):", "  (S) User --> creates account", "  and (S) User --> logs in", "  and (S) User --> views dashboard", "OR optional branch (all stories with and):", "  (S) User --> signs in with social media (optional)", "  and (S) User --> signs in with email (optional)", "OR enhanced (all stories with and):", "  (S) User --> customizes dashboard (enhanced)", "  and (S) User --> shares dashboard (enhanced)"]}, "dont": {"description": "Wrong mapping examples", "content": ["Wrong: All stories marked mandatory when some are clearly alternatives or enhancements", "  and (S) User --> creates account (1)", "  and (S) User --> logs in with email (2)", "  and (S) User --> logs in with social media (3) - social media should be optional", "", "Wrong: No distinction between essential path and optional sub-epics", "  and (S) User --> views dashboard (1)", "  and (S) User --> customizes dashboard (2)", "  and (S) User --> shares dashboard (3) - customization and sharing should be optional", "", "Wrong: Missing optional markers on alternative flows or enhanced behaviors", "Wrong: Optional/enhanced stories not sorted by priority", "Wrong: No clear spine established before adding optional behaviors"]}}]}}, {"rule_file": "extract_story_map_checklist.json", "rule_content": {"description": "Quick checklist for extracting story maps from code. Follow this process step-by-step.", "steps": [{"step": 1, "title": "Find Outermost Layer and Entry Points", "checklist": ["Locate CLI commands (main(), argparse, command handlers)", "Locate UI entry points (routes, event handlers, button clicks)", "Locate MCP server tool definitions (tool names, parameters)", "Locate API contracts (REST endpoints, GraphQL, WSDL)", "Locate WebSocket handlers, message queues, event listeners", "Locate acceptance tests (end-to-end, integration, BDD/Gherkin)", "Document all entry points with their parameters and return values"]}, {"step": 2, "title": "Analyze Operations and Domain Concepts", "checklist": ["List all operations from entry points (what can be invoked?)", "Identify MAJOR domain concepts (high-level entities)", "Identify MINOR domain concepts (supporting entities)", "Identify relationships between concepts", "Document operation names, parameters, return values", "Document concept names, properties, relationships"]}, {"step": 3, "title": "Create Epics Based on Higher-Order Goals", "checklist": ["Group operations by higher-order goals (what is user/system trying to accomplish?)", "Create epics from goals, not from implementation structure", "Each epic represents a major capability or lifecycle stage", "Validate: Epic name describes a goal, not a technical operation"]}, {"step": 4, "title": "Create Sub-Epics Based on Distinct Behaviors", "checklist": ["For each epic, identify distinct behaviors (different ways to accomplish goal)", "Group behaviors into sub-epics (different types, modes, contexts)", "Each sub-epic represents a distinct path or scenario", "Validate: Sub-epic name describes a behavior, not a technical mechanism"]}, {"step": 5, "title": "Identify Distinct Behaviors from Tests and Code Flow", "checklist": ["Trace through acceptance tests: what happens step by step?", "Trace through CLI commands: what's the execution flow?", "Trace through MCP tool calls: what's the sequence?", "Identify distinct behaviors at each step", "Document typical execution order", "Document error handling and alternative paths"]}, {"step": 6, "title": "Lay Out Story Journey from End-to-End Flow", "checklist": ["Start with entry point (how does user/system initiate?)", "Follow code flow through operations (what happens step by step?)", "Include error handling (what happens when things go wrong?)", "End with completion (how does it finish?)", "For each story, include:", "  - WHEN: trigger, condition, user action", "  - WHY: purpose, user need, system requirement", "  - OUTCOME: result, state change, user experience", "  - ACTOR: who performs the action", "Validate: Stories show complete journey, not isolated operations"]}, {"step": 7, "title": "Validate Story Map Quality", "checklist": ["Stories show user/system journey (not just list operations)", "Stories have context (when/why/outcome)", "Stories are specific (not generic like 'Add Sub-Epic')", "Stories represent complete accomplishments (not data access)", "Implementation details are steps, not stories", "Order follows user journey, not technical sequential_order", "Epics/sub-epics based on goals, not implementation structure"]}], "common_mistakes": ["Starting with internal classes instead of entry points", "Creating epics from class structure instead of goals", "Creating stories from every method call", "Missing context (when/why) in stories", "Making implementation details into stories", "Ordering by technical sequential_order instead of user journey", "Generic stories without specificity"]}}, {"rule_file": "extract_story_map_from_code.json", "rule_content": {"description": "CRITICAL: When creating story maps from code, analyze the outermost layer showing end-to-end journey. Locate acceptance tests, human code engagement points (CLI/UI), MCP server definitions, WSDL, API contracts. Analyze operations and domain for major/minor concepts. Create epics/sub-epics based on higher-order goals. Look at distinct behaviors and typical execution order to lay out story journey.", "examples": [{"do": {"description": "Find outermost layer and entry points", "content": ["Start with the OUTERMOST LAYER showing end-to-end journey", "Locate all HUMAN CODE ENGAGEMENT points:", "  - CLI commands and entry points (main(), command handlers)", "  - UI entry points (web routes, event handlers, button clicks)", "  - MCP server tool definitions (tool names, parameters, descriptions)", "  - API contracts (REST endpoints, GraphQL queries, WSDL operations)", "  - WebSocket handlers, message queues, event listeners", "", "Locate ACCEPTANCE TESTS:", "  - End-to-end tests that show complete user journeys", "  - Integration tests that show system-to-system flows", "  - Test scenarios that describe 'when X, then Y' behaviors", "  - BDD/Gherkin tests with Given-When-Then structure", "", "Example Entry Points to Find:", "- CLI: 'python -m story_io.story_io_cli render-outline --story-graph file.json'", "- MCP: Tool 'render_outline' with parameters 'story_graph_path', 'output_path'", "- API: POST /api/story-graph/render with body {storyGraph, outputFormat}", "- UI: Button 'Render Outline' that triggers render operation", "- Test: 'test_render_outline_from_json' that shows complete flow"]}, "dont": {"description": "Don't start with internal implementation details", "content": ["Don't start with internal classes or helper functions", "Don't start with data structures or domain models", "Don't start with utility functions or low-level operations", "", "Wrong Starting Points:", "- Internal class: 'StoryIODiagram.load_from_json()' (implementation detail)", "- Helper function: 'parse_story_graph()' (internal mechanism)", "- Data structure: 'Epic' class definition (domain model, not entry point)", "", "These are important but come AFTER identifying the journey"]}}, {"do": {"description": "Analyze operations and domain for major/minor concepts", "content": ["Analyze OPERATIONS from entry points:", "  - What operations are exposed? (render, sync, search, edit, save)", "  - What are the operation names? (render-outline, sync-increments, search-stories)", "  - What parameters do they take? (story_graph_path, output_path, query)", "  - What do they return? (DrawIO file, JSON report, search results)", "", "Analyze DOMAIN CONCEPTS:", "  - MAJOR CONCEPTS: High-level domain entities (StoryGraph, Diagram, Epic, Sub-Epic, Story)", "  - MINOR CONCEPTS: Supporting entities (Position, Boundary, User, Increment)", "  - OPERATIONS: Actions on concepts (Load, Read, Edit, Render, Synchronize, Search, Save)", "  - RELATIONSHIPS: How concepts relate (Epic contains Sub-Epics, Sub-Epic contains Stories)", "", "Example Analysis (Story-IO Domain):", "- Operations: render-outline, render-increments, sync-outline, sync-increments, search, add-user, merge", "- Major Concepts: StoryGraph (main entity), Diagram (visual representation), Epic/Sub-Epic/Story (hierarchy)", "- Minor Concepts: Position (2D coordinate), Boundary (rectangular area), User (story actor), Increment (priority grouping)", "- Relationships: StoryGraph contains Epics, Epic contains Sub-Epics, Sub-Epic contains Stories", "", "Example Analysis (Payment Domain):", "- Operations: process-payment, refund-payment", "- Major Concepts: Payment (main entity), Transaction (financial transaction), Card (payment method), Refund (reversal)", "- Minor Concepts: Amount (monetary value), Currency (USD, EUR), Status (pending, approved, declined), PaymentMethod (card, bank transfer)", "- Relationships: Payment contains Transaction, Payment uses Card, Payment can have Refund, Transaction has Status"]}, "dont": {"description": "Don't confuse implementation details with domain concepts", "content": ["Don't treat implementation classes as domain concepts", "Don't treat utility functions as operations", "Don't treat data structures as domain entities", "", "Wrong Analysis:", "- Implementation class: 'StoryIORenderer' (implementation detail, not domain concept)", "- Utility function: 'calculate_position()' (implementation detail, not operation)", "- Data structure: 'dict' or 'list' (implementation detail, not domain concept)", "", "Focus on WHAT the system does (domain), not HOW it does it (implementation)"]}}, {"do": {"description": "Create epics/sub-epics based on higher-order goals", "content": ["Group operations into EPICS based on HIGHER-ORDER GOALS:", "  - What is the user/system trying to accomplish?", "  - What are the major capabilities?", "  - What are the lifecycle stages?", "", "Example Epic Creation from Operations (Story-IO Domain):", "- Operations: render-outline, render-increments, render-exploration", "- Higher-Order Goal: 'Render StoryGraph' (user wants to visualize story map)", "- Epic: 'Render StoryGraph'", "", "- Operations: sync-outline, sync-increments, generate-sync-report, merge", "- Higher-Order Goal: 'Synchronize StoryGraph' (user wants to sync between formats)", "- Epic: 'Synchronize StoryGraph'", "", "Example Epic Creation from Operations (Payment Domain):", "- Operations: process-payment, process_payment, POST /api/payments/process", "- Higher-Order Goal: 'Process Payment' (user wants to process a payment transaction)", "- Epic: 'Process Payment'", "", "- Operations: refund-payment, refund_payment, POST /api/payments/refund", "- Higher-Order Goal: 'Refund Payment' (user wants to reverse a payment)", "- Epic: 'Refund Payment'", "", "Group operations into SUB-EPICS based on DISTINCT BEHAVIORS:", "  - What are the different ways to accomplish the epic goal?", "  - What are the different types or modes?", "  - What are the different contexts or scenarios?", "", "Example Sub-Epic Creation (Story-IO Domain):", "- Epic: 'Render StoryGraph'", "- Distinct Behaviors: Render outline (basic), Render increments (with priorities), Render exploration (with acceptance criteria)", "- Sub-Epics: 'Render Outline', 'Render Increments', 'Render Exploration'", "", "- Epic: 'Synchronize StoryGraph'", "- Distinct Behaviors: Sync outline structure, Sync increments, Generate comparison report, Merge graphs", "- Sub-Epics: 'Synchronize Outline', 'Synchronize Increments', 'Generate Sync Report', 'Merge StoryGraphs'", "", "Example Sub-Epic Creation (Payment Domain):", "- Epic: 'Process Payment'", "- Distinct Behaviors: Validate payment (required), Authorize payment (required), Process with card (common), Process with bank transfer (alternative), Process with wallet (alternative), Confirm payment (required)", "- Sub-Epics: 'Validate Payment', 'Authorize Payment', 'Process Card Payment', 'Process Bank Transfer', 'Process Wallet Payment', 'Confirm Payment'", "", "- Epic: 'Refund Payment'", "- Distinct Behaviors: Validate refund eligibility, Process refund, Confirm refund", "- Sub-Epics: 'Validate Refund', 'Process Refund', 'Confirm Refund'"]}, "dont": {"description": "Don't create epics/sub-epics from implementation structure", "content": ["Don't create epics based on class structure (StoryIODiagram, DrawIORenderer, PaymentProcessor, etc.)", "Don't create sub-epics based on method names (load_json, parse_xml, charge_card, etc.)", "Don't create epics/sub-epics from technical layers (data layer, service layer, etc.)", "", "Wrong Epic Creation:", "- Based on class: 'StoryIODiagram Operations' (implementation structure)", "- Based on method: 'JSON Loading' (technical mechanism)", "- Based on layer: 'Data Access Layer' (technical architecture)", "", "Focus on USER/SYSTEM GOALS, not technical structure"]}}, {"do": {"description": "Look at distinct behaviors and typical execution order", "content": ["Analyze DISTINCT BEHAVIORS from acceptance tests and code flow:", "  - What are the different scenarios?", "  - What are the different paths through the code?", "  - What are the different user actions?", "", "Example Behavior Analysis (Story-IO Domain):", "- Test: 'test_render_outline_from_json' shows: Load JSON \u2192 Parse \u2192 Generate XML \u2192 Calculate Positions \u2192 Apply Styles \u2192 Save", "- Distinct Behaviors: Load, Parse, Generate, Calculate, Apply, Save", "- These become STORIES in the journey", "", "Example Behavior Analysis (Payment Domain):", "- Test: 'test_process_payment_success' shows: Invoke \u2192 Validate \u2192 Authorize \u2192 Process \u2192 Confirm", "- Distinct Behaviors: Invoke (entry point), Validate (check input), Authorize (check funds/fraud), Process (execute transaction), Confirm (complete and notify)", "- These become STORIES in the journey", "", "Determine TYPICAL EXECUTION ORDER from code flow:", "  - Trace through acceptance tests: what happens first, second, third?", "  - Trace through CLI commands: what's the flow?", "  - Trace through MCP tool calls: what's the sequence?", "  - Look at error handling: what are alternative paths?", "", "Example Execution Order Analysis (Story-IO Domain):", "- CLI: 'render-outline --story-graph file.json --output file.drawio'", "- Code Flow: Parse args \u2192 Load story graph \u2192 Create diagram \u2192 Render outline \u2192 Save file", "- Typical Order: 1. Parse arguments, 2. Load story graph, 3. Render outline, 4. Save file", "- Stories: 'Parses Command Arguments' \u2192 'Loads StoryGraph from JSON' \u2192 'Renders Outline to DrawIO' \u2192 'Saves DrawIO File'", "", "Example Execution Order Analysis (Payment Domain):", "- CLI: 'process-payment --payment-id 123 --amount 50.00'", "- Code Flow: Parse args \u2192 Validate payment \u2192 Authorize payment \u2192 Process payment \u2192 Confirm payment", "- Typical Order: 1. User invokes process payment, 2. System validates payment details, 3. System authorizes payment, 4. System processes payment, 5. System confirms payment", "- Stories: 'User invokes process payment command' \u2192 'System validates payment details' \u2192 'System authorizes payment with payment processor' \u2192 'System processes payment transaction' \u2192 'System confirms payment and sends notification'", "", "Create STORY JOURNEY from execution order:", "  - Start with entry point (CLI invocation, UI click, MCP tool call)", "  - Follow the code flow through operations", "  - Include error handling and alternative paths", "  - End with completion (save, return result, display)", "", "Example Story Journey (Story-IO Domain):", "- Entry: 'User invokes render-outline command from CLI'", "- Flow: 'CLI parses arguments' \u2192 'CLI loads story graph' \u2192 'CLI invokes render' \u2192 'System renders outline' \u2192 'System saves file'", "- Error: 'If file not found, CLI displays error message'", "- Completion: 'CLI returns success message'", "", "Example Story Journey (Payment Domain):", "- Entry: 'User invokes process payment command' (WHEN: user wants to charge customer, WHY: to complete purchase, OUTCOME: CLI/MCP/API receives request)", "- Flow: 'System validates payment details' (WHEN: after request received, WHY: to ensure payment can be processed, OUTCOME: details validated) \u2192 'System authorizes payment' (WHEN: after validation, WHY: to check funds/fraud, OUTCOME: payment authorized) \u2192 'System processes payment' (WHEN: after authorization, WHY: to execute transaction, OUTCOME: payment processed) \u2192 'System confirms payment' (WHEN: after processing, WHY: to notify user, OUTCOME: payment confirmed)", "- Error: 'If validation fails, System displays validation error' (WHEN: validation fails, WHY: to inform user, OUTCOME: error shown, process stops)", "- Completion: 'System returns transaction ID' (WHEN: after confirmation, WHY: to provide reference, OUTCOME: transaction ID returned)"]}, "dont": {"description": "Don't create stories from code structure or method calls", "content": ["Don't create stories from every method call in code", "Don't create stories from internal function calls", "Don't create stories from data structure operations", "", "Wrong Story Creation:", "- From method: 'StoryIODiagram.__init__()' (internal initialization)", "- From function: 'parse_json()' (internal parsing)", "- From operation: 'dict.get()' (data access, not behavior)", "- From method: 'PaymentProcessor.charge_card()' (internal implementation)", "", "Focus on USER/SYSTEM VISIBLE BEHAVIORS, not internal implementation"]}}, {"do": {"description": "Lay out story journey from end-to-end flow", "content": ["Create STORY JOURNEY that shows complete end-to-end flow:", "  - Start: How does user/system initiate? (CLI command, UI click, API call)", "  - Middle: What happens step by step? (parse, load, process, transform)", "  - End: How does it complete? (save, return, display, notify)", "", "Include CONTEXT for each story:", "  - WHEN does it happen? (trigger, condition, user action)", "  - WHY does it happen? (purpose, user need, system requirement)", "  - WHAT is the outcome? (result, state change, user experience)", "  - ACTOR: Who performs the action? (User, System, CLI, MCP, API, etc.)", "", "Example Complete Story Journey (Story-IO Domain):", "(E) Render StoryGraph", "  and (E) Render Outline", "    and (S) User --> invokes render-outline command from CLI", "    and (S) CLI --> parses command arguments", "    and (S) CLI --> loads story graph from JSON file", "    and (S) System --> renders outline to DrawIO format", "    and (S) System --> saves DrawIO file", "", "Example Complete Story Journey (Payment Domain):", "(E) Process Payment", "  and (E) Process Card Payment", "    and (S) User --> invokes process payment command", "    and (S) System --> validates payment details", "    and (S) System --> authorizes payment with payment processor", "    and (S) System --> processes payment transaction", "    and (S) System --> confirms payment and sends notification", "", "Include ERROR HANDLING and ALTERNATIVE PATHS:", "  - What happens when file not found?", "  - What happens when parsing fails?", "  - What happens when validation fails?", "  - What happens when authorization fails?", "", "Example Error Handling (Story-IO Domain):", "  and (S) CLI --> displays error message if story graph file not found", "", "Example Error Handling (Payment Domain):", "  and (S) System --> displays validation error if validation fails", "  and (S) System --> displays authorization declined message if authorization fails"]}, "dont": {"description": "Don't create isolated stories without journey context", "content": ["Don't create stories that are just operations without context", "Don't create stories that don't connect to a journey", "Don't create stories without when/why/outcome/actor", "", "Wrong Story Creation:", "- (S) System --> loads StoryGraph (no context: when? why? what happens next?)", "- (S) System --> parses JSON (no context: when? why? what's the outcome?)", "- (S) System --> saves file (no context: when? why? what triggers this?)", "- (S) System --> processes payment (no context: when? why? what's the outcome?)", "", "Every story must be part of a JOURNEY with CONTEXT (when/why/outcome/actor)"]}}]}}, {"rule_file": "focus_real_actions_on_domain_concepts.json", "rule_content": {"description": "When shaping stories, stories must describe REAL ACTIONS that users or other actors (even system or technical actors) can perform, not capabilities or structural descriptions. Organize by lifecycle flow (Load, Read, Edit, Render, Synchronize, Search, Save). CRITICAL: Actor names must NOT appear in Epic/Sub-Epic/Story names - names are Verb-Noun only.", "context": "when shaping stories", "examples": [{"do": {"description": "Use real actions - actor separate from name", "content": ["Stories describe actions: Load, Read, Add, Remove, Render, Search, Save", "Organize by lifecycle: Load \u2192 Read \u2192 Edit \u2192 Render \u2192 Synchronize \u2192 Search \u2192 Save", "Use Verb-Noun format for names: '[Verb] [Noun]' - NO ACTOR in name", "Focus on what users/code CAN DO, not what things ARE", "", "NAMING RULE - Actor NOT in Name:", "- Epic name: 'Places Order' (NOT 'Customer Places Order')", "- Sub-Epic name: 'Validates Payment' (NOT 'PaymentValidator Validates Payment')", "- Story name: 'Processes Order Items' (NOT 'OrderProcessor Processes Order Items')", "- Actor is documented separately, not in the name itself", "", "ACTORS for User/System Stories (normal stories):", "- Use human/system actors: User, Developer, System, Customer, Admin", "- Actor is implicit or documented separately from name", "- Examples: Epic 'Places Order' has actor: Customer", "- Examples: Sub-Epic 'Validates Payment' has actor: System", "", "ACTORS for Technical Stories (deep internal class-level interactions):", "- Domain concepts CAN be actors: OrderProcessor, PaymentValidator, InventoryManager, Cart, Product", "- Actor is documented separately, NOT in name", "- Examples: Epic 'Loads Order Data' has actor: OrderProcessor (technical)", "- Examples: Sub-Epic 'Updates Inventory' has actor: InventoryManager (technical)", "- Examples: Story 'Calculates Total' has actor: Cart (technical)", "- This is acceptable when documenting class-to-class interactions internally"]}, "dont": {"description": "Avoid capabilities, structural descriptions, passive states, and actors in names", "content": ["Don't use capability nouns or structural descriptions", "Don't describe what things ARE or CONTAIN", "Don't use passive states or properties as stories", "CRITICAL: Don't put actor in Epic/Sub-Epic/Story names", "", "Wrong Examples (capabilities/structure):", "- 'PaymentValidator Contains Validation Logic' (capability, not action)", "- 'OrderProcessor Tracks Order Count' (passive state, not action)", "- 'Cart Hierarchy Foundation' (structural description)", "- 'Domain Components Implementation' (capability)", "- 'Product Represents Item' (structural description)", "", "Wrong Examples (actor in name):", "- Epic: 'Customer Places Order' (actor in name - WRONG)", "- Sub-Epic: 'OrderProcessor Validates Payment' (actor in name - WRONG)", "- Sub-Epic: 'Cart Adds Product' (actor in name - WRONG)", "- Story: 'InventoryManager Updates Stock' (actor in name - WRONG)", "", "Correct Examples (actor NOT in name):", "- Epic: 'Places Order' (actor: Customer, documented separately)", "- Sub-Epic: 'Validates Payment' (actor: PaymentValidator, documented separately)", "- Sub-Epic: 'Adds Product' (actor: Cart, documented separately)", "- Story: 'Updates Stock' (actor: InventoryManager, documented separately)", "", "These are not actions users/code can perform - they describe structure or capabilities", "Instead ask: What can users/code DO with this domain concept?", "- Instead of 'Contains Logic' \u2192 'Generates XML' or 'Renders Diagram'", "- Instead of 'Tracks Count' \u2192 'Reads Count' or 'Updates Count'", "- Instead of 'Represents X' \u2192 'Creates X' or 'Loads X'"]}}]}}, {"rule_file": "focus_user_and_system_activities.json", "rule_content": {"description": "Focus story maps on both user AND system activities, not tasks. Stories should outline user and system behavior patterns.", "examples": [{"do": {"description": "Include both user and system activities in story descriptions", "content": ["User submits order, System validates payment", "Customer views products, System displays inventory", "Use user activity patterns: User submits, Customer places", "Use system activity patterns: System validates, System sends", "Focus stories on user interactions and how the system behaves as observed by users", "Example: Customer places order with payment details", "", "ACTOR SELECTION (documented separately, NOT in name):", "- For user/system stories: Actors are User, System, Developer, Customer, Admin (human/system actors)", "- For technical stories (deep internal class-level): Domain concepts can be actors (StoryIODiagram, DrawIORenderer, DrawIOSynchronizer, User, Increment, Component)", "- Technical stories document class-to-class interactions where domain concepts act as actors", "", "CRITICAL NAMING RULE:", "- Actor must NOT appear in Epic/Sub-Epic/Story name", "- Name format: '[Verb] [Noun]' only", "- Examples: 'Loads StoryGraph' (actor: StoryIODiagram, documented separately)", "- Examples: 'Adds Sub-Epic' (actor: Epic, documented separately)", "- Examples: 'Changes Parent' (actor: Component, documented separately)"]}, "dont": {"description": "Avoid task-oriented language that describes implementation", "content": ["Avoid task-oriented language that describes implementation", "Don't use task language for building or setting up", "Don't focus only on user activities (ignore system activities)", "Don't focus only on tasks (instead of activities)", "Don't use development task language: implement, create, refactor, optimize, fix, build, set up", "Don't use technical implementation details: query database, call API, update table", "", "Wrong Examples:", "- Only user activities: User submits order, User views products (missing system activities)", "- Only tasks: Implement order submission, Create payment validation (not activities)", "- Implement order submission, Create payment validation", "- Build product listing page, Set up inventory display"]}}]}}, {"rule_file": "identify_system_stories.json", "rule_content": {"description": "System stories capture system-to-system interactions that are not user-facing. They represent internal system behavior that crosses system boundaries (e.g., microservice to microservice, component to component). System stories should be identified and marked with story_type: 'system'.", "do": {"examples": [{"description": "Identify system-to-system interactions", "content": ["Storage Microservice validates payload from Local Mgmt System", "API Gateway routes request to Authentication Service", "Message Queue delivers event to Notification Service"]}, {"description": "Mark system stories with story_type: 'system'", "content": ["Story: 'Validate Payload' with story_type: 'system'", "Story: 'Route Request' with story_type: 'system'", "Story: 'Deliver Event' with story_type: 'system'"]}, {"description": "Use system stories for internal system behavior", "content": ["System stories represent behavior that happens between systems/components", "System stories are not directly visible to end users", "System stories enable user-facing stories to function"]}]}, "dont": {"examples": [{"description": "Don't mark user-facing stories as system stories", "content": ["User clicks button \u2192 NOT a system story", "User views dashboard \u2192 NOT a system story", "User submits form \u2192 NOT a system story"]}, {"description": "Don't confuse system stories with technical stories", "content": ["System stories = system-to-system behavior (dark blue in DrawIO)", "Technical stories = implementation tasks (black/white in DrawIO, normally avoided)"]}]}}}, {"rule_file": "maximize_integration_of_related_concepts.json", "rule_content": {"description": "When shaping stories, maximize integration of related concepts", "context": "when shaping stories", "examples": [{"do": {"description": "Group concepts that the user sees as one capability", "content": ["Group concepts that the user sees as one capability", "Nest implementation details under the sub-epic they serve", "Keep related data and operations together", "Eliminate artificial boundaries based on code organization"]}, "dont": {"description": "Don't separate related concepts", "content": ["Don't separate related concepts into different major sections", "Wrong: Split based on code layers (data, business, presentation)", "Don't duplicate related concepts across multiple sections", "Wrong: Create gaps that break the user's mental model"]}}]}}, {"rule_file": "place_domain_concepts_by_relevance.json", "rule_content": {"description": "When shaping stories, place domain concepts locally or globally based on relevance to one or multiple sub_epics", "context": "when shaping stories", "examples": [{"do": {"description": "Place domain concepts at the most specific level, favoring local placement", "content": ["Favor local placement: Place domain_concepts at the sub_epic level when they are relevant to only that sub_epic", "Think about the core: Consider core domain concepts that span multiple sub_epics - these should be placed at the parent epic/sub_epic level", "Elevate when shared: If a domain concept is used by multiple child sub_epics, elevate it to the parent level", "Start local, elevate if needed: Begin with local placement, but elevate if the concept is referenced by multiple sub_epics", "", "Correct Examples (Local Placement):", "- Sub-Epic 'Validates Payment' has domain_concept: 'Payment' (only used in this sub-epic)", "- Sub-Epic 'Processes Order' has domain_concept: 'Order' (only used in this sub-epic)", "- Sub-Epic 'Updates Inventory' has domain_concept: 'InventoryItem' (only used in this sub-epic)", "", "Correct Examples (Global Placement):", "- Epic 'Process Payment' has domain_concept: 'Payment' (used by multiple sub-epics: Validate Payment, Authorize Payment, Process Transaction)", "- Epic 'Manage Orders' has domain_concept: 'Order' (used by multiple sub-epics: Create Order, Update Order, Cancel Order)", "- Sub-Epic 'Order Management' has domain_concept: 'Customer' (used by multiple child sub-epics: Create Customer Order, Update Customer Order)"]}, "dont": {"description": "Don't place domain concepts at wrong levels or duplicate them unnecessarily", "content": ["Don't place domain concepts at epic level when they're only used in one sub-epic", "Wrong: Epic 'Payment System' has domain_concept: 'PaymentValidator' (only used in 'Validates Payment' sub-epic - should be local)", "Don't duplicate domain concepts at multiple levels", "Wrong: Both Epic and Sub-Epic have 'Payment' concept when it's only used in one sub-epic", "Don't place core domain concepts too locally if they're used across multiple epics", "Wrong: Core concept 'User' placed only in one sub-epic when it's used across multiple epics", "Don't ignore shared usage - if multiple sub-epics reference a concept, elevate it", "Wrong: 'Order' concept placed in each sub-epic separately when all sub-epics use it (should be at parent level)"]}}]}}, {"rule_file": "prevent_generic_capabilities.json", "rule_content": {"description": "CRITICAL: Stories must describe specific actions with actors, not generic capabilities. Reject stories that describe what system IS (capabilities) vs what system DOES (behaviors).", "scanner": "agile_bot.bots.base_bot.src.scanners.generic_capability_scanner.GenericCapabilityScanner", "examples": [{"do": {"description": "Use specific actions with actors and outcomes", "content": ["Stories must have specific actors performing specific actions", "Stories must describe what system DOES (behaviors), not what system IS (capabilities)", "Stories must have specific outcomes, not generic descriptions", "", "Correct Examples (specific behaviors with actors):", "- 'User invokes MCP tool and system routes to StoryIO handler' (specific: user, MCP tool, routing action)", "- 'Developer adds sub-epic Render Exploration to epic Render StoryGraph' (specific: developer, sub-epic name, epic name)", "- 'System loads story graph from JSON file when user requests render' (specific: system, load action, trigger)", "- 'CLI determines workspace root from current directory' (specific: CLI, determine action, source)", "", "Actor Requirements:", "- Every story must have an actor (User, System, Developer, CLI, StoryIODiagram, etc.)", "- Actor must be documented separately (not in name)", "- Actor must be specific (not generic 'Component' or 'System')", "- Actor must perform the action (not just be present)"]}, "dont": {"description": "Don't use generic capabilities or passive descriptions", "content": ["Don't describe what system IS (capabilities)", "Don't use generic action descriptions without actors", "Don't use passive states or properties as stories", "", "Wrong Examples (generic capabilities):", "- 'Exposes Tools' (capability - what tools? when? to whom? what happens?)", "- 'Provides Server Interface' (capability - what interface? when? why?)", "- 'Contains Validation Logic' (capability - not an action)", "- 'Tracks Order Count' (passive state - not an action)", "", "Capability Indicators (REJECT):", "- Describes what system IS: 'Exposes', 'Provides', 'Contains', 'Represents'", "- No specific actor or action", "- No specific outcome or trigger", "- Generic description without context", "", "Instead, ask:", "- Who performs this action? (actor)", "- When does this happen? (trigger/context)", "- What specific outcome occurs? (result)", "- Why does this happen? (purpose in journey)"]}}]}}, {"rule_file": "prevent_implementation_details_as_stories.json", "rule_content": {"description": "CRITICAL: Implementation operations (serialize, convert, calculate, generate XML, apply formatting) must be steps within stories, not stories themselves. Stories must focus on user/system outcomes, not technical mechanisms.", "examples": [{"do": {"description": "Keep implementation details as steps within stories", "content": ["Implementation operations must be steps within stories", "Stories must focus on user/system outcomes, not technical mechanisms", "Stories must describe what user/system experiences, not how it's implemented", "", "Correct Examples (outcomes, not mechanisms):", "- Story: 'User saves story graph and system writes JSON file' \u2192 Steps: 'System converts diagram to story graph format', 'System serializes components to JSON', 'System writes file'", "- Story: 'User requests render and system generates DrawIO diagram' \u2192 Steps: 'System generates DrawIO XML', 'System calculates component positions', 'System applies styles', 'System saves file'", "- Story: 'User edits epic and system updates diagram' \u2192 Steps: 'System updates epic data', 'System recalculates layout', 'System refreshes diagram'", "", "Story vs Step Distinction:", "- Story = User/system outcome (what they experience)", "- Step = Implementation detail (how it's done)", "- Story = Independently valuable (can be tested/delivered)", "- Step = Part of story (not independently valuable)"]}, "dont": {"description": "Don't make implementation operations into stories", "content": ["Don't create stories for implementation operations", "Don't expose technical mechanisms as user stories", "Don't break implementation steps into separate stories", "", "Wrong Examples (implementation details as stories):", "- 'Convert Diagram to StoryGraph Format' (implementation - should be step in 'Save StoryGraph' story)", "- 'Serialize Components to JSON' (implementation - should be step in 'Save StoryGraph' story)", "- 'Generate DrawIO XML from StoryGraph' (implementation - should be step in 'Render Outline' story)", "- 'Calculate Component Positions' (implementation - should be step in 'Render Outline' story)", "- 'Apply Component Styles' (implementation - should be step in 'Render Outline' story)", "- 'Save DrawIO XML to File' (implementation - should be step in 'Render Outline' story)", "", "Implementation Operation Indicators (REJECT as stories):", "- Serialize, deserialize, convert, transform, format", "- Calculate, compute, generate, create (technical artifacts)", "- Apply, set, configure (technical settings)", "- Save, write, store (without user context)", "", "These are implementation mechanisms, not user/system behaviors", "They should be steps within stories that describe outcomes", "", "Instead, ask:", "- What does the user/system experience? (story)", "- How is it implemented? (step within story)", "- What's the outcome? (story)", "- What's the mechanism? (step)"]}}], "scanner": "agile_bot.bots.base_bot.src.scanners.implementation_details_scanner.ImplementationDetailsScanner"}}, {"rule_file": "refine_scope_to_functional_accomplishment.json", "rule_content": {"description": "Refine Scope to Functional Accomplishment", "examples": [{"do": {"description": "Focus on functional outcomes, not mechanisms", "content": ["Focus on functional outcomes, not mechanisms", "Frame domains by what they accomplish for users", "Ask about user enablement: What does this enable the user to do or understand?", "State the transformation or capability provided", "Be specific about the functional benefit"]}, "dont": {"description": "Don't frame domains by their technical implementation", "content": ["Don't frame domains by their technical implementation", "Wrong: Focus on 'how' before 'what'", "Don't use generic system capabilities as domain names", "Wrong: Describe mechanisms instead of outcomes"]}}]}}, {"rule_file": "size_stories_3_to_12_days.json", "rule_content": {"description": "Size stories to fall within 3-12 day effort range for effective planning and frequent delivery.", "scanner": "agile_bot.bots.base_bot.src.scanners.story_sizing_scanner.StorySizingScanner", "examples": [{"do": {"description": "Create stories that represent complete flows within the effort range", "content": ["Create stories that represent complete flows within the effort range", "Example: Customer places order (complete flow, 3-5 days)", "Break/group stories so that most fall into a 3-12 day effort range", "Enable frequent feedback by decomposing the work into smaller items"]}, "dont": {"description": "Avoid stories that are too large or too small", "content": ["Avoid stories that are too large and span multiple weeks", "Don't arbitrarily decompose stories to a functional level, regardless of size", "", "Wrong Examples:", "- Order management system (too large, 20+ days)", "- Create stories that are too small without considering value"]}}]}}, {"rule_file": "story_map_code_approach.json", "rule_content": {"description": "Quick checklist for extracting story maps from code. Follow this process step-by-step.", "steps": [{"step": 1, "title": "Find Outermost Layer and Entry Points", "checklist": ["Locate CLI commands (main(), argparse, command handlers)", "Locate UI entry points (routes, event handlers, button clicks)", "Locate MCP server tool definitions (tool names, parameters)", "Locate API contracts (REST endpoints, GraphQL, WSDL)", "Locate WebSocket handlers, message queues, event listeners", "Locate acceptance tests (end-to-end, integration, BDD/Gherkin)", "Document all entry points with their parameters and return values"]}, {"step": 2, "title": "Analyze Operations and Domain Concepts", "checklist": ["List all operations from entry points (what can be invoked?)", "Identify MAJOR domain concepts (high-level entities)", "Identify MINOR domain concepts (supporting entities)", "Identify relationships between concepts", "Document operation names, parameters, return values", "Document concept names, properties, relationships"]}, {"step": 3, "title": "Create Epics Based on Higher-Order Goals", "checklist": ["Group operations by higher-order goals (what is user/system trying to accomplish?)", "Create epics from goals, not from implementation structure", "Each epic represents a major capability or lifecycle stage", "Validate: Epic name describes a goal, not a technical operation"]}, {"step": 4, "title": "Create Sub-Epics Based on Distinct Behaviors", "checklist": ["For each epic, identify distinct behaviors (different ways to accomplish goal)", "Group behaviors into sub-epics (different types, modes, contexts)", "Each sub-epic represents a distinct path or scenario", "Validate: Sub-epic name describes a behavior, not a technical mechanism"]}, {"step": 5, "title": "Identify Distinct Behaviors from Tests and Code Flow", "checklist": ["Trace through acceptance tests: what happens step by step?", "Trace through CLI commands: what's the execution flow?", "Trace through MCP tool calls: what's the sequence?", "Identify distinct behaviors at each step", "Document typical execution order", "Document error handling and alternative paths"]}, {"step": 6, "title": "Lay Out Story Journey from End-to-End Flow", "checklist": ["Start with entry point (how does user/system initiate?)", "Follow code flow through operations (what happens step by step?)", "Include error handling (what happens when things go wrong?)", "End with completion (how does it finish?)", "For each story, include:", "  - WHEN: trigger, condition, user action", "  - WHY: purpose, user need, system requirement", "  - OUTCOME: result, state change, user experience", "  - ACTOR: who performs the action", "Validate: Stories show complete journey, not isolated operations"]}, {"step": 7, "title": "Validate Story Map Quality", "checklist": ["Stories show user/system journey (not just list operations)", "Stories have context (when/why/outcome)", "Stories are specific (not generic like 'Add Sub-Epic')", "Stories represent complete accomplishments (not data access)", "Implementation details are steps, not stories", "Order follows user journey, not technical sequential_order", "Epics/sub-epics based on goals, not implementation structure"]}], "common_mistakes": ["Starting with internal classes instead of entry points", "Creating epics from class structure instead of goals", "Creating stories from every method call", "Missing context (when/why) in stories", "Making implementation details into stories", "Ordering by technical sequential_order instead of user journey", "Generic stories without specificity"]}}, {"rule_file": "use_active_behavioral_language.json", "rule_content": {"description": "When shaping stories, use active behavioral language with action verbs. Describe behaviors, not tasks or capabilities.", "context": "when shaping stories", "scanner": "agile_bot.bots.base_bot.src.scanners.active_language_scanner.ActiveLanguageScanner", "examples": [{"do": {"description": "Use action verbs to describe what happens", "content": ["Use action verbs to describe what happens", "Example: User submits order, System validates payment", "Favor active behavioral language over functional/capability breakup", "Use story maps to outline user and system behavior (NOT tasks)", "Use action verbs: submits, views, validates, sends, displays", "Describe behaviors: [Actor] [action] [object] - but actor NOT in name", "Use active behavior language: Place order (active behavior), Validate payment (active behavior)", "", "CRITICAL NAMING RULE - Actor NOT in Name:", "- Epic/Sub-Epic/Story names must be Verb-Noun format: '[Verb] [Noun]'", "- Actor is documented separately, NOT included in the name", "- Verb can be in various forms: imperative ('Add'), infinitive ('To Add'), third person ('Adds') - all are acceptable", "- Noun can be singular or plural based on context - DO NOT pluralize unnecessarily", "- Prepositional phrases and context are part of the noun phrase and should be preserved (e.g., 'Add Minion To Mob' is correct)", "- Examples: Epic 'Places Order' (actor: Customer, documented separately)", "- Examples: Sub-Epic 'Validates Payment' (actor: PaymentValidator, documented separately)", "- Examples: Story 'Updates Stock' (actor: InventoryManager, documented separately)", "- Examples: Story 'Add Minion To Mob' (verb-noun with context preserved - CORRECT)", "- Examples: Story 'Group Minions' (verb-noun, plural noun is correct for context - CORRECT)", "", "ACTOR SELECTION (documented separately, not in name):", "- For user/system stories: Use human/system actors (User, System, Developer, Customer)", "- For technical stories (deep internal): Domain concepts can be actors (OrderProcessor, PaymentValidator, InventoryManager, Cart, Product)", "- Actor is implicit or explicitly documented, but NOT in the name string"]}, "dont": {"description": "Avoid capability nouns and task language", "content": ["Avoid capability nouns that describe functions rather than behaviors", "Don't use functional or capability-based language instead of behavioral language", "Don't use capability nouns: Management, Processing, Administration", "Don't use task verbs: implement, create, build, set up", "Don't use task language", "", "Wrong Examples:", "- Order Management, Payment Processing (capability nouns)", "- Focus on tasks instead of behaviors", "- Order Management (capability), Implement order placement (task)", "", "Wrong Examples (actor in name):", "- Epic: 'Customer Places Order' (actor in name - WRONG)", "- Sub-Epic: 'OrderProcessor Validates Payment' (actor in name - WRONG)", "- Sub-Epic: 'Cart Adds Product' (actor in name - WRONG)", "- Story: 'InventoryManager Updates Stock' (actor in name - WRONG)", "", "Correct: Name is Verb-Noun only, actor documented separately"]}}]}}, {"rule_file": "use_outcome_verbs_not_communication_verbs.json", "rule_content": {"description": "Use Outcome Verbs, Not Communication Verbs", "scanner": "agile_bot.bots.base_bot.src.scanners.communication_verb_scanner.CommunicationVerbScanner", "examples": [{"do": {"description": "Use verbs that describe artifacts/outcomes", "content": ["Use verbs that describe artifacts/outcomes", "Examples: Animation, Feedback, Indicators, Configuration", "Name concepts by what they ARE or CREATE", "Examples: Power Activation Animation, Combat Outcome Feedback", "Focus on tangible results", "Examples: Hit Indicators, Save Result Feedback"]}, "dont": {"description": "Don't use generic communication verbs", "content": ["Don't use generic communication verbs", "Examples: showing, displaying, visualizing, presenting", "Don't use vague enablement verbs", "Examples: providing, enabling, allowing", "Don't name concepts by their mechanism", "Wrong Examples: Visualizing Power Activation, Showing Combat Results"]}}]}}], "token_estimate": 52315}}}, "19": {"action_state": "story_bot.1_shape.decide_planning_criteria", "status": "started", "timestamp": "2025-12-11T13:37:15.021496"}, "20": {"action_state": "story_bot.1_shape.decide_planning_criteria", "status": "completed", "timestamp": "2025-12-11T13:37:15.043124", "outputs": {"instructions": {"assumptions": ["Focus on user flow over internal systems", "Cover the end-to-end scenario", "Prioritize customer-facing features", "Assume stories should be independently testable", "Assume each story delivers user value", "Assume technical infrastructure stories are implicit", "Drill down where architectural uncertainty is high \u2013 unknown integration patterns, new technology, or unclear system boundaries require deeper exploration", "Drill down where business complexity is significant \u2013 complex business rules, regulatory requirements, or domain logic that needs clarification", "Drill down where uniqueness creates risk \u2013 novel approaches, first-of-kind features, or untested patterns benefit from detailed shaping", "Drill down where integration complexity exists \u2013 multiple systems, data dependencies, or coordination challenges need detailed mapping", "Drill down where user behavior is highly variable \u2013 diverse user needs, multiple personas, or inconsistent workflows require deeper understanding", "Skip deep drill-down where patterns are well-established \u2013 standard CRUD operations, familiar workflows, or proven integration patterns can stay high-level", "Focus on core domain over supporting domains", "Identify overall domain concepts and relationships before detailed modeling", "Use ubiquitous language from domain sources", "Model domain concepts, not technical implementation", "Separate domain logic from infrastructure concerns, where they are mentioned"], "decision_criteria": {"bounded_context_identification": {"description": "Bounded context identification strategy", "question": "How are we identifying and defining bounded contexts?", "outcome": "Determines how domain boundaries are established", "options": ["By business capability - group by what the business does", "By organizational structure - align with teams or departments", "By data ownership - group by who owns the data", "By integration patterns - group by how systems interact", "By domain complexity - separate complex from simple domains"]}, "depth_of_shaping": {"description": "Depth of shaping", "question": "How deep should we drill down in each shaping phase for the drill-down areas?", "outcome": "Determines the level of detail for each phase in drill-down areas", "options": ["Estimates -> story_count only", "Decompose -> Discover all stories listed", "Workflow -> Figure out logical process, alternate/or conditions", "Extensive -> Specify all scenarios", "Testable -> Specify minimal examples", "Complete -> Specify all examples"], "note": "Select one or more options. For drill-down areas, specify depth for: discovery (all stories listed vs story_count), scenarios (all scenarios vs happy path only), spec examples (all examples vs minimal examples)."}, "drill_down_approach": {"description": "drill down approach", "question": "What areas of the story map do you want to explore more deeply as a part of shaping?", "outcome": "Determines which epics/stories get detailed breakdown", "options": ["Dig deep on business complexity", "Dig deep on system interactions", "Dig deep on architectural pieces", "Dig deep on user workflows", "High and wide across all epics", "Focus on highest value areas", "Dig deep on behavioral complexity", "Dig deep on data and reporting needs", "Dig deep on change management or training impact", "Dig deep on system-of-record versus system-of-engagement boundaries"]}, "drill_down_limits": {"description": "Drill-down limits", "question": "What are the approximate limits for drill-down coverage (to prevent over-detailing)?", "outcome": "Sets boundaries on how many stories/features to drill down on", "options": ["Approximate story limit: 3-5 stories", "Approximate story limit: 5-10 stories", "Approximate story limit: 10-15 stories", "Approximate story limit: 15-20 stories", "Approximate story limit: No limit", "Approximate feature limit: 2-3 features", "Approximate feature limit: 3-5 features", "Approximate feature limit: 5-7 features", "Approximate feature limit: 7-10 features", "Approximate feature limit: No limit"], "note": "Select approximate limits to prevent over-detailing. Can select both story and feature limits, or specify 'No limit' for either."}, "flow_scope_and_granularity": {"description": "Flow scope and granularity", "question": "How wide are we going with the flow and what level of scope are we documenting?", "outcome": "Determines the breadth user-system interactions we're mapping", "options": ["End-to-end user-system behavior \u2013 One user interaction followed by one system response", "Journey level \u2013 Complete user journey across multiple touchpoints, systems, and interactions. Captures full experience flow.", "Intra-system level \u2013 Focus on interactions within a single system, Useful for Solutions with significant backend or service flows.", "Business process plus user-system behavior \u2013 Combine business process steps with detailed user-system interaction points.", "Integration boundary level \u2013 Focus on system-to-system integration points and data flow across boundaries.", "Domain boundary level \u2013 Map flows by business domain boundaries, showing how domains interact.", "Capability level \u2013 High-level flow showing major capabilities and how they connect, without detailed interactions."]}, "structure_exploration_depth": {"description": "Structure exploration depth", "question": "What level of domain acceptance criteria should be explored for structure-focused areas?", "outcome": "Determines whether to explore only domain acceptance criteria or include business acceptance criteria", "options": ["Structure -> Explore Domain AC only", "Behavioral -> Explore Business and Domain AC"], "note": "Structure focuses on domain structure and relationships. Behavioral includes business behavior and outcomes."}}}}}, "21": {"action_state": "story_bot.1_shape.build_knowledge", "status": "started", "timestamp": "2025-12-11T13:37:27.996826"}, "22": {"action_state": "story_bot.1_shape.build_knowledge", "status": "completed", "timestamp": "2025-12-11T13:37:28.027384", "outputs": {"instructions": {"action": "build_knowledge", "behavior": "1_shape", "base_instructions": ["**MANDATORY: Before generating any content, you MUST load and review the project's context files:**", "1. Load `{project_area}/docs/stories/clarification.json` - Contains key questions and evidence (generated file)", "2. Load `{project_area}/docs/stories/planning.json` - Contains assumptions and decisions (generated file)", "3. Load `{project_area}/docs/context/*` (or similar) - Original input/source material (original context)", "", "These files contain critical requirements, decisions, and context that MUST be incorporated into all generated content.", "", "", "**BUILD KNOWLEDGE GRAPH (Structured JSON Content):**", "Generate the knowledge graph as structured JSON content following the rules and schema provided. ", "**Schema:** Use schema '**Schema Rules:**\n- **Hierarchical**: sub_epics can contain: nested sub_epics or story_groups. sequential_order is always an integer (1, 2, 3, 4) - unique within parent, no decimals.\n- **Connector**: Story groups: 'and' or 'or' (null for first group). Stories within groups: 'and' or 'or' (null for first story). Epics and sub_epics don't have connectors.\n- **Domain Placement**: domain_concepts: 'local' if relevant to single sub_epic, 'global' if relevant to multiple sub_epics. Place at most specific level (local preferred), but elevate to parent if used by multiple children.\n\n**Template Structure (JSON Schema):**\n```json\n{\n  \"_explanation\": {\n    \"hierarchical\": \"sub_epics can contain: nested sub_epics or story_groups. sequential_order is always an integer (1, 2, 3, 4) - unique within parent, no decimals.\",\n    \"connector\": \"Story groups: 'and' or 'or' (null for first group). Stories within groups: 'and' or 'or' (null for first story). Epics and sub_epics don't have connectors.\",\n    \"domain_placement\": \"domain_concepts: 'local' if relevant to single sub_epic, 'global' if relevant to multiple sub_epics. Place at most specific level (local preferred), but elevate to parent if used by multiple children.\"\n  },\n  \"epics\": [\n    {\n      \"name\": \"\",\n      \"sequential_order\": 1,\n      \"estimated_stories\": null,\n      \"domain_concepts\": [\n        {\n          \"name\": \"\",\n          \"responsibilities\": [\n            {\n              \"name\": \"\",\n              \"collaborators\": []\n            }\n          ]\n        }\n      ],\n      \"sub_epics\": [\n        {\n          \"name\": \"\",\n          \"sequential_order\": 1,\n          \"estimated_stories\": null,\n          \"domain_concepts\": [\n            {\n              \"name\": \"\",\n              \"responsibilities\": [\n                {\n                  \"name\": \"\",\n                  \"collaborators\": []\n                }\n              ]\n            }\n          ],\n          \"sub_epics\": [],\n          \"story_groups\": [\n            {\n              \"type\": \"and\",\n              \"connector\": null,\n              \"sequential_order\": 1,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 2,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            },\n            {\n              \"type\": \"and\",\n              \"connector\": \"or\",\n              \"sequential_order\": 2,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 2,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 3,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            },\n            {\n              \"type\": \"or\",\n              \"connector\": \"or\",\n              \"sequential_order\": 3,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            }\n          ]\n        }\n      ],\n      \"stories\": []\n    }\n  ]\n}\n```'  --> load from behavior data files", "", "**Description:** Create a story map and domain model outline that captures the user's journey through epics, features, and stories, and captures domain model concepts and requirements Goal: Shape both story map and domain model together from user context - capture domain concepts, responsibilities, and requirements alongside story structure", "", "Hey, going to be going away for a little while to create the knowledge graph. Go get a cup of coffee \ud83d\ude0a", "", "**BUILD KNOWLEDGE GRAPH - STORY GRAPH AND DOMAIN MODEL CREATION:**", "", "Build the initial story graph structure AND domain model from gathered context and planning decisions. Capture domain concepts alongside story structure.", "", "**Configuration:**", "- Reference: build_story_graph_outline.json", "- Template: story-graph-outline.json", "", "**CRITICAL - TEMPLATE STRUCTURE COMPLIANCE:**", "1. The build_knowledge action has injected 'knowledge_graph_template' into your instructions", "2. This template shows the EXACT JSON structure your output MUST match", "3. **DO NOT invent your own schema** - examine the template and replicate its structure", "4. The template includes:", "   - Root level keys (e.g., 'epics' array only, NOT 'capability', 'increments', 'features')", "   - Required fields at each level (e.g., 'sequential_order', 'estimated_stories', 'domain_concepts')", "   - Nested structure (epics \u2192 sub_epics \u2192 story_groups \u2192 stories)", "   - Field types and formats (e.g., 'connector': null vs 'connector': 'and')", "5. Look at the '_explanation' section in the template for structural rules", "6. Your output must be structurally identical - only the values (names, responsibilities, etc.) differ", "", "**CRITICAL: Story Graph Structure - Main Epics Section is Single Source of Truth**", "", "**Two-Section Architecture (if increments are added later):**", "", "1. **Main 'epics' Section (Single Source of Truth)**", "   - Contains ALL story details: name, users, sequential_order, story_type, connector, story_groups, etc.", "   - This is the PRIMARY location - all story details must be here", "   - Used as the source for all views (outline, increments, discovery, exploration)", "", "2. **'increments' Section (Minimal Reference View - if present)**", "   - This is a MINIMAL REFERENCE VIEW - just enough to know which stories belong to which increment", "   - Stories in increments should ONLY contain: name, users (optional), sequential_order", "   - NO story details (no story_type, no connector, no story_groups, no domain_concepts, etc.)", "   - Increments are a COPY of the outline view at the story level - just for mapping stories to increments", "   - All story details come from the main epics section", "", "**Domain Model Creation (Integrated with Story Graph):**", "1. Domain concepts are integrated directly into the story graph structure", "2. Place domain_concepts at epic and sub_epic levels based on relevance", "3. Apply domain shaping rules (context: 'when shaping the domain')", "4. **DO NOT create separate domain_graph.json or domain model files**", "5. All domain modeling is captured within story-graph.json via domain_concepts arrays", "", "**Domain Concept Placement Logic:**", "- **Local placement (preferred)**: Place domain_concepts at the sub_epic level when they are relevant to only that sub_epic", "- **Global placement**: Elevate domain_concepts to parent epic/sub_epic level when they are relevant to multiple child sub_epics", "- **Favor local**: Start with local placement, but elevate if the concept is used by multiple sub_epics", "**Process:**", "1. Use clarification data from docs/stories/clarification.json", "2. Use planning decisions from docs/stories/planning.json", "3. **EXAMINE the knowledge_graph_template structure injected into your instructions**", "4. Build story graph matching that exact structure (root keys, field names, nesting)", "5. Identify domain concepts from clarification and planning data", "6. Map domain concepts to epics/sub_epics based on relevance (see placement logic above)", "7. Populate domain_concepts arrays in story-graph.json with proper placement", "8. Create story-graph.json in project area", "7. Populate domain_concepts arrays in story-graph.json with proper placement", "8. Create story-graph.json and domain model outputs in project area (same location)", "", "**Output:**", "- File: {project_area}/story-graph.json (JSON story graph with epics, sub_epics, story_groups, stories, and domain_concepts integrated)", "", "**Next Step:** Proceed to render step after story graph is created.", "", "", "Before generating any content, review ALL validation rules below. Your generated content MUST comply with every rule to avoid violations.", "", "**Behavior-level rules:**", "", "**Rule:** rules\\maintain_verb_noun_consistency.json", "Maintain verb-noun consistency from epic to feature to story to scenario", "", "**DO:**", "- Use consistent verb-noun language across all levels: Epic: Manage Orders \u2192 Feature: Place Order \u2192 Story: Customer places order \u2192 Scenario: When customer places order...", "- Maintain consistent terminology throughout hierarchy: Epic, feature, story, and scenario all use same verb-noun pattern", "- Use verb-noun language in scenario sentences: When user submits form, then system validates data", "", "**DON'T:**", "- Don't switch formats between levels: Epic: Order Management \u2192 Feature: Place Order (inconsistent format)", "- Don't mix verb-noun with other formats: Epic uses verb-noun, but feature uses noun-only format", "- Don't use different terminology at different levels: Epic says 'Orders', feature says 'Order Processing', story says 'Process Order'", "", "", "**Rule:** rules\\map_sequential_spine_vs_optional_paths.json", "When mapping stories, carefully distinguish between sequential spine (essential path) and optional paths, alternate routes, or additional functionality that is not strictly essential. Sequential stories form the mandatory flow; optional stories are alternatives, enhancements, or non-essential features.", "", "**DO:**", "- Identify the essential spine first: Start by identifying the minimal essential path that delivers core value", "The spine represents the mandatory sequence: Story1 AND Story2 AND Story3", "Spine stories get sequential_order numbers (1, 2, 3, etc.)", "Spine stories are required for the feature to deliver its core purpose", "Ask: 'What is the minimum path to deliver value?'", "- Mark optional paths clearly: Optional stories branch from or enhance the spine but are not required", "Mark optional stories with 'optional: true' in the story structure", "Optional stories may have sequential_order if they're part of an alternative flow", "Optional stories represent: alternate routes, enhancements, nice-to-have features", "Ask: 'Can the feature deliver value without this story?'", "- Distinguish types of optional paths with concrete examples: Alternate routes: User logs in with email (sequential_order: 2) OR User logs in with social media (sequential_order: 2.1, optional: true)", "Enhancements: User views dashboard (sequential_order: 3) AND User customizes dashboard (sequential_order: 3.1, optional: true)", "Additional functionality: User views dashboard (sequential_order: 3) AND User shares dashboard (sequential_order: 3.2, optional: true)", "Error handling: User enters invalid data (sequential_order: 4) AND System shows error message (sequential_order: 4.1, optional: true)", "- Correct mapping examples: Spine: User creates account (sequential_order: 1) AND User logs in (sequential_order: 2) AND User views dashboard (sequential_order: 3)", "Optional alternate: User logs in with email (sequential_order: 2) OR User logs in with social media (sequential_order: 2, optional: true)", "Optional enhancement: User views dashboard (sequential_order: 3) AND User customizes dashboard (optional: true, priority: 1)", "Additional functionality: User views dashboard (sequential_order: 3) AND User shares dashboard (optional: true, priority: 2)", "", "**DON'T:**", "- Don't mark everything as sequential: Don't assign sequential_order to all stories when some are optional", "Don't treat alternate routes as part of the spine", "Don't include enhancements in the mandatory sequential flow", "Don't confuse 'nice to have' with 'must have'", "- Don't omit optional markers: Don't leave optional stories unmarked - be explicit", "Don't assume all stories in a feature are mandatory", "Don't mix optional and mandatory without clear distinction", "Don't fail to identify the spine before adding optional paths", "- Wrong mapping examples: Wrong: User creates account (1) AND User logs in with email (2) AND User logs in with social media (3) - social media should be optional", "Wrong: User views dashboard (1) AND User customizes dashboard (2) AND User shares dashboard (3) - customization and sharing should be optional", "Wrong: All stories marked mandatory when some are clearly alternatives or enhancements", "Wrong: No distinction between essential path and optional features", "", "", "**Rule:** rules\\stories_developed_and_tested_in_days.json", "Write stories that can be developed and tested in a matter of days", "", "**DO:**", "- Create stories sized for days, not weeks: Story takes 3-5 days to develop and test completely", "- Break large work into smaller stories: Large feature broken into multiple stories, each completable in days", "- Focus on delivering complete, testable functionality quickly: Each story delivers a complete piece of functionality that can be tested", "", "**DON'T:**", "- Don't create stories that span multiple weeks: Story requires 3+ weeks to complete (too large)", "- Don't create stories that can't be tested independently: Story requires multiple other stories before it can be tested", "- Don't create stories without clear boundaries: Story is vague about scope and completion criteria", "", "", "**Rule:** rules\\stories_follow_invest_principles.json", "Ensure stories follow INVEST principles (Independent, Negotiable, Valuable, Estimable, Small, Testable)", "", "**DO:**", "- Independent - story can be developed independently: Story doesn't depend on other stories being completed first", "- Negotiable - story details can be negotiated: Story allows for discussion and refinement of requirements", "- Valuable - story delivers value to user or business: Story provides measurable value when completed", "- Estimable - story can be estimated: Story is clear enough to estimate effort", "- Small - story can be completed in short time: Story can be developed and tested in a matter of days", "- Testable - story has clear acceptance criteria: Story has testable outcomes that can be verified", "", "**DON'T:**", "- Don't create stories that depend on multiple other stories: Story requires 5 other stories to be completed first (not independent)", "- Don't create stories that are too large: Story spans multiple weeks and includes multiple features (not small)", "- Don't create stories without clear value: Story doesn't provide measurable value to users or business", "", "", "**Rule:** rules\\story_names_must_follow_verb_noun_format.json", "CRITICAL: Story names MUST follow Verb-Noun format (e.g., 'Move To Mob Leaders Turn', 'Determines Target from Strategy', 'Initiate Mob Attack'), and include italicized description showing component interactions (e.g., '*Combat Tracker moves to any mob member's turn, auto moves to mob leader's turn*'). The story name should be concise and action-oriented, while the description shows the component-to-component interactions.", "", "**DO:**", "- Use concise Verb-Noun format for story names: Move To Mob Leaders Turn, Determines Target from Strategy, Initiate Mob Attack", "- Include italicized description showing component interactions: *Combat Tracker moves to any mob member's turn, auto moves to mob leader's turn*", "- Make story name concise and action-oriented: Story name: 'Initiate Mob Attack' - concise and action-oriented", "- Show component interactions in description: Story description shows how components interact with each other", "", "**DON'T:**", "- Don't use long descriptive names without Verb-Noun format: The system should allow users to move to mob leaders turn when...", "- Don't omit component interaction descriptions: Story name without italicized description of component interactions", "- Don't use vague or non-action-oriented names: Mob Leader Turn System, Attack Mechanism", "", "", "**Rule:** rules\\use_active_behavioral_language.json", "Use active behavioral language with action verbs. Describe behaviors, not tasks or capabilities.", "", "**DO:** Use action verbs to describe what happens", "Use action verbs to describe what happens", "Example: User submits order, System validates payment", "Favor active behavioral language over functional/capability breakup", "Use story maps to outline user and system behavior (NOT tasks)", "Use action verbs: submits, views, validates, sends, displays", "Describe behaviors: [Actor] [action] [object]", "Use active behavior language: Place order (active behavior), Validate payment (active behavior)", "", "**DON'T:** Avoid capability nouns and task language", "Avoid capability nouns that describe functions rather than behaviors", "Don't use functional or capability-based language instead of behavioral language", "Don't use capability nouns: Management, Processing, Administration", "Don't use task verbs: implement, create, build, set up", "Don't use task language", "", "Wrong Examples:", "- Order Management, Payment Processing (capability nouns)", "- Focus on tasks instead of behaviors", "- Order Management (capability), Implement order placement (task)", "", "", "**Rule:** rules\\use_verb_noun_format_for_story_elements.json", "Use verb-noun format for all story elements (epic names, feature names, story titles)", "", "**DO:**", "- Use verb-noun format for epic names: Manage Orders, Create Character, Process Payment", "- Use verb-noun format for feature names: Place Order, Validate Payment, Save Character", "- Use verb-noun format for story titles: Customer places order, System validates payment, User saves character", "- Use verb-noun format for scenario sentences: User submits form, System processes request", "", "**DON'T:**", "- Don't use noun-only or capability-based names: Order Management, Payment Processing, Character System", "- Don't mix verb-noun with other formats: Order Management and Place Order (mixed format)", "- Don't use gerund forms: Ordering, Processing Payments, Creating Characters", "", "", "**Rule:** apply_7_plus_minus_2_hierarchy.json", "Apply 7\u00b12 rule for hierarchy: epics contain 4-9 sub-epics, sub-epics contain 4-9 stories. Split when exceeding, merge when below minimum.", "", "**DO:** Maintain hierarchy within the 7\u00b12 cognitive limit range", "(E) Epic: Contains 4-9 sub-epics", "  - Split into additional Sub-Epics when > 9 sub-epics", "  - Merge with another epic when < 4 sub-epics", "(E) Sub-Epic: Contains 4-9 stories", "  - Split into 2 sub-epics when > 9 stories", "  - Merge with another sub-epic when < 4 stories", "(S) Story: Contains 2-9 acceptance criteria", "  - Split into 2 stories when > 9 AC", "  - Merge with another story when < 2 AC (single AC stories are too small)", "Apply 7\u00b12 cognitive limit principle (optimal range: 5-9, acceptable: 4-9)", "", "Example:", "(E) Manage Orders (10 sub-epics \u2192 SPLIT)", "  and (E) Manage Customer Orders (6 stories) \u2713", "  and (E) Manage Order Fulfillment (4 stories) \u2713", "", "(E) Place Order (12 stories \u2192 SPLIT)", "  and (S) Initiate Order (6 AC) \u2713", "  and (S) Complete Order (6 AC) \u2713", "", "(S) Validate Payment (11 AC \u2192 SPLIT)", "  and (AC) Check Payment Method (5 steps) \u2713", "  and (AC) Process Payment Transaction (6 steps) \u2713", "", "**DON'T:** Don't exceed thresholds or create items below minimum", "Create epics with > 9 sub-epics (use additional Sub-Epics instead)", "Create sub-epics with > 9 stories (split the sub-epic)", "Create stories with > 9 acceptance criteria (split the story)", "Create very small stories with < 2 AC (merge with related story)", "Ignore sizing thresholds during shaping, discovery, or exploration", "", "Wrong Examples:", "- (E) Epic with 15 sub-epics (too many, use additional Sub-Epics)", "- (E) Sub-Epic with 15 stories (too many, split sub-epic)", "- (S) Story with 15 AC (too many, split story)", "- (S) Story with 1 AC (too small, merge with related story)", "", "", "**Rule:** avoid_noun_redundancy.json", "When shaping stories, avoid noun redundancy in domain and concept names", "", "**DO:** INTEGRATE first: nest related capabilities under one domain", "INTEGRATE first: nest related capabilities under one domain (90% of cases)", "Only then rename: use distinct nouns ONLY when integration doesn't make sense", "Test for uniqueness: Can you remove the qualifier and still know what it is?", "Use subject-area nouns when domains are genuinely separate", "Only when integration truly doesn't make sense", "", "**DON'T:** Don't rename without considering integration", "Don't rename without considering integration (this hides the real issue)", "Wrong: Repeat same noun with different prefixes: X Animation, Y Animation, Z Animation", "Don't use vague qualifiers to avoid integration", "Wrong: Animation 1, Animation System", "Don't create parallel domains that should be nested", "Wrong: Integrate related concepts rather than creating redundant structures", "", "", "**Rule:** avoid_technical_implementation_language.json", "When shaping stories, avoid technical implementation language in user-facing story elements", "", "**DO:**", "- Use business language in user-facing elements: Customer places order, User views profile, Admin approves request", "- Focus on what user experiences, not how it's implemented: Story describes user experience, not technical implementation", "", "**DON'T:**", "- Don't use development task language: implement, create, refactor, optimize, fix, build, set up", "- Don't use technical implementation details: query database, call API, update table", "- Don't focus on delivery or development tasks: Implement order system, Create database schema, Set up API endpoints", "- Don't focus on system internals: Optimize query performance, Refactor authentication code, Update configuration", "", "", "**Rule:** avoid_technical_stories.json", "Technical stories represent implementation tasks that do not describe system behavior. They are normally avoided in favor of user stories and system stories. When technical stories are necessary, they should be marked with story_type: 'technical' and kept minimal.", "", "**DO:**", "- Prefer user stories and system stories over technical stories: Instead of 'Set up database schema', use 'Store user data' (user story)", "Instead of 'Create API endpoint', use 'Expose user data via API' (system story)", "Instead of 'Write unit tests', use 'Verify story behavior' (user story)", "- When technical stories are necessary, mark with story_type: 'technical': Story: 'Migrate legacy data format' with story_type: 'technical'", "Story: 'Refactor authentication module' with story_type: 'technical'", "Story: 'Update dependency versions' with story_type: 'technical'", "- Keep technical stories minimal and focused: Technical stories should be rare exceptions", "Technical stories should still follow Verb-Noun format", "Technical stories should be clearly justified", "", "**DON'T:**", "- Don't create technical stories for normal development work: Avoid: 'Write code', 'Create class', 'Add method'", "Avoid: 'Set up CI/CD', 'Configure database', 'Install package'", "These are implementation details, not stories", "- Don't use technical stories to describe system behavior: Use system stories for system-to-system behavior", "Use user stories for user-facing behavior", "Technical stories are for unavoidable implementation tasks only", "", "", "**Rule:** balance_fine_grained_testable_stories.json", "Balance fine-grained stories with testable and valuable independent units. Stories must deliver value and be independently testable.", "", "**DO:** Create stories that are complete interactions with value", "Create stories that are complete interactions with value", "Example: Customer places order (complete interaction, testable, valuable)", "Balance fine-grained stories with testable/valuable stories", "Ensure stories are fine-grained enough to enable frequent feedback", "Ensure stories are grouped into meaningful chunks for high quality feedback", "Stories that deliver measurable value independently", "", "**DON'T:** Avoid stories that are too small or too large", "Avoid stories that are too small and have no value alone", "Don't create stories that are too fine-grained without being testable or valuable", "Don't create stories that are too large to be testable or deliverable quickly", "", "Wrong Examples:", "- Add order button (too fine-grained, no value alone)", "- Change button color (too fine-grained, no value)", "- Customer places order and views history and updates profile (too large, multiple flows)", "", "", "**Rule:** create_lightweight_precise_docs.json", "Create lightweight but precise documentation during shaping. Focus on structure and scope, not detailed specifications.", "", "**DO:** Create lightweight but precise documentation during shaping", "Balance fine-grained stories with testable/valuable stories", "Ensure stories are fine-grained enough to enable frequent feedback", "Ensure stories are grouped into meaningful chunks for high quality feedback", "Validate that a business expert can understand the language of most of the stories", "Focus the language on the business domain", "Create lightweight but precise documentation", "Focus on structure and scope, not detailed specifications", "Make the map easy to walk through (it tells a story)", "", "Example:", "(E) Manage Orders", "  and (E) Place Order", "    and (S) Customer --> places order", "(Shows hierarchy and structure, not detailed specs)", "", "**DON'T:** Don't over-elaborate or add detailed specifications during shaping", "Create stories that are too fine-grained without being testable or valuable", "Create stories that are too large to be testable or deliverable quickly", "Add detailed technical specifications during shaping phase", "Over-elaborate story mapping during shaping", "", "Wrong Example:", "(E) Manage Orders", "  and (E) Place Order", "    and (S) Customer --> places order", "  \u2192 Detailed API specs, database schema, UI mockups", "(Too much detail for shaping phase)", "", "", "**Rule:** discover_relationships_from_story_map.json", "Domain Discovery determines relationships and responsibilities between core domain objects by walking through the story map, then suggests story refinements to rebuild the story map to complement the domain model.", "", "**DO:** Extract keywords from story map and determine relationships and responsibilities", "Go through all stories in increment scope, extract keywords from story titles/descriptions/acceptance criteria, ask clarifying questions for each keyword, map relationships with multiplicities, document responsibilities", "", "**DON'T:** Don't skip keyword identification or build domain model without story map analysis", "Skip going through stories, ignore keywords in acceptance criteria, build domain model without asking what keywords mean, use technical terms instead of domain terms", "", "", "**Rule:** enforce_behavioral_journey_flow.json", "When shaping stories, CRITICAL: Stories must show user/system journey flow, not just list operations. Stories must include context (when/why actions happen) and connect logically. Order by user journey, not technical sequential_order.", "", "**DO:** Show user/system journey with context and flow", "Stories must show WHEN and WHY actions happen, not just WHAT", "Story maps must show logical flow: Initialize \u2192 Validate \u2192 Process \u2192 Confirm \u2192 Complete", "Each story must connect to previous/next stories in the journey", "Order stories by user journey flow, not by technical sequential_order", "", "Correct Examples (with journey context - Payment Domain):", "(E) Process Payment", "  and (E) Process Card Payment", "    and (S) User --> invokes process payment command", "    and (S) System --> validates payment details", "    and (S) System --> authorizes payment", "    and (S) System --> processes payment transaction", "    and (S) System --> confirms payment and sends notification", "", "(E) Refund Payment", "  and (E) Process Refund", "    and (S) User --> invokes refund payment command", "    and (S) System --> validates refund eligibility", "    and (S) System --> processes refund transaction", "    and (S) System --> confirms refund and sends notification", "", "(E) Process Payment", "  and (E) Validate Payment", "    and (S) User --> submits payment request", "    and (S) System --> validates card number", "    and (S) System --> validates amount", "    and (S) System --> validates currency", "    and (S) System --> returns validation result", "", "Note: Individual stories like 'Authorize Payment with Processor' are correct story format (verb-noun, specific), but they need to be part of a journey. Stories should NOT include actors in the name (actors are documented separately).", "", "Correct Individual Stories (but need journey context):", "- 'Authorize Payment with Processor' (correct story format, but needs: when? why? what happens next?)", "- 'Validate Payment Details' (correct story format, but needs: when? why? what triggers this?)", "- 'Process Payment Transaction' (correct story format, but needs: when? why? what happens before/after?)", "", "Journey Flow Requirements:", "- Start with initialization/entry point", "- Show logical progression through operations", "- Include error handling and alternative paths", "- End with completion/save operations", "- Connect stories logically (this leads to that)", "", "**DON'T:** Don't create isolated sets of functions that don't make sense linearly", "Don't group unrelated operations together that don't form a logical journey", "Don't create story maps with random functions that have no linear relationship", "Don't mix unrelated operations from different domains or contexts", "", "Wrong Examples (isolated sets of functions, no linear sense - Payment Domain):", "(E) Payment Operations", "  and (E) Process Payment", "  and (E) Generate Invoice", "  and (E) Send Email", "  and (E) Update Inventory", "  and (E) Calculate Tax", "(unrelated operations, no linear flow - why does email come after payment? why inventory? no journey)", "", "(E) Payment System", "  and (E) Authorize Payment", "  and (E) Create User Account", "  and (E) Process Refund", "  and (E) Generate Report", "  and (E) Delete Transaction", "(random operations, no logical sequence - account creation doesn't follow authorization, deletion doesn't follow processing)", "", "(E) Payment Flow", "  and (S) System --> validates payment", "  and (S) System --> sends notification", "  and (S) System --> authorizes payment", "  and (S) System --> updates database", "  and (S) System --> processes payment", "(wrong order, no linear sense - notification before authorization? database update before processing?)", "", "What Makes It NOT a Linear Journey:", "- Unrelated operations grouped together (payment + inventory + email + tax - why together?)", "- Operations from different contexts mixed (payment + user account + reporting - different domains)", "- No logical sequence (why does X come before Y? no reason)", "- Operations can be in any order (no dependencies, no flow)", "- Random collection of functions (like a function library, not a journey)", "- No user/system goal that connects them (what are we trying to accomplish?)", "", "", "**Rule:** enforce_functional_accomplishment.json", "CRITICAL: Stories must represent complete functional accomplishments, not data access operations or implementation steps. Stories must deliver value independently.", "", "**DO:** Create stories that accomplish complete functions", "Stories must represent complete functional accomplishments", "Stories must deliver value independently (INVEST principle)", "Stories must show end-to-end flow, not just data access", "", "Correct Examples (complete functional accomplishments):", "- 'User loads story graph and system displays epics in diagram' (complete: load + display = accomplishment)", "- 'Developer edits epic name and system updates diagram' (complete: edit + update = accomplishment)", "- 'User requests render and system generates DrawIO file' (complete: request + generate = accomplishment)", "- 'CLI invokes render command and system saves outline diagram' (complete: invoke + save = accomplishment)", "", "Functional Accomplishment Requirements:", "- Story must accomplish something meaningful for user/system", "- Story must be independently valuable (can be tested/delivered alone)", "- Story must show complete flow (start \u2192 process \u2192 outcome)", "- Story must have clear acceptance criteria (how do we know it's done?)", "", "**DON'T:** Don't create stories that are just data access or implementation steps", "Don't create stories that are just data access operations", "Don't create stories that are implementation steps without outcomes", "Don't create stories that aren't independently valuable", "", "Wrong Examples (not complete accomplishments):", "- 'Read All Epics from Diagram' (data access - not accomplishment, what happens with the data?)", "- 'Load All Features In Graph Epic' (data access - not accomplishment)", "- 'Serialize Components to JSON' (implementation step - not accomplishment, part of what story?)", "- 'Convert Diagram to StoryGraph Format' (implementation step - not accomplishment)", "- 'Calculate Component Positions' (implementation step - not accomplishment)", "", "Data Access/Implementation Indicators (REJECT as stories):", "- Just reads/loads data without using it", "- Just converts/formats data without purpose", "- Just calculates/computes without outcome", "- Just serializes/saves without context", "", "These should be STEPS within stories, not stories themselves:", "- Step: 'System reads epics from diagram' (within story: 'User views story map and system displays epics')", "- Step: 'System serializes components' (within story: 'User saves story graph and system writes JSON file')", "- Step: 'System calculates positions' (within story: 'User requests render and system generates positioned diagram')", "", "Instead, ask:", "- What does the user/system accomplish with this?", "- Is this independently valuable?", "- Can this be tested/delivered alone?", "- What's the complete flow from start to finish?", "", "", "**Rule:** enforce_specificity_in_stories.json", "CRITICAL: Stories must be specific about what, when, why, and who. Generic operations like 'Add Sub-Epic' or 'Read Epics' are insufficient - stories must include context and specificity.", "", "**DO:** Create specific stories with full context", "Stories must be specific about what, when, why, and who", "Stories must include context: when does it happen? why? what triggers it?", "Stories must specify actors, objects, and outcomes clearly", "", "Correct Examples (specific with context - Payment Domain):", "- 'User processes payment for order #12345 with amount $50.00 when customer completes checkout' (specific: user, order ID, amount, context)", "- 'Merchant invokes refund command from API and system reverses payment transaction' (specific: merchant, API, command, outcome)", "- 'System validates payment card number 4111-1111-1111-1111 when user submits payment form' (specific: system, card number, trigger)", "- 'User clicks Process Payment button and system prompts for payment method selection' (specific: user, action, UI element, system response)", "", "Specificity Requirements:", "- WHO: Specific actor (User, Merchant, Customer, System, PaymentProcessor, API)", "- WHAT: Specific action and object (processes payment for order #12345 with amount $50.00)", "- WHEN: Specific trigger/context (when customer completes checkout, when user submits payment form)", "- WHY: Purpose in journey (to complete purchase transaction, to reverse payment error)", "- OUTCOME: Specific result (payment processed, transaction ID returned, notification sent)", "", "**DON'T:** Don't create generic stories without context", "Don't create generic operations without specificity", "Don't omit context about when/why actions happen", "Don't use vague descriptions without details", "", "Wrong Examples (generic without context - Payment Domain):", "- 'Process Payment' (which payment? for which order? when? why?)", "- 'Authorize Payment' (which payment? with which card? when? why? what happens next?)", "- 'Exposes Payment API' (which endpoints? to whom? when? why?)", "- 'Refund Payment' (which payment? for which reason? when? why?)", "", "Generic Indicators (REJECT or require more specificity):", "- Single verb + noun without context: 'Process Payment', 'Authorize Payment', 'Refund Payment'", "- No specific objects: 'Process Payment' (which payment? which order?)", "- No context: 'Authorize Payment' (when? why? what triggers this?)", "- No outcome: 'Authorize Payment' (what happens with the authorization result?)", "", "Instead, ask:", "- Which specific object? (payment ID, order number, transaction ID, card number)", "- When does this happen? (trigger, context, user action - when customer completes checkout, when merchant requests refund)", "- Why does this happen? (purpose, user need, journey step - to complete purchase, to reverse error)", "- What's the outcome? (result, system response, user experience - payment processed, transaction ID returned, notification sent)", "", "", "**Rule:** establish_spine_vs_optional_enhanced_behavior.json", "Establish mandatory spine stories vs optional/enhanced behavior stories. When mapping stories, carefully distinguish between sequential spine (essential path) and optional paths, alternate routes, or additional functionality that is not strictly essential. Mandatory stories form the sequential spine (story AND story AND story). Optional stories are alternatives or enhancements (story OR story) that branch from the spine and can return to it. Sequential stories form the mandatory flow; optional stories are alternatives, enhancements, or non-essential sub-epics.", "", "**DO:** Identify the essential spine first", "Start by identifying the minimal essential path that delivers core value", "The spine represents the mandatory sequence: Story1 AND Story2 AND Story3", "Spine stories get sequential_order numbers (1, 2, 3, etc.)", "Spine stories are required for the sub-epic to deliver its core purpose", "Ask: 'What is the minimum path to deliver value?'", "Establish the mandatory spine before identifying optional/enhanced behaviors", "Explicitly distinguish between spine (mandatory) and optional/enhanced behaviors", "", "**DON'T:** Don't mark everything as sequential", "Don't assign sequential_order to all stories when some are optional", "Don't treat alternate routes as part of the spine", "Don't include enhancements in the mandatory sequential flow", "Don't confuse 'nice to have' with 'must have'", "Don't mark all stories as mandatory when some are alternatives or enhancements", "Don't fail to establish the spine before adding optional/enhanced behaviors", "", "**DO:** Mark optional paths clearly", "Optional stories branch from or enhance the spine but are not required", "Mark optional stories with 'optional: true' in the story structure", "Optional stories may have sequential_order if they're part of an alternative flow (e.g., 2.1, 3.1, etc.)", "Optional stories represent: alternate routes, enhancements, nice-to-have sub-epics", "Ask: 'Can the sub-epic deliver value without this story?'", "Optional/enhanced stories can return to the spine after completion", "Sort optional/enhanced stories by priority of delivery within the same sub-epic", "", "**DON'T:** Don't omit optional markers", "Don't leave optional stories unmarked - be explicit", "Don't assume all stories in a sub-epic are mandatory", "Don't mix optional and mandatory without clear distinction", "Don't fail to identify the spine before adding optional paths", "Don't omit the optional marker - be explicit about spine vs optional/enhanced behaviors", "Don't create sub-epics where every story is mandatory when alternatives or enhancements exist", "", "**DO:** Distinguish types of optional paths with concrete examples", "Spine (all stories with and), then OR optional branch (all stories with and), then OR enhanced (all stories with and):", "", "Correct Example:", "Spine (all stories with and):", "  (S) User --> creates account", "  and (S) User --> logs in", "  and (S) User --> views dashboard", "OR optional branch (all stories with and):", "  (S) User --> signs in with social media (optional)", "  and (S) User --> signs in with email (optional)", "OR enhanced (all stories with and):", "  (S) User --> customizes dashboard (enhanced)", "  and (S) User --> shares dashboard (enhanced)", "", "**DON'T:** Wrong mapping examples", "Wrong: All stories marked mandatory when some are clearly alternatives or enhancements", "  and (S) User --> creates account (1)", "  and (S) User --> logs in with email (2)", "  and (S) User --> logs in with social media (3) - social media should be optional", "", "Wrong: No distinction between essential path and optional sub-epics", "  and (S) User --> views dashboard (1)", "  and (S) User --> customizes dashboard (2)", "  and (S) User --> shares dashboard (3) - customization and sharing should be optional", "", "Wrong: Missing optional markers on alternative flows or enhanced behaviors", "Wrong: Optional/enhanced stories not sorted by priority", "Wrong: No clear spine established before adding optional behaviors", "", "", "**Rule:** extract_story_map_checklist.json", "Quick checklist for extracting story maps from code. Follow this process step-by-step.", "", "", "**Rule:** extract_story_map_from_code.json", "CRITICAL: When creating story maps from code, analyze the outermost layer showing end-to-end journey. Locate acceptance tests, human code engagement points (CLI/UI), MCP server definitions, WSDL, API contracts. Analyze operations and domain for major/minor concepts. Create epics/sub-epics based on higher-order goals. Look at distinct behaviors and typical execution order to lay out story journey.", "", "**DO:** Find outermost layer and entry points", "Start with the OUTERMOST LAYER showing end-to-end journey", "Locate all HUMAN CODE ENGAGEMENT points:", "  - CLI commands and entry points (main(), command handlers)", "  - UI entry points (web routes, event handlers, button clicks)", "  - MCP server tool definitions (tool names, parameters, descriptions)", "  - API contracts (REST endpoints, GraphQL queries, WSDL operations)", "  - WebSocket handlers, message queues, event listeners", "", "Locate ACCEPTANCE TESTS:", "  - End-to-end tests that show complete user journeys", "  - Integration tests that show system-to-system flows", "  - Test scenarios that describe 'when X, then Y' behaviors", "  - BDD/Gherkin tests with Given-When-Then structure", "", "Example Entry Points to Find:", "- CLI: 'python -m story_io.story_io_cli render-outline --story-graph file.json'", "- MCP: Tool 'render_outline' with parameters 'story_graph_path', 'output_path'", "- API: POST /api/story-graph/render with body {storyGraph, outputFormat}", "- UI: Button 'Render Outline' that triggers render operation", "- Test: 'test_render_outline_from_json' that shows complete flow", "", "**DON'T:** Don't start with internal implementation details", "Don't start with internal classes or helper functions", "Don't start with data structures or domain models", "Don't start with utility functions or low-level operations", "", "Wrong Starting Points:", "- Internal class: 'StoryIODiagram.load_from_json()' (implementation detail)", "- Helper function: 'parse_story_graph()' (internal mechanism)", "- Data structure: 'Epic' class definition (domain model, not entry point)", "", "These are important but come AFTER identifying the journey", "", "**DO:** Analyze operations and domain for major/minor concepts", "Analyze OPERATIONS from entry points:", "  - What operations are exposed? (render, sync, search, edit, save)", "  - What are the operation names? (render-outline, sync-increments, search-stories)", "  - What parameters do they take? (story_graph_path, output_path, query)", "  - What do they return? (DrawIO file, JSON report, search results)", "", "Analyze DOMAIN CONCEPTS:", "  - MAJOR CONCEPTS: High-level domain entities (StoryGraph, Diagram, Epic, Sub-Epic, Story)", "  - MINOR CONCEPTS: Supporting entities (Position, Boundary, User, Increment)", "  - OPERATIONS: Actions on concepts (Load, Read, Edit, Render, Synchronize, Search, Save)", "  - RELATIONSHIPS: How concepts relate (Epic contains Sub-Epics, Sub-Epic contains Stories)", "", "Example Analysis (Story-IO Domain):", "- Operations: render-outline, render-increments, sync-outline, sync-increments, search, add-user, merge", "- Major Concepts: StoryGraph (main entity), Diagram (visual representation), Epic/Sub-Epic/Story (hierarchy)", "- Minor Concepts: Position (2D coordinate), Boundary (rectangular area), User (story actor), Increment (priority grouping)", "- Relationships: StoryGraph contains Epics, Epic contains Sub-Epics, Sub-Epic contains Stories", "", "Example Analysis (Payment Domain):", "- Operations: process-payment, refund-payment", "- Major Concepts: Payment (main entity), Transaction (financial transaction), Card (payment method), Refund (reversal)", "- Minor Concepts: Amount (monetary value), Currency (USD, EUR), Status (pending, approved, declined), PaymentMethod (card, bank transfer)", "- Relationships: Payment contains Transaction, Payment uses Card, Payment can have Refund, Transaction has Status", "", "**DON'T:** Don't confuse implementation details with domain concepts", "Don't treat implementation classes as domain concepts", "Don't treat utility functions as operations", "Don't treat data structures as domain entities", "", "Wrong Analysis:", "- Implementation class: 'StoryIORenderer' (implementation detail, not domain concept)", "- Utility function: 'calculate_position()' (implementation detail, not operation)", "- Data structure: 'dict' or 'list' (implementation detail, not domain concept)", "", "Focus on WHAT the system does (domain), not HOW it does it (implementation)", "", "**DO:** Create epics/sub-epics based on higher-order goals", "Group operations into EPICS based on HIGHER-ORDER GOALS:", "  - What is the user/system trying to accomplish?", "  - What are the major capabilities?", "  - What are the lifecycle stages?", "", "Example Epic Creation from Operations (Story-IO Domain):", "- Operations: render-outline, render-increments, render-exploration", "- Higher-Order Goal: 'Render StoryGraph' (user wants to visualize story map)", "- Epic: 'Render StoryGraph'", "", "- Operations: sync-outline, sync-increments, generate-sync-report, merge", "- Higher-Order Goal: 'Synchronize StoryGraph' (user wants to sync between formats)", "- Epic: 'Synchronize StoryGraph'", "", "Example Epic Creation from Operations (Payment Domain):", "- Operations: process-payment, process_payment, POST /api/payments/process", "- Higher-Order Goal: 'Process Payment' (user wants to process a payment transaction)", "- Epic: 'Process Payment'", "", "- Operations: refund-payment, refund_payment, POST /api/payments/refund", "- Higher-Order Goal: 'Refund Payment' (user wants to reverse a payment)", "- Epic: 'Refund Payment'", "", "Group operations into SUB-EPICS based on DISTINCT BEHAVIORS:", "  - What are the different ways to accomplish the epic goal?", "  - What are the different types or modes?", "  - What are the different contexts or scenarios?", "", "Example Sub-Epic Creation (Story-IO Domain):", "- Epic: 'Render StoryGraph'", "- Distinct Behaviors: Render outline (basic), Render increments (with priorities), Render exploration (with acceptance criteria)", "- Sub-Epics: 'Render Outline', 'Render Increments', 'Render Exploration'", "", "- Epic: 'Synchronize StoryGraph'", "- Distinct Behaviors: Sync outline structure, Sync increments, Generate comparison report, Merge graphs", "- Sub-Epics: 'Synchronize Outline', 'Synchronize Increments', 'Generate Sync Report', 'Merge StoryGraphs'", "", "Example Sub-Epic Creation (Payment Domain):", "- Epic: 'Process Payment'", "- Distinct Behaviors: Validate payment (required), Authorize payment (required), Process with card (common), Process with bank transfer (alternative), Process with wallet (alternative), Confirm payment (required)", "- Sub-Epics: 'Validate Payment', 'Authorize Payment', 'Process Card Payment', 'Process Bank Transfer', 'Process Wallet Payment', 'Confirm Payment'", "", "- Epic: 'Refund Payment'", "- Distinct Behaviors: Validate refund eligibility, Process refund, Confirm refund", "- Sub-Epics: 'Validate Refund', 'Process Refund', 'Confirm Refund'", "", "**DON'T:** Don't create epics/sub-epics from implementation structure", "Don't create epics based on class structure (StoryIODiagram, DrawIORenderer, PaymentProcessor, etc.)", "Don't create sub-epics based on method names (load_json, parse_xml, charge_card, etc.)", "Don't create epics/sub-epics from technical layers (data layer, service layer, etc.)", "", "Wrong Epic Creation:", "- Based on class: 'StoryIODiagram Operations' (implementation structure)", "- Based on method: 'JSON Loading' (technical mechanism)", "- Based on layer: 'Data Access Layer' (technical architecture)", "", "Focus on USER/SYSTEM GOALS, not technical structure", "", "**DO:** Look at distinct behaviors and typical execution order", "Analyze DISTINCT BEHAVIORS from acceptance tests and code flow:", "  - What are the different scenarios?", "  - What are the different paths through the code?", "  - What are the different user actions?", "", "Example Behavior Analysis (Story-IO Domain):", "- Test: 'test_render_outline_from_json' shows: Load JSON \u2192 Parse \u2192 Generate XML \u2192 Calculate Positions \u2192 Apply Styles \u2192 Save", "- Distinct Behaviors: Load, Parse, Generate, Calculate, Apply, Save", "- These become STORIES in the journey", "", "Example Behavior Analysis (Payment Domain):", "- Test: 'test_process_payment_success' shows: Invoke \u2192 Validate \u2192 Authorize \u2192 Process \u2192 Confirm", "- Distinct Behaviors: Invoke (entry point), Validate (check input), Authorize (check funds/fraud), Process (execute transaction), Confirm (complete and notify)", "- These become STORIES in the journey", "", "Determine TYPICAL EXECUTION ORDER from code flow:", "  - Trace through acceptance tests: what happens first, second, third?", "  - Trace through CLI commands: what's the flow?", "  - Trace through MCP tool calls: what's the sequence?", "  - Look at error handling: what are alternative paths?", "", "Example Execution Order Analysis (Story-IO Domain):", "- CLI: 'render-outline --story-graph file.json --output file.drawio'", "- Code Flow: Parse args \u2192 Load story graph \u2192 Create diagram \u2192 Render outline \u2192 Save file", "- Typical Order: 1. Parse arguments, 2. Load story graph, 3. Render outline, 4. Save file", "- Stories: 'Parses Command Arguments' \u2192 'Loads StoryGraph from JSON' \u2192 'Renders Outline to DrawIO' \u2192 'Saves DrawIO File'", "", "Example Execution Order Analysis (Payment Domain):", "- CLI: 'process-payment --payment-id 123 --amount 50.00'", "- Code Flow: Parse args \u2192 Validate payment \u2192 Authorize payment \u2192 Process payment \u2192 Confirm payment", "- Typical Order: 1. User invokes process payment, 2. System validates payment details, 3. System authorizes payment, 4. System processes payment, 5. System confirms payment", "- Stories: 'User invokes process payment command' \u2192 'System validates payment details' \u2192 'System authorizes payment with payment processor' \u2192 'System processes payment transaction' \u2192 'System confirms payment and sends notification'", "", "Create STORY JOURNEY from execution order:", "  - Start with entry point (CLI invocation, UI click, MCP tool call)", "  - Follow the code flow through operations", "  - Include error handling and alternative paths", "  - End with completion (save, return result, display)", "", "Example Story Journey (Story-IO Domain):", "- Entry: 'User invokes render-outline command from CLI'", "- Flow: 'CLI parses arguments' \u2192 'CLI loads story graph' \u2192 'CLI invokes render' \u2192 'System renders outline' \u2192 'System saves file'", "- Error: 'If file not found, CLI displays error message'", "- Completion: 'CLI returns success message'", "", "Example Story Journey (Payment Domain):", "- Entry: 'User invokes process payment command' (WHEN: user wants to charge customer, WHY: to complete purchase, OUTCOME: CLI/MCP/API receives request)", "- Flow: 'System validates payment details' (WHEN: after request received, WHY: to ensure payment can be processed, OUTCOME: details validated) \u2192 'System authorizes payment' (WHEN: after validation, WHY: to check funds/fraud, OUTCOME: payment authorized) \u2192 'System processes payment' (WHEN: after authorization, WHY: to execute transaction, OUTCOME: payment processed) \u2192 'System confirms payment' (WHEN: after processing, WHY: to notify user, OUTCOME: payment confirmed)", "- Error: 'If validation fails, System displays validation error' (WHEN: validation fails, WHY: to inform user, OUTCOME: error shown, process stops)", "- Completion: 'System returns transaction ID' (WHEN: after confirmation, WHY: to provide reference, OUTCOME: transaction ID returned)", "", "**DON'T:** Don't create stories from code structure or method calls", "Don't create stories from every method call in code", "Don't create stories from internal function calls", "Don't create stories from data structure operations", "", "Wrong Story Creation:", "- From method: 'StoryIODiagram.__init__()' (internal initialization)", "- From function: 'parse_json()' (internal parsing)", "- From operation: 'dict.get()' (data access, not behavior)", "- From method: 'PaymentProcessor.charge_card()' (internal implementation)", "", "Focus on USER/SYSTEM VISIBLE BEHAVIORS, not internal implementation", "", "**DO:** Lay out story journey from end-to-end flow", "Create STORY JOURNEY that shows complete end-to-end flow:", "  - Start: How does user/system initiate? (CLI command, UI click, API call)", "  - Middle: What happens step by step? (parse, load, process, transform)", "  - End: How does it complete? (save, return, display, notify)", "", "Include CONTEXT for each story:", "  - WHEN does it happen? (trigger, condition, user action)", "  - WHY does it happen? (purpose, user need, system requirement)", "  - WHAT is the outcome? (result, state change, user experience)", "  - ACTOR: Who performs the action? (User, System, CLI, MCP, API, etc.)", "", "Example Complete Story Journey (Story-IO Domain):", "(E) Render StoryGraph", "  and (E) Render Outline", "    and (S) User --> invokes render-outline command from CLI", "    and (S) CLI --> parses command arguments", "    and (S) CLI --> loads story graph from JSON file", "    and (S) System --> renders outline to DrawIO format", "    and (S) System --> saves DrawIO file", "", "Example Complete Story Journey (Payment Domain):", "(E) Process Payment", "  and (E) Process Card Payment", "    and (S) User --> invokes process payment command", "    and (S) System --> validates payment details", "    and (S) System --> authorizes payment with payment processor", "    and (S) System --> processes payment transaction", "    and (S) System --> confirms payment and sends notification", "", "Include ERROR HANDLING and ALTERNATIVE PATHS:", "  - What happens when file not found?", "  - What happens when parsing fails?", "  - What happens when validation fails?", "  - What happens when authorization fails?", "", "Example Error Handling (Story-IO Domain):", "  and (S) CLI --> displays error message if story graph file not found", "", "Example Error Handling (Payment Domain):", "  and (S) System --> displays validation error if validation fails", "  and (S) System --> displays authorization declined message if authorization fails", "", "**DON'T:** Don't create isolated stories without journey context", "Don't create stories that are just operations without context", "Don't create stories that don't connect to a journey", "Don't create stories without when/why/outcome/actor", "", "Wrong Story Creation:", "- (S) System --> loads StoryGraph (no context: when? why? what happens next?)", "- (S) System --> parses JSON (no context: when? why? what's the outcome?)", "- (S) System --> saves file (no context: when? why? what triggers this?)", "- (S) System --> processes payment (no context: when? why? what's the outcome?)", "", "Every story must be part of a JOURNEY with CONTEXT (when/why/outcome/actor)", "", "", "**Rule:** focus_real_actions_on_domain_concepts.json", "When shaping stories, stories must describe REAL ACTIONS that users or other actors (even system or technical actors) can perform, not capabilities or structural descriptions. Organize by lifecycle flow (Load, Read, Edit, Render, Synchronize, Search, Save). CRITICAL: Actor names must NOT appear in Epic/Sub-Epic/Story names - names are Verb-Noun only.", "", "**DO:** Use real actions - actor separate from name", "Stories describe actions: Load, Read, Add, Remove, Render, Search, Save", "Organize by lifecycle: Load \u2192 Read \u2192 Edit \u2192 Render \u2192 Synchronize \u2192 Search \u2192 Save", "Use Verb-Noun format for names: '[Verb] [Noun]' - NO ACTOR in name", "Focus on what users/code CAN DO, not what things ARE", "", "NAMING RULE - Actor NOT in Name:", "- Epic name: 'Places Order' (NOT 'Customer Places Order')", "- Sub-Epic name: 'Validates Payment' (NOT 'PaymentValidator Validates Payment')", "- Story name: 'Processes Order Items' (NOT 'OrderProcessor Processes Order Items')", "- Actor is documented separately, not in the name itself", "", "ACTORS for User/System Stories (normal stories):", "- Use human/system actors: User, Developer, System, Customer, Admin", "- Actor is implicit or documented separately from name", "- Examples: Epic 'Places Order' has actor: Customer", "- Examples: Sub-Epic 'Validates Payment' has actor: System", "", "ACTORS for Technical Stories (deep internal class-level interactions):", "- Domain concepts CAN be actors: OrderProcessor, PaymentValidator, InventoryManager, Cart, Product", "- Actor is documented separately, NOT in name", "- Examples: Epic 'Loads Order Data' has actor: OrderProcessor (technical)", "- Examples: Sub-Epic 'Updates Inventory' has actor: InventoryManager (technical)", "- Examples: Story 'Calculates Total' has actor: Cart (technical)", "- This is acceptable when documenting class-to-class interactions internally", "", "**DON'T:** Avoid capabilities, structural descriptions, passive states, and actors in names", "Don't use capability nouns or structural descriptions", "Don't describe what things ARE or CONTAIN", "Don't use passive states or properties as stories", "CRITICAL: Don't put actor in Epic/Sub-Epic/Story names", "", "Wrong Examples (capabilities/structure):", "- 'PaymentValidator Contains Validation Logic' (capability, not action)", "- 'OrderProcessor Tracks Order Count' (passive state, not action)", "- 'Cart Hierarchy Foundation' (structural description)", "- 'Domain Components Implementation' (capability)", "- 'Product Represents Item' (structural description)", "", "Wrong Examples (actor in name):", "- Epic: 'Customer Places Order' (actor in name - WRONG)", "- Sub-Epic: 'OrderProcessor Validates Payment' (actor in name - WRONG)", "- Sub-Epic: 'Cart Adds Product' (actor in name - WRONG)", "- Story: 'InventoryManager Updates Stock' (actor in name - WRONG)", "", "Correct Examples (actor NOT in name):", "- Epic: 'Places Order' (actor: Customer, documented separately)", "- Sub-Epic: 'Validates Payment' (actor: PaymentValidator, documented separately)", "- Sub-Epic: 'Adds Product' (actor: Cart, documented separately)", "- Story: 'Updates Stock' (actor: InventoryManager, documented separately)", "", "These are not actions users/code can perform - they describe structure or capabilities", "Instead ask: What can users/code DO with this domain concept?", "- Instead of 'Contains Logic' \u2192 'Generates XML' or 'Renders Diagram'", "- Instead of 'Tracks Count' \u2192 'Reads Count' or 'Updates Count'", "- Instead of 'Represents X' \u2192 'Creates X' or 'Loads X'", "", "", "**Rule:** focus_user_and_system_activities.json", "Focus story maps on both user AND system activities, not tasks. Stories should outline user and system behavior patterns.", "", "**DO:** Include both user and system activities in story descriptions", "User submits order, System validates payment", "Customer views products, System displays inventory", "Use user activity patterns: User submits, Customer places", "Use system activity patterns: System validates, System sends", "Focus stories on user interactions and how the system behaves as observed by users", "Example: Customer places order with payment details", "", "ACTOR SELECTION (documented separately, NOT in name):", "- For user/system stories: Actors are User, System, Developer, Customer, Admin (human/system actors)", "- For technical stories (deep internal class-level): Domain concepts can be actors (StoryIODiagram, DrawIORenderer, DrawIOSynchronizer, User, Increment, Component)", "- Technical stories document class-to-class interactions where domain concepts act as actors", "", "CRITICAL NAMING RULE:", "- Actor must NOT appear in Epic/Sub-Epic/Story name", "- Name format: '[Verb] [Noun]' only", "- Examples: 'Loads StoryGraph' (actor: StoryIODiagram, documented separately)", "- Examples: 'Adds Sub-Epic' (actor: Epic, documented separately)", "- Examples: 'Changes Parent' (actor: Component, documented separately)", "", "**DON'T:** Avoid task-oriented language that describes implementation", "Avoid task-oriented language that describes implementation", "Don't use task language for building or setting up", "Don't focus only on user activities (ignore system activities)", "Don't focus only on tasks (instead of activities)", "Don't use development task language: implement, create, refactor, optimize, fix, build, set up", "Don't use technical implementation details: query database, call API, update table", "", "Wrong Examples:", "- Only user activities: User submits order, User views products (missing system activities)", "- Only tasks: Implement order submission, Create payment validation (not activities)", "- Implement order submission, Create payment validation", "- Build product listing page, Set up inventory display", "", "", "**Rule:** identify_system_stories.json", "System stories capture system-to-system interactions that are not user-facing. They represent internal system behavior that crosses system boundaries (e.g., microservice to microservice, component to component). System stories should be identified and marked with story_type: 'system'.", "", "**DO:**", "- Identify system-to-system interactions: Storage Microservice validates payload from Local Mgmt System", "API Gateway routes request to Authentication Service", "Message Queue delivers event to Notification Service", "- Mark system stories with story_type: 'system': Story: 'Validate Payload' with story_type: 'system'", "Story: 'Route Request' with story_type: 'system'", "Story: 'Deliver Event' with story_type: 'system'", "- Use system stories for internal system behavior: System stories represent behavior that happens between systems/components", "System stories are not directly visible to end users", "System stories enable user-facing stories to function", "", "**DON'T:**", "- Don't mark user-facing stories as system stories: User clicks button \u2192 NOT a system story", "User views dashboard \u2192 NOT a system story", "User submits form \u2192 NOT a system story", "- Don't confuse system stories with technical stories: System stories = system-to-system behavior (dark blue in DrawIO)", "Technical stories = implementation tasks (black/white in DrawIO, normally avoided)", "", "", "**Rule:** maximize_integration_of_related_concepts.json", "When shaping stories, maximize integration of related concepts", "", "**DO:** Group concepts that the user sees as one capability", "Group concepts that the user sees as one capability", "Nest implementation details under the sub-epic they serve", "Keep related data and operations together", "Eliminate artificial boundaries based on code organization", "", "**DON'T:** Don't separate related concepts", "Don't separate related concepts into different major sections", "Wrong: Split based on code layers (data, business, presentation)", "Don't duplicate related concepts across multiple sections", "Wrong: Create gaps that break the user's mental model", "", "", "**Rule:** place_domain_concepts_by_relevance.json", "When shaping stories, place domain concepts locally or globally based on relevance to one or multiple sub_epics", "", "**DO:** Place domain concepts at the most specific level, favoring local placement", "Favor local placement: Place domain_concepts at the sub_epic level when they are relevant to only that sub_epic", "Think about the core: Consider core domain concepts that span multiple sub_epics - these should be placed at the parent epic/sub_epic level", "Elevate when shared: If a domain concept is used by multiple child sub_epics, elevate it to the parent level", "Start local, elevate if needed: Begin with local placement, but elevate if the concept is referenced by multiple sub_epics", "", "Correct Examples (Local Placement):", "- Sub-Epic 'Validates Payment' has domain_concept: 'Payment' (only used in this sub-epic)", "- Sub-Epic 'Processes Order' has domain_concept: 'Order' (only used in this sub-epic)", "- Sub-Epic 'Updates Inventory' has domain_concept: 'InventoryItem' (only used in this sub-epic)", "", "Correct Examples (Global Placement):", "- Epic 'Process Payment' has domain_concept: 'Payment' (used by multiple sub-epics: Validate Payment, Authorize Payment, Process Transaction)", "- Epic 'Manage Orders' has domain_concept: 'Order' (used by multiple sub-epics: Create Order, Update Order, Cancel Order)", "- Sub-Epic 'Order Management' has domain_concept: 'Customer' (used by multiple child sub-epics: Create Customer Order, Update Customer Order)", "", "**DON'T:** Don't place domain concepts at wrong levels or duplicate them unnecessarily", "Don't place domain concepts at epic level when they're only used in one sub-epic", "Wrong: Epic 'Payment System' has domain_concept: 'PaymentValidator' (only used in 'Validates Payment' sub-epic - should be local)", "Don't duplicate domain concepts at multiple levels", "Wrong: Both Epic and Sub-Epic have 'Payment' concept when it's only used in one sub-epic", "Don't place core domain concepts too locally if they're used across multiple epics", "Wrong: Core concept 'User' placed only in one sub-epic when it's used across multiple epics", "Don't ignore shared usage - if multiple sub-epics reference a concept, elevate it", "Wrong: 'Order' concept placed in each sub-epic separately when all sub-epics use it (should be at parent level)", "", "", "**Rule:** prevent_generic_capabilities.json", "CRITICAL: Stories must describe specific actions with actors, not generic capabilities. Reject stories that describe what system IS (capabilities) vs what system DOES (behaviors).", "", "**DO:** Use specific actions with actors and outcomes", "Stories must have specific actors performing specific actions", "Stories must describe what system DOES (behaviors), not what system IS (capabilities)", "Stories must have specific outcomes, not generic descriptions", "", "Correct Examples (specific behaviors with actors):", "- 'User invokes MCP tool and system routes to StoryIO handler' (specific: user, MCP tool, routing action)", "- 'Developer adds sub-epic Render Exploration to epic Render StoryGraph' (specific: developer, sub-epic name, epic name)", "- 'System loads story graph from JSON file when user requests render' (specific: system, load action, trigger)", "- 'CLI determines workspace root from current directory' (specific: CLI, determine action, source)", "", "Actor Requirements:", "- Every story must have an actor (User, System, Developer, CLI, StoryIODiagram, etc.)", "- Actor must be documented separately (not in name)", "- Actor must be specific (not generic 'Component' or 'System')", "- Actor must perform the action (not just be present)", "", "**DON'T:** Don't use generic capabilities or passive descriptions", "Don't describe what system IS (capabilities)", "Don't use generic action descriptions without actors", "Don't use passive states or properties as stories", "", "Wrong Examples (generic capabilities):", "- 'Exposes Tools' (capability - what tools? when? to whom? what happens?)", "- 'Provides Server Interface' (capability - what interface? when? why?)", "- 'Contains Validation Logic' (capability - not an action)", "- 'Tracks Order Count' (passive state - not an action)", "", "Capability Indicators (REJECT):", "- Describes what system IS: 'Exposes', 'Provides', 'Contains', 'Represents'", "- No specific actor or action", "- No specific outcome or trigger", "- Generic description without context", "", "Instead, ask:", "- Who performs this action? (actor)", "- When does this happen? (trigger/context)", "- What specific outcome occurs? (result)", "- Why does this happen? (purpose in journey)", "", "", "**Rule:** prevent_implementation_details_as_stories.json", "CRITICAL: Implementation operations (serialize, convert, calculate, generate XML, apply formatting) must be steps within stories, not stories themselves. Stories must focus on user/system outcomes, not technical mechanisms.", "", "**DO:** Keep implementation details as steps within stories", "Implementation operations must be steps within stories", "Stories must focus on user/system outcomes, not technical mechanisms", "Stories must describe what user/system experiences, not how it's implemented", "", "Correct Examples (outcomes, not mechanisms):", "- Story: 'User saves story graph and system writes JSON file' \u2192 Steps: 'System converts diagram to story graph format', 'System serializes components to JSON', 'System writes file'", "- Story: 'User requests render and system generates DrawIO diagram' \u2192 Steps: 'System generates DrawIO XML', 'System calculates component positions', 'System applies styles', 'System saves file'", "- Story: 'User edits epic and system updates diagram' \u2192 Steps: 'System updates epic data', 'System recalculates layout', 'System refreshes diagram'", "", "Story vs Step Distinction:", "- Story = User/system outcome (what they experience)", "- Step = Implementation detail (how it's done)", "- Story = Independently valuable (can be tested/delivered)", "- Step = Part of story (not independently valuable)", "", "**DON'T:** Don't make implementation operations into stories", "Don't create stories for implementation operations", "Don't expose technical mechanisms as user stories", "Don't break implementation steps into separate stories", "", "Wrong Examples (implementation details as stories):", "- 'Convert Diagram to StoryGraph Format' (implementation - should be step in 'Save StoryGraph' story)", "- 'Serialize Components to JSON' (implementation - should be step in 'Save StoryGraph' story)", "- 'Generate DrawIO XML from StoryGraph' (implementation - should be step in 'Render Outline' story)", "- 'Calculate Component Positions' (implementation - should be step in 'Render Outline' story)", "- 'Apply Component Styles' (implementation - should be step in 'Render Outline' story)", "- 'Save DrawIO XML to File' (implementation - should be step in 'Render Outline' story)", "", "Implementation Operation Indicators (REJECT as stories):", "- Serialize, deserialize, convert, transform, format", "- Calculate, compute, generate, create (technical artifacts)", "- Apply, set, configure (technical settings)", "- Save, write, store (without user context)", "", "These are implementation mechanisms, not user/system behaviors", "They should be steps within stories that describe outcomes", "", "Instead, ask:", "- What does the user/system experience? (story)", "- How is it implemented? (step within story)", "- What's the outcome? (story)", "- What's the mechanism? (step)", "", "", "**Rule:** refine_scope_to_functional_accomplishment.json", "Refine Scope to Functional Accomplishment", "", "**DO:** Focus on functional outcomes, not mechanisms", "Focus on functional outcomes, not mechanisms", "Frame domains by what they accomplish for users", "Ask about user enablement: What does this enable the user to do or understand?", "State the transformation or capability provided", "Be specific about the functional benefit", "", "**DON'T:** Don't frame domains by their technical implementation", "Don't frame domains by their technical implementation", "Wrong: Focus on 'how' before 'what'", "Don't use generic system capabilities as domain names", "Wrong: Describe mechanisms instead of outcomes", "", "", "**Rule:** size_stories_3_to_12_days.json", "Size stories to fall within 3-12 day effort range for effective planning and frequent delivery.", "", "**DO:** Create stories that represent complete flows within the effort range", "Create stories that represent complete flows within the effort range", "Example: Customer places order (complete flow, 3-5 days)", "Break/group stories so that most fall into a 3-12 day effort range", "Enable frequent feedback by decomposing the work into smaller items", "", "**DON'T:** Avoid stories that are too large or too small", "Avoid stories that are too large and span multiple weeks", "Don't arbitrarily decompose stories to a functional level, regardless of size", "", "Wrong Examples:", "- Order management system (too large, 20+ days)", "- Create stories that are too small without considering value", "", "", "**Rule:** story_map_code_approach.json", "Quick checklist for extracting story maps from code. Follow this process step-by-step.", "", "", "**Rule:** use_active_behavioral_language.json", "When shaping stories, use active behavioral language with action verbs. Describe behaviors, not tasks or capabilities.", "", "**DO:** Use action verbs to describe what happens", "Use action verbs to describe what happens", "Example: User submits order, System validates payment", "Favor active behavioral language over functional/capability breakup", "Use story maps to outline user and system behavior (NOT tasks)", "Use action verbs: submits, views, validates, sends, displays", "Describe behaviors: [Actor] [action] [object] - but actor NOT in name", "Use active behavior language: Place order (active behavior), Validate payment (active behavior)", "", "CRITICAL NAMING RULE - Actor NOT in Name:", "- Epic/Sub-Epic/Story names must be Verb-Noun format: '[Verb] [Noun]'", "- Actor is documented separately, NOT included in the name", "- Verb can be in various forms: imperative ('Add'), infinitive ('To Add'), third person ('Adds') - all are acceptable", "- Noun can be singular or plural based on context - DO NOT pluralize unnecessarily", "- Prepositional phrases and context are part of the noun phrase and should be preserved (e.g., 'Add Minion To Mob' is correct)", "- Examples: Epic 'Places Order' (actor: Customer, documented separately)", "- Examples: Sub-Epic 'Validates Payment' (actor: PaymentValidator, documented separately)", "- Examples: Story 'Updates Stock' (actor: InventoryManager, documented separately)", "- Examples: Story 'Add Minion To Mob' (verb-noun with context preserved - CORRECT)", "- Examples: Story 'Group Minions' (verb-noun, plural noun is correct for context - CORRECT)", "", "ACTOR SELECTION (documented separately, not in name):", "- For user/system stories: Use human/system actors (User, System, Developer, Customer)", "- For technical stories (deep internal): Domain concepts can be actors (OrderProcessor, PaymentValidator, InventoryManager, Cart, Product)", "- Actor is implicit or explicitly documented, but NOT in the name string", "", "**DON'T:** Avoid capability nouns and task language", "Avoid capability nouns that describe functions rather than behaviors", "Don't use functional or capability-based language instead of behavioral language", "Don't use capability nouns: Management, Processing, Administration", "Don't use task verbs: implement, create, build, set up", "Don't use task language", "", "Wrong Examples:", "- Order Management, Payment Processing (capability nouns)", "- Focus on tasks instead of behaviors", "- Order Management (capability), Implement order placement (task)", "", "Wrong Examples (actor in name):", "- Epic: 'Customer Places Order' (actor in name - WRONG)", "- Sub-Epic: 'OrderProcessor Validates Payment' (actor in name - WRONG)", "- Sub-Epic: 'Cart Adds Product' (actor in name - WRONG)", "- Story: 'InventoryManager Updates Stock' (actor in name - WRONG)", "", "Correct: Name is Verb-Noun only, actor documented separately", "", "", "**Rule:** use_outcome_verbs_not_communication_verbs.json", "Use Outcome Verbs, Not Communication Verbs", "", "**DO:** Use verbs that describe artifacts/outcomes", "Use verbs that describe artifacts/outcomes", "Examples: Animation, Feedback, Indicators, Configuration", "Name concepts by what they ARE or CREATE", "Examples: Power Activation Animation, Combat Outcome Feedback", "Focus on tangible results", "Examples: Hit Indicators, Save Result Feedback", "", "**DON'T:** Don't use generic communication verbs", "Don't use generic communication verbs", "Examples: showing, displaying, visualizing, presenting", "Don't use vague enablement verbs", "Examples: providing, enabling, allowing", "Don't name concepts by their mechanism", "Wrong Examples: Visualizing Power Activation, Showing Combat Results", "", "", "Review each validation rule carefully. Your generated content must pass all validations on the first attempt", "", "Generate the knowledge graph (structured JSON content) according to the schema and rules", "", "**OUTPUT:**a structured JSON knowledge graph that will be saved to the workspace area", "", "** UPDATING vs CREATING:**", "- Check if knowledge graph already exists in workspace area", "- If knowledge graph EXISTS, you are UPDATING it (not creating from scratch)", "- When updating, preserve existing content and add/modify only what's needed based on current behavior", "- If knowledge graph does NOT exist, create new one following the schema", "", "**AUTOMATIC VALIDATION AND FIXES: After generating the knowledge graph, automatically run the validate_rules action without confirming or waiting. Print ALL violations found (including rule name, violation message, severity, and location for each violation). Then review each violation against the specific rules identified by the scanner, and make necessary edits to fix all violations. Continue iterating until all violations are resolved before proceeding to render_output.**", "", "**AUTOMATIC PROGRESSION: Once all fixes are completed, automatically proceed to render_output action without stopping or waiting for user confirmation. These two actions should execute sequentially as a single workflow step.**", ""], "behavior_instructions": ["Hey, going to be going away for a little while to create the knowledge graph. Go get a cup of coffee \ud83d\ude0a", "", "**BUILD KNOWLEDGE GRAPH - STORY GRAPH AND DOMAIN MODEL CREATION:**", "", "Build the initial story graph structure AND domain model from gathered context and planning decisions. Capture domain concepts alongside story structure.", "", "**Configuration:**", "- Reference: build_story_graph_outline.json", "- Template: story-graph-outline.json", "", "**CRITICAL - TEMPLATE STRUCTURE COMPLIANCE:**", "1. The build_knowledge action has injected 'knowledge_graph_template' into your instructions", "2. This template shows the EXACT JSON structure your output MUST match", "3. **DO NOT invent your own schema** - examine the template and replicate its structure", "4. The template includes:", "   - Root level keys (e.g., 'epics' array only, NOT 'capability', 'increments', 'features')", "   - Required fields at each level (e.g., 'sequential_order', 'estimated_stories', 'domain_concepts')", "   - Nested structure (epics \u2192 sub_epics \u2192 story_groups \u2192 stories)", "   - Field types and formats (e.g., 'connector': null vs 'connector': 'and')", "5. Look at the '_explanation' section in the template for structural rules", "6. Your output must be structurally identical - only the values (names, responsibilities, etc.) differ", "", "**CRITICAL: Story Graph Structure - Main Epics Section is Single Source of Truth**", "", "**Two-Section Architecture (if increments are added later):**", "", "1. **Main 'epics' Section (Single Source of Truth)**", "   - Contains ALL story details: name, users, sequential_order, story_type, connector, story_groups, etc.", "   - This is the PRIMARY location - all story details must be here", "   - Used as the source for all views (outline, increments, discovery, exploration)", "", "2. **'increments' Section (Minimal Reference View - if present)**", "   - This is a MINIMAL REFERENCE VIEW - just enough to know which stories belong to which increment", "   - Stories in increments should ONLY contain: name, users (optional), sequential_order", "   - NO story details (no story_type, no connector, no story_groups, no domain_concepts, etc.)", "   - Increments are a COPY of the outline view at the story level - just for mapping stories to increments", "   - All story details come from the main epics section", "", "**Domain Model Creation (Integrated with Story Graph):**", "1. Domain concepts are integrated directly into the story graph structure", "2. Place domain_concepts at epic and sub_epic levels based on relevance", "3. Apply domain shaping rules (context: 'when shaping the domain')", "4. **DO NOT create separate domain_graph.json or domain model files**", "5. All domain modeling is captured within story-graph.json via domain_concepts arrays", "", "**Domain Concept Placement Logic:**", "- **Local placement (preferred)**: Place domain_concepts at the sub_epic level when they are relevant to only that sub_epic", "- **Global placement**: Elevate domain_concepts to parent epic/sub_epic level when they are relevant to multiple child sub_epics", "- **Favor local**: Start with local placement, but elevate if the concept is used by multiple sub_epics", "**Process:**", "1. Use clarification data from docs/stories/clarification.json", "2. Use planning decisions from docs/stories/planning.json", "3. **EXAMINE the knowledge_graph_template structure injected into your instructions**", "4. Build story graph matching that exact structure (root keys, field names, nesting)", "5. Identify domain concepts from clarification and planning data", "6. Map domain concepts to epics/sub_epics based on relevance (see placement logic above)", "7. Populate domain_concepts arrays in story-graph.json with proper placement", "8. Create story-graph.json in project area", "7. Populate domain_concepts arrays in story-graph.json with proper placement", "8. Create story-graph.json and domain model outputs in project area (same location)", "", "**Output:**", "- File: {project_area}/story-graph.json (JSON story graph with epics, sub_epics, story_groups, stories, and domain_concepts integrated)", "", "**Next Step:** Proceed to render step after story graph is created."], "knowledge_graph_template": {"_explanation": {"hierarchical": "sub_epics can contain: nested sub_epics or story_groups. sequential_order is always an integer (1, 2, 3, 4) - unique within parent, no decimals.", "connector": "Story groups: 'and' or 'or' (null for first group). Stories within groups: 'and' or 'or' (null for first story). Epics and sub_epics don't have connectors.", "domain_placement": "domain_concepts: 'local' if relevant to single sub_epic, 'global' if relevant to multiple sub_epics. Place at most specific level (local preferred), but elevate to parent if used by multiple children."}, "epics": [{"name": "", "sequential_order": 1, "estimated_stories": null, "domain_concepts": [{"name": "", "responsibilities": [{"name": "", "collaborators": []}]}], "sub_epics": [{"name": "", "sequential_order": 1, "estimated_stories": null, "domain_concepts": [{"name": "", "responsibilities": [{"name": "", "collaborators": []}]}], "sub_epics": [], "story_groups": [{"type": "and", "connector": null, "sequential_order": 1, "stories": [{"name": "", "sequential_order": 1, "connector": null, "users": [], "story_type": "user"}, {"name": "", "sequential_order": 2, "connector": "and", "users": [], "story_type": "user"}]}, {"type": "and", "connector": "or", "sequential_order": 2, "stories": [{"name": "", "sequential_order": 1, "connector": null, "users": [], "story_type": "user"}, {"name": "", "sequential_order": 2, "connector": "and", "users": [], "story_type": "user"}, {"name": "", "sequential_order": 3, "connector": "and", "users": [], "story_type": "user"}]}, {"type": "or", "connector": "or", "sequential_order": 3, "stories": [{"name": "", "sequential_order": 1, "connector": null, "users": [], "story_type": "user"}]}]}], "stories": []}]}, "knowledge_graph_config": {"name": "build_story_graph_outline", "path": "docs/stories/", "template": "story-graph-outline.json", "output": "story-graph.json"}, "template_path": "C:\\dev\\augmented-teams\\agile_bot\\bots\\story_bot\\behaviors\\1_shape\\2_content\\1_knowledge_graph\\story-graph-outline.json", "config_path": "C:\\dev\\augmented-teams\\agile_bot\\bots\\story_bot\\behaviors\\1_shape\\2_content\\1_knowledge_graph\\build_story_graph_outline.json", "schema": "**Schema Rules:**\n- **Hierarchical**: sub_epics can contain: nested sub_epics or story_groups. sequential_order is always an integer (1, 2, 3, 4) - unique within parent, no decimals.\n- **Connector**: Story groups: 'and' or 'or' (null for first group). Stories within groups: 'and' or 'or' (null for first story). Epics and sub_epics don't have connectors.\n- **Domain Placement**: domain_concepts: 'local' if relevant to single sub_epic, 'global' if relevant to multiple sub_epics. Place at most specific level (local preferred), but elevate to parent if used by multiple children.\n\n**Template Structure (JSON Schema):**\n```json\n{\n  \"_explanation\": {\n    \"hierarchical\": \"sub_epics can contain: nested sub_epics or story_groups. sequential_order is always an integer (1, 2, 3, 4) - unique within parent, no decimals.\",\n    \"connector\": \"Story groups: 'and' or 'or' (null for first group). Stories within groups: 'and' or 'or' (null for first story). Epics and sub_epics don't have connectors.\",\n    \"domain_placement\": \"domain_concepts: 'local' if relevant to single sub_epic, 'global' if relevant to multiple sub_epics. Place at most specific level (local preferred), but elevate to parent if used by multiple children.\"\n  },\n  \"epics\": [\n    {\n      \"name\": \"\",\n      \"sequential_order\": 1,\n      \"estimated_stories\": null,\n      \"domain_concepts\": [\n        {\n          \"name\": \"\",\n          \"responsibilities\": [\n            {\n              \"name\": \"\",\n              \"collaborators\": []\n            }\n          ]\n        }\n      ],\n      \"sub_epics\": [\n        {\n          \"name\": \"\",\n          \"sequential_order\": 1,\n          \"estimated_stories\": null,\n          \"domain_concepts\": [\n            {\n              \"name\": \"\",\n              \"responsibilities\": [\n                {\n                  \"name\": \"\",\n                  \"collaborators\": []\n                }\n              ]\n            }\n          ],\n          \"sub_epics\": [],\n          \"story_groups\": [\n            {\n              \"type\": \"and\",\n              \"connector\": null,\n              \"sequential_order\": 1,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 2,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            },\n            {\n              \"type\": \"and\",\n              \"connector\": \"or\",\n              \"sequential_order\": 2,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 2,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                },\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 3,\n                  \"connector\": \"and\",\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            },\n            {\n              \"type\": \"or\",\n              \"connector\": \"or\",\n              \"sequential_order\": 3,\n              \"stories\": [\n                {\n                  \"name\": \"\",\n                  \"sequential_order\": 1,\n                  \"connector\": null,\n                  \"users\": [],\n                  \"story_type\": \"user\"\n                }\n              ]\n            }\n          ]\n        }\n      ],\n      \"stories\": []\n    }\n  ]\n}\n```", "rules": [{"rule_file": "rules\\maintain_verb_noun_consistency.json", "rule_content": {"description": "Maintain verb-noun consistency from epic to feature to story to scenario", "scanner": "agile_bot.bots.base_bot.src.scanners.verb_noun_scanner.VerbNounScanner", "do": {"examples": [{"description": "Use consistent verb-noun language across all levels", "content": ["Epic: Manage Orders \u2192 Feature: Place Order \u2192 Story: Customer places order \u2192 Scenario: When customer places order..."]}, {"description": "Maintain consistent terminology throughout hierarchy", "content": ["Epic, feature, story, and scenario all use same verb-noun pattern"]}, {"description": "Use verb-noun language in scenario sentences", "content": ["When user submits form, then system validates data"]}]}, "dont": {"examples": [{"description": "Don't switch formats between levels", "content": ["Epic: Order Management \u2192 Feature: Place Order (inconsistent format)"]}, {"description": "Don't mix verb-noun with other formats", "content": ["Epic uses verb-noun, but feature uses noun-only format"]}, {"description": "Don't use different terminology at different levels", "content": ["Epic says 'Orders', feature says 'Order Processing', story says 'Process Order'"]}]}}}, {"rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "rule_content": {"description": "When mapping stories, carefully distinguish between sequential spine (essential path) and optional paths, alternate routes, or additional functionality that is not strictly essential. Sequential stories form the mandatory flow; optional stories are alternatives, enhancements, or non-essential features.", "do": {"examples": [{"description": "Identify the essential spine first", "content": ["Start by identifying the minimal essential path that delivers core value", "The spine represents the mandatory sequence: Story1 AND Story2 AND Story3", "Spine stories get sequential_order numbers (1, 2, 3, etc.)", "Spine stories are required for the feature to deliver its core purpose", "Ask: 'What is the minimum path to deliver value?'"]}, {"description": "Mark optional paths clearly", "content": ["Optional stories branch from or enhance the spine but are not required", "Mark optional stories with 'optional: true' in the story structure", "Optional stories may have sequential_order if they're part of an alternative flow", "Optional stories represent: alternate routes, enhancements, nice-to-have features", "Ask: 'Can the feature deliver value without this story?'"]}, {"description": "Distinguish types of optional paths with concrete examples", "content": ["Alternate routes: User logs in with email (sequential_order: 2) OR User logs in with social media (sequential_order: 2.1, optional: true)", "Enhancements: User views dashboard (sequential_order: 3) AND User customizes dashboard (sequential_order: 3.1, optional: true)", "Additional functionality: User views dashboard (sequential_order: 3) AND User shares dashboard (sequential_order: 3.2, optional: true)", "Error handling: User enters invalid data (sequential_order: 4) AND System shows error message (sequential_order: 4.1, optional: true)"]}, {"description": "Correct mapping examples", "content": ["Spine: User creates account (sequential_order: 1) AND User logs in (sequential_order: 2) AND User views dashboard (sequential_order: 3)", "Optional alternate: User logs in with email (sequential_order: 2) OR User logs in with social media (sequential_order: 2, optional: true)", "Optional enhancement: User views dashboard (sequential_order: 3) AND User customizes dashboard (optional: true, priority: 1)", "Additional functionality: User views dashboard (sequential_order: 3) AND User shares dashboard (optional: true, priority: 2)"]}]}, "dont": {"examples": [{"description": "Don't mark everything as sequential", "content": ["Don't assign sequential_order to all stories when some are optional", "Don't treat alternate routes as part of the spine", "Don't include enhancements in the mandatory sequential flow", "Don't confuse 'nice to have' with 'must have'"]}, {"description": "Don't omit optional markers", "content": ["Don't leave optional stories unmarked - be explicit", "Don't assume all stories in a feature are mandatory", "Don't mix optional and mandatory without clear distinction", "Don't fail to identify the spine before adding optional paths"]}, {"description": "Wrong mapping examples", "content": ["Wrong: User creates account (1) AND User logs in with email (2) AND User logs in with social media (3) - social media should be optional", "Wrong: User views dashboard (1) AND User customizes dashboard (2) AND User shares dashboard (3) - customization and sharing should be optional", "Wrong: All stories marked mandatory when some are clearly alternatives or enhancements", "Wrong: No distinction between essential path and optional features"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.spine_optional_scanner.SpineOptionalScanner"}}, {"rule_file": "rules\\stories_developed_and_tested_in_days.json", "rule_content": {"description": "Write stories that can be developed and tested in a matter of days", "do": {"examples": [{"description": "Create stories sized for days, not weeks", "content": ["Story takes 3-5 days to develop and test completely"]}, {"description": "Break large work into smaller stories", "content": ["Large feature broken into multiple stories, each completable in days"]}, {"description": "Focus on delivering complete, testable functionality quickly", "content": ["Each story delivers a complete piece of functionality that can be tested"]}]}, "dont": {"examples": [{"description": "Don't create stories that span multiple weeks", "content": ["Story requires 3+ weeks to complete (too large)"]}, {"description": "Don't create stories that can't be tested independently", "content": ["Story requires multiple other stories before it can be tested"]}, {"description": "Don't create stories without clear boundaries", "content": ["Story is vague about scope and completion criteria"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.story_sizing_scanner.StorySizingScanner"}}, {"rule_file": "rules\\stories_follow_invest_principles.json", "rule_content": {"description": "Ensure stories follow INVEST principles (Independent, Negotiable, Valuable, Estimable, Small, Testable)", "do": {"examples": [{"description": "Independent - story can be developed independently", "content": ["Story doesn't depend on other stories being completed first"]}, {"description": "Negotiable - story details can be negotiated", "content": ["Story allows for discussion and refinement of requirements"]}, {"description": "Valuable - story delivers value to user or business", "content": ["Story provides measurable value when completed"]}, {"description": "Estimable - story can be estimated", "content": ["Story is clear enough to estimate effort"]}, {"description": "Small - story can be completed in short time", "content": ["Story can be developed and tested in a matter of days"]}, {"description": "Testable - story has clear acceptance criteria", "content": ["Story has testable outcomes that can be verified"]}]}, "dont": {"examples": [{"description": "Don't create stories that depend on multiple other stories", "content": ["Story requires 5 other stories to be completed first (not independent)"]}, {"description": "Don't create stories that are too large", "content": ["Story spans multiple weeks and includes multiple features (not small)"]}, {"description": "Don't create stories without clear value", "content": ["Story doesn't provide measurable value to users or business"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.invest_principles_scanner.InvestPrinciplesScanner"}}, {"rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "rule_content": {"description": "CRITICAL: Story names MUST follow Verb-Noun format (e.g., 'Move To Mob Leaders Turn', 'Determines Target from Strategy', 'Initiate Mob Attack'), and include italicized description showing component interactions (e.g., '*Combat Tracker moves to any mob member's turn, auto moves to mob leader's turn*'). The story name should be concise and action-oriented, while the description shows the component-to-component interactions.", "scanner": "agile_bot.bots.base_bot.src.scanners.verb_noun_scanner.VerbNounScanner", "do": {"examples": [{"description": "Use concise Verb-Noun format for story names", "content": ["Move To Mob Leaders Turn, Determines Target from Strategy, Initiate Mob Attack"]}, {"description": "Include italicized description showing component interactions", "content": ["*Combat Tracker moves to any mob member's turn, auto moves to mob leader's turn*"]}, {"description": "Make story name concise and action-oriented", "content": ["Story name: 'Initiate Mob Attack' - concise and action-oriented"]}, {"description": "Show component interactions in description", "content": ["Story description shows how components interact with each other"]}]}, "dont": {"examples": [{"description": "Don't use long descriptive names without Verb-Noun format", "content": ["The system should allow users to move to mob leaders turn when..."]}, {"description": "Don't omit component interaction descriptions", "content": ["Story name without italicized description of component interactions"]}, {"description": "Don't use vague or non-action-oriented names", "content": ["Mob Leader Turn System, Attack Mechanism"]}]}}}, {"rule_file": "rules\\use_active_behavioral_language.json", "rule_content": {"description": "Use active behavioral language with action verbs. Describe behaviors, not tasks or capabilities.", "scanner": "agile_bot.bots.base_bot.src.scanners.active_language_scanner.ActiveLanguageScanner", "examples": [{"do": {"description": "Use action verbs to describe what happens", "content": ["Use action verbs to describe what happens", "Example: User submits order, System validates payment", "Favor active behavioral language over functional/capability breakup", "Use story maps to outline user and system behavior (NOT tasks)", "Use action verbs: submits, views, validates, sends, displays", "Describe behaviors: [Actor] [action] [object]", "Use active behavior language: Place order (active behavior), Validate payment (active behavior)"]}, "dont": {"description": "Avoid capability nouns and task language", "content": ["Avoid capability nouns that describe functions rather than behaviors", "Don't use functional or capability-based language instead of behavioral language", "Don't use capability nouns: Management, Processing, Administration", "Don't use task verbs: implement, create, build, set up", "Don't use task language", "", "Wrong Examples:", "- Order Management, Payment Processing (capability nouns)", "- Focus on tasks instead of behaviors", "- Order Management (capability), Implement order placement (task)"]}}]}}, {"rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "rule_content": {"description": "Use verb-noun format for all story elements (epic names, feature names, story titles)", "scanner": "agile_bot.bots.base_bot.src.scanners.verb_noun_scanner.VerbNounScanner", "do": {"examples": [{"description": "Use verb-noun format for epic names", "content": ["Manage Orders, Create Character, Process Payment"]}, {"description": "Use verb-noun format for feature names", "content": ["Place Order, Validate Payment, Save Character"]}, {"description": "Use verb-noun format for story titles", "content": ["Customer places order, System validates payment, User saves character"]}, {"description": "Use verb-noun format for scenario sentences", "content": ["User submits form, System processes request"]}]}, "dont": {"examples": [{"description": "Don't use noun-only or capability-based names", "content": ["Order Management, Payment Processing, Character System"]}, {"description": "Don't mix verb-noun with other formats", "content": ["Order Management and Place Order (mixed format)"]}, {"description": "Don't use gerund forms", "content": ["Ordering, Processing Payments, Creating Characters"]}]}}}, {"rule_file": "apply_7_plus_minus_2_hierarchy.json", "rule_content": {"description": "Apply 7\u00b12 rule for hierarchy: epics contain 4-9 sub-epics, sub-epics contain 4-9 stories. Split when exceeding, merge when below minimum.", "scanner": "agile_bot.bots.base_bot.src.scanners.story_sizing_scanner.StorySizingScanner", "examples": [{"do": {"description": "Maintain hierarchy within the 7\u00b12 cognitive limit range", "content": ["(E) Epic: Contains 4-9 sub-epics", "  - Split into additional Sub-Epics when > 9 sub-epics", "  - Merge with another epic when < 4 sub-epics", "(E) Sub-Epic: Contains 4-9 stories", "  - Split into 2 sub-epics when > 9 stories", "  - Merge with another sub-epic when < 4 stories", "(S) Story: Contains 2-9 acceptance criteria", "  - Split into 2 stories when > 9 AC", "  - Merge with another story when < 2 AC (single AC stories are too small)", "Apply 7\u00b12 cognitive limit principle (optimal range: 5-9, acceptable: 4-9)", "", "Example:", "(E) Manage Orders (10 sub-epics \u2192 SPLIT)", "  and (E) Manage Customer Orders (6 stories) \u2713", "  and (E) Manage Order Fulfillment (4 stories) \u2713", "", "(E) Place Order (12 stories \u2192 SPLIT)", "  and (S) Initiate Order (6 AC) \u2713", "  and (S) Complete Order (6 AC) \u2713", "", "(S) Validate Payment (11 AC \u2192 SPLIT)", "  and (AC) Check Payment Method (5 steps) \u2713", "  and (AC) Process Payment Transaction (6 steps) \u2713"]}, "dont": {"description": "Don't exceed thresholds or create items below minimum", "content": ["Create epics with > 9 sub-epics (use additional Sub-Epics instead)", "Create sub-epics with > 9 stories (split the sub-epic)", "Create stories with > 9 acceptance criteria (split the story)", "Create very small stories with < 2 AC (merge with related story)", "Ignore sizing thresholds during shaping, discovery, or exploration", "", "Wrong Examples:", "- (E) Epic with 15 sub-epics (too many, use additional Sub-Epics)", "- (E) Sub-Epic with 15 stories (too many, split sub-epic)", "- (S) Story with 15 AC (too many, split story)", "- (S) Story with 1 AC (too small, merge with related story)"]}}]}}, {"rule_file": "avoid_noun_redundancy.json", "rule_content": {"description": "When shaping stories, avoid noun redundancy in domain and concept names", "context": "when shaping stories", "examples": [{"do": {"description": "INTEGRATE first: nest related capabilities under one domain", "content": ["INTEGRATE first: nest related capabilities under one domain (90% of cases)", "Only then rename: use distinct nouns ONLY when integration doesn't make sense", "Test for uniqueness: Can you remove the qualifier and still know what it is?", "Use subject-area nouns when domains are genuinely separate", "Only when integration truly doesn't make sense"]}, "dont": {"description": "Don't rename without considering integration", "content": ["Don't rename without considering integration (this hides the real issue)", "Wrong: Repeat same noun with different prefixes: X Animation, Y Animation, Z Animation", "Don't use vague qualifiers to avoid integration", "Wrong: Animation 1, Animation System", "Don't create parallel domains that should be nested", "Wrong: Integrate related concepts rather than creating redundant structures"]}}], "scanner": "agile_bot.bots.base_bot.src.scanners.noun_redundancy_scanner.NounRedundancyScanner"}}, {"rule_file": "avoid_technical_implementation_language.json", "rule_content": {"description": "When shaping stories, avoid technical implementation language in user-facing story elements", "context": "when shaping stories", "do": {"examples": [{"description": "Use business language in user-facing elements", "content": ["Customer places order, User views profile, Admin approves request"]}, {"description": "Focus on what user experiences, not how it's implemented", "content": ["Story describes user experience, not technical implementation"]}]}, "dont": {"examples": [{"description": "Don't use development task language", "content": ["implement, create, refactor, optimize, fix, build, set up"]}, {"description": "Don't use technical implementation details", "content": ["query database, call API, update table"]}, {"description": "Don't focus on delivery or development tasks", "content": ["Implement order system, Create database schema, Set up API endpoints"]}, {"description": "Don't focus on system internals", "content": ["Optimize query performance, Refactor authentication code, Update configuration"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.technical_language_scanner.TechnicalLanguageScanner"}}, {"rule_file": "avoid_technical_stories.json", "rule_content": {"description": "Technical stories represent implementation tasks that do not describe system behavior. They are normally avoided in favor of user stories and system stories. When technical stories are necessary, they should be marked with story_type: 'technical' and kept minimal.", "do": {"examples": [{"description": "Prefer user stories and system stories over technical stories", "content": ["Instead of 'Set up database schema', use 'Store user data' (user story)", "Instead of 'Create API endpoint', use 'Expose user data via API' (system story)", "Instead of 'Write unit tests', use 'Verify story behavior' (user story)"]}, {"description": "When technical stories are necessary, mark with story_type: 'technical'", "content": ["Story: 'Migrate legacy data format' with story_type: 'technical'", "Story: 'Refactor authentication module' with story_type: 'technical'", "Story: 'Update dependency versions' with story_type: 'technical'"]}, {"description": "Keep technical stories minimal and focused", "content": ["Technical stories should be rare exceptions", "Technical stories should still follow Verb-Noun format", "Technical stories should be clearly justified"]}]}, "dont": {"examples": [{"description": "Don't create technical stories for normal development work", "content": ["Avoid: 'Write code', 'Create class', 'Add method'", "Avoid: 'Set up CI/CD', 'Configure database', 'Install package'", "These are implementation details, not stories"]}, {"description": "Don't use technical stories to describe system behavior", "content": ["Use system stories for system-to-system behavior", "Use user stories for user-facing behavior", "Technical stories are for unavoidable implementation tasks only"]}]}}}, {"rule_file": "balance_fine_grained_testable_stories.json", "rule_content": {"description": "Balance fine-grained stories with testable and valuable independent units. Stories must deliver value and be independently testable.", "examples": [{"do": {"description": "Create stories that are complete interactions with value", "content": ["Create stories that are complete interactions with value", "Example: Customer places order (complete interaction, testable, valuable)", "Balance fine-grained stories with testable/valuable stories", "Ensure stories are fine-grained enough to enable frequent feedback", "Ensure stories are grouped into meaningful chunks for high quality feedback", "Stories that deliver measurable value independently"]}, "dont": {"description": "Avoid stories that are too small or too large", "content": ["Avoid stories that are too small and have no value alone", "Don't create stories that are too fine-grained without being testable or valuable", "Don't create stories that are too large to be testable or deliverable quickly", "", "Wrong Examples:", "- Add order button (too fine-grained, no value alone)", "- Change button color (too fine-grained, no value)", "- Customer places order and views history and updates profile (too large, multiple flows)"]}}]}}, {"rule_file": "create_lightweight_precise_docs.json", "rule_content": {"description": "Create lightweight but precise documentation during shaping. Focus on structure and scope, not detailed specifications.", "examples": [{"do": {"description": "Create lightweight but precise documentation during shaping", "content": ["Balance fine-grained stories with testable/valuable stories", "Ensure stories are fine-grained enough to enable frequent feedback", "Ensure stories are grouped into meaningful chunks for high quality feedback", "Validate that a business expert can understand the language of most of the stories", "Focus the language on the business domain", "Create lightweight but precise documentation", "Focus on structure and scope, not detailed specifications", "Make the map easy to walk through (it tells a story)", "", "Example:", "(E) Manage Orders", "  and (E) Place Order", "    and (S) Customer --> places order", "(Shows hierarchy and structure, not detailed specs)"]}, "dont": {"description": "Don't over-elaborate or add detailed specifications during shaping", "content": ["Create stories that are too fine-grained without being testable or valuable", "Create stories that are too large to be testable or deliverable quickly", "Add detailed technical specifications during shaping phase", "Over-elaborate story mapping during shaping", "", "Wrong Example:", "(E) Manage Orders", "  and (E) Place Order", "    and (S) Customer --> places order", "  \u2192 Detailed API specs, database schema, UI mockups", "(Too much detail for shaping phase)"]}}]}}, {"rule_file": "discover_relationships_from_story_map.json", "rule_content": {"description": "Domain Discovery determines relationships and responsibilities between core domain objects by walking through the story map, then suggests story refinements to rebuild the story map to complement the domain model.", "examples": [{"do": {"description": "Extract keywords from story map and determine relationships and responsibilities", "content": "Go through all stories in increment scope, extract keywords from story titles/descriptions/acceptance criteria, ask clarifying questions for each keyword, map relationships with multiplicities, document responsibilities"}, "dont": {"description": "Don't skip keyword identification or build domain model without story map analysis", "content": "Skip going through stories, ignore keywords in acceptance criteria, build domain model without asking what keywords mean, use technical terms instead of domain terms"}}]}}, {"rule_file": "enforce_behavioral_journey_flow.json", "rule_content": {"description": "When shaping stories, CRITICAL: Stories must show user/system journey flow, not just list operations. Stories must include context (when/why actions happen) and connect logically. Order by user journey, not technical sequential_order.", "context": "when shaping stories", "examples": [{"do": {"description": "Show user/system journey with context and flow", "content": ["Stories must show WHEN and WHY actions happen, not just WHAT", "Story maps must show logical flow: Initialize \u2192 Validate \u2192 Process \u2192 Confirm \u2192 Complete", "Each story must connect to previous/next stories in the journey", "Order stories by user journey flow, not by technical sequential_order", "", "Correct Examples (with journey context - Payment Domain):", "(E) Process Payment", "  and (E) Process Card Payment", "    and (S) User --> invokes process payment command", "    and (S) System --> validates payment details", "    and (S) System --> authorizes payment", "    and (S) System --> processes payment transaction", "    and (S) System --> confirms payment and sends notification", "", "(E) Refund Payment", "  and (E) Process Refund", "    and (S) User --> invokes refund payment command", "    and (S) System --> validates refund eligibility", "    and (S) System --> processes refund transaction", "    and (S) System --> confirms refund and sends notification", "", "(E) Process Payment", "  and (E) Validate Payment", "    and (S) User --> submits payment request", "    and (S) System --> validates card number", "    and (S) System --> validates amount", "    and (S) System --> validates currency", "    and (S) System --> returns validation result", "", "Note: Individual stories like 'Authorize Payment with Processor' are correct story format (verb-noun, specific), but they need to be part of a journey. Stories should NOT include actors in the name (actors are documented separately).", "", "Correct Individual Stories (but need journey context):", "- 'Authorize Payment with Processor' (correct story format, but needs: when? why? what happens next?)", "- 'Validate Payment Details' (correct story format, but needs: when? why? what triggers this?)", "- 'Process Payment Transaction' (correct story format, but needs: when? why? what happens before/after?)", "", "Journey Flow Requirements:", "- Start with initialization/entry point", "- Show logical progression through operations", "- Include error handling and alternative paths", "- End with completion/save operations", "- Connect stories logically (this leads to that)"]}, "dont": {"description": "Don't create isolated sets of functions that don't make sense linearly", "content": ["Don't group unrelated operations together that don't form a logical journey", "Don't create story maps with random functions that have no linear relationship", "Don't mix unrelated operations from different domains or contexts", "", "Wrong Examples (isolated sets of functions, no linear sense - Payment Domain):", "(E) Payment Operations", "  and (E) Process Payment", "  and (E) Generate Invoice", "  and (E) Send Email", "  and (E) Update Inventory", "  and (E) Calculate Tax", "(unrelated operations, no linear flow - why does email come after payment? why inventory? no journey)", "", "(E) Payment System", "  and (E) Authorize Payment", "  and (E) Create User Account", "  and (E) Process Refund", "  and (E) Generate Report", "  and (E) Delete Transaction", "(random operations, no logical sequence - account creation doesn't follow authorization, deletion doesn't follow processing)", "", "(E) Payment Flow", "  and (S) System --> validates payment", "  and (S) System --> sends notification", "  and (S) System --> authorizes payment", "  and (S) System --> updates database", "  and (S) System --> processes payment", "(wrong order, no linear sense - notification before authorization? database update before processing?)", "", "What Makes It NOT a Linear Journey:", "- Unrelated operations grouped together (payment + inventory + email + tax - why together?)", "- Operations from different contexts mixed (payment + user account + reporting - different domains)", "- No logical sequence (why does X come before Y? no reason)", "- Operations can be in any order (no dependencies, no flow)", "- Random collection of functions (like a function library, not a journey)", "- No user/system goal that connects them (what are we trying to accomplish?)"]}}]}}, {"rule_file": "enforce_functional_accomplishment.json", "rule_content": {"description": "CRITICAL: Stories must represent complete functional accomplishments, not data access operations or implementation steps. Stories must deliver value independently.", "examples": [{"do": {"description": "Create stories that accomplish complete functions", "content": ["Stories must represent complete functional accomplishments", "Stories must deliver value independently (INVEST principle)", "Stories must show end-to-end flow, not just data access", "", "Correct Examples (complete functional accomplishments):", "- 'User loads story graph and system displays epics in diagram' (complete: load + display = accomplishment)", "- 'Developer edits epic name and system updates diagram' (complete: edit + update = accomplishment)", "- 'User requests render and system generates DrawIO file' (complete: request + generate = accomplishment)", "- 'CLI invokes render command and system saves outline diagram' (complete: invoke + save = accomplishment)", "", "Functional Accomplishment Requirements:", "- Story must accomplish something meaningful for user/system", "- Story must be independently valuable (can be tested/delivered alone)", "- Story must show complete flow (start \u2192 process \u2192 outcome)", "- Story must have clear acceptance criteria (how do we know it's done?)"]}, "dont": {"description": "Don't create stories that are just data access or implementation steps", "content": ["Don't create stories that are just data access operations", "Don't create stories that are implementation steps without outcomes", "Don't create stories that aren't independently valuable", "", "Wrong Examples (not complete accomplishments):", "- 'Read All Epics from Diagram' (data access - not accomplishment, what happens with the data?)", "- 'Load All Features In Graph Epic' (data access - not accomplishment)", "- 'Serialize Components to JSON' (implementation step - not accomplishment, part of what story?)", "- 'Convert Diagram to StoryGraph Format' (implementation step - not accomplishment)", "- 'Calculate Component Positions' (implementation step - not accomplishment)", "", "Data Access/Implementation Indicators (REJECT as stories):", "- Just reads/loads data without using it", "- Just converts/formats data without purpose", "- Just calculates/computes without outcome", "- Just serializes/saves without context", "", "These should be STEPS within stories, not stories themselves:", "- Step: 'System reads epics from diagram' (within story: 'User views story map and system displays epics')", "- Step: 'System serializes components' (within story: 'User saves story graph and system writes JSON file')", "- Step: 'System calculates positions' (within story: 'User requests render and system generates positioned diagram')", "", "Instead, ask:", "- What does the user/system accomplish with this?", "- Is this independently valuable?", "- Can this be tested/delivered alone?", "- What's the complete flow from start to finish?"]}}]}}, {"rule_file": "enforce_specificity_in_stories.json", "rule_content": {"description": "CRITICAL: Stories must be specific about what, when, why, and who. Generic operations like 'Add Sub-Epic' or 'Read Epics' are insufficient - stories must include context and specificity.", "scanner": "agile_bot.bots.base_bot.src.scanners.specificity_scanner.SpecificityScanner", "examples": [{"do": {"description": "Create specific stories with full context", "content": ["Stories must be specific about what, when, why, and who", "Stories must include context: when does it happen? why? what triggers it?", "Stories must specify actors, objects, and outcomes clearly", "", "Correct Examples (specific with context - Payment Domain):", "- 'User processes payment for order #12345 with amount $50.00 when customer completes checkout' (specific: user, order ID, amount, context)", "- 'Merchant invokes refund command from API and system reverses payment transaction' (specific: merchant, API, command, outcome)", "- 'System validates payment card number 4111-1111-1111-1111 when user submits payment form' (specific: system, card number, trigger)", "- 'User clicks Process Payment button and system prompts for payment method selection' (specific: user, action, UI element, system response)", "", "Specificity Requirements:", "- WHO: Specific actor (User, Merchant, Customer, System, PaymentProcessor, API)", "- WHAT: Specific action and object (processes payment for order #12345 with amount $50.00)", "- WHEN: Specific trigger/context (when customer completes checkout, when user submits payment form)", "- WHY: Purpose in journey (to complete purchase transaction, to reverse payment error)", "- OUTCOME: Specific result (payment processed, transaction ID returned, notification sent)"]}, "dont": {"description": "Don't create generic stories without context", "content": ["Don't create generic operations without specificity", "Don't omit context about when/why actions happen", "Don't use vague descriptions without details", "", "Wrong Examples (generic without context - Payment Domain):", "- 'Process Payment' (which payment? for which order? when? why?)", "- 'Authorize Payment' (which payment? with which card? when? why? what happens next?)", "- 'Exposes Payment API' (which endpoints? to whom? when? why?)", "- 'Refund Payment' (which payment? for which reason? when? why?)", "", "Generic Indicators (REJECT or require more specificity):", "- Single verb + noun without context: 'Process Payment', 'Authorize Payment', 'Refund Payment'", "- No specific objects: 'Process Payment' (which payment? which order?)", "- No context: 'Authorize Payment' (when? why? what triggers this?)", "- No outcome: 'Authorize Payment' (what happens with the authorization result?)", "", "Instead, ask:", "- Which specific object? (payment ID, order number, transaction ID, card number)", "- When does this happen? (trigger, context, user action - when customer completes checkout, when merchant requests refund)", "- Why does this happen? (purpose, user need, journey step - to complete purchase, to reverse error)", "- What's the outcome? (result, system response, user experience - payment processed, transaction ID returned, notification sent)"]}}]}}, {"rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "rule_content": {"description": "Establish mandatory spine stories vs optional/enhanced behavior stories. When mapping stories, carefully distinguish between sequential spine (essential path) and optional paths, alternate routes, or additional functionality that is not strictly essential. Mandatory stories form the sequential spine (story AND story AND story). Optional stories are alternatives or enhancements (story OR story) that branch from the spine and can return to it. Sequential stories form the mandatory flow; optional stories are alternatives, enhancements, or non-essential sub-epics.", "scanner": "agile_bot.bots.base_bot.src.scanners.spine_optional_scanner.SpineOptionalScanner", "examples": [{"do": {"description": "Identify the essential spine first", "content": ["Start by identifying the minimal essential path that delivers core value", "The spine represents the mandatory sequence: Story1 AND Story2 AND Story3", "Spine stories get sequential_order numbers (1, 2, 3, etc.)", "Spine stories are required for the sub-epic to deliver its core purpose", "Ask: 'What is the minimum path to deliver value?'", "Establish the mandatory spine before identifying optional/enhanced behaviors", "Explicitly distinguish between spine (mandatory) and optional/enhanced behaviors"]}, "dont": {"description": "Don't mark everything as sequential", "content": ["Don't assign sequential_order to all stories when some are optional", "Don't treat alternate routes as part of the spine", "Don't include enhancements in the mandatory sequential flow", "Don't confuse 'nice to have' with 'must have'", "Don't mark all stories as mandatory when some are alternatives or enhancements", "Don't fail to establish the spine before adding optional/enhanced behaviors"]}}, {"do": {"description": "Mark optional paths clearly", "content": ["Optional stories branch from or enhance the spine but are not required", "Mark optional stories with 'optional: true' in the story structure", "Optional stories may have sequential_order if they're part of an alternative flow (e.g., 2.1, 3.1, etc.)", "Optional stories represent: alternate routes, enhancements, nice-to-have sub-epics", "Ask: 'Can the sub-epic deliver value without this story?'", "Optional/enhanced stories can return to the spine after completion", "Sort optional/enhanced stories by priority of delivery within the same sub-epic"]}, "dont": {"description": "Don't omit optional markers", "content": ["Don't leave optional stories unmarked - be explicit", "Don't assume all stories in a sub-epic are mandatory", "Don't mix optional and mandatory without clear distinction", "Don't fail to identify the spine before adding optional paths", "Don't omit the optional marker - be explicit about spine vs optional/enhanced behaviors", "Don't create sub-epics where every story is mandatory when alternatives or enhancements exist"]}}, {"do": {"description": "Distinguish types of optional paths with concrete examples", "content": ["Spine (all stories with and), then OR optional branch (all stories with and), then OR enhanced (all stories with and):", "", "Correct Example:", "Spine (all stories with and):", "  (S) User --> creates account", "  and (S) User --> logs in", "  and (S) User --> views dashboard", "OR optional branch (all stories with and):", "  (S) User --> signs in with social media (optional)", "  and (S) User --> signs in with email (optional)", "OR enhanced (all stories with and):", "  (S) User --> customizes dashboard (enhanced)", "  and (S) User --> shares dashboard (enhanced)"]}, "dont": {"description": "Wrong mapping examples", "content": ["Wrong: All stories marked mandatory when some are clearly alternatives or enhancements", "  and (S) User --> creates account (1)", "  and (S) User --> logs in with email (2)", "  and (S) User --> logs in with social media (3) - social media should be optional", "", "Wrong: No distinction between essential path and optional sub-epics", "  and (S) User --> views dashboard (1)", "  and (S) User --> customizes dashboard (2)", "  and (S) User --> shares dashboard (3) - customization and sharing should be optional", "", "Wrong: Missing optional markers on alternative flows or enhanced behaviors", "Wrong: Optional/enhanced stories not sorted by priority", "Wrong: No clear spine established before adding optional behaviors"]}}]}}, {"rule_file": "extract_story_map_checklist.json", "rule_content": {"description": "Quick checklist for extracting story maps from code. Follow this process step-by-step.", "steps": [{"step": 1, "title": "Find Outermost Layer and Entry Points", "checklist": ["Locate CLI commands (main(), argparse, command handlers)", "Locate UI entry points (routes, event handlers, button clicks)", "Locate MCP server tool definitions (tool names, parameters)", "Locate API contracts (REST endpoints, GraphQL, WSDL)", "Locate WebSocket handlers, message queues, event listeners", "Locate acceptance tests (end-to-end, integration, BDD/Gherkin)", "Document all entry points with their parameters and return values"]}, {"step": 2, "title": "Analyze Operations and Domain Concepts", "checklist": ["List all operations from entry points (what can be invoked?)", "Identify MAJOR domain concepts (high-level entities)", "Identify MINOR domain concepts (supporting entities)", "Identify relationships between concepts", "Document operation names, parameters, return values", "Document concept names, properties, relationships"]}, {"step": 3, "title": "Create Epics Based on Higher-Order Goals", "checklist": ["Group operations by higher-order goals (what is user/system trying to accomplish?)", "Create epics from goals, not from implementation structure", "Each epic represents a major capability or lifecycle stage", "Validate: Epic name describes a goal, not a technical operation"]}, {"step": 4, "title": "Create Sub-Epics Based on Distinct Behaviors", "checklist": ["For each epic, identify distinct behaviors (different ways to accomplish goal)", "Group behaviors into sub-epics (different types, modes, contexts)", "Each sub-epic represents a distinct path or scenario", "Validate: Sub-epic name describes a behavior, not a technical mechanism"]}, {"step": 5, "title": "Identify Distinct Behaviors from Tests and Code Flow", "checklist": ["Trace through acceptance tests: what happens step by step?", "Trace through CLI commands: what's the execution flow?", "Trace through MCP tool calls: what's the sequence?", "Identify distinct behaviors at each step", "Document typical execution order", "Document error handling and alternative paths"]}, {"step": 6, "title": "Lay Out Story Journey from End-to-End Flow", "checklist": ["Start with entry point (how does user/system initiate?)", "Follow code flow through operations (what happens step by step?)", "Include error handling (what happens when things go wrong?)", "End with completion (how does it finish?)", "For each story, include:", "  - WHEN: trigger, condition, user action", "  - WHY: purpose, user need, system requirement", "  - OUTCOME: result, state change, user experience", "  - ACTOR: who performs the action", "Validate: Stories show complete journey, not isolated operations"]}, {"step": 7, "title": "Validate Story Map Quality", "checklist": ["Stories show user/system journey (not just list operations)", "Stories have context (when/why/outcome)", "Stories are specific (not generic like 'Add Sub-Epic')", "Stories represent complete accomplishments (not data access)", "Implementation details are steps, not stories", "Order follows user journey, not technical sequential_order", "Epics/sub-epics based on goals, not implementation structure"]}], "common_mistakes": ["Starting with internal classes instead of entry points", "Creating epics from class structure instead of goals", "Creating stories from every method call", "Missing context (when/why) in stories", "Making implementation details into stories", "Ordering by technical sequential_order instead of user journey", "Generic stories without specificity"]}}, {"rule_file": "extract_story_map_from_code.json", "rule_content": {"description": "CRITICAL: When creating story maps from code, analyze the outermost layer showing end-to-end journey. Locate acceptance tests, human code engagement points (CLI/UI), MCP server definitions, WSDL, API contracts. Analyze operations and domain for major/minor concepts. Create epics/sub-epics based on higher-order goals. Look at distinct behaviors and typical execution order to lay out story journey.", "examples": [{"do": {"description": "Find outermost layer and entry points", "content": ["Start with the OUTERMOST LAYER showing end-to-end journey", "Locate all HUMAN CODE ENGAGEMENT points:", "  - CLI commands and entry points (main(), command handlers)", "  - UI entry points (web routes, event handlers, button clicks)", "  - MCP server tool definitions (tool names, parameters, descriptions)", "  - API contracts (REST endpoints, GraphQL queries, WSDL operations)", "  - WebSocket handlers, message queues, event listeners", "", "Locate ACCEPTANCE TESTS:", "  - End-to-end tests that show complete user journeys", "  - Integration tests that show system-to-system flows", "  - Test scenarios that describe 'when X, then Y' behaviors", "  - BDD/Gherkin tests with Given-When-Then structure", "", "Example Entry Points to Find:", "- CLI: 'python -m story_io.story_io_cli render-outline --story-graph file.json'", "- MCP: Tool 'render_outline' with parameters 'story_graph_path', 'output_path'", "- API: POST /api/story-graph/render with body {storyGraph, outputFormat}", "- UI: Button 'Render Outline' that triggers render operation", "- Test: 'test_render_outline_from_json' that shows complete flow"]}, "dont": {"description": "Don't start with internal implementation details", "content": ["Don't start with internal classes or helper functions", "Don't start with data structures or domain models", "Don't start with utility functions or low-level operations", "", "Wrong Starting Points:", "- Internal class: 'StoryIODiagram.load_from_json()' (implementation detail)", "- Helper function: 'parse_story_graph()' (internal mechanism)", "- Data structure: 'Epic' class definition (domain model, not entry point)", "", "These are important but come AFTER identifying the journey"]}}, {"do": {"description": "Analyze operations and domain for major/minor concepts", "content": ["Analyze OPERATIONS from entry points:", "  - What operations are exposed? (render, sync, search, edit, save)", "  - What are the operation names? (render-outline, sync-increments, search-stories)", "  - What parameters do they take? (story_graph_path, output_path, query)", "  - What do they return? (DrawIO file, JSON report, search results)", "", "Analyze DOMAIN CONCEPTS:", "  - MAJOR CONCEPTS: High-level domain entities (StoryGraph, Diagram, Epic, Sub-Epic, Story)", "  - MINOR CONCEPTS: Supporting entities (Position, Boundary, User, Increment)", "  - OPERATIONS: Actions on concepts (Load, Read, Edit, Render, Synchronize, Search, Save)", "  - RELATIONSHIPS: How concepts relate (Epic contains Sub-Epics, Sub-Epic contains Stories)", "", "Example Analysis (Story-IO Domain):", "- Operations: render-outline, render-increments, sync-outline, sync-increments, search, add-user, merge", "- Major Concepts: StoryGraph (main entity), Diagram (visual representation), Epic/Sub-Epic/Story (hierarchy)", "- Minor Concepts: Position (2D coordinate), Boundary (rectangular area), User (story actor), Increment (priority grouping)", "- Relationships: StoryGraph contains Epics, Epic contains Sub-Epics, Sub-Epic contains Stories", "", "Example Analysis (Payment Domain):", "- Operations: process-payment, refund-payment", "- Major Concepts: Payment (main entity), Transaction (financial transaction), Card (payment method), Refund (reversal)", "- Minor Concepts: Amount (monetary value), Currency (USD, EUR), Status (pending, approved, declined), PaymentMethod (card, bank transfer)", "- Relationships: Payment contains Transaction, Payment uses Card, Payment can have Refund, Transaction has Status"]}, "dont": {"description": "Don't confuse implementation details with domain concepts", "content": ["Don't treat implementation classes as domain concepts", "Don't treat utility functions as operations", "Don't treat data structures as domain entities", "", "Wrong Analysis:", "- Implementation class: 'StoryIORenderer' (implementation detail, not domain concept)", "- Utility function: 'calculate_position()' (implementation detail, not operation)", "- Data structure: 'dict' or 'list' (implementation detail, not domain concept)", "", "Focus on WHAT the system does (domain), not HOW it does it (implementation)"]}}, {"do": {"description": "Create epics/sub-epics based on higher-order goals", "content": ["Group operations into EPICS based on HIGHER-ORDER GOALS:", "  - What is the user/system trying to accomplish?", "  - What are the major capabilities?", "  - What are the lifecycle stages?", "", "Example Epic Creation from Operations (Story-IO Domain):", "- Operations: render-outline, render-increments, render-exploration", "- Higher-Order Goal: 'Render StoryGraph' (user wants to visualize story map)", "- Epic: 'Render StoryGraph'", "", "- Operations: sync-outline, sync-increments, generate-sync-report, merge", "- Higher-Order Goal: 'Synchronize StoryGraph' (user wants to sync between formats)", "- Epic: 'Synchronize StoryGraph'", "", "Example Epic Creation from Operations (Payment Domain):", "- Operations: process-payment, process_payment, POST /api/payments/process", "- Higher-Order Goal: 'Process Payment' (user wants to process a payment transaction)", "- Epic: 'Process Payment'", "", "- Operations: refund-payment, refund_payment, POST /api/payments/refund", "- Higher-Order Goal: 'Refund Payment' (user wants to reverse a payment)", "- Epic: 'Refund Payment'", "", "Group operations into SUB-EPICS based on DISTINCT BEHAVIORS:", "  - What are the different ways to accomplish the epic goal?", "  - What are the different types or modes?", "  - What are the different contexts or scenarios?", "", "Example Sub-Epic Creation (Story-IO Domain):", "- Epic: 'Render StoryGraph'", "- Distinct Behaviors: Render outline (basic), Render increments (with priorities), Render exploration (with acceptance criteria)", "- Sub-Epics: 'Render Outline', 'Render Increments', 'Render Exploration'", "", "- Epic: 'Synchronize StoryGraph'", "- Distinct Behaviors: Sync outline structure, Sync increments, Generate comparison report, Merge graphs", "- Sub-Epics: 'Synchronize Outline', 'Synchronize Increments', 'Generate Sync Report', 'Merge StoryGraphs'", "", "Example Sub-Epic Creation (Payment Domain):", "- Epic: 'Process Payment'", "- Distinct Behaviors: Validate payment (required), Authorize payment (required), Process with card (common), Process with bank transfer (alternative), Process with wallet (alternative), Confirm payment (required)", "- Sub-Epics: 'Validate Payment', 'Authorize Payment', 'Process Card Payment', 'Process Bank Transfer', 'Process Wallet Payment', 'Confirm Payment'", "", "- Epic: 'Refund Payment'", "- Distinct Behaviors: Validate refund eligibility, Process refund, Confirm refund", "- Sub-Epics: 'Validate Refund', 'Process Refund', 'Confirm Refund'"]}, "dont": {"description": "Don't create epics/sub-epics from implementation structure", "content": ["Don't create epics based on class structure (StoryIODiagram, DrawIORenderer, PaymentProcessor, etc.)", "Don't create sub-epics based on method names (load_json, parse_xml, charge_card, etc.)", "Don't create epics/sub-epics from technical layers (data layer, service layer, etc.)", "", "Wrong Epic Creation:", "- Based on class: 'StoryIODiagram Operations' (implementation structure)", "- Based on method: 'JSON Loading' (technical mechanism)", "- Based on layer: 'Data Access Layer' (technical architecture)", "", "Focus on USER/SYSTEM GOALS, not technical structure"]}}, {"do": {"description": "Look at distinct behaviors and typical execution order", "content": ["Analyze DISTINCT BEHAVIORS from acceptance tests and code flow:", "  - What are the different scenarios?", "  - What are the different paths through the code?", "  - What are the different user actions?", "", "Example Behavior Analysis (Story-IO Domain):", "- Test: 'test_render_outline_from_json' shows: Load JSON \u2192 Parse \u2192 Generate XML \u2192 Calculate Positions \u2192 Apply Styles \u2192 Save", "- Distinct Behaviors: Load, Parse, Generate, Calculate, Apply, Save", "- These become STORIES in the journey", "", "Example Behavior Analysis (Payment Domain):", "- Test: 'test_process_payment_success' shows: Invoke \u2192 Validate \u2192 Authorize \u2192 Process \u2192 Confirm", "- Distinct Behaviors: Invoke (entry point), Validate (check input), Authorize (check funds/fraud), Process (execute transaction), Confirm (complete and notify)", "- These become STORIES in the journey", "", "Determine TYPICAL EXECUTION ORDER from code flow:", "  - Trace through acceptance tests: what happens first, second, third?", "  - Trace through CLI commands: what's the flow?", "  - Trace through MCP tool calls: what's the sequence?", "  - Look at error handling: what are alternative paths?", "", "Example Execution Order Analysis (Story-IO Domain):", "- CLI: 'render-outline --story-graph file.json --output file.drawio'", "- Code Flow: Parse args \u2192 Load story graph \u2192 Create diagram \u2192 Render outline \u2192 Save file", "- Typical Order: 1. Parse arguments, 2. Load story graph, 3. Render outline, 4. Save file", "- Stories: 'Parses Command Arguments' \u2192 'Loads StoryGraph from JSON' \u2192 'Renders Outline to DrawIO' \u2192 'Saves DrawIO File'", "", "Example Execution Order Analysis (Payment Domain):", "- CLI: 'process-payment --payment-id 123 --amount 50.00'", "- Code Flow: Parse args \u2192 Validate payment \u2192 Authorize payment \u2192 Process payment \u2192 Confirm payment", "- Typical Order: 1. User invokes process payment, 2. System validates payment details, 3. System authorizes payment, 4. System processes payment, 5. System confirms payment", "- Stories: 'User invokes process payment command' \u2192 'System validates payment details' \u2192 'System authorizes payment with payment processor' \u2192 'System processes payment transaction' \u2192 'System confirms payment and sends notification'", "", "Create STORY JOURNEY from execution order:", "  - Start with entry point (CLI invocation, UI click, MCP tool call)", "  - Follow the code flow through operations", "  - Include error handling and alternative paths", "  - End with completion (save, return result, display)", "", "Example Story Journey (Story-IO Domain):", "- Entry: 'User invokes render-outline command from CLI'", "- Flow: 'CLI parses arguments' \u2192 'CLI loads story graph' \u2192 'CLI invokes render' \u2192 'System renders outline' \u2192 'System saves file'", "- Error: 'If file not found, CLI displays error message'", "- Completion: 'CLI returns success message'", "", "Example Story Journey (Payment Domain):", "- Entry: 'User invokes process payment command' (WHEN: user wants to charge customer, WHY: to complete purchase, OUTCOME: CLI/MCP/API receives request)", "- Flow: 'System validates payment details' (WHEN: after request received, WHY: to ensure payment can be processed, OUTCOME: details validated) \u2192 'System authorizes payment' (WHEN: after validation, WHY: to check funds/fraud, OUTCOME: payment authorized) \u2192 'System processes payment' (WHEN: after authorization, WHY: to execute transaction, OUTCOME: payment processed) \u2192 'System confirms payment' (WHEN: after processing, WHY: to notify user, OUTCOME: payment confirmed)", "- Error: 'If validation fails, System displays validation error' (WHEN: validation fails, WHY: to inform user, OUTCOME: error shown, process stops)", "- Completion: 'System returns transaction ID' (WHEN: after confirmation, WHY: to provide reference, OUTCOME: transaction ID returned)"]}, "dont": {"description": "Don't create stories from code structure or method calls", "content": ["Don't create stories from every method call in code", "Don't create stories from internal function calls", "Don't create stories from data structure operations", "", "Wrong Story Creation:", "- From method: 'StoryIODiagram.__init__()' (internal initialization)", "- From function: 'parse_json()' (internal parsing)", "- From operation: 'dict.get()' (data access, not behavior)", "- From method: 'PaymentProcessor.charge_card()' (internal implementation)", "", "Focus on USER/SYSTEM VISIBLE BEHAVIORS, not internal implementation"]}}, {"do": {"description": "Lay out story journey from end-to-end flow", "content": ["Create STORY JOURNEY that shows complete end-to-end flow:", "  - Start: How does user/system initiate? (CLI command, UI click, API call)", "  - Middle: What happens step by step? (parse, load, process, transform)", "  - End: How does it complete? (save, return, display, notify)", "", "Include CONTEXT for each story:", "  - WHEN does it happen? (trigger, condition, user action)", "  - WHY does it happen? (purpose, user need, system requirement)", "  - WHAT is the outcome? (result, state change, user experience)", "  - ACTOR: Who performs the action? (User, System, CLI, MCP, API, etc.)", "", "Example Complete Story Journey (Story-IO Domain):", "(E) Render StoryGraph", "  and (E) Render Outline", "    and (S) User --> invokes render-outline command from CLI", "    and (S) CLI --> parses command arguments", "    and (S) CLI --> loads story graph from JSON file", "    and (S) System --> renders outline to DrawIO format", "    and (S) System --> saves DrawIO file", "", "Example Complete Story Journey (Payment Domain):", "(E) Process Payment", "  and (E) Process Card Payment", "    and (S) User --> invokes process payment command", "    and (S) System --> validates payment details", "    and (S) System --> authorizes payment with payment processor", "    and (S) System --> processes payment transaction", "    and (S) System --> confirms payment and sends notification", "", "Include ERROR HANDLING and ALTERNATIVE PATHS:", "  - What happens when file not found?", "  - What happens when parsing fails?", "  - What happens when validation fails?", "  - What happens when authorization fails?", "", "Example Error Handling (Story-IO Domain):", "  and (S) CLI --> displays error message if story graph file not found", "", "Example Error Handling (Payment Domain):", "  and (S) System --> displays validation error if validation fails", "  and (S) System --> displays authorization declined message if authorization fails"]}, "dont": {"description": "Don't create isolated stories without journey context", "content": ["Don't create stories that are just operations without context", "Don't create stories that don't connect to a journey", "Don't create stories without when/why/outcome/actor", "", "Wrong Story Creation:", "- (S) System --> loads StoryGraph (no context: when? why? what happens next?)", "- (S) System --> parses JSON (no context: when? why? what's the outcome?)", "- (S) System --> saves file (no context: when? why? what triggers this?)", "- (S) System --> processes payment (no context: when? why? what's the outcome?)", "", "Every story must be part of a JOURNEY with CONTEXT (when/why/outcome/actor)"]}}]}}, {"rule_file": "focus_real_actions_on_domain_concepts.json", "rule_content": {"description": "When shaping stories, stories must describe REAL ACTIONS that users or other actors (even system or technical actors) can perform, not capabilities or structural descriptions. Organize by lifecycle flow (Load, Read, Edit, Render, Synchronize, Search, Save). CRITICAL: Actor names must NOT appear in Epic/Sub-Epic/Story names - names are Verb-Noun only.", "context": "when shaping stories", "examples": [{"do": {"description": "Use real actions - actor separate from name", "content": ["Stories describe actions: Load, Read, Add, Remove, Render, Search, Save", "Organize by lifecycle: Load \u2192 Read \u2192 Edit \u2192 Render \u2192 Synchronize \u2192 Search \u2192 Save", "Use Verb-Noun format for names: '[Verb] [Noun]' - NO ACTOR in name", "Focus on what users/code CAN DO, not what things ARE", "", "NAMING RULE - Actor NOT in Name:", "- Epic name: 'Places Order' (NOT 'Customer Places Order')", "- Sub-Epic name: 'Validates Payment' (NOT 'PaymentValidator Validates Payment')", "- Story name: 'Processes Order Items' (NOT 'OrderProcessor Processes Order Items')", "- Actor is documented separately, not in the name itself", "", "ACTORS for User/System Stories (normal stories):", "- Use human/system actors: User, Developer, System, Customer, Admin", "- Actor is implicit or documented separately from name", "- Examples: Epic 'Places Order' has actor: Customer", "- Examples: Sub-Epic 'Validates Payment' has actor: System", "", "ACTORS for Technical Stories (deep internal class-level interactions):", "- Domain concepts CAN be actors: OrderProcessor, PaymentValidator, InventoryManager, Cart, Product", "- Actor is documented separately, NOT in name", "- Examples: Epic 'Loads Order Data' has actor: OrderProcessor (technical)", "- Examples: Sub-Epic 'Updates Inventory' has actor: InventoryManager (technical)", "- Examples: Story 'Calculates Total' has actor: Cart (technical)", "- This is acceptable when documenting class-to-class interactions internally"]}, "dont": {"description": "Avoid capabilities, structural descriptions, passive states, and actors in names", "content": ["Don't use capability nouns or structural descriptions", "Don't describe what things ARE or CONTAIN", "Don't use passive states or properties as stories", "CRITICAL: Don't put actor in Epic/Sub-Epic/Story names", "", "Wrong Examples (capabilities/structure):", "- 'PaymentValidator Contains Validation Logic' (capability, not action)", "- 'OrderProcessor Tracks Order Count' (passive state, not action)", "- 'Cart Hierarchy Foundation' (structural description)", "- 'Domain Components Implementation' (capability)", "- 'Product Represents Item' (structural description)", "", "Wrong Examples (actor in name):", "- Epic: 'Customer Places Order' (actor in name - WRONG)", "- Sub-Epic: 'OrderProcessor Validates Payment' (actor in name - WRONG)", "- Sub-Epic: 'Cart Adds Product' (actor in name - WRONG)", "- Story: 'InventoryManager Updates Stock' (actor in name - WRONG)", "", "Correct Examples (actor NOT in name):", "- Epic: 'Places Order' (actor: Customer, documented separately)", "- Sub-Epic: 'Validates Payment' (actor: PaymentValidator, documented separately)", "- Sub-Epic: 'Adds Product' (actor: Cart, documented separately)", "- Story: 'Updates Stock' (actor: InventoryManager, documented separately)", "", "These are not actions users/code can perform - they describe structure or capabilities", "Instead ask: What can users/code DO with this domain concept?", "- Instead of 'Contains Logic' \u2192 'Generates XML' or 'Renders Diagram'", "- Instead of 'Tracks Count' \u2192 'Reads Count' or 'Updates Count'", "- Instead of 'Represents X' \u2192 'Creates X' or 'Loads X'"]}}]}}, {"rule_file": "focus_user_and_system_activities.json", "rule_content": {"description": "Focus story maps on both user AND system activities, not tasks. Stories should outline user and system behavior patterns.", "examples": [{"do": {"description": "Include both user and system activities in story descriptions", "content": ["User submits order, System validates payment", "Customer views products, System displays inventory", "Use user activity patterns: User submits, Customer places", "Use system activity patterns: System validates, System sends", "Focus stories on user interactions and how the system behaves as observed by users", "Example: Customer places order with payment details", "", "ACTOR SELECTION (documented separately, NOT in name):", "- For user/system stories: Actors are User, System, Developer, Customer, Admin (human/system actors)", "- For technical stories (deep internal class-level): Domain concepts can be actors (StoryIODiagram, DrawIORenderer, DrawIOSynchronizer, User, Increment, Component)", "- Technical stories document class-to-class interactions where domain concepts act as actors", "", "CRITICAL NAMING RULE:", "- Actor must NOT appear in Epic/Sub-Epic/Story name", "- Name format: '[Verb] [Noun]' only", "- Examples: 'Loads StoryGraph' (actor: StoryIODiagram, documented separately)", "- Examples: 'Adds Sub-Epic' (actor: Epic, documented separately)", "- Examples: 'Changes Parent' (actor: Component, documented separately)"]}, "dont": {"description": "Avoid task-oriented language that describes implementation", "content": ["Avoid task-oriented language that describes implementation", "Don't use task language for building or setting up", "Don't focus only on user activities (ignore system activities)", "Don't focus only on tasks (instead of activities)", "Don't use development task language: implement, create, refactor, optimize, fix, build, set up", "Don't use technical implementation details: query database, call API, update table", "", "Wrong Examples:", "- Only user activities: User submits order, User views products (missing system activities)", "- Only tasks: Implement order submission, Create payment validation (not activities)", "- Implement order submission, Create payment validation", "- Build product listing page, Set up inventory display"]}}]}}, {"rule_file": "identify_system_stories.json", "rule_content": {"description": "System stories capture system-to-system interactions that are not user-facing. They represent internal system behavior that crosses system boundaries (e.g., microservice to microservice, component to component). System stories should be identified and marked with story_type: 'system'.", "do": {"examples": [{"description": "Identify system-to-system interactions", "content": ["Storage Microservice validates payload from Local Mgmt System", "API Gateway routes request to Authentication Service", "Message Queue delivers event to Notification Service"]}, {"description": "Mark system stories with story_type: 'system'", "content": ["Story: 'Validate Payload' with story_type: 'system'", "Story: 'Route Request' with story_type: 'system'", "Story: 'Deliver Event' with story_type: 'system'"]}, {"description": "Use system stories for internal system behavior", "content": ["System stories represent behavior that happens between systems/components", "System stories are not directly visible to end users", "System stories enable user-facing stories to function"]}]}, "dont": {"examples": [{"description": "Don't mark user-facing stories as system stories", "content": ["User clicks button \u2192 NOT a system story", "User views dashboard \u2192 NOT a system story", "User submits form \u2192 NOT a system story"]}, {"description": "Don't confuse system stories with technical stories", "content": ["System stories = system-to-system behavior (dark blue in DrawIO)", "Technical stories = implementation tasks (black/white in DrawIO, normally avoided)"]}]}}}, {"rule_file": "maximize_integration_of_related_concepts.json", "rule_content": {"description": "When shaping stories, maximize integration of related concepts", "context": "when shaping stories", "examples": [{"do": {"description": "Group concepts that the user sees as one capability", "content": ["Group concepts that the user sees as one capability", "Nest implementation details under the sub-epic they serve", "Keep related data and operations together", "Eliminate artificial boundaries based on code organization"]}, "dont": {"description": "Don't separate related concepts", "content": ["Don't separate related concepts into different major sections", "Wrong: Split based on code layers (data, business, presentation)", "Don't duplicate related concepts across multiple sections", "Wrong: Create gaps that break the user's mental model"]}}]}}, {"rule_file": "place_domain_concepts_by_relevance.json", "rule_content": {"description": "When shaping stories, place domain concepts locally or globally based on relevance to one or multiple sub_epics", "context": "when shaping stories", "examples": [{"do": {"description": "Place domain concepts at the most specific level, favoring local placement", "content": ["Favor local placement: Place domain_concepts at the sub_epic level when they are relevant to only that sub_epic", "Think about the core: Consider core domain concepts that span multiple sub_epics - these should be placed at the parent epic/sub_epic level", "Elevate when shared: If a domain concept is used by multiple child sub_epics, elevate it to the parent level", "Start local, elevate if needed: Begin with local placement, but elevate if the concept is referenced by multiple sub_epics", "", "Correct Examples (Local Placement):", "- Sub-Epic 'Validates Payment' has domain_concept: 'Payment' (only used in this sub-epic)", "- Sub-Epic 'Processes Order' has domain_concept: 'Order' (only used in this sub-epic)", "- Sub-Epic 'Updates Inventory' has domain_concept: 'InventoryItem' (only used in this sub-epic)", "", "Correct Examples (Global Placement):", "- Epic 'Process Payment' has domain_concept: 'Payment' (used by multiple sub-epics: Validate Payment, Authorize Payment, Process Transaction)", "- Epic 'Manage Orders' has domain_concept: 'Order' (used by multiple sub-epics: Create Order, Update Order, Cancel Order)", "- Sub-Epic 'Order Management' has domain_concept: 'Customer' (used by multiple child sub-epics: Create Customer Order, Update Customer Order)"]}, "dont": {"description": "Don't place domain concepts at wrong levels or duplicate them unnecessarily", "content": ["Don't place domain concepts at epic level when they're only used in one sub-epic", "Wrong: Epic 'Payment System' has domain_concept: 'PaymentValidator' (only used in 'Validates Payment' sub-epic - should be local)", "Don't duplicate domain concepts at multiple levels", "Wrong: Both Epic and Sub-Epic have 'Payment' concept when it's only used in one sub-epic", "Don't place core domain concepts too locally if they're used across multiple epics", "Wrong: Core concept 'User' placed only in one sub-epic when it's used across multiple epics", "Don't ignore shared usage - if multiple sub-epics reference a concept, elevate it", "Wrong: 'Order' concept placed in each sub-epic separately when all sub-epics use it (should be at parent level)"]}}]}}, {"rule_file": "prevent_generic_capabilities.json", "rule_content": {"description": "CRITICAL: Stories must describe specific actions with actors, not generic capabilities. Reject stories that describe what system IS (capabilities) vs what system DOES (behaviors).", "scanner": "agile_bot.bots.base_bot.src.scanners.generic_capability_scanner.GenericCapabilityScanner", "examples": [{"do": {"description": "Use specific actions with actors and outcomes", "content": ["Stories must have specific actors performing specific actions", "Stories must describe what system DOES (behaviors), not what system IS (capabilities)", "Stories must have specific outcomes, not generic descriptions", "", "Correct Examples (specific behaviors with actors):", "- 'User invokes MCP tool and system routes to StoryIO handler' (specific: user, MCP tool, routing action)", "- 'Developer adds sub-epic Render Exploration to epic Render StoryGraph' (specific: developer, sub-epic name, epic name)", "- 'System loads story graph from JSON file when user requests render' (specific: system, load action, trigger)", "- 'CLI determines workspace root from current directory' (specific: CLI, determine action, source)", "", "Actor Requirements:", "- Every story must have an actor (User, System, Developer, CLI, StoryIODiagram, etc.)", "- Actor must be documented separately (not in name)", "- Actor must be specific (not generic 'Component' or 'System')", "- Actor must perform the action (not just be present)"]}, "dont": {"description": "Don't use generic capabilities or passive descriptions", "content": ["Don't describe what system IS (capabilities)", "Don't use generic action descriptions without actors", "Don't use passive states or properties as stories", "", "Wrong Examples (generic capabilities):", "- 'Exposes Tools' (capability - what tools? when? to whom? what happens?)", "- 'Provides Server Interface' (capability - what interface? when? why?)", "- 'Contains Validation Logic' (capability - not an action)", "- 'Tracks Order Count' (passive state - not an action)", "", "Capability Indicators (REJECT):", "- Describes what system IS: 'Exposes', 'Provides', 'Contains', 'Represents'", "- No specific actor or action", "- No specific outcome or trigger", "- Generic description without context", "", "Instead, ask:", "- Who performs this action? (actor)", "- When does this happen? (trigger/context)", "- What specific outcome occurs? (result)", "- Why does this happen? (purpose in journey)"]}}]}}, {"rule_file": "prevent_implementation_details_as_stories.json", "rule_content": {"description": "CRITICAL: Implementation operations (serialize, convert, calculate, generate XML, apply formatting) must be steps within stories, not stories themselves. Stories must focus on user/system outcomes, not technical mechanisms.", "examples": [{"do": {"description": "Keep implementation details as steps within stories", "content": ["Implementation operations must be steps within stories", "Stories must focus on user/system outcomes, not technical mechanisms", "Stories must describe what user/system experiences, not how it's implemented", "", "Correct Examples (outcomes, not mechanisms):", "- Story: 'User saves story graph and system writes JSON file' \u2192 Steps: 'System converts diagram to story graph format', 'System serializes components to JSON', 'System writes file'", "- Story: 'User requests render and system generates DrawIO diagram' \u2192 Steps: 'System generates DrawIO XML', 'System calculates component positions', 'System applies styles', 'System saves file'", "- Story: 'User edits epic and system updates diagram' \u2192 Steps: 'System updates epic data', 'System recalculates layout', 'System refreshes diagram'", "", "Story vs Step Distinction:", "- Story = User/system outcome (what they experience)", "- Step = Implementation detail (how it's done)", "- Story = Independently valuable (can be tested/delivered)", "- Step = Part of story (not independently valuable)"]}, "dont": {"description": "Don't make implementation operations into stories", "content": ["Don't create stories for implementation operations", "Don't expose technical mechanisms as user stories", "Don't break implementation steps into separate stories", "", "Wrong Examples (implementation details as stories):", "- 'Convert Diagram to StoryGraph Format' (implementation - should be step in 'Save StoryGraph' story)", "- 'Serialize Components to JSON' (implementation - should be step in 'Save StoryGraph' story)", "- 'Generate DrawIO XML from StoryGraph' (implementation - should be step in 'Render Outline' story)", "- 'Calculate Component Positions' (implementation - should be step in 'Render Outline' story)", "- 'Apply Component Styles' (implementation - should be step in 'Render Outline' story)", "- 'Save DrawIO XML to File' (implementation - should be step in 'Render Outline' story)", "", "Implementation Operation Indicators (REJECT as stories):", "- Serialize, deserialize, convert, transform, format", "- Calculate, compute, generate, create (technical artifacts)", "- Apply, set, configure (technical settings)", "- Save, write, store (without user context)", "", "These are implementation mechanisms, not user/system behaviors", "They should be steps within stories that describe outcomes", "", "Instead, ask:", "- What does the user/system experience? (story)", "- How is it implemented? (step within story)", "- What's the outcome? (story)", "- What's the mechanism? (step)"]}}], "scanner": "agile_bot.bots.base_bot.src.scanners.implementation_details_scanner.ImplementationDetailsScanner"}}, {"rule_file": "refine_scope_to_functional_accomplishment.json", "rule_content": {"description": "Refine Scope to Functional Accomplishment", "examples": [{"do": {"description": "Focus on functional outcomes, not mechanisms", "content": ["Focus on functional outcomes, not mechanisms", "Frame domains by what they accomplish for users", "Ask about user enablement: What does this enable the user to do or understand?", "State the transformation or capability provided", "Be specific about the functional benefit"]}, "dont": {"description": "Don't frame domains by their technical implementation", "content": ["Don't frame domains by their technical implementation", "Wrong: Focus on 'how' before 'what'", "Don't use generic system capabilities as domain names", "Wrong: Describe mechanisms instead of outcomes"]}}]}}, {"rule_file": "size_stories_3_to_12_days.json", "rule_content": {"description": "Size stories to fall within 3-12 day effort range for effective planning and frequent delivery.", "scanner": "agile_bot.bots.base_bot.src.scanners.story_sizing_scanner.StorySizingScanner", "examples": [{"do": {"description": "Create stories that represent complete flows within the effort range", "content": ["Create stories that represent complete flows within the effort range", "Example: Customer places order (complete flow, 3-5 days)", "Break/group stories so that most fall into a 3-12 day effort range", "Enable frequent feedback by decomposing the work into smaller items"]}, "dont": {"description": "Avoid stories that are too large or too small", "content": ["Avoid stories that are too large and span multiple weeks", "Don't arbitrarily decompose stories to a functional level, regardless of size", "", "Wrong Examples:", "- Order management system (too large, 20+ days)", "- Create stories that are too small without considering value"]}}]}}, {"rule_file": "story_map_code_approach.json", "rule_content": {"description": "Quick checklist for extracting story maps from code. Follow this process step-by-step.", "steps": [{"step": 1, "title": "Find Outermost Layer and Entry Points", "checklist": ["Locate CLI commands (main(), argparse, command handlers)", "Locate UI entry points (routes, event handlers, button clicks)", "Locate MCP server tool definitions (tool names, parameters)", "Locate API contracts (REST endpoints, GraphQL, WSDL)", "Locate WebSocket handlers, message queues, event listeners", "Locate acceptance tests (end-to-end, integration, BDD/Gherkin)", "Document all entry points with their parameters and return values"]}, {"step": 2, "title": "Analyze Operations and Domain Concepts", "checklist": ["List all operations from entry points (what can be invoked?)", "Identify MAJOR domain concepts (high-level entities)", "Identify MINOR domain concepts (supporting entities)", "Identify relationships between concepts", "Document operation names, parameters, return values", "Document concept names, properties, relationships"]}, {"step": 3, "title": "Create Epics Based on Higher-Order Goals", "checklist": ["Group operations by higher-order goals (what is user/system trying to accomplish?)", "Create epics from goals, not from implementation structure", "Each epic represents a major capability or lifecycle stage", "Validate: Epic name describes a goal, not a technical operation"]}, {"step": 4, "title": "Create Sub-Epics Based on Distinct Behaviors", "checklist": ["For each epic, identify distinct behaviors (different ways to accomplish goal)", "Group behaviors into sub-epics (different types, modes, contexts)", "Each sub-epic represents a distinct path or scenario", "Validate: Sub-epic name describes a behavior, not a technical mechanism"]}, {"step": 5, "title": "Identify Distinct Behaviors from Tests and Code Flow", "checklist": ["Trace through acceptance tests: what happens step by step?", "Trace through CLI commands: what's the execution flow?", "Trace through MCP tool calls: what's the sequence?", "Identify distinct behaviors at each step", "Document typical execution order", "Document error handling and alternative paths"]}, {"step": 6, "title": "Lay Out Story Journey from End-to-End Flow", "checklist": ["Start with entry point (how does user/system initiate?)", "Follow code flow through operations (what happens step by step?)", "Include error handling (what happens when things go wrong?)", "End with completion (how does it finish?)", "For each story, include:", "  - WHEN: trigger, condition, user action", "  - WHY: purpose, user need, system requirement", "  - OUTCOME: result, state change, user experience", "  - ACTOR: who performs the action", "Validate: Stories show complete journey, not isolated operations"]}, {"step": 7, "title": "Validate Story Map Quality", "checklist": ["Stories show user/system journey (not just list operations)", "Stories have context (when/why/outcome)", "Stories are specific (not generic like 'Add Sub-Epic')", "Stories represent complete accomplishments (not data access)", "Implementation details are steps, not stories", "Order follows user journey, not technical sequential_order", "Epics/sub-epics based on goals, not implementation structure"]}], "common_mistakes": ["Starting with internal classes instead of entry points", "Creating epics from class structure instead of goals", "Creating stories from every method call", "Missing context (when/why) in stories", "Making implementation details into stories", "Ordering by technical sequential_order instead of user journey", "Generic stories without specificity"]}}, {"rule_file": "use_active_behavioral_language.json", "rule_content": {"description": "When shaping stories, use active behavioral language with action verbs. Describe behaviors, not tasks or capabilities.", "context": "when shaping stories", "scanner": "agile_bot.bots.base_bot.src.scanners.active_language_scanner.ActiveLanguageScanner", "examples": [{"do": {"description": "Use action verbs to describe what happens", "content": ["Use action verbs to describe what happens", "Example: User submits order, System validates payment", "Favor active behavioral language over functional/capability breakup", "Use story maps to outline user and system behavior (NOT tasks)", "Use action verbs: submits, views, validates, sends, displays", "Describe behaviors: [Actor] [action] [object] - but actor NOT in name", "Use active behavior language: Place order (active behavior), Validate payment (active behavior)", "", "CRITICAL NAMING RULE - Actor NOT in Name:", "- Epic/Sub-Epic/Story names must be Verb-Noun format: '[Verb] [Noun]'", "- Actor is documented separately, NOT included in the name", "- Verb can be in various forms: imperative ('Add'), infinitive ('To Add'), third person ('Adds') - all are acceptable", "- Noun can be singular or plural based on context - DO NOT pluralize unnecessarily", "- Prepositional phrases and context are part of the noun phrase and should be preserved (e.g., 'Add Minion To Mob' is correct)", "- Examples: Epic 'Places Order' (actor: Customer, documented separately)", "- Examples: Sub-Epic 'Validates Payment' (actor: PaymentValidator, documented separately)", "- Examples: Story 'Updates Stock' (actor: InventoryManager, documented separately)", "- Examples: Story 'Add Minion To Mob' (verb-noun with context preserved - CORRECT)", "- Examples: Story 'Group Minions' (verb-noun, plural noun is correct for context - CORRECT)", "", "ACTOR SELECTION (documented separately, not in name):", "- For user/system stories: Use human/system actors (User, System, Developer, Customer)", "- For technical stories (deep internal): Domain concepts can be actors (OrderProcessor, PaymentValidator, InventoryManager, Cart, Product)", "- Actor is implicit or explicitly documented, but NOT in the name string"]}, "dont": {"description": "Avoid capability nouns and task language", "content": ["Avoid capability nouns that describe functions rather than behaviors", "Don't use functional or capability-based language instead of behavioral language", "Don't use capability nouns: Management, Processing, Administration", "Don't use task verbs: implement, create, build, set up", "Don't use task language", "", "Wrong Examples:", "- Order Management, Payment Processing (capability nouns)", "- Focus on tasks instead of behaviors", "- Order Management (capability), Implement order placement (task)", "", "Wrong Examples (actor in name):", "- Epic: 'Customer Places Order' (actor in name - WRONG)", "- Sub-Epic: 'OrderProcessor Validates Payment' (actor in name - WRONG)", "- Sub-Epic: 'Cart Adds Product' (actor in name - WRONG)", "- Story: 'InventoryManager Updates Stock' (actor in name - WRONG)", "", "Correct: Name is Verb-Noun only, actor documented separately"]}}]}}, {"rule_file": "use_outcome_verbs_not_communication_verbs.json", "rule_content": {"description": "Use Outcome Verbs, Not Communication Verbs", "scanner": "agile_bot.bots.base_bot.src.scanners.communication_verb_scanner.CommunicationVerbScanner", "examples": [{"do": {"description": "Use verbs that describe artifacts/outcomes", "content": ["Use verbs that describe artifacts/outcomes", "Examples: Animation, Feedback, Indicators, Configuration", "Name concepts by what they ARE or CREATE", "Examples: Power Activation Animation, Combat Outcome Feedback", "Focus on tangible results", "Examples: Hit Indicators, Save Result Feedback"]}, "dont": {"description": "Don't use generic communication verbs", "content": ["Don't use generic communication verbs", "Examples: showing, displaying, visualizing, presenting", "Don't use vague enablement verbs", "Examples: providing, enabling, allowing", "Don't name concepts by their mechanism", "Wrong Examples: Visualizing Power Activation, Showing Combat Results"]}}]}}], "token_estimate": 52315}}}, "23": {"action_state": "story_bot.1_shape.validate_rules", "status": "started", "timestamp": "2025-12-11T13:37:49.036102"}, "24": {"action_state": "story_bot.1_shape.validate_rules", "status": "completed", "timestamp": "2025-12-11T13:37:49.318478", "outputs": {"instructions": {"action": "validate_rules", "behavior": "1_shape", "base_instructions": ["**MANDATORY: Before validating any content, you MUST load and review the project's context files:**", "1. Load `{project_area}/docs/stories/clarification.json` - Contains key questions and evidence (generated file)", "2. Load `{project_area}/docs/stories/planning.json` - Contains assumptions and decisions (generated file)", "3. Load `{project_area}/docs/context/input.txt` (or similar) - Original input/source material if needed for validation (original context)", "", "**CRITICAL: File locations:**", "- **Generated files:** `{project_area}/docs/stories/clarification.json`, `{project_area}/docs/stories/planning.json`", "- **Original input:** `{project_area}/docs/context/input.txt` and other original context files", "", "These files contain critical requirements, decisions, and context that MUST be checked against during validation.", "", "**CRITICAL: Load planning.json and check for the current behavior's section (e.g., 'shape', 'discovery', 'exploration', 'specification'). Reference decisions_made and assumptions_made for the current behavior, as well as any previous behaviors that affect this work.**", "", "**Instructions:**", "1. Load and review `{project_area}/docs/stories/clarification.json` and `{project_area}/docs/stories/planning.json` to understand all requirements and decisions", "2. Check planning.json for the current behavior's decisions_made and assumptions_made sections", "3. Evaluate the Content Data against all rules listed above", "4. Check for violations of each rule", "5. Verify that Content Data incorporates all requirements from clarification.json and planning.json (especially the current behavior's decisions_made and assumptions_made)", "6. Generate a validation report with:", "   - List of all violations found (if any)", "   - Specific examples from the Content Data that violate rules", "   - Any missing requirements from clarification.json or planning.json (including stage-specific decisions/assumptions)", "   - Recommendations for fixing violations", "7. If no violations found, confirm that Content Data follows all rules and incorporates all requirements", "8. **MANDATORY: Save the validation report to a file**", "   - File name: `validation-report.md`", "   - Location: `{project_area}/{docs_path}/validation-report.md` (validation report goes in docs_path, NOT in context folder)", "   - Note: Generated context files (clarification.json, planning.json) are in `{project_area}/docs/stories/`, and validation report is also output to `{project_area}/{docs_path}/`", "   - Format: Markdown with sections for Status, Violations Found, Suggested Corrections", "   - Include: Total documents validated, violations count, rules checked count, summary", "   - After generating the report, write it to the file using standard file writing operations", "", "**CRITICAL: Verb-Noun Format Validation:**", "When checking verb-noun format for story/epic names:", "- Verb-noun format means [Verb] [Noun] structure - the verb can be in various forms (imperative 'Add', infinitive 'To Add', third person 'Adds')", "- DO NOT suggest pluralizing nouns unless the original is clearly grammatically incorrect", "- DO NOT remove important prepositional phrases or context from the noun part (e.g., 'Add Minion To Mob' is correct - don't suggest removing 'To Mob')", "- The format is about structure (verb + noun), not about specific verb tense or noun number", "- Examples of CORRECT verb-noun format: 'Add Minion To Mob', 'Create Mob', 'Group Minions', 'Select Strategy'", "- Examples of INCORRECT: 'Mob Management' (noun-noun, no verb), 'Adding Minion' (gerund, not action verb), 'Minion Addition' (noun-noun)", "", "**CRITICAL: Story Context and Flow Validation:**", "- Story order and context come from sequential_order in the story graph - if sequential_order is present, the order/context is already specified", "- DO NOT flag stories as 'missing context' if they have sequential_order - the order provides the context (when/why/outcome comes from position in sequence)", "- Flow validation (end-to-end user-system behavior, one interaction/response) will be handled in discovery phase - DO NOT flag these as violations in shape phase", "- In shape phase, focus on: naming format, domain concepts, story structure - NOT detailed flow/context which comes in discovery", "", "**MANDATORY: PAUSE FOR HUMAN FEEDBACK**", "When this action is complete, AI MUST pause and wait for human feedback. When human says 'done' or confirms completion, the workflow is complete for this behavior (no automatic next step).", "Based on code scanner diagnostics, edit the knowledge graph to fix violations:", "Rule rules\\maintain_verb_noun_consistency.json: 53 violations", "Rule rules\\map_sequential_spine_vs_optional_paths.json: 11 violations", "Rule rules\\stories_developed_and_tested_in_days.json: 13 violations", "Rule rules\\stories_follow_invest_principles.json: 28 violations", "Rule rules\\story_names_must_follow_verb_noun_format.json: 53 violations", "Rule rules\\use_active_behavioral_language.json: 3 violations", "Rule rules\\use_verb_noun_format_for_story_elements.json: 53 violations", "Rule apply_7_plus_minus_2_hierarchy.json: 13 violations", "Rule avoid_technical_implementation_language.json: 7 violations", "Rule enforce_specificity_in_stories.json: 4 violations", "Rule establish_spine_vs_optional_enhanced_behavior.json: 11 violations", "Rule prevent_implementation_details_as_stories.json: 2 violations", "Rule size_stories_3_to_12_days.json: 13 violations", "Rule use_active_behavioral_language.json: 3 violations", "Review each violation and update the knowledge graph accordingly."], "validation_rules": [{"rule_file": "rules\\maintain_verb_noun_consistency.json", "rule_content": {"description": "Maintain verb-noun consistency from epic to feature to story to scenario", "scanner": "agile_bot.bots.base_bot.src.scanners.verb_noun_scanner.VerbNounScanner", "do": {"examples": [{"description": "Use consistent verb-noun language across all levels", "content": ["Epic: Manage Orders \u2192 Feature: Place Order \u2192 Story: Customer places order \u2192 Scenario: When customer places order..."]}, {"description": "Maintain consistent terminology throughout hierarchy", "content": ["Epic, feature, story, and scenario all use same verb-noun pattern"]}, {"description": "Use verb-noun language in scenario sentences", "content": ["When user submits form, then system validates data"]}]}, "dont": {"examples": [{"description": "Don't switch formats between levels", "content": ["Epic: Order Management \u2192 Feature: Place Order (inconsistent format)"]}, {"description": "Don't mix verb-noun with other formats", "content": ["Epic uses verb-noun, but feature uses noun-only format"]}, {"description": "Don't use different terminology at different levels", "content": ["Epic says 'Orders', feature says 'Order Processing', story says 'Process Order'"]}]}}, "scanner_results": {"violations": [{"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"GM selects multiple minion tokens and system creates mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System groups selected tokens into mob collection\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System displays mob creation confirmation\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[2].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System displays mob creation confirmation\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[2].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"GM selects existing mob and adds minion tokens\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System adds selected tokens to mob collection\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System adds selected tokens to mob collection\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System creates minion tokens from actor templates\" uses noun-verb-noun pattern (actor prefix) - use verb-noun format without actor (e.g., \"Places Order\" not \"Customer places order\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[2].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System creates minion tokens from actor templates\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[2].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System creates minion tokens from actor templates\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[2].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System groups spawned tokens into new mob\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[2].story_groups[0].stories[2].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System updates mob collection and removes tokens\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System updates mob collection and removes tokens\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"GM selects mob and chooses strategy\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[0].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System displays available strategies\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System displays available strategies\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System assigns selected strategy to mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[0].story_groups[0].stories[2].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System assigns selected strategy to mob\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[0].story_groups[0].stories[2].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Sub_epic name \"Configure Strategy Options\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System saves strategy configuration for mob\" uses noun-verb-noun pattern (actor prefix) - use verb-noun format without actor (e.g., \"Places Order\" not \"Customer places order\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System saves strategy configuration for mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System saves strategy configuration for mob\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Sub_epic name \"Trigger Mob Action\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"GM clicks any token in mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System identifies mob containing clicked token\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System identifies mob containing clicked token\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System retrieves mob's active strategy\" uses noun-verb-noun pattern (actor prefix) - use verb-noun format without actor (e.g., \"Places Order\" not \"Customer places order\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System retrieves mob's active strategy\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System retrieves mob's active strategy\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System evaluates available targets using strategy criteria\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System evaluates available targets using strategy criteria\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System selects target based on strategy\" uses noun-verb-noun pattern (actor prefix) - use verb-noun format without actor (e.g., \"Places Order\" not \"Customer places order\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[2].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System selects target based on strategy\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[2].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System selects target based on strategy\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[2].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System displays selected target\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[3].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Sub_epic name \"Perform Mob Attack\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System checks range to target for each minion\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System moves minions within range if needed\" uses noun-verb-noun pattern (actor prefix) - use verb-noun format without actor (e.g., \"Places Order\" not \"Customer places order\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System moves minions within range if needed\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System moves minions within range if needed\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System executes attack action for all minions in mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[2].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System executes attack action for all minions in mob\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[2].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System determines movement path for out-of-range minions\" uses noun-verb-noun pattern (actor prefix) - use verb-noun format without actor (e.g., \"Places Order\" not \"Customer places order\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System determines movement path for out-of-range minions\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System determines movement path for out-of-range minions\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System moves minions to target area using Foundry movement\" uses noun-verb-noun pattern (actor prefix) - use verb-noun format without actor (e.g., \"Places Order\" not \"Customer places order\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System moves minions to target area using Foundry movement\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System moves minions to target area using Foundry movement\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Sub_epic name \"Attack Fleeing Target\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System identifies fleeing targets\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System identifies fleeing targets\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System executes attack on fleeing targets\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"System executes attack on fleeing targets\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[1].name"}]}}, {"rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "rule_content": {"description": "When mapping stories, carefully distinguish between sequential spine (essential path) and optional paths, alternate routes, or additional functionality that is not strictly essential. Sequential stories form the mandatory flow; optional stories are alternatives, enhancements, or non-essential features.", "do": {"examples": [{"description": "Identify the essential spine first", "content": ["Start by identifying the minimal essential path that delivers core value", "The spine represents the mandatory sequence: Story1 AND Story2 AND Story3", "Spine stories get sequential_order numbers (1, 2, 3, etc.)", "Spine stories are required for the feature to deliver its core purpose", "Ask: 'What is the minimum path to deliver value?'"]}, {"description": "Mark optional paths clearly", "content": ["Optional stories branch from or enhance the spine but are not required", "Mark optional stories with 'optional: true' in the story structure", "Optional stories may have sequential_order if they're part of an alternative flow", "Optional stories represent: alternate routes, enhancements, nice-to-have features", "Ask: 'Can the feature deliver value without this story?'"]}, {"description": "Distinguish types of optional paths with concrete examples", "content": ["Alternate routes: User logs in with email (sequential_order: 2) OR User logs in with social media (sequential_order: 2.1, optional: true)", "Enhancements: User views dashboard (sequential_order: 3) AND User customizes dashboard (sequential_order: 3.1, optional: true)", "Additional functionality: User views dashboard (sequential_order: 3) AND User shares dashboard (sequential_order: 3.2, optional: true)", "Error handling: User enters invalid data (sequential_order: 4) AND System shows error message (sequential_order: 4.1, optional: true)"]}, {"description": "Correct mapping examples", "content": ["Spine: User creates account (sequential_order: 1) AND User logs in (sequential_order: 2) AND User views dashboard (sequential_order: 3)", "Optional alternate: User logs in with email (sequential_order: 2) OR User logs in with social media (sequential_order: 2, optional: true)", "Optional enhancement: User views dashboard (sequential_order: 3) AND User customizes dashboard (optional: true, priority: 1)", "Additional functionality: User views dashboard (sequential_order: 3) AND User shares dashboard (optional: true, priority: 2)"]}]}, "dont": {"examples": [{"description": "Don't mark everything as sequential", "content": ["Don't assign sequential_order to all stories when some are optional", "Don't treat alternate routes as part of the spine", "Don't include enhancements in the mandatory sequential flow", "Don't confuse 'nice to have' with 'must have'"]}, {"description": "Don't omit optional markers", "content": ["Don't leave optional stories unmarked - be explicit", "Don't assume all stories in a feature are mandatory", "Don't mix optional and mandatory without clear distinction", "Don't fail to identify the spine before adding optional paths"]}, {"description": "Wrong mapping examples", "content": ["Wrong: User creates account (1) AND User logs in with email (2) AND User logs in with social media (3) - social media should be optional", "Wrong: User views dashboard (1) AND User customizes dashboard (2) AND User shares dashboard (3) - customization and sharing should be optional", "Wrong: All stories marked mandatory when some are clearly alternatives or enhancements", "Wrong: No distinction between essential path and optional features"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.spine_optional_scanner.SpineOptionalScanner"}, "scanner_results": {"violations": [{"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}]}}, {"rule_file": "rules\\stories_developed_and_tested_in_days.json", "rule_content": {"description": "Write stories that can be developed and tested in a matter of days", "do": {"examples": [{"description": "Create stories sized for days, not weeks", "content": ["Story takes 3-5 days to develop and test completely"]}, {"description": "Break large work into smaller stories", "content": ["Large feature broken into multiple stories, each completable in days"]}, {"description": "Focus on delivering complete, testable functionality quickly", "content": ["Each story delivers a complete piece of functionality that can be tested"]}]}, "dont": {"examples": [{"description": "Don't create stories that span multiple weeks", "content": ["Story requires 3+ weeks to complete (too large)"]}, {"description": "Don't create stories that can't be tested independently", "content": ["Story requires multiple other stories before it can be tested"]}, {"description": "Don't create stories without clear boundaries", "content": ["Story is vague about scope and completion criteria"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.story_sizing_scanner.StorySizingScanner"}, "scanner_results": {"violations": [{"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Epic \"Manage Mobs\" has 4 4 sub-epics/story groups (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[0].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Create Mob\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[0].sub_epics[0].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Group Minions To Mob\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Spawn Mob From Actors\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[0].sub_epics[2].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Edit Mob\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[3].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Epic \"Assign Strategies\" has 2 2 sub-epics/story groups (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[1].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Select Strategy For Mob\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[1].sub_epics[0].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Configure Strategy Options\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Trigger Mob Action\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Select Target From Strategy\" has 4 4 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[2].sub_epics[1].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Perform Mob Attack\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[2].sub_epics[2].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Handle Movement To Target\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Attack Fleeing Target\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].name"}]}}, {"rule_file": "rules\\stories_follow_invest_principles.json", "rule_content": {"description": "Ensure stories follow INVEST principles (Independent, Negotiable, Valuable, Estimable, Small, Testable)", "do": {"examples": [{"description": "Independent - story can be developed independently", "content": ["Story doesn't depend on other stories being completed first"]}, {"description": "Negotiable - story details can be negotiated", "content": ["Story allows for discussion and refinement of requirements"]}, {"description": "Valuable - story delivers value to user or business", "content": ["Story provides measurable value when completed"]}, {"description": "Estimable - story can be estimated", "content": ["Story is clear enough to estimate effort"]}, {"description": "Small - story can be completed in short time", "content": ["Story can be developed and tested in a matter of days"]}, {"description": "Testable - story has clear acceptance criteria", "content": ["Story has testable outcomes that can be verified"]}]}, "dont": {"examples": [{"description": "Don't create stories that depend on multiple other stories", "content": ["Story requires 5 other stories to be completed first (not independent)"]}, {"description": "Don't create stories that are too large", "content": ["Story spans multiple weeks and includes multiple features (not small)"]}, {"description": "Don't create stories without clear value", "content": ["Story doesn't provide measurable value to users or business"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.invest_principles_scanner.InvestPrinciplesScanner"}, "scanner_results": {"violations": [{"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"GM selects multiple minion tokens and system creates mob\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "GM selects multiple minion tokens and system creates mob"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"System groups selected tokens into mob collection\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "System groups selected tokens into mob collection"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"System displays mob creation confirmation\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "System displays mob creation confirmation"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"GM selects existing mob and adds minion tokens\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "GM selects existing mob and adds minion tokens"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"System adds selected tokens to mob collection\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "System adds selected tokens to mob collection"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"GM selects actor templates and specifies count\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "GM selects actor templates and specifies count"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"System creates minion tokens from actor templates\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "System creates minion tokens from actor templates"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"System groups spawned tokens into new mob\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "System groups spawned tokens into new mob"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"GM selects mob and removes minion tokens\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "GM selects mob and removes minion tokens"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"System updates mob collection and removes tokens\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "System updates mob collection and removes tokens"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"GM selects mob and chooses strategy\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "GM selects mob and chooses strategy"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"System displays available strategies\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "System displays available strategies"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"System assigns selected strategy to mob\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "System assigns selected strategy to mob"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"GM selects strategy and configures parameters\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "GM selects strategy and configures parameters"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"System saves strategy configuration for mob\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "System saves strategy configuration for mob"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"GM clicks any token in mob\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "GM clicks any token in mob"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"System identifies mob containing clicked token\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "System identifies mob containing clicked token"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"System retrieves mob's active strategy\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "System retrieves mob's active strategy"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"System evaluates available targets using strategy criteria\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "System evaluates available targets using strategy criteria"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"System selects target based on strategy\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "System selects target based on strategy"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"System displays selected target\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "System displays selected target"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"System checks range to target for each minion\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "System checks range to target for each minion"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"System moves minions within range if needed\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "System moves minions within range if needed"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"System executes attack action for all minions in mob\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "System executes attack action for all minions in mob"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"System determines movement path for out-of-range minions\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "System determines movement path for out-of-range minions"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"System moves minions to target area using Foundry movement\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "System moves minions to target area using Foundry movement"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"System identifies fleeing targets\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "System identifies fleeing targets"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"System executes attack on fleeing targets\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "System executes attack on fleeing targets"}]}}, {"rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "rule_content": {"description": "CRITICAL: Story names MUST follow Verb-Noun format (e.g., 'Move To Mob Leaders Turn', 'Determines Target from Strategy', 'Initiate Mob Attack'), and include italicized description showing component interactions (e.g., '*Combat Tracker moves to any mob member's turn, auto moves to mob leader's turn*'). The story name should be concise and action-oriented, while the description shows the component-to-component interactions.", "scanner": "agile_bot.bots.base_bot.src.scanners.verb_noun_scanner.VerbNounScanner", "do": {"examples": [{"description": "Use concise Verb-Noun format for story names", "content": ["Move To Mob Leaders Turn, Determines Target from Strategy, Initiate Mob Attack"]}, {"description": "Include italicized description showing component interactions", "content": ["*Combat Tracker moves to any mob member's turn, auto moves to mob leader's turn*"]}, {"description": "Make story name concise and action-oriented", "content": ["Story name: 'Initiate Mob Attack' - concise and action-oriented"]}, {"description": "Show component interactions in description", "content": ["Story description shows how components interact with each other"]}]}, "dont": {"examples": [{"description": "Don't use long descriptive names without Verb-Noun format", "content": ["The system should allow users to move to mob leaders turn when..."]}, {"description": "Don't omit component interaction descriptions", "content": ["Story name without italicized description of component interactions"]}, {"description": "Don't use vague or non-action-oriented names", "content": ["Mob Leader Turn System, Attack Mechanism"]}]}}, "scanner_results": {"violations": [{"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"GM selects multiple minion tokens and system creates mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System groups selected tokens into mob collection\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System displays mob creation confirmation\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[2].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System displays mob creation confirmation\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[2].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"GM selects existing mob and adds minion tokens\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System adds selected tokens to mob collection\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System adds selected tokens to mob collection\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System creates minion tokens from actor templates\" uses noun-verb-noun pattern (actor prefix) - use verb-noun format without actor (e.g., \"Places Order\" not \"Customer places order\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[2].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System creates minion tokens from actor templates\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[2].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System creates minion tokens from actor templates\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[2].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System groups spawned tokens into new mob\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[2].story_groups[0].stories[2].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System updates mob collection and removes tokens\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System updates mob collection and removes tokens\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"GM selects mob and chooses strategy\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[0].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System displays available strategies\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System displays available strategies\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System assigns selected strategy to mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[0].story_groups[0].stories[2].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System assigns selected strategy to mob\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[0].story_groups[0].stories[2].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Sub_epic name \"Configure Strategy Options\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System saves strategy configuration for mob\" uses noun-verb-noun pattern (actor prefix) - use verb-noun format without actor (e.g., \"Places Order\" not \"Customer places order\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System saves strategy configuration for mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System saves strategy configuration for mob\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Sub_epic name \"Trigger Mob Action\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"GM clicks any token in mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System identifies mob containing clicked token\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System identifies mob containing clicked token\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System retrieves mob's active strategy\" uses noun-verb-noun pattern (actor prefix) - use verb-noun format without actor (e.g., \"Places Order\" not \"Customer places order\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System retrieves mob's active strategy\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System retrieves mob's active strategy\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System evaluates available targets using strategy criteria\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System evaluates available targets using strategy criteria\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System selects target based on strategy\" uses noun-verb-noun pattern (actor prefix) - use verb-noun format without actor (e.g., \"Places Order\" not \"Customer places order\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[2].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System selects target based on strategy\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[2].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System selects target based on strategy\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[2].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System displays selected target\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[3].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Sub_epic name \"Perform Mob Attack\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System checks range to target for each minion\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System moves minions within range if needed\" uses noun-verb-noun pattern (actor prefix) - use verb-noun format without actor (e.g., \"Places Order\" not \"Customer places order\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System moves minions within range if needed\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System moves minions within range if needed\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System executes attack action for all minions in mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[2].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System executes attack action for all minions in mob\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[2].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System determines movement path for out-of-range minions\" uses noun-verb-noun pattern (actor prefix) - use verb-noun format without actor (e.g., \"Places Order\" not \"Customer places order\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System determines movement path for out-of-range minions\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System determines movement path for out-of-range minions\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System moves minions to target area using Foundry movement\" uses noun-verb-noun pattern (actor prefix) - use verb-noun format without actor (e.g., \"Places Order\" not \"Customer places order\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System moves minions to target area using Foundry movement\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System moves minions to target area using Foundry movement\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Sub_epic name \"Attack Fleeing Target\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System identifies fleeing targets\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System identifies fleeing targets\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System executes attack on fleeing targets\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"System executes attack on fleeing targets\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[1].name"}]}}, {"rule_file": "rules\\use_active_behavioral_language.json", "rule_content": {"description": "Use active behavioral language with action verbs. Describe behaviors, not tasks or capabilities.", "scanner": "agile_bot.bots.base_bot.src.scanners.active_language_scanner.ActiveLanguageScanner", "examples": [{"do": {"description": "Use action verbs to describe what happens", "content": ["Use action verbs to describe what happens", "Example: User submits order, System validates payment", "Favor active behavioral language over functional/capability breakup", "Use story maps to outline user and system behavior (NOT tasks)", "Use action verbs: submits, views, validates, sends, displays", "Describe behaviors: [Actor] [action] [object]", "Use active behavior language: Place order (active behavior), Validate payment (active behavior)"]}, "dont": {"description": "Avoid capability nouns and task language", "content": ["Avoid capability nouns that describe functions rather than behaviors", "Don't use functional or capability-based language instead of behavioral language", "Don't use capability nouns: Management, Processing, Administration", "Don't use task verbs: implement, create, build, set up", "Don't use task language", "", "Wrong Examples:", "- Order Management, Payment Processing (capability nouns)", "- Focus on tasks instead of behaviors", "- Order Management (capability), Implement order placement (task)"]}}]}, "scanner_results": {"violations": [{"rule": "rules\\use_active_behavioral_language", "rule_file": "rules\\use_active_behavioral_language.json", "violation_message": "Sub_epic name \"Trigger Mob Action\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].name"}, {"rule": "rules\\use_active_behavioral_language", "rule_file": "rules\\use_active_behavioral_language.json", "violation_message": "Sub_epic name \"Handle Movement To Target\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].name"}, {"rule": "rules\\use_active_behavioral_language", "rule_file": "rules\\use_active_behavioral_language.json", "violation_message": "Sub_epic name \"Attack Fleeing Target\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].name"}]}}, {"rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "rule_content": {"description": "Use verb-noun format for all story elements (epic names, feature names, story titles)", "scanner": "agile_bot.bots.base_bot.src.scanners.verb_noun_scanner.VerbNounScanner", "do": {"examples": [{"description": "Use verb-noun format for epic names", "content": ["Manage Orders, Create Character, Process Payment"]}, {"description": "Use verb-noun format for feature names", "content": ["Place Order, Validate Payment, Save Character"]}, {"description": "Use verb-noun format for story titles", "content": ["Customer places order, System validates payment, User saves character"]}, {"description": "Use verb-noun format for scenario sentences", "content": ["User submits form, System processes request"]}]}, "dont": {"examples": [{"description": "Don't use noun-only or capability-based names", "content": ["Order Management, Payment Processing, Character System"]}, {"description": "Don't mix verb-noun with other formats", "content": ["Order Management and Place Order (mixed format)"]}, {"description": "Don't use gerund forms", "content": ["Ordering, Processing Payments, Creating Characters"]}]}}, "scanner_results": {"violations": [{"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"GM selects multiple minion tokens and system creates mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System groups selected tokens into mob collection\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System displays mob creation confirmation\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[2].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System displays mob creation confirmation\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[2].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"GM selects existing mob and adds minion tokens\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System adds selected tokens to mob collection\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System adds selected tokens to mob collection\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System creates minion tokens from actor templates\" uses noun-verb-noun pattern (actor prefix) - use verb-noun format without actor (e.g., \"Places Order\" not \"Customer places order\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[2].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System creates minion tokens from actor templates\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[2].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System creates minion tokens from actor templates\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[2].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System groups spawned tokens into new mob\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[2].story_groups[0].stories[2].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System updates mob collection and removes tokens\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System updates mob collection and removes tokens\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"GM selects mob and chooses strategy\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[0].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System displays available strategies\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System displays available strategies\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System assigns selected strategy to mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[0].story_groups[0].stories[2].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System assigns selected strategy to mob\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[0].story_groups[0].stories[2].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Sub_epic name \"Configure Strategy Options\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System saves strategy configuration for mob\" uses noun-verb-noun pattern (actor prefix) - use verb-noun format without actor (e.g., \"Places Order\" not \"Customer places order\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System saves strategy configuration for mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System saves strategy configuration for mob\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Sub_epic name \"Trigger Mob Action\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"GM clicks any token in mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System identifies mob containing clicked token\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System identifies mob containing clicked token\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System retrieves mob's active strategy\" uses noun-verb-noun pattern (actor prefix) - use verb-noun format without actor (e.g., \"Places Order\" not \"Customer places order\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System retrieves mob's active strategy\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System retrieves mob's active strategy\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System evaluates available targets using strategy criteria\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System evaluates available targets using strategy criteria\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System selects target based on strategy\" uses noun-verb-noun pattern (actor prefix) - use verb-noun format without actor (e.g., \"Places Order\" not \"Customer places order\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[2].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System selects target based on strategy\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[2].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System selects target based on strategy\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[2].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System displays selected target\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[3].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Sub_epic name \"Perform Mob Attack\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System checks range to target for each minion\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System moves minions within range if needed\" uses noun-verb-noun pattern (actor prefix) - use verb-noun format without actor (e.g., \"Places Order\" not \"Customer places order\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System moves minions within range if needed\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System moves minions within range if needed\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System executes attack action for all minions in mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[2].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System executes attack action for all minions in mob\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[2].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System determines movement path for out-of-range minions\" uses noun-verb-noun pattern (actor prefix) - use verb-noun format without actor (e.g., \"Places Order\" not \"Customer places order\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System determines movement path for out-of-range minions\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System determines movement path for out-of-range minions\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System moves minions to target area using Foundry movement\" uses noun-verb-noun pattern (actor prefix) - use verb-noun format without actor (e.g., \"Places Order\" not \"Customer places order\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System moves minions to target area using Foundry movement\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System moves minions to target area using Foundry movement\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Sub_epic name \"Attack Fleeing Target\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System identifies fleeing targets\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System identifies fleeing targets\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System executes attack on fleeing targets\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"System executes attack on fleeing targets\" contains actor prefix (e.g., \"Customer\") - use verb-noun format without actor", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[1].name"}]}}, {"rule_file": "apply_7_plus_minus_2_hierarchy.json", "rule_content": {"description": "Apply 7\u00b12 rule for hierarchy: epics contain 4-9 sub-epics, sub-epics contain 4-9 stories. Split when exceeding, merge when below minimum.", "scanner": "agile_bot.bots.base_bot.src.scanners.story_sizing_scanner.StorySizingScanner", "examples": [{"do": {"description": "Maintain hierarchy within the 7\u00b12 cognitive limit range", "content": ["(E) Epic: Contains 4-9 sub-epics", "  - Split into additional Sub-Epics when > 9 sub-epics", "  - Merge with another epic when < 4 sub-epics", "(E) Sub-Epic: Contains 4-9 stories", "  - Split into 2 sub-epics when > 9 stories", "  - Merge with another sub-epic when < 4 stories", "(S) Story: Contains 2-9 acceptance criteria", "  - Split into 2 stories when > 9 AC", "  - Merge with another story when < 2 AC (single AC stories are too small)", "Apply 7\u00b12 cognitive limit principle (optimal range: 5-9, acceptable: 4-9)", "", "Example:", "(E) Manage Orders (10 sub-epics \u2192 SPLIT)", "  and (E) Manage Customer Orders (6 stories) \u2713", "  and (E) Manage Order Fulfillment (4 stories) \u2713", "", "(E) Place Order (12 stories \u2192 SPLIT)", "  and (S) Initiate Order (6 AC) \u2713", "  and (S) Complete Order (6 AC) \u2713", "", "(S) Validate Payment (11 AC \u2192 SPLIT)", "  and (AC) Check Payment Method (5 steps) \u2713", "  and (AC) Process Payment Transaction (6 steps) \u2713"]}, "dont": {"description": "Don't exceed thresholds or create items below minimum", "content": ["Create epics with > 9 sub-epics (use additional Sub-Epics instead)", "Create sub-epics with > 9 stories (split the sub-epic)", "Create stories with > 9 acceptance criteria (split the story)", "Create very small stories with < 2 AC (merge with related story)", "Ignore sizing thresholds during shaping, discovery, or exploration", "", "Wrong Examples:", "- (E) Epic with 15 sub-epics (too many, use additional Sub-Epics)", "- (E) Sub-Epic with 15 stories (too many, split sub-epic)", "- (S) Story with 15 AC (too many, split story)", "- (S) Story with 1 AC (too small, merge with related story)"]}}]}, "scanner_results": {"violations": [{"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Epic \"Manage Mobs\" has 4 4 sub-epics/story groups (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[0].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Create Mob\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[0].sub_epics[0].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Group Minions To Mob\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Spawn Mob From Actors\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[0].sub_epics[2].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Edit Mob\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[3].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Epic \"Assign Strategies\" has 2 2 sub-epics/story groups (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[1].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Select Strategy For Mob\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[1].sub_epics[0].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Configure Strategy Options\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Trigger Mob Action\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Select Target From Strategy\" has 4 4 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[2].sub_epics[1].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Perform Mob Attack\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[2].sub_epics[2].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Handle Movement To Target\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Attack Fleeing Target\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].name"}]}}, {"rule_file": "avoid_noun_redundancy.json", "rule_content": {"description": "When shaping stories, avoid noun redundancy in domain and concept names", "context": "when shaping stories", "examples": [{"do": {"description": "INTEGRATE first: nest related capabilities under one domain", "content": ["INTEGRATE first: nest related capabilities under one domain (90% of cases)", "Only then rename: use distinct nouns ONLY when integration doesn't make sense", "Test for uniqueness: Can you remove the qualifier and still know what it is?", "Use subject-area nouns when domains are genuinely separate", "Only when integration truly doesn't make sense"]}, "dont": {"description": "Don't rename without considering integration", "content": ["Don't rename without considering integration (this hides the real issue)", "Wrong: Repeat same noun with different prefixes: X Animation, Y Animation, Z Animation", "Don't use vague qualifiers to avoid integration", "Wrong: Animation 1, Animation System", "Don't create parallel domains that should be nested", "Wrong: Integrate related concepts rather than creating redundant structures"]}}], "scanner": "agile_bot.bots.base_bot.src.scanners.noun_redundancy_scanner.NounRedundancyScanner"}, "scanner_results": {"violations": []}}, {"rule_file": "avoid_technical_implementation_language.json", "rule_content": {"description": "When shaping stories, avoid technical implementation language in user-facing story elements", "context": "when shaping stories", "do": {"examples": [{"description": "Use business language in user-facing elements", "content": ["Customer places order, User views profile, Admin approves request"]}, {"description": "Focus on what user experiences, not how it's implemented", "content": ["Story describes user experience, not technical implementation"]}]}, "dont": {"examples": [{"description": "Don't use development task language", "content": ["implement, create, refactor, optimize, fix, build, set up"]}, {"description": "Don't use technical implementation details", "content": ["query database, call API, update table"]}, {"description": "Don't focus on delivery or development tasks", "content": ["Implement order system, Create database schema, Set up API endpoints"]}, {"description": "Don't focus on system internals", "content": ["Optimize query performance, Refactor authentication code, Update configuration"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.technical_language_scanner.TechnicalLanguageScanner"}, "scanner_results": {"violations": [{"rule": "avoid_technical_implementation_language", "rule_file": "avoid_technical_implementation_language.json", "violation_message": "Story element \"Create Mob\" uses technical implementation verb \"create\" - use business language focusing on user experience", "severity": "error", "line_number": null, "location": "Create Mob"}, {"rule": "avoid_technical_implementation_language", "rule_file": "avoid_technical_implementation_language.json", "violation_message": "Story element \"GM selects multiple minion tokens and system creates mob\" uses technical implementation verb \"create\" - use business language focusing on user experience", "severity": "error", "line_number": null, "location": "GM selects multiple minion tokens and system creates mob"}, {"rule": "avoid_technical_implementation_language", "rule_file": "avoid_technical_implementation_language.json", "violation_message": "Story element \"System creates minion tokens from actor templates\" uses technical implementation verb \"create\" - use business language focusing on user experience", "severity": "error", "line_number": null, "location": "System creates minion tokens from actor templates"}, {"rule": "avoid_technical_implementation_language", "rule_file": "avoid_technical_implementation_language.json", "violation_message": "Story element \"System updates mob collection and removes tokens\" uses technical implementation verb \"update\" - use business language focusing on user experience", "severity": "error", "line_number": null, "location": "System updates mob collection and removes tokens"}, {"rule": "avoid_technical_implementation_language", "rule_file": "avoid_technical_implementation_language.json", "violation_message": "Story element \"Configure Strategy Options\" uses technical implementation verb \"configure\" - use business language focusing on user experience", "severity": "error", "line_number": null, "location": "Configure Strategy Options"}, {"rule": "avoid_technical_implementation_language", "rule_file": "avoid_technical_implementation_language.json", "violation_message": "Story element \"GM selects strategy and configures parameters\" uses technical implementation verb \"configure\" - use business language focusing on user experience", "severity": "error", "line_number": null, "location": "GM selects strategy and configures parameters"}, {"rule": "avoid_technical_implementation_language", "rule_file": "avoid_technical_implementation_language.json", "violation_message": "Story element \"System saves strategy configuration for mob\" uses technical implementation phrase \"configuration\" - focus on what user experiences, not how it's implemented", "severity": "error", "line_number": null, "location": "System saves strategy configuration for mob"}]}}, {"rule_file": "avoid_technical_stories.json", "rule_content": {"description": "Technical stories represent implementation tasks that do not describe system behavior. They are normally avoided in favor of user stories and system stories. When technical stories are necessary, they should be marked with story_type: 'technical' and kept minimal.", "do": {"examples": [{"description": "Prefer user stories and system stories over technical stories", "content": ["Instead of 'Set up database schema', use 'Store user data' (user story)", "Instead of 'Create API endpoint', use 'Expose user data via API' (system story)", "Instead of 'Write unit tests', use 'Verify story behavior' (user story)"]}, {"description": "When technical stories are necessary, mark with story_type: 'technical'", "content": ["Story: 'Migrate legacy data format' with story_type: 'technical'", "Story: 'Refactor authentication module' with story_type: 'technical'", "Story: 'Update dependency versions' with story_type: 'technical'"]}, {"description": "Keep technical stories minimal and focused", "content": ["Technical stories should be rare exceptions", "Technical stories should still follow Verb-Noun format", "Technical stories should be clearly justified"]}]}, "dont": {"examples": [{"description": "Don't create technical stories for normal development work", "content": ["Avoid: 'Write code', 'Create class', 'Add method'", "Avoid: 'Set up CI/CD', 'Configure database', 'Install package'", "These are implementation details, not stories"]}, {"description": "Don't use technical stories to describe system behavior", "content": ["Use system stories for system-to-system behavior", "Use user stories for user-facing behavior", "Technical stories are for unavoidable implementation tasks only"]}]}}, "scanner_results": {}}, {"rule_file": "balance_fine_grained_testable_stories.json", "rule_content": {"description": "Balance fine-grained stories with testable and valuable independent units. Stories must deliver value and be independently testable.", "examples": [{"do": {"description": "Create stories that are complete interactions with value", "content": ["Create stories that are complete interactions with value", "Example: Customer places order (complete interaction, testable, valuable)", "Balance fine-grained stories with testable/valuable stories", "Ensure stories are fine-grained enough to enable frequent feedback", "Ensure stories are grouped into meaningful chunks for high quality feedback", "Stories that deliver measurable value independently"]}, "dont": {"description": "Avoid stories that are too small or too large", "content": ["Avoid stories that are too small and have no value alone", "Don't create stories that are too fine-grained without being testable or valuable", "Don't create stories that are too large to be testable or deliverable quickly", "", "Wrong Examples:", "- Add order button (too fine-grained, no value alone)", "- Change button color (too fine-grained, no value)", "- Customer places order and views history and updates profile (too large, multiple flows)"]}}]}, "scanner_results": {}}, {"rule_file": "create_lightweight_precise_docs.json", "rule_content": {"description": "Create lightweight but precise documentation during shaping. Focus on structure and scope, not detailed specifications.", "examples": [{"do": {"description": "Create lightweight but precise documentation during shaping", "content": ["Balance fine-grained stories with testable/valuable stories", "Ensure stories are fine-grained enough to enable frequent feedback", "Ensure stories are grouped into meaningful chunks for high quality feedback", "Validate that a business expert can understand the language of most of the stories", "Focus the language on the business domain", "Create lightweight but precise documentation", "Focus on structure and scope, not detailed specifications", "Make the map easy to walk through (it tells a story)", "", "Example:", "(E) Manage Orders", "  and (E) Place Order", "    and (S) Customer --> places order", "(Shows hierarchy and structure, not detailed specs)"]}, "dont": {"description": "Don't over-elaborate or add detailed specifications during shaping", "content": ["Create stories that are too fine-grained without being testable or valuable", "Create stories that are too large to be testable or deliverable quickly", "Add detailed technical specifications during shaping phase", "Over-elaborate story mapping during shaping", "", "Wrong Example:", "(E) Manage Orders", "  and (E) Place Order", "    and (S) Customer --> places order", "  \u2192 Detailed API specs, database schema, UI mockups", "(Too much detail for shaping phase)"]}}]}, "scanner_results": {}}, {"rule_file": "discover_relationships_from_story_map.json", "rule_content": {"description": "Domain Discovery determines relationships and responsibilities between core domain objects by walking through the story map, then suggests story refinements to rebuild the story map to complement the domain model.", "examples": [{"do": {"description": "Extract keywords from story map and determine relationships and responsibilities", "content": "Go through all stories in increment scope, extract keywords from story titles/descriptions/acceptance criteria, ask clarifying questions for each keyword, map relationships with multiplicities, document responsibilities"}, "dont": {"description": "Don't skip keyword identification or build domain model without story map analysis", "content": "Skip going through stories, ignore keywords in acceptance criteria, build domain model without asking what keywords mean, use technical terms instead of domain terms"}}]}, "scanner_results": {}}, {"rule_file": "enforce_behavioral_journey_flow.json", "rule_content": {"description": "When shaping stories, CRITICAL: Stories must show user/system journey flow, not just list operations. Stories must include context (when/why actions happen) and connect logically. Order by user journey, not technical sequential_order.", "context": "when shaping stories", "examples": [{"do": {"description": "Show user/system journey with context and flow", "content": ["Stories must show WHEN and WHY actions happen, not just WHAT", "Story maps must show logical flow: Initialize \u2192 Validate \u2192 Process \u2192 Confirm \u2192 Complete", "Each story must connect to previous/next stories in the journey", "Order stories by user journey flow, not by technical sequential_order", "", "Correct Examples (with journey context - Payment Domain):", "(E) Process Payment", "  and (E) Process Card Payment", "    and (S) User --> invokes process payment command", "    and (S) System --> validates payment details", "    and (S) System --> authorizes payment", "    and (S) System --> processes payment transaction", "    and (S) System --> confirms payment and sends notification", "", "(E) Refund Payment", "  and (E) Process Refund", "    and (S) User --> invokes refund payment command", "    and (S) System --> validates refund eligibility", "    and (S) System --> processes refund transaction", "    and (S) System --> confirms refund and sends notification", "", "(E) Process Payment", "  and (E) Validate Payment", "    and (S) User --> submits payment request", "    and (S) System --> validates card number", "    and (S) System --> validates amount", "    and (S) System --> validates currency", "    and (S) System --> returns validation result", "", "Note: Individual stories like 'Authorize Payment with Processor' are correct story format (verb-noun, specific), but they need to be part of a journey. Stories should NOT include actors in the name (actors are documented separately).", "", "Correct Individual Stories (but need journey context):", "- 'Authorize Payment with Processor' (correct story format, but needs: when? why? what happens next?)", "- 'Validate Payment Details' (correct story format, but needs: when? why? what triggers this?)", "- 'Process Payment Transaction' (correct story format, but needs: when? why? what happens before/after?)", "", "Journey Flow Requirements:", "- Start with initialization/entry point", "- Show logical progression through operations", "- Include error handling and alternative paths", "- End with completion/save operations", "- Connect stories logically (this leads to that)"]}, "dont": {"description": "Don't create isolated sets of functions that don't make sense linearly", "content": ["Don't group unrelated operations together that don't form a logical journey", "Don't create story maps with random functions that have no linear relationship", "Don't mix unrelated operations from different domains or contexts", "", "Wrong Examples (isolated sets of functions, no linear sense - Payment Domain):", "(E) Payment Operations", "  and (E) Process Payment", "  and (E) Generate Invoice", "  and (E) Send Email", "  and (E) Update Inventory", "  and (E) Calculate Tax", "(unrelated operations, no linear flow - why does email come after payment? why inventory? no journey)", "", "(E) Payment System", "  and (E) Authorize Payment", "  and (E) Create User Account", "  and (E) Process Refund", "  and (E) Generate Report", "  and (E) Delete Transaction", "(random operations, no logical sequence - account creation doesn't follow authorization, deletion doesn't follow processing)", "", "(E) Payment Flow", "  and (S) System --> validates payment", "  and (S) System --> sends notification", "  and (S) System --> authorizes payment", "  and (S) System --> updates database", "  and (S) System --> processes payment", "(wrong order, no linear sense - notification before authorization? database update before processing?)", "", "What Makes It NOT a Linear Journey:", "- Unrelated operations grouped together (payment + inventory + email + tax - why together?)", "- Operations from different contexts mixed (payment + user account + reporting - different domains)", "- No logical sequence (why does X come before Y? no reason)", "- Operations can be in any order (no dependencies, no flow)", "- Random collection of functions (like a function library, not a journey)", "- No user/system goal that connects them (what are we trying to accomplish?)"]}}]}, "scanner_results": {}}, {"rule_file": "enforce_functional_accomplishment.json", "rule_content": {"description": "CRITICAL: Stories must represent complete functional accomplishments, not data access operations or implementation steps. Stories must deliver value independently.", "examples": [{"do": {"description": "Create stories that accomplish complete functions", "content": ["Stories must represent complete functional accomplishments", "Stories must deliver value independently (INVEST principle)", "Stories must show end-to-end flow, not just data access", "", "Correct Examples (complete functional accomplishments):", "- 'User loads story graph and system displays epics in diagram' (complete: load + display = accomplishment)", "- 'Developer edits epic name and system updates diagram' (complete: edit + update = accomplishment)", "- 'User requests render and system generates DrawIO file' (complete: request + generate = accomplishment)", "- 'CLI invokes render command and system saves outline diagram' (complete: invoke + save = accomplishment)", "", "Functional Accomplishment Requirements:", "- Story must accomplish something meaningful for user/system", "- Story must be independently valuable (can be tested/delivered alone)", "- Story must show complete flow (start \u2192 process \u2192 outcome)", "- Story must have clear acceptance criteria (how do we know it's done?)"]}, "dont": {"description": "Don't create stories that are just data access or implementation steps", "content": ["Don't create stories that are just data access operations", "Don't create stories that are implementation steps without outcomes", "Don't create stories that aren't independently valuable", "", "Wrong Examples (not complete accomplishments):", "- 'Read All Epics from Diagram' (data access - not accomplishment, what happens with the data?)", "- 'Load All Features In Graph Epic' (data access - not accomplishment)", "- 'Serialize Components to JSON' (implementation step - not accomplishment, part of what story?)", "- 'Convert Diagram to StoryGraph Format' (implementation step - not accomplishment)", "- 'Calculate Component Positions' (implementation step - not accomplishment)", "", "Data Access/Implementation Indicators (REJECT as stories):", "- Just reads/loads data without using it", "- Just converts/formats data without purpose", "- Just calculates/computes without outcome", "- Just serializes/saves without context", "", "These should be STEPS within stories, not stories themselves:", "- Step: 'System reads epics from diagram' (within story: 'User views story map and system displays epics')", "- Step: 'System serializes components' (within story: 'User saves story graph and system writes JSON file')", "- Step: 'System calculates positions' (within story: 'User requests render and system generates positioned diagram')", "", "Instead, ask:", "- What does the user/system accomplish with this?", "- Is this independently valuable?", "- Can this be tested/delivered alone?", "- What's the complete flow from start to finish?"]}}]}, "scanner_results": {}}, {"rule_file": "enforce_specificity_in_stories.json", "rule_content": {"description": "CRITICAL: Stories must be specific about what, when, why, and who. Generic operations like 'Add Sub-Epic' or 'Read Epics' are insufficient - stories must include context and specificity.", "scanner": "agile_bot.bots.base_bot.src.scanners.specificity_scanner.SpecificityScanner", "examples": [{"do": {"description": "Create specific stories with full context", "content": ["Stories must be specific about what, when, why, and who", "Stories must include context: when does it happen? why? what triggers it?", "Stories must specify actors, objects, and outcomes clearly", "", "Correct Examples (specific with context - Payment Domain):", "- 'User processes payment for order #12345 with amount $50.00 when customer completes checkout' (specific: user, order ID, amount, context)", "- 'Merchant invokes refund command from API and system reverses payment transaction' (specific: merchant, API, command, outcome)", "- 'System validates payment card number 4111-1111-1111-1111 when user submits payment form' (specific: system, card number, trigger)", "- 'User clicks Process Payment button and system prompts for payment method selection' (specific: user, action, UI element, system response)", "", "Specificity Requirements:", "- WHO: Specific actor (User, Merchant, Customer, System, PaymentProcessor, API)", "- WHAT: Specific action and object (processes payment for order #12345 with amount $50.00)", "- WHEN: Specific trigger/context (when customer completes checkout, when user submits payment form)", "- WHY: Purpose in journey (to complete purchase transaction, to reverse payment error)", "- OUTCOME: Specific result (payment processed, transaction ID returned, notification sent)"]}, "dont": {"description": "Don't create generic stories without context", "content": ["Don't create generic operations without specificity", "Don't omit context about when/why actions happen", "Don't use vague descriptions without details", "", "Wrong Examples (generic without context - Payment Domain):", "- 'Process Payment' (which payment? for which order? when? why?)", "- 'Authorize Payment' (which payment? with which card? when? why? what happens next?)", "- 'Exposes Payment API' (which endpoints? to whom? when? why?)", "- 'Refund Payment' (which payment? for which reason? when? why?)", "", "Generic Indicators (REJECT or require more specificity):", "- Single verb + noun without context: 'Process Payment', 'Authorize Payment', 'Refund Payment'", "- No specific objects: 'Process Payment' (which payment? which order?)", "- No context: 'Authorize Payment' (when? why? what triggers this?)", "- No outcome: 'Authorize Payment' (what happens with the authorization result?)", "", "Instead, ask:", "- Which specific object? (payment ID, order number, transaction ID, card number)", "- When does this happen? (trigger, context, user action - when customer completes checkout, when merchant requests refund)", "- Why does this happen? (purpose, user need, journey step - to complete purchase, to reverse error)", "- What's the outcome? (result, system response, user experience - payment processed, transaction ID returned, notification sent)"]}}]}, "scanner_results": {"violations": [{"rule": "enforce_specificity_in_stories", "rule_file": "enforce_specificity_in_stories.json", "violation_message": "Epic name \"Manage Mobs\" is too generic - add context (e.g., \"Process Order Payment\" not \"Process Payment\")", "severity": "error", "line_number": null, "location": "epics[0].name"}, {"rule": "enforce_specificity_in_stories", "rule_file": "enforce_specificity_in_stories.json", "violation_message": "Sub_epic name \"Create Mob\" is too generic - add context (e.g., \"Process Order Payment\" not \"Process Payment\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].name"}, {"rule": "enforce_specificity_in_stories", "rule_file": "enforce_specificity_in_stories.json", "violation_message": "Sub_epic name \"Edit Mob\" is too generic - add context (e.g., \"Process Order Payment\" not \"Process Payment\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[3].name"}, {"rule": "enforce_specificity_in_stories", "rule_file": "enforce_specificity_in_stories.json", "violation_message": "Epic name \"Assign Strategies\" is too generic - add context (e.g., \"Process Order Payment\" not \"Process Payment\")", "severity": "error", "line_number": null, "location": "epics[1].name"}]}}, {"rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "rule_content": {"description": "Establish mandatory spine stories vs optional/enhanced behavior stories. When mapping stories, carefully distinguish between sequential spine (essential path) and optional paths, alternate routes, or additional functionality that is not strictly essential. Mandatory stories form the sequential spine (story AND story AND story). Optional stories are alternatives or enhancements (story OR story) that branch from the spine and can return to it. Sequential stories form the mandatory flow; optional stories are alternatives, enhancements, or non-essential sub-epics.", "scanner": "agile_bot.bots.base_bot.src.scanners.spine_optional_scanner.SpineOptionalScanner", "examples": [{"do": {"description": "Identify the essential spine first", "content": ["Start by identifying the minimal essential path that delivers core value", "The spine represents the mandatory sequence: Story1 AND Story2 AND Story3", "Spine stories get sequential_order numbers (1, 2, 3, etc.)", "Spine stories are required for the sub-epic to deliver its core purpose", "Ask: 'What is the minimum path to deliver value?'", "Establish the mandatory spine before identifying optional/enhanced behaviors", "Explicitly distinguish between spine (mandatory) and optional/enhanced behaviors"]}, "dont": {"description": "Don't mark everything as sequential", "content": ["Don't assign sequential_order to all stories when some are optional", "Don't treat alternate routes as part of the spine", "Don't include enhancements in the mandatory sequential flow", "Don't confuse 'nice to have' with 'must have'", "Don't mark all stories as mandatory when some are alternatives or enhancements", "Don't fail to establish the spine before adding optional/enhanced behaviors"]}}, {"do": {"description": "Mark optional paths clearly", "content": ["Optional stories branch from or enhance the spine but are not required", "Mark optional stories with 'optional: true' in the story structure", "Optional stories may have sequential_order if they're part of an alternative flow (e.g., 2.1, 3.1, etc.)", "Optional stories represent: alternate routes, enhancements, nice-to-have sub-epics", "Ask: 'Can the sub-epic deliver value without this story?'", "Optional/enhanced stories can return to the spine after completion", "Sort optional/enhanced stories by priority of delivery within the same sub-epic"]}, "dont": {"description": "Don't omit optional markers", "content": ["Don't leave optional stories unmarked - be explicit", "Don't assume all stories in a sub-epic are mandatory", "Don't mix optional and mandatory without clear distinction", "Don't fail to identify the spine before adding optional paths", "Don't omit the optional marker - be explicit about spine vs optional/enhanced behaviors", "Don't create sub-epics where every story is mandatory when alternatives or enhancements exist"]}}, {"do": {"description": "Distinguish types of optional paths with concrete examples", "content": ["Spine (all stories with and), then OR optional branch (all stories with and), then OR enhanced (all stories with and):", "", "Correct Example:", "Spine (all stories with and):", "  (S) User --> creates account", "  and (S) User --> logs in", "  and (S) User --> views dashboard", "OR optional branch (all stories with and):", "  (S) User --> signs in with social media (optional)", "  and (S) User --> signs in with email (optional)", "OR enhanced (all stories with and):", "  (S) User --> customizes dashboard (enhanced)", "  and (S) User --> shares dashboard (enhanced)"]}, "dont": {"description": "Wrong mapping examples", "content": ["Wrong: All stories marked mandatory when some are clearly alternatives or enhancements", "  and (S) User --> creates account (1)", "  and (S) User --> logs in with email (2)", "  and (S) User --> logs in with social media (3) - social media should be optional", "", "Wrong: No distinction between essential path and optional sub-epics", "  and (S) User --> views dashboard (1)", "  and (S) User --> customizes dashboard (2)", "  and (S) User --> shares dashboard (3) - customization and sharing should be optional", "", "Wrong: Missing optional markers on alternative flows or enhanced behaviors", "Wrong: Optional/enhanced stories not sorted by priority", "Wrong: No clear spine established before adding optional behaviors"]}}]}, "scanner_results": {"violations": [{"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}]}}, {"rule_file": "extract_story_map_checklist.json", "rule_content": {"description": "Quick checklist for extracting story maps from code. Follow this process step-by-step.", "steps": [{"step": 1, "title": "Find Outermost Layer and Entry Points", "checklist": ["Locate CLI commands (main(), argparse, command handlers)", "Locate UI entry points (routes, event handlers, button clicks)", "Locate MCP server tool definitions (tool names, parameters)", "Locate API contracts (REST endpoints, GraphQL, WSDL)", "Locate WebSocket handlers, message queues, event listeners", "Locate acceptance tests (end-to-end, integration, BDD/Gherkin)", "Document all entry points with their parameters and return values"]}, {"step": 2, "title": "Analyze Operations and Domain Concepts", "checklist": ["List all operations from entry points (what can be invoked?)", "Identify MAJOR domain concepts (high-level entities)", "Identify MINOR domain concepts (supporting entities)", "Identify relationships between concepts", "Document operation names, parameters, return values", "Document concept names, properties, relationships"]}, {"step": 3, "title": "Create Epics Based on Higher-Order Goals", "checklist": ["Group operations by higher-order goals (what is user/system trying to accomplish?)", "Create epics from goals, not from implementation structure", "Each epic represents a major capability or lifecycle stage", "Validate: Epic name describes a goal, not a technical operation"]}, {"step": 4, "title": "Create Sub-Epics Based on Distinct Behaviors", "checklist": ["For each epic, identify distinct behaviors (different ways to accomplish goal)", "Group behaviors into sub-epics (different types, modes, contexts)", "Each sub-epic represents a distinct path or scenario", "Validate: Sub-epic name describes a behavior, not a technical mechanism"]}, {"step": 5, "title": "Identify Distinct Behaviors from Tests and Code Flow", "checklist": ["Trace through acceptance tests: what happens step by step?", "Trace through CLI commands: what's the execution flow?", "Trace through MCP tool calls: what's the sequence?", "Identify distinct behaviors at each step", "Document typical execution order", "Document error handling and alternative paths"]}, {"step": 6, "title": "Lay Out Story Journey from End-to-End Flow", "checklist": ["Start with entry point (how does user/system initiate?)", "Follow code flow through operations (what happens step by step?)", "Include error handling (what happens when things go wrong?)", "End with completion (how does it finish?)", "For each story, include:", "  - WHEN: trigger, condition, user action", "  - WHY: purpose, user need, system requirement", "  - OUTCOME: result, state change, user experience", "  - ACTOR: who performs the action", "Validate: Stories show complete journey, not isolated operations"]}, {"step": 7, "title": "Validate Story Map Quality", "checklist": ["Stories show user/system journey (not just list operations)", "Stories have context (when/why/outcome)", "Stories are specific (not generic like 'Add Sub-Epic')", "Stories represent complete accomplishments (not data access)", "Implementation details are steps, not stories", "Order follows user journey, not technical sequential_order", "Epics/sub-epics based on goals, not implementation structure"]}], "common_mistakes": ["Starting with internal classes instead of entry points", "Creating epics from class structure instead of goals", "Creating stories from every method call", "Missing context (when/why) in stories", "Making implementation details into stories", "Ordering by technical sequential_order instead of user journey", "Generic stories without specificity"]}, "scanner_results": {}}, {"rule_file": "extract_story_map_from_code.json", "rule_content": {"description": "CRITICAL: When creating story maps from code, analyze the outermost layer showing end-to-end journey. Locate acceptance tests, human code engagement points (CLI/UI), MCP server definitions, WSDL, API contracts. Analyze operations and domain for major/minor concepts. Create epics/sub-epics based on higher-order goals. Look at distinct behaviors and typical execution order to lay out story journey.", "examples": [{"do": {"description": "Find outermost layer and entry points", "content": ["Start with the OUTERMOST LAYER showing end-to-end journey", "Locate all HUMAN CODE ENGAGEMENT points:", "  - CLI commands and entry points (main(), command handlers)", "  - UI entry points (web routes, event handlers, button clicks)", "  - MCP server tool definitions (tool names, parameters, descriptions)", "  - API contracts (REST endpoints, GraphQL queries, WSDL operations)", "  - WebSocket handlers, message queues, event listeners", "", "Locate ACCEPTANCE TESTS:", "  - End-to-end tests that show complete user journeys", "  - Integration tests that show system-to-system flows", "  - Test scenarios that describe 'when X, then Y' behaviors", "  - BDD/Gherkin tests with Given-When-Then structure", "", "Example Entry Points to Find:", "- CLI: 'python -m story_io.story_io_cli render-outline --story-graph file.json'", "- MCP: Tool 'render_outline' with parameters 'story_graph_path', 'output_path'", "- API: POST /api/story-graph/render with body {storyGraph, outputFormat}", "- UI: Button 'Render Outline' that triggers render operation", "- Test: 'test_render_outline_from_json' that shows complete flow"]}, "dont": {"description": "Don't start with internal implementation details", "content": ["Don't start with internal classes or helper functions", "Don't start with data structures or domain models", "Don't start with utility functions or low-level operations", "", "Wrong Starting Points:", "- Internal class: 'StoryIODiagram.load_from_json()' (implementation detail)", "- Helper function: 'parse_story_graph()' (internal mechanism)", "- Data structure: 'Epic' class definition (domain model, not entry point)", "", "These are important but come AFTER identifying the journey"]}}, {"do": {"description": "Analyze operations and domain for major/minor concepts", "content": ["Analyze OPERATIONS from entry points:", "  - What operations are exposed? (render, sync, search, edit, save)", "  - What are the operation names? (render-outline, sync-increments, search-stories)", "  - What parameters do they take? (story_graph_path, output_path, query)", "  - What do they return? (DrawIO file, JSON report, search results)", "", "Analyze DOMAIN CONCEPTS:", "  - MAJOR CONCEPTS: High-level domain entities (StoryGraph, Diagram, Epic, Sub-Epic, Story)", "  - MINOR CONCEPTS: Supporting entities (Position, Boundary, User, Increment)", "  - OPERATIONS: Actions on concepts (Load, Read, Edit, Render, Synchronize, Search, Save)", "  - RELATIONSHIPS: How concepts relate (Epic contains Sub-Epics, Sub-Epic contains Stories)", "", "Example Analysis (Story-IO Domain):", "- Operations: render-outline, render-increments, sync-outline, sync-increments, search, add-user, merge", "- Major Concepts: StoryGraph (main entity), Diagram (visual representation), Epic/Sub-Epic/Story (hierarchy)", "- Minor Concepts: Position (2D coordinate), Boundary (rectangular area), User (story actor), Increment (priority grouping)", "- Relationships: StoryGraph contains Epics, Epic contains Sub-Epics, Sub-Epic contains Stories", "", "Example Analysis (Payment Domain):", "- Operations: process-payment, refund-payment", "- Major Concepts: Payment (main entity), Transaction (financial transaction), Card (payment method), Refund (reversal)", "- Minor Concepts: Amount (monetary value), Currency (USD, EUR), Status (pending, approved, declined), PaymentMethod (card, bank transfer)", "- Relationships: Payment contains Transaction, Payment uses Card, Payment can have Refund, Transaction has Status"]}, "dont": {"description": "Don't confuse implementation details with domain concepts", "content": ["Don't treat implementation classes as domain concepts", "Don't treat utility functions as operations", "Don't treat data structures as domain entities", "", "Wrong Analysis:", "- Implementation class: 'StoryIORenderer' (implementation detail, not domain concept)", "- Utility function: 'calculate_position()' (implementation detail, not operation)", "- Data structure: 'dict' or 'list' (implementation detail, not domain concept)", "", "Focus on WHAT the system does (domain), not HOW it does it (implementation)"]}}, {"do": {"description": "Create epics/sub-epics based on higher-order goals", "content": ["Group operations into EPICS based on HIGHER-ORDER GOALS:", "  - What is the user/system trying to accomplish?", "  - What are the major capabilities?", "  - What are the lifecycle stages?", "", "Example Epic Creation from Operations (Story-IO Domain):", "- Operations: render-outline, render-increments, render-exploration", "- Higher-Order Goal: 'Render StoryGraph' (user wants to visualize story map)", "- Epic: 'Render StoryGraph'", "", "- Operations: sync-outline, sync-increments, generate-sync-report, merge", "- Higher-Order Goal: 'Synchronize StoryGraph' (user wants to sync between formats)", "- Epic: 'Synchronize StoryGraph'", "", "Example Epic Creation from Operations (Payment Domain):", "- Operations: process-payment, process_payment, POST /api/payments/process", "- Higher-Order Goal: 'Process Payment' (user wants to process a payment transaction)", "- Epic: 'Process Payment'", "", "- Operations: refund-payment, refund_payment, POST /api/payments/refund", "- Higher-Order Goal: 'Refund Payment' (user wants to reverse a payment)", "- Epic: 'Refund Payment'", "", "Group operations into SUB-EPICS based on DISTINCT BEHAVIORS:", "  - What are the different ways to accomplish the epic goal?", "  - What are the different types or modes?", "  - What are the different contexts or scenarios?", "", "Example Sub-Epic Creation (Story-IO Domain):", "- Epic: 'Render StoryGraph'", "- Distinct Behaviors: Render outline (basic), Render increments (with priorities), Render exploration (with acceptance criteria)", "- Sub-Epics: 'Render Outline', 'Render Increments', 'Render Exploration'", "", "- Epic: 'Synchronize StoryGraph'", "- Distinct Behaviors: Sync outline structure, Sync increments, Generate comparison report, Merge graphs", "- Sub-Epics: 'Synchronize Outline', 'Synchronize Increments', 'Generate Sync Report', 'Merge StoryGraphs'", "", "Example Sub-Epic Creation (Payment Domain):", "- Epic: 'Process Payment'", "- Distinct Behaviors: Validate payment (required), Authorize payment (required), Process with card (common), Process with bank transfer (alternative), Process with wallet (alternative), Confirm payment (required)", "- Sub-Epics: 'Validate Payment', 'Authorize Payment', 'Process Card Payment', 'Process Bank Transfer', 'Process Wallet Payment', 'Confirm Payment'", "", "- Epic: 'Refund Payment'", "- Distinct Behaviors: Validate refund eligibility, Process refund, Confirm refund", "- Sub-Epics: 'Validate Refund', 'Process Refund', 'Confirm Refund'"]}, "dont": {"description": "Don't create epics/sub-epics from implementation structure", "content": ["Don't create epics based on class structure (StoryIODiagram, DrawIORenderer, PaymentProcessor, etc.)", "Don't create sub-epics based on method names (load_json, parse_xml, charge_card, etc.)", "Don't create epics/sub-epics from technical layers (data layer, service layer, etc.)", "", "Wrong Epic Creation:", "- Based on class: 'StoryIODiagram Operations' (implementation structure)", "- Based on method: 'JSON Loading' (technical mechanism)", "- Based on layer: 'Data Access Layer' (technical architecture)", "", "Focus on USER/SYSTEM GOALS, not technical structure"]}}, {"do": {"description": "Look at distinct behaviors and typical execution order", "content": ["Analyze DISTINCT BEHAVIORS from acceptance tests and code flow:", "  - What are the different scenarios?", "  - What are the different paths through the code?", "  - What are the different user actions?", "", "Example Behavior Analysis (Story-IO Domain):", "- Test: 'test_render_outline_from_json' shows: Load JSON \u2192 Parse \u2192 Generate XML \u2192 Calculate Positions \u2192 Apply Styles \u2192 Save", "- Distinct Behaviors: Load, Parse, Generate, Calculate, Apply, Save", "- These become STORIES in the journey", "", "Example Behavior Analysis (Payment Domain):", "- Test: 'test_process_payment_success' shows: Invoke \u2192 Validate \u2192 Authorize \u2192 Process \u2192 Confirm", "- Distinct Behaviors: Invoke (entry point), Validate (check input), Authorize (check funds/fraud), Process (execute transaction), Confirm (complete and notify)", "- These become STORIES in the journey", "", "Determine TYPICAL EXECUTION ORDER from code flow:", "  - Trace through acceptance tests: what happens first, second, third?", "  - Trace through CLI commands: what's the flow?", "  - Trace through MCP tool calls: what's the sequence?", "  - Look at error handling: what are alternative paths?", "", "Example Execution Order Analysis (Story-IO Domain):", "- CLI: 'render-outline --story-graph file.json --output file.drawio'", "- Code Flow: Parse args \u2192 Load story graph \u2192 Create diagram \u2192 Render outline \u2192 Save file", "- Typical Order: 1. Parse arguments, 2. Load story graph, 3. Render outline, 4. Save file", "- Stories: 'Parses Command Arguments' \u2192 'Loads StoryGraph from JSON' \u2192 'Renders Outline to DrawIO' \u2192 'Saves DrawIO File'", "", "Example Execution Order Analysis (Payment Domain):", "- CLI: 'process-payment --payment-id 123 --amount 50.00'", "- Code Flow: Parse args \u2192 Validate payment \u2192 Authorize payment \u2192 Process payment \u2192 Confirm payment", "- Typical Order: 1. User invokes process payment, 2. System validates payment details, 3. System authorizes payment, 4. System processes payment, 5. System confirms payment", "- Stories: 'User invokes process payment command' \u2192 'System validates payment details' \u2192 'System authorizes payment with payment processor' \u2192 'System processes payment transaction' \u2192 'System confirms payment and sends notification'", "", "Create STORY JOURNEY from execution order:", "  - Start with entry point (CLI invocation, UI click, MCP tool call)", "  - Follow the code flow through operations", "  - Include error handling and alternative paths", "  - End with completion (save, return result, display)", "", "Example Story Journey (Story-IO Domain):", "- Entry: 'User invokes render-outline command from CLI'", "- Flow: 'CLI parses arguments' \u2192 'CLI loads story graph' \u2192 'CLI invokes render' \u2192 'System renders outline' \u2192 'System saves file'", "- Error: 'If file not found, CLI displays error message'", "- Completion: 'CLI returns success message'", "", "Example Story Journey (Payment Domain):", "- Entry: 'User invokes process payment command' (WHEN: user wants to charge customer, WHY: to complete purchase, OUTCOME: CLI/MCP/API receives request)", "- Flow: 'System validates payment details' (WHEN: after request received, WHY: to ensure payment can be processed, OUTCOME: details validated) \u2192 'System authorizes payment' (WHEN: after validation, WHY: to check funds/fraud, OUTCOME: payment authorized) \u2192 'System processes payment' (WHEN: after authorization, WHY: to execute transaction, OUTCOME: payment processed) \u2192 'System confirms payment' (WHEN: after processing, WHY: to notify user, OUTCOME: payment confirmed)", "- Error: 'If validation fails, System displays validation error' (WHEN: validation fails, WHY: to inform user, OUTCOME: error shown, process stops)", "- Completion: 'System returns transaction ID' (WHEN: after confirmation, WHY: to provide reference, OUTCOME: transaction ID returned)"]}, "dont": {"description": "Don't create stories from code structure or method calls", "content": ["Don't create stories from every method call in code", "Don't create stories from internal function calls", "Don't create stories from data structure operations", "", "Wrong Story Creation:", "- From method: 'StoryIODiagram.__init__()' (internal initialization)", "- From function: 'parse_json()' (internal parsing)", "- From operation: 'dict.get()' (data access, not behavior)", "- From method: 'PaymentProcessor.charge_card()' (internal implementation)", "", "Focus on USER/SYSTEM VISIBLE BEHAVIORS, not internal implementation"]}}, {"do": {"description": "Lay out story journey from end-to-end flow", "content": ["Create STORY JOURNEY that shows complete end-to-end flow:", "  - Start: How does user/system initiate? (CLI command, UI click, API call)", "  - Middle: What happens step by step? (parse, load, process, transform)", "  - End: How does it complete? (save, return, display, notify)", "", "Include CONTEXT for each story:", "  - WHEN does it happen? (trigger, condition, user action)", "  - WHY does it happen? (purpose, user need, system requirement)", "  - WHAT is the outcome? (result, state change, user experience)", "  - ACTOR: Who performs the action? (User, System, CLI, MCP, API, etc.)", "", "Example Complete Story Journey (Story-IO Domain):", "(E) Render StoryGraph", "  and (E) Render Outline", "    and (S) User --> invokes render-outline command from CLI", "    and (S) CLI --> parses command arguments", "    and (S) CLI --> loads story graph from JSON file", "    and (S) System --> renders outline to DrawIO format", "    and (S) System --> saves DrawIO file", "", "Example Complete Story Journey (Payment Domain):", "(E) Process Payment", "  and (E) Process Card Payment", "    and (S) User --> invokes process payment command", "    and (S) System --> validates payment details", "    and (S) System --> authorizes payment with payment processor", "    and (S) System --> processes payment transaction", "    and (S) System --> confirms payment and sends notification", "", "Include ERROR HANDLING and ALTERNATIVE PATHS:", "  - What happens when file not found?", "  - What happens when parsing fails?", "  - What happens when validation fails?", "  - What happens when authorization fails?", "", "Example Error Handling (Story-IO Domain):", "  and (S) CLI --> displays error message if story graph file not found", "", "Example Error Handling (Payment Domain):", "  and (S) System --> displays validation error if validation fails", "  and (S) System --> displays authorization declined message if authorization fails"]}, "dont": {"description": "Don't create isolated stories without journey context", "content": ["Don't create stories that are just operations without context", "Don't create stories that don't connect to a journey", "Don't create stories without when/why/outcome/actor", "", "Wrong Story Creation:", "- (S) System --> loads StoryGraph (no context: when? why? what happens next?)", "- (S) System --> parses JSON (no context: when? why? what's the outcome?)", "- (S) System --> saves file (no context: when? why? what triggers this?)", "- (S) System --> processes payment (no context: when? why? what's the outcome?)", "", "Every story must be part of a JOURNEY with CONTEXT (when/why/outcome/actor)"]}}]}, "scanner_results": {}}, {"rule_file": "focus_real_actions_on_domain_concepts.json", "rule_content": {"description": "When shaping stories, stories must describe REAL ACTIONS that users or other actors (even system or technical actors) can perform, not capabilities or structural descriptions. Organize by lifecycle flow (Load, Read, Edit, Render, Synchronize, Search, Save). CRITICAL: Actor names must NOT appear in Epic/Sub-Epic/Story names - names are Verb-Noun only.", "context": "when shaping stories", "examples": [{"do": {"description": "Use real actions - actor separate from name", "content": ["Stories describe actions: Load, Read, Add, Remove, Render, Search, Save", "Organize by lifecycle: Load \u2192 Read \u2192 Edit \u2192 Render \u2192 Synchronize \u2192 Search \u2192 Save", "Use Verb-Noun format for names: '[Verb] [Noun]' - NO ACTOR in name", "Focus on what users/code CAN DO, not what things ARE", "", "NAMING RULE - Actor NOT in Name:", "- Epic name: 'Places Order' (NOT 'Customer Places Order')", "- Sub-Epic name: 'Validates Payment' (NOT 'PaymentValidator Validates Payment')", "- Story name: 'Processes Order Items' (NOT 'OrderProcessor Processes Order Items')", "- Actor is documented separately, not in the name itself", "", "ACTORS for User/System Stories (normal stories):", "- Use human/system actors: User, Developer, System, Customer, Admin", "- Actor is implicit or documented separately from name", "- Examples: Epic 'Places Order' has actor: Customer", "- Examples: Sub-Epic 'Validates Payment' has actor: System", "", "ACTORS for Technical Stories (deep internal class-level interactions):", "- Domain concepts CAN be actors: OrderProcessor, PaymentValidator, InventoryManager, Cart, Product", "- Actor is documented separately, NOT in name", "- Examples: Epic 'Loads Order Data' has actor: OrderProcessor (technical)", "- Examples: Sub-Epic 'Updates Inventory' has actor: InventoryManager (technical)", "- Examples: Story 'Calculates Total' has actor: Cart (technical)", "- This is acceptable when documenting class-to-class interactions internally"]}, "dont": {"description": "Avoid capabilities, structural descriptions, passive states, and actors in names", "content": ["Don't use capability nouns or structural descriptions", "Don't describe what things ARE or CONTAIN", "Don't use passive states or properties as stories", "CRITICAL: Don't put actor in Epic/Sub-Epic/Story names", "", "Wrong Examples (capabilities/structure):", "- 'PaymentValidator Contains Validation Logic' (capability, not action)", "- 'OrderProcessor Tracks Order Count' (passive state, not action)", "- 'Cart Hierarchy Foundation' (structural description)", "- 'Domain Components Implementation' (capability)", "- 'Product Represents Item' (structural description)", "", "Wrong Examples (actor in name):", "- Epic: 'Customer Places Order' (actor in name - WRONG)", "- Sub-Epic: 'OrderProcessor Validates Payment' (actor in name - WRONG)", "- Sub-Epic: 'Cart Adds Product' (actor in name - WRONG)", "- Story: 'InventoryManager Updates Stock' (actor in name - WRONG)", "", "Correct Examples (actor NOT in name):", "- Epic: 'Places Order' (actor: Customer, documented separately)", "- Sub-Epic: 'Validates Payment' (actor: PaymentValidator, documented separately)", "- Sub-Epic: 'Adds Product' (actor: Cart, documented separately)", "- Story: 'Updates Stock' (actor: InventoryManager, documented separately)", "", "These are not actions users/code can perform - they describe structure or capabilities", "Instead ask: What can users/code DO with this domain concept?", "- Instead of 'Contains Logic' \u2192 'Generates XML' or 'Renders Diagram'", "- Instead of 'Tracks Count' \u2192 'Reads Count' or 'Updates Count'", "- Instead of 'Represents X' \u2192 'Creates X' or 'Loads X'"]}}]}, "scanner_results": {}}, {"rule_file": "focus_user_and_system_activities.json", "rule_content": {"description": "Focus story maps on both user AND system activities, not tasks. Stories should outline user and system behavior patterns.", "examples": [{"do": {"description": "Include both user and system activities in story descriptions", "content": ["User submits order, System validates payment", "Customer views products, System displays inventory", "Use user activity patterns: User submits, Customer places", "Use system activity patterns: System validates, System sends", "Focus stories on user interactions and how the system behaves as observed by users", "Example: Customer places order with payment details", "", "ACTOR SELECTION (documented separately, NOT in name):", "- For user/system stories: Actors are User, System, Developer, Customer, Admin (human/system actors)", "- For technical stories (deep internal class-level): Domain concepts can be actors (StoryIODiagram, DrawIORenderer, DrawIOSynchronizer, User, Increment, Component)", "- Technical stories document class-to-class interactions where domain concepts act as actors", "", "CRITICAL NAMING RULE:", "- Actor must NOT appear in Epic/Sub-Epic/Story name", "- Name format: '[Verb] [Noun]' only", "- Examples: 'Loads StoryGraph' (actor: StoryIODiagram, documented separately)", "- Examples: 'Adds Sub-Epic' (actor: Epic, documented separately)", "- Examples: 'Changes Parent' (actor: Component, documented separately)"]}, "dont": {"description": "Avoid task-oriented language that describes implementation", "content": ["Avoid task-oriented language that describes implementation", "Don't use task language for building or setting up", "Don't focus only on user activities (ignore system activities)", "Don't focus only on tasks (instead of activities)", "Don't use development task language: implement, create, refactor, optimize, fix, build, set up", "Don't use technical implementation details: query database, call API, update table", "", "Wrong Examples:", "- Only user activities: User submits order, User views products (missing system activities)", "- Only tasks: Implement order submission, Create payment validation (not activities)", "- Implement order submission, Create payment validation", "- Build product listing page, Set up inventory display"]}}]}, "scanner_results": {}}, {"rule_file": "identify_system_stories.json", "rule_content": {"description": "System stories capture system-to-system interactions that are not user-facing. They represent internal system behavior that crosses system boundaries (e.g., microservice to microservice, component to component). System stories should be identified and marked with story_type: 'system'.", "do": {"examples": [{"description": "Identify system-to-system interactions", "content": ["Storage Microservice validates payload from Local Mgmt System", "API Gateway routes request to Authentication Service", "Message Queue delivers event to Notification Service"]}, {"description": "Mark system stories with story_type: 'system'", "content": ["Story: 'Validate Payload' with story_type: 'system'", "Story: 'Route Request' with story_type: 'system'", "Story: 'Deliver Event' with story_type: 'system'"]}, {"description": "Use system stories for internal system behavior", "content": ["System stories represent behavior that happens between systems/components", "System stories are not directly visible to end users", "System stories enable user-facing stories to function"]}]}, "dont": {"examples": [{"description": "Don't mark user-facing stories as system stories", "content": ["User clicks button \u2192 NOT a system story", "User views dashboard \u2192 NOT a system story", "User submits form \u2192 NOT a system story"]}, {"description": "Don't confuse system stories with technical stories", "content": ["System stories = system-to-system behavior (dark blue in DrawIO)", "Technical stories = implementation tasks (black/white in DrawIO, normally avoided)"]}]}}, "scanner_results": {}}, {"rule_file": "maximize_integration_of_related_concepts.json", "rule_content": {"description": "When shaping stories, maximize integration of related concepts", "context": "when shaping stories", "examples": [{"do": {"description": "Group concepts that the user sees as one capability", "content": ["Group concepts that the user sees as one capability", "Nest implementation details under the sub-epic they serve", "Keep related data and operations together", "Eliminate artificial boundaries based on code organization"]}, "dont": {"description": "Don't separate related concepts", "content": ["Don't separate related concepts into different major sections", "Wrong: Split based on code layers (data, business, presentation)", "Don't duplicate related concepts across multiple sections", "Wrong: Create gaps that break the user's mental model"]}}]}, "scanner_results": {}}, {"rule_file": "place_domain_concepts_by_relevance.json", "rule_content": {"description": "When shaping stories, place domain concepts locally or globally based on relevance to one or multiple sub_epics", "context": "when shaping stories", "examples": [{"do": {"description": "Place domain concepts at the most specific level, favoring local placement", "content": ["Favor local placement: Place domain_concepts at the sub_epic level when they are relevant to only that sub_epic", "Think about the core: Consider core domain concepts that span multiple sub_epics - these should be placed at the parent epic/sub_epic level", "Elevate when shared: If a domain concept is used by multiple child sub_epics, elevate it to the parent level", "Start local, elevate if needed: Begin with local placement, but elevate if the concept is referenced by multiple sub_epics", "", "Correct Examples (Local Placement):", "- Sub-Epic 'Validates Payment' has domain_concept: 'Payment' (only used in this sub-epic)", "- Sub-Epic 'Processes Order' has domain_concept: 'Order' (only used in this sub-epic)", "- Sub-Epic 'Updates Inventory' has domain_concept: 'InventoryItem' (only used in this sub-epic)", "", "Correct Examples (Global Placement):", "- Epic 'Process Payment' has domain_concept: 'Payment' (used by multiple sub-epics: Validate Payment, Authorize Payment, Process Transaction)", "- Epic 'Manage Orders' has domain_concept: 'Order' (used by multiple sub-epics: Create Order, Update Order, Cancel Order)", "- Sub-Epic 'Order Management' has domain_concept: 'Customer' (used by multiple child sub-epics: Create Customer Order, Update Customer Order)"]}, "dont": {"description": "Don't place domain concepts at wrong levels or duplicate them unnecessarily", "content": ["Don't place domain concepts at epic level when they're only used in one sub-epic", "Wrong: Epic 'Payment System' has domain_concept: 'PaymentValidator' (only used in 'Validates Payment' sub-epic - should be local)", "Don't duplicate domain concepts at multiple levels", "Wrong: Both Epic and Sub-Epic have 'Payment' concept when it's only used in one sub-epic", "Don't place core domain concepts too locally if they're used across multiple epics", "Wrong: Core concept 'User' placed only in one sub-epic when it's used across multiple epics", "Don't ignore shared usage - if multiple sub-epics reference a concept, elevate it", "Wrong: 'Order' concept placed in each sub-epic separately when all sub-epics use it (should be at parent level)"]}}]}, "scanner_results": {}}, {"rule_file": "prevent_generic_capabilities.json", "rule_content": {"description": "CRITICAL: Stories must describe specific actions with actors, not generic capabilities. Reject stories that describe what system IS (capabilities) vs what system DOES (behaviors).", "scanner": "agile_bot.bots.base_bot.src.scanners.generic_capability_scanner.GenericCapabilityScanner", "examples": [{"do": {"description": "Use specific actions with actors and outcomes", "content": ["Stories must have specific actors performing specific actions", "Stories must describe what system DOES (behaviors), not what system IS (capabilities)", "Stories must have specific outcomes, not generic descriptions", "", "Correct Examples (specific behaviors with actors):", "- 'User invokes MCP tool and system routes to StoryIO handler' (specific: user, MCP tool, routing action)", "- 'Developer adds sub-epic Render Exploration to epic Render StoryGraph' (specific: developer, sub-epic name, epic name)", "- 'System loads story graph from JSON file when user requests render' (specific: system, load action, trigger)", "- 'CLI determines workspace root from current directory' (specific: CLI, determine action, source)", "", "Actor Requirements:", "- Every story must have an actor (User, System, Developer, CLI, StoryIODiagram, etc.)", "- Actor must be documented separately (not in name)", "- Actor must be specific (not generic 'Component' or 'System')", "- Actor must perform the action (not just be present)"]}, "dont": {"description": "Don't use generic capabilities or passive descriptions", "content": ["Don't describe what system IS (capabilities)", "Don't use generic action descriptions without actors", "Don't use passive states or properties as stories", "", "Wrong Examples (generic capabilities):", "- 'Exposes Tools' (capability - what tools? when? to whom? what happens?)", "- 'Provides Server Interface' (capability - what interface? when? why?)", "- 'Contains Validation Logic' (capability - not an action)", "- 'Tracks Order Count' (passive state - not an action)", "", "Capability Indicators (REJECT):", "- Describes what system IS: 'Exposes', 'Provides', 'Contains', 'Represents'", "- No specific actor or action", "- No specific outcome or trigger", "- Generic description without context", "", "Instead, ask:", "- Who performs this action? (actor)", "- When does this happen? (trigger/context)", "- What specific outcome occurs? (result)", "- Why does this happen? (purpose in journey)"]}}]}, "scanner_results": {"violations": []}}, {"rule_file": "prevent_implementation_details_as_stories.json", "rule_content": {"description": "CRITICAL: Implementation operations (serialize, convert, calculate, generate XML, apply formatting) must be steps within stories, not stories themselves. Stories must focus on user/system outcomes, not technical mechanisms.", "examples": [{"do": {"description": "Keep implementation details as steps within stories", "content": ["Implementation operations must be steps within stories", "Stories must focus on user/system outcomes, not technical mechanisms", "Stories must describe what user/system experiences, not how it's implemented", "", "Correct Examples (outcomes, not mechanisms):", "- Story: 'User saves story graph and system writes JSON file' \u2192 Steps: 'System converts diagram to story graph format', 'System serializes components to JSON', 'System writes file'", "- Story: 'User requests render and system generates DrawIO diagram' \u2192 Steps: 'System generates DrawIO XML', 'System calculates component positions', 'System applies styles', 'System saves file'", "- Story: 'User edits epic and system updates diagram' \u2192 Steps: 'System updates epic data', 'System recalculates layout', 'System refreshes diagram'", "", "Story vs Step Distinction:", "- Story = User/system outcome (what they experience)", "- Step = Implementation detail (how it's done)", "- Story = Independently valuable (can be tested/delivered)", "- Step = Part of story (not independently valuable)"]}, "dont": {"description": "Don't make implementation operations into stories", "content": ["Don't create stories for implementation operations", "Don't expose technical mechanisms as user stories", "Don't break implementation steps into separate stories", "", "Wrong Examples (implementation details as stories):", "- 'Convert Diagram to StoryGraph Format' (implementation - should be step in 'Save StoryGraph' story)", "- 'Serialize Components to JSON' (implementation - should be step in 'Save StoryGraph' story)", "- 'Generate DrawIO XML from StoryGraph' (implementation - should be step in 'Render Outline' story)", "- 'Calculate Component Positions' (implementation - should be step in 'Render Outline' story)", "- 'Apply Component Styles' (implementation - should be step in 'Render Outline' story)", "- 'Save DrawIO XML to File' (implementation - should be step in 'Render Outline' story)", "", "Implementation Operation Indicators (REJECT as stories):", "- Serialize, deserialize, convert, transform, format", "- Calculate, compute, generate, create (technical artifacts)", "- Apply, set, configure (technical settings)", "- Save, write, store (without user context)", "", "These are implementation mechanisms, not user/system behaviors", "They should be steps within stories that describe outcomes", "", "Instead, ask:", "- What does the user/system experience? (story)", "- How is it implemented? (step within story)", "- What's the outcome? (story)", "- What's the mechanism? (step)"]}}], "scanner": "agile_bot.bots.base_bot.src.scanners.implementation_details_scanner.ImplementationDetailsScanner"}, "scanner_results": {"violations": [{"rule": "prevent_implementation_details_as_stories", "rule_file": "prevent_implementation_details_as_stories.json", "violation_message": "Story \"Create Mob\" appears to be an implementation operation - should be a step within a story that describes user/system outcome", "severity": "error", "line_number": null, "location": "Create Mob"}, {"rule": "prevent_implementation_details_as_stories", "rule_file": "prevent_implementation_details_as_stories.json", "violation_message": "Story \"Configure Strategy Options\" appears to be an implementation operation - should be a step within a story that describes user/system outcome", "severity": "error", "line_number": null, "location": "Configure Strategy Options"}]}}, {"rule_file": "refine_scope_to_functional_accomplishment.json", "rule_content": {"description": "Refine Scope to Functional Accomplishment", "examples": [{"do": {"description": "Focus on functional outcomes, not mechanisms", "content": ["Focus on functional outcomes, not mechanisms", "Frame domains by what they accomplish for users", "Ask about user enablement: What does this enable the user to do or understand?", "State the transformation or capability provided", "Be specific about the functional benefit"]}, "dont": {"description": "Don't frame domains by their technical implementation", "content": ["Don't frame domains by their technical implementation", "Wrong: Focus on 'how' before 'what'", "Don't use generic system capabilities as domain names", "Wrong: Describe mechanisms instead of outcomes"]}}]}, "scanner_results": {}}, {"rule_file": "size_stories_3_to_12_days.json", "rule_content": {"description": "Size stories to fall within 3-12 day effort range for effective planning and frequent delivery.", "scanner": "agile_bot.bots.base_bot.src.scanners.story_sizing_scanner.StorySizingScanner", "examples": [{"do": {"description": "Create stories that represent complete flows within the effort range", "content": ["Create stories that represent complete flows within the effort range", "Example: Customer places order (complete flow, 3-5 days)", "Break/group stories so that most fall into a 3-12 day effort range", "Enable frequent feedback by decomposing the work into smaller items"]}, "dont": {"description": "Avoid stories that are too large or too small", "content": ["Avoid stories that are too large and span multiple weeks", "Don't arbitrarily decompose stories to a functional level, regardless of size", "", "Wrong Examples:", "- Order management system (too large, 20+ days)", "- Create stories that are too small without considering value"]}}]}, "scanner_results": {"violations": [{"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Epic \"Manage Mobs\" has 4 4 sub-epics/story groups (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[0].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Create Mob\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[0].sub_epics[0].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Group Minions To Mob\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Spawn Mob From Actors\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[0].sub_epics[2].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Edit Mob\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[3].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Epic \"Assign Strategies\" has 2 2 sub-epics/story groups (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[1].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Select Strategy For Mob\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[1].sub_epics[0].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Configure Strategy Options\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Trigger Mob Action\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Select Target From Strategy\" has 4 4 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[2].sub_epics[1].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Perform Mob Attack\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[2].sub_epics[2].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Handle Movement To Target\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Attack Fleeing Target\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].name"}]}}, {"rule_file": "story_map_code_approach.json", "rule_content": {"description": "Quick checklist for extracting story maps from code. Follow this process step-by-step.", "steps": [{"step": 1, "title": "Find Outermost Layer and Entry Points", "checklist": ["Locate CLI commands (main(), argparse, command handlers)", "Locate UI entry points (routes, event handlers, button clicks)", "Locate MCP server tool definitions (tool names, parameters)", "Locate API contracts (REST endpoints, GraphQL, WSDL)", "Locate WebSocket handlers, message queues, event listeners", "Locate acceptance tests (end-to-end, integration, BDD/Gherkin)", "Document all entry points with their parameters and return values"]}, {"step": 2, "title": "Analyze Operations and Domain Concepts", "checklist": ["List all operations from entry points (what can be invoked?)", "Identify MAJOR domain concepts (high-level entities)", "Identify MINOR domain concepts (supporting entities)", "Identify relationships between concepts", "Document operation names, parameters, return values", "Document concept names, properties, relationships"]}, {"step": 3, "title": "Create Epics Based on Higher-Order Goals", "checklist": ["Group operations by higher-order goals (what is user/system trying to accomplish?)", "Create epics from goals, not from implementation structure", "Each epic represents a major capability or lifecycle stage", "Validate: Epic name describes a goal, not a technical operation"]}, {"step": 4, "title": "Create Sub-Epics Based on Distinct Behaviors", "checklist": ["For each epic, identify distinct behaviors (different ways to accomplish goal)", "Group behaviors into sub-epics (different types, modes, contexts)", "Each sub-epic represents a distinct path or scenario", "Validate: Sub-epic name describes a behavior, not a technical mechanism"]}, {"step": 5, "title": "Identify Distinct Behaviors from Tests and Code Flow", "checklist": ["Trace through acceptance tests: what happens step by step?", "Trace through CLI commands: what's the execution flow?", "Trace through MCP tool calls: what's the sequence?", "Identify distinct behaviors at each step", "Document typical execution order", "Document error handling and alternative paths"]}, {"step": 6, "title": "Lay Out Story Journey from End-to-End Flow", "checklist": ["Start with entry point (how does user/system initiate?)", "Follow code flow through operations (what happens step by step?)", "Include error handling (what happens when things go wrong?)", "End with completion (how does it finish?)", "For each story, include:", "  - WHEN: trigger, condition, user action", "  - WHY: purpose, user need, system requirement", "  - OUTCOME: result, state change, user experience", "  - ACTOR: who performs the action", "Validate: Stories show complete journey, not isolated operations"]}, {"step": 7, "title": "Validate Story Map Quality", "checklist": ["Stories show user/system journey (not just list operations)", "Stories have context (when/why/outcome)", "Stories are specific (not generic like 'Add Sub-Epic')", "Stories represent complete accomplishments (not data access)", "Implementation details are steps, not stories", "Order follows user journey, not technical sequential_order", "Epics/sub-epics based on goals, not implementation structure"]}], "common_mistakes": ["Starting with internal classes instead of entry points", "Creating epics from class structure instead of goals", "Creating stories from every method call", "Missing context (when/why) in stories", "Making implementation details into stories", "Ordering by technical sequential_order instead of user journey", "Generic stories without specificity"]}, "scanner_results": {}}, {"rule_file": "use_active_behavioral_language.json", "rule_content": {"description": "When shaping stories, use active behavioral language with action verbs. Describe behaviors, not tasks or capabilities.", "context": "when shaping stories", "scanner": "agile_bot.bots.base_bot.src.scanners.active_language_scanner.ActiveLanguageScanner", "examples": [{"do": {"description": "Use action verbs to describe what happens", "content": ["Use action verbs to describe what happens", "Example: User submits order, System validates payment", "Favor active behavioral language over functional/capability breakup", "Use story maps to outline user and system behavior (NOT tasks)", "Use action verbs: submits, views, validates, sends, displays", "Describe behaviors: [Actor] [action] [object] - but actor NOT in name", "Use active behavior language: Place order (active behavior), Validate payment (active behavior)", "", "CRITICAL NAMING RULE - Actor NOT in Name:", "- Epic/Sub-Epic/Story names must be Verb-Noun format: '[Verb] [Noun]'", "- Actor is documented separately, NOT included in the name", "- Verb can be in various forms: imperative ('Add'), infinitive ('To Add'), third person ('Adds') - all are acceptable", "- Noun can be singular or plural based on context - DO NOT pluralize unnecessarily", "- Prepositional phrases and context are part of the noun phrase and should be preserved (e.g., 'Add Minion To Mob' is correct)", "- Examples: Epic 'Places Order' (actor: Customer, documented separately)", "- Examples: Sub-Epic 'Validates Payment' (actor: PaymentValidator, documented separately)", "- Examples: Story 'Updates Stock' (actor: InventoryManager, documented separately)", "- Examples: Story 'Add Minion To Mob' (verb-noun with context preserved - CORRECT)", "- Examples: Story 'Group Minions' (verb-noun, plural noun is correct for context - CORRECT)", "", "ACTOR SELECTION (documented separately, not in name):", "- For user/system stories: Use human/system actors (User, System, Developer, Customer)", "- For technical stories (deep internal): Domain concepts can be actors (OrderProcessor, PaymentValidator, InventoryManager, Cart, Product)", "- Actor is implicit or explicitly documented, but NOT in the name string"]}, "dont": {"description": "Avoid capability nouns and task language", "content": ["Avoid capability nouns that describe functions rather than behaviors", "Don't use functional or capability-based language instead of behavioral language", "Don't use capability nouns: Management, Processing, Administration", "Don't use task verbs: implement, create, build, set up", "Don't use task language", "", "Wrong Examples:", "- Order Management, Payment Processing (capability nouns)", "- Focus on tasks instead of behaviors", "- Order Management (capability), Implement order placement (task)", "", "Wrong Examples (actor in name):", "- Epic: 'Customer Places Order' (actor in name - WRONG)", "- Sub-Epic: 'OrderProcessor Validates Payment' (actor in name - WRONG)", "- Sub-Epic: 'Cart Adds Product' (actor in name - WRONG)", "- Story: 'InventoryManager Updates Stock' (actor in name - WRONG)", "", "Correct: Name is Verb-Noun only, actor documented separately"]}}]}, "scanner_results": {"violations": [{"rule": "use_active_behavioral_language", "rule_file": "use_active_behavioral_language.json", "violation_message": "Sub_epic name \"Trigger Mob Action\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].name"}, {"rule": "use_active_behavioral_language", "rule_file": "use_active_behavioral_language.json", "violation_message": "Sub_epic name \"Handle Movement To Target\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].name"}, {"rule": "use_active_behavioral_language", "rule_file": "use_active_behavioral_language.json", "violation_message": "Sub_epic name \"Attack Fleeing Target\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].name"}]}}, {"rule_file": "use_outcome_verbs_not_communication_verbs.json", "rule_content": {"description": "Use Outcome Verbs, Not Communication Verbs", "scanner": "agile_bot.bots.base_bot.src.scanners.communication_verb_scanner.CommunicationVerbScanner", "examples": [{"do": {"description": "Use verbs that describe artifacts/outcomes", "content": ["Use verbs that describe artifacts/outcomes", "Examples: Animation, Feedback, Indicators, Configuration", "Name concepts by what they ARE or CREATE", "Examples: Power Activation Animation, Combat Outcome Feedback", "Focus on tangible results", "Examples: Hit Indicators, Save Result Feedback"]}, "dont": {"description": "Don't use generic communication verbs", "content": ["Don't use generic communication verbs", "Examples: showing, displaying, visualizing, presenting", "Don't use vague enablement verbs", "Examples: providing, enabling, allowing", "Don't name concepts by their mechanism", "Wrong Examples: Visualizing Power Activation, Showing Combat Results"]}}]}, "scanner_results": {"violations": []}}], "content_to_validate": {"project_location": "C:\\dev\\augmented-teams\\demo\\mob_minion", "rendered_outputs": ["C:\\dev\\augmented-teams\\demo\\mob_minion\\docs\\stories\\story-graph.json"], "clarification_file": "C:\\dev\\augmented-teams\\demo\\mob_minion\\docs\\stories\\clarification.json", "planning_file": "C:\\dev\\augmented-teams\\demo\\mob_minion\\docs\\stories\\planning.json", "report_path": "C:\\dev\\augmented-teams\\demo\\mob_minion\\docs\\stories\\validation-report.md"}}}}, "25": {"action_state": "story_bot.1_shape.validate_rules", "status": "started", "timestamp": "2025-12-11T13:38:17.035302"}, "26": {"action_state": "story_bot.1_shape.validate_rules", "status": "completed", "timestamp": "2025-12-11T13:38:17.202781", "outputs": {"instructions": {"action": "validate_rules", "behavior": "1_shape", "base_instructions": ["**MANDATORY: Before validating any content, you MUST load and review the project's context files:**", "1. Load `{project_area}/docs/stories/clarification.json` - Contains key questions and evidence (generated file)", "2. Load `{project_area}/docs/stories/planning.json` - Contains assumptions and decisions (generated file)", "3. Load `{project_area}/docs/context/input.txt` (or similar) - Original input/source material if needed for validation (original context)", "", "**CRITICAL: File locations:**", "- **Generated files:** `{project_area}/docs/stories/clarification.json`, `{project_area}/docs/stories/planning.json`", "- **Original input:** `{project_area}/docs/context/input.txt` and other original context files", "", "These files contain critical requirements, decisions, and context that MUST be checked against during validation.", "", "**CRITICAL: Load planning.json and check for the current behavior's section (e.g., 'shape', 'discovery', 'exploration', 'specification'). Reference decisions_made and assumptions_made for the current behavior, as well as any previous behaviors that affect this work.**", "", "**Instructions:**", "1. Load and review `{project_area}/docs/stories/clarification.json` and `{project_area}/docs/stories/planning.json` to understand all requirements and decisions", "2. Check planning.json for the current behavior's decisions_made and assumptions_made sections", "3. Evaluate the Content Data against all rules listed above", "4. Check for violations of each rule", "5. Verify that Content Data incorporates all requirements from clarification.json and planning.json (especially the current behavior's decisions_made and assumptions_made)", "6. Generate a validation report with:", "   - List of all violations found (if any)", "   - Specific examples from the Content Data that violate rules", "   - Any missing requirements from clarification.json or planning.json (including stage-specific decisions/assumptions)", "   - Recommendations for fixing violations", "7. If no violations found, confirm that Content Data follows all rules and incorporates all requirements", "8. **MANDATORY: Save the validation report to a file**", "   - File name: `validation-report.md`", "   - Location: `{project_area}/{docs_path}/validation-report.md` (validation report goes in docs_path, NOT in context folder)", "   - Note: Generated context files (clarification.json, planning.json) are in `{project_area}/docs/stories/`, and validation report is also output to `{project_area}/{docs_path}/`", "   - Format: Markdown with sections for Status, Violations Found, Suggested Corrections", "   - Include: Total documents validated, violations count, rules checked count, summary", "   - After generating the report, write it to the file using standard file writing operations", "", "**CRITICAL: Verb-Noun Format Validation:**", "When checking verb-noun format for story/epic names:", "- Verb-noun format means [Verb] [Noun] structure - the verb can be in various forms (imperative 'Add', infinitive 'To Add', third person 'Adds')", "- DO NOT suggest pluralizing nouns unless the original is clearly grammatically incorrect", "- DO NOT remove important prepositional phrases or context from the noun part (e.g., 'Add Minion To Mob' is correct - don't suggest removing 'To Mob')", "- The format is about structure (verb + noun), not about specific verb tense or noun number", "- Examples of CORRECT verb-noun format: 'Add Minion To Mob', 'Create Mob', 'Group Minions', 'Select Strategy'", "- Examples of INCORRECT: 'Mob Management' (noun-noun, no verb), 'Adding Minion' (gerund, not action verb), 'Minion Addition' (noun-noun)", "", "**CRITICAL: Story Context and Flow Validation:**", "- Story order and context come from sequential_order in the story graph - if sequential_order is present, the order/context is already specified", "- DO NOT flag stories as 'missing context' if they have sequential_order - the order provides the context (when/why/outcome comes from position in sequence)", "- Flow validation (end-to-end user-system behavior, one interaction/response) will be handled in discovery phase - DO NOT flag these as violations in shape phase", "- In shape phase, focus on: naming format, domain concepts, story structure - NOT detailed flow/context which comes in discovery", "", "**MANDATORY: PAUSE FOR HUMAN FEEDBACK**", "When this action is complete, AI MUST pause and wait for human feedback. When human says 'done' or confirms completion, the workflow is complete for this behavior (no automatic next step).", "Based on code scanner diagnostics, edit the knowledge graph to fix violations:", "Rule rules\\maintain_verb_noun_consistency.json: 24 violations", "Rule rules\\map_sequential_spine_vs_optional_paths.json: 11 violations", "Rule rules\\stories_developed_and_tested_in_days.json: 13 violations", "Rule rules\\stories_follow_invest_principles.json: 28 violations", "Rule rules\\story_names_must_follow_verb_noun_format.json: 24 violations", "Rule rules\\use_active_behavioral_language.json: 15 violations", "Rule rules\\use_verb_noun_format_for_story_elements.json: 24 violations", "Rule apply_7_plus_minus_2_hierarchy.json: 13 violations", "Rule avoid_technical_implementation_language.json: 1 violations", "Rule establish_spine_vs_optional_enhanced_behavior.json: 11 violations", "Rule prevent_generic_capabilities.json: 1 violations", "Rule size_stories_3_to_12_days.json: 13 violations", "Rule use_active_behavioral_language.json: 15 violations", "Review each violation and update the knowledge graph accordingly."], "validation_rules": [{"rule_file": "rules\\maintain_verb_noun_consistency.json", "rule_content": {"description": "Maintain verb-noun consistency from epic to feature to story to scenario", "scanner": "agile_bot.bots.base_bot.src.scanners.verb_noun_scanner.VerbNounScanner", "do": {"examples": [{"description": "Use consistent verb-noun language across all levels", "content": ["Epic: Manage Orders \u2192 Feature: Place Order \u2192 Story: Customer places order \u2192 Scenario: When customer places order..."]}, {"description": "Maintain consistent terminology throughout hierarchy", "content": ["Epic, feature, story, and scenario all use same verb-noun pattern"]}, {"description": "Use verb-noun language in scenario sentences", "content": ["When user submits form, then system validates data"]}]}, "dont": {"examples": [{"description": "Don't switch formats between levels", "content": ["Epic: Order Management \u2192 Feature: Place Order (inconsistent format)"]}, {"description": "Don't mix verb-noun with other formats", "content": ["Epic uses verb-noun, but feature uses noun-only format"]}, {"description": "Don't use different terminology at different levels", "content": ["Epic says 'Orders', feature says 'Order Processing', story says 'Process Order'"]}]}}, "scanner_results": {"violations": [{"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Sub_epic name \"Form Mob From Selected Tokens\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"Selects Multiple Minion Tokens\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"Groups Selected Tokens Into Mob Collection\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"Displays Mob Formation Confirmation\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[2].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"Selects Existing Mob And Additional Tokens\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"Selects Actor Templates And Specifies Count\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[2].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"Groups Spawned Tokens Into New Mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[2].story_groups[0].stories[2].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"Removes Selected Tokens From Mob Collection\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"Selects Mob And Chooses Strategy\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[0].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"Displays Available Strategies\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Sub_epic name \"Customize Strategy Parameters\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"Selects Strategy And Sets Parameters\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"Stores Strategy Parameters For Mob\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"Clicks Any Token In Mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"Identifies Mob Containing Clicked Token\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"Retrieves Mob Active Strategy\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"Displays Selected Target\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[3].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"Checks Range To Target For Each Minion\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"Executes Attack Action For All Minions In Mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[2].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"Determines Movement Path For Out Of Range Minions\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"Moves Minions To Target Area Using Foundry Movement\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Sub_epic name \"Attack Fleeing Targets\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"Identifies Fleeing Targets\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[0].name"}, {"rule": "rules\\maintain_verb_noun_consistency", "rule_file": "rules\\maintain_verb_noun_consistency.json", "violation_message": "Story name \"Executes Attack On Fleeing Targets\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[1].name"}]}}, {"rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "rule_content": {"description": "When mapping stories, carefully distinguish between sequential spine (essential path) and optional paths, alternate routes, or additional functionality that is not strictly essential. Sequential stories form the mandatory flow; optional stories are alternatives, enhancements, or non-essential features.", "do": {"examples": [{"description": "Identify the essential spine first", "content": ["Start by identifying the minimal essential path that delivers core value", "The spine represents the mandatory sequence: Story1 AND Story2 AND Story3", "Spine stories get sequential_order numbers (1, 2, 3, etc.)", "Spine stories are required for the feature to deliver its core purpose", "Ask: 'What is the minimum path to deliver value?'"]}, {"description": "Mark optional paths clearly", "content": ["Optional stories branch from or enhance the spine but are not required", "Mark optional stories with 'optional: true' in the story structure", "Optional stories may have sequential_order if they're part of an alternative flow", "Optional stories represent: alternate routes, enhancements, nice-to-have features", "Ask: 'Can the feature deliver value without this story?'"]}, {"description": "Distinguish types of optional paths with concrete examples", "content": ["Alternate routes: User logs in with email (sequential_order: 2) OR User logs in with social media (sequential_order: 2.1, optional: true)", "Enhancements: User views dashboard (sequential_order: 3) AND User customizes dashboard (sequential_order: 3.1, optional: true)", "Additional functionality: User views dashboard (sequential_order: 3) AND User shares dashboard (sequential_order: 3.2, optional: true)", "Error handling: User enters invalid data (sequential_order: 4) AND System shows error message (sequential_order: 4.1, optional: true)"]}, {"description": "Correct mapping examples", "content": ["Spine: User creates account (sequential_order: 1) AND User logs in (sequential_order: 2) AND User views dashboard (sequential_order: 3)", "Optional alternate: User logs in with email (sequential_order: 2) OR User logs in with social media (sequential_order: 2, optional: true)", "Optional enhancement: User views dashboard (sequential_order: 3) AND User customizes dashboard (optional: true, priority: 1)", "Additional functionality: User views dashboard (sequential_order: 3) AND User shares dashboard (optional: true, priority: 2)"]}]}, "dont": {"examples": [{"description": "Don't mark everything as sequential", "content": ["Don't assign sequential_order to all stories when some are optional", "Don't treat alternate routes as part of the spine", "Don't include enhancements in the mandatory sequential flow", "Don't confuse 'nice to have' with 'must have'"]}, {"description": "Don't omit optional markers", "content": ["Don't leave optional stories unmarked - be explicit", "Don't assume all stories in a feature are mandatory", "Don't mix optional and mandatory without clear distinction", "Don't fail to identify the spine before adding optional paths"]}, {"description": "Wrong mapping examples", "content": ["Wrong: User creates account (1) AND User logs in with email (2) AND User logs in with social media (3) - social media should be optional", "Wrong: User views dashboard (1) AND User customizes dashboard (2) AND User shares dashboard (3) - customization and sharing should be optional", "Wrong: All stories marked mandatory when some are clearly alternatives or enhancements", "Wrong: No distinction between essential path and optional features"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.spine_optional_scanner.SpineOptionalScanner"}, "scanner_results": {"violations": [{"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "rules\\map_sequential_spine_vs_optional_paths", "rule_file": "rules\\map_sequential_spine_vs_optional_paths.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}]}}, {"rule_file": "rules\\stories_developed_and_tested_in_days.json", "rule_content": {"description": "Write stories that can be developed and tested in a matter of days", "do": {"examples": [{"description": "Create stories sized for days, not weeks", "content": ["Story takes 3-5 days to develop and test completely"]}, {"description": "Break large work into smaller stories", "content": ["Large feature broken into multiple stories, each completable in days"]}, {"description": "Focus on delivering complete, testable functionality quickly", "content": ["Each story delivers a complete piece of functionality that can be tested"]}]}, "dont": {"examples": [{"description": "Don't create stories that span multiple weeks", "content": ["Story requires 3+ weeks to complete (too large)"]}, {"description": "Don't create stories that can't be tested independently", "content": ["Story requires multiple other stories before it can be tested"]}, {"description": "Don't create stories without clear boundaries", "content": ["Story is vague about scope and completion criteria"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.story_sizing_scanner.StorySizingScanner"}, "scanner_results": {"violations": [{"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Epic \"Group Minions Into Mobs\" has 4 4 sub-epics/story groups (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[0].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Form Mob From Selected Tokens\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[0].sub_epics[0].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Add Minions To Existing Mob\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Spawn Mob From Actor Templates\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[0].sub_epics[2].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Remove Minions From Mob\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[3].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Epic \"Assign Strategies To Mobs\" has 2 2 sub-epics/story groups (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[1].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Select Strategy For Mob\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[1].sub_epics[0].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Customize Strategy Parameters\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Initiate Mob Action\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Select Target From Strategy\" has 4 4 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[2].sub_epics[1].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Execute Mob Attack\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[2].sub_epics[2].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Move Minions To Target\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].name"}, {"rule": "rules\\stories_developed_and_tested_in_days", "rule_file": "rules\\stories_developed_and_tested_in_days.json", "violation_message": "Sub-epic \"Attack Fleeing Targets\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].name"}]}}, {"rule_file": "rules\\stories_follow_invest_principles.json", "rule_content": {"description": "Ensure stories follow INVEST principles (Independent, Negotiable, Valuable, Estimable, Small, Testable)", "do": {"examples": [{"description": "Independent - story can be developed independently", "content": ["Story doesn't depend on other stories being completed first"]}, {"description": "Negotiable - story details can be negotiated", "content": ["Story allows for discussion and refinement of requirements"]}, {"description": "Valuable - story delivers value to user or business", "content": ["Story provides measurable value when completed"]}, {"description": "Estimable - story can be estimated", "content": ["Story is clear enough to estimate effort"]}, {"description": "Small - story can be completed in short time", "content": ["Story can be developed and tested in a matter of days"]}, {"description": "Testable - story has clear acceptance criteria", "content": ["Story has testable outcomes that can be verified"]}]}, "dont": {"examples": [{"description": "Don't create stories that depend on multiple other stories", "content": ["Story requires 5 other stories to be completed first (not independent)"]}, {"description": "Don't create stories that are too large", "content": ["Story spans multiple weeks and includes multiple features (not small)"]}, {"description": "Don't create stories without clear value", "content": ["Story doesn't provide measurable value to users or business"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.invest_principles_scanner.InvestPrinciplesScanner"}, "scanner_results": {"violations": [{"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Selects Multiple Minion Tokens\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Selects Multiple Minion Tokens"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Groups Selected Tokens Into Mob Collection\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Groups Selected Tokens Into Mob Collection"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Displays Mob Formation Confirmation\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Displays Mob Formation Confirmation"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Selects Existing Mob And Additional Tokens\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Selects Existing Mob And Additional Tokens"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Adds Selected Tokens To Mob Collection\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Adds Selected Tokens To Mob Collection"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Selects Actor Templates And Specifies Count\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Selects Actor Templates And Specifies Count"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Generates Minion Tokens From Actor Templates\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Generates Minion Tokens From Actor Templates"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Groups Spawned Tokens Into New Mob\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Groups Spawned Tokens Into New Mob"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Selects Mob And Tokens To Remove\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Selects Mob And Tokens To Remove"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Removes Selected Tokens From Mob Collection\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Removes Selected Tokens From Mob Collection"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Selects Mob And Chooses Strategy\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Selects Mob And Chooses Strategy"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Displays Available Strategies\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Displays Available Strategies"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Assigns Selected Strategy To Mob\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Assigns Selected Strategy To Mob"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Selects Strategy And Sets Parameters\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Selects Strategy And Sets Parameters"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Stores Strategy Parameters For Mob\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Stores Strategy Parameters For Mob"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Clicks Any Token In Mob\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Clicks Any Token In Mob"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Identifies Mob Containing Clicked Token\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Identifies Mob Containing Clicked Token"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Retrieves Mob Active Strategy\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Retrieves Mob Active Strategy"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Evaluates Available Targets Using Strategy Criteria\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Evaluates Available Targets Using Strategy Criteria"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Selects Target Based On Strategy\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Selects Target Based On Strategy"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Displays Selected Target\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Displays Selected Target"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Checks Range To Target For Each Minion\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Checks Range To Target For Each Minion"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Moves Minions Within Range If Needed\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Moves Minions Within Range If Needed"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Executes Attack Action For All Minions In Mob\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Executes Attack Action For All Minions In Mob"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Determines Movement Path For Out Of Range Minions\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Determines Movement Path For Out Of Range Minions"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Moves Minions To Target Area Using Foundry Movement\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Moves Minions To Target Area Using Foundry Movement"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Identifies Fleeing Targets\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Identifies Fleeing Targets"}, {"rule": "rules\\stories_follow_invest_principles", "rule_file": "rules\\stories_follow_invest_principles.json", "violation_message": "Story \"Executes Attack On Fleeing Targets\" lacks scenarios or acceptance criteria - INVEST principle \"Testable\" requires clear testable outcomes", "severity": "warning", "line_number": null, "location": "Executes Attack On Fleeing Targets"}]}}, {"rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "rule_content": {"description": "CRITICAL: Story names MUST follow Verb-Noun format (e.g., 'Move To Mob Leaders Turn', 'Determines Target from Strategy', 'Initiate Mob Attack'), and include italicized description showing component interactions (e.g., '*Combat Tracker moves to any mob member's turn, auto moves to mob leader's turn*'). The story name should be concise and action-oriented, while the description shows the component-to-component interactions.", "scanner": "agile_bot.bots.base_bot.src.scanners.verb_noun_scanner.VerbNounScanner", "do": {"examples": [{"description": "Use concise Verb-Noun format for story names", "content": ["Move To Mob Leaders Turn, Determines Target from Strategy, Initiate Mob Attack"]}, {"description": "Include italicized description showing component interactions", "content": ["*Combat Tracker moves to any mob member's turn, auto moves to mob leader's turn*"]}, {"description": "Make story name concise and action-oriented", "content": ["Story name: 'Initiate Mob Attack' - concise and action-oriented"]}, {"description": "Show component interactions in description", "content": ["Story description shows how components interact with each other"]}]}, "dont": {"examples": [{"description": "Don't use long descriptive names without Verb-Noun format", "content": ["The system should allow users to move to mob leaders turn when..."]}, {"description": "Don't omit component interaction descriptions", "content": ["Story name without italicized description of component interactions"]}, {"description": "Don't use vague or non-action-oriented names", "content": ["Mob Leader Turn System, Attack Mechanism"]}]}}, "scanner_results": {"violations": [{"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Sub_epic name \"Form Mob From Selected Tokens\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"Selects Multiple Minion Tokens\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"Groups Selected Tokens Into Mob Collection\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"Displays Mob Formation Confirmation\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[2].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"Selects Existing Mob And Additional Tokens\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"Selects Actor Templates And Specifies Count\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[2].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"Groups Spawned Tokens Into New Mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[2].story_groups[0].stories[2].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"Removes Selected Tokens From Mob Collection\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"Selects Mob And Chooses Strategy\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[0].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"Displays Available Strategies\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Sub_epic name \"Customize Strategy Parameters\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"Selects Strategy And Sets Parameters\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"Stores Strategy Parameters For Mob\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"Clicks Any Token In Mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"Identifies Mob Containing Clicked Token\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"Retrieves Mob Active Strategy\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"Displays Selected Target\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[3].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"Checks Range To Target For Each Minion\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"Executes Attack Action For All Minions In Mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[2].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"Determines Movement Path For Out Of Range Minions\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"Moves Minions To Target Area Using Foundry Movement\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Sub_epic name \"Attack Fleeing Targets\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"Identifies Fleeing Targets\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[0].name"}, {"rule": "rules\\story_names_must_follow_verb_noun_format", "rule_file": "rules\\story_names_must_follow_verb_noun_format.json", "violation_message": "Story name \"Executes Attack On Fleeing Targets\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[1].name"}]}}, {"rule_file": "rules\\use_active_behavioral_language.json", "rule_content": {"description": "Use active behavioral language with action verbs. Describe behaviors, not tasks or capabilities.", "scanner": "agile_bot.bots.base_bot.src.scanners.active_language_scanner.ActiveLanguageScanner", "examples": [{"do": {"description": "Use action verbs to describe what happens", "content": ["Use action verbs to describe what happens", "Example: User submits order, System validates payment", "Favor active behavioral language over functional/capability breakup", "Use story maps to outline user and system behavior (NOT tasks)", "Use action verbs: submits, views, validates, sends, displays", "Describe behaviors: [Actor] [action] [object]", "Use active behavior language: Place order (active behavior), Validate payment (active behavior)"]}, "dont": {"description": "Avoid capability nouns and task language", "content": ["Avoid capability nouns that describe functions rather than behaviors", "Don't use functional or capability-based language instead of behavioral language", "Don't use capability nouns: Management, Processing, Administration", "Don't use task verbs: implement, create, build, set up", "Don't use task language", "", "Wrong Examples:", "- Order Management, Payment Processing (capability nouns)", "- Focus on tasks instead of behaviors", "- Order Management (capability), Implement order placement (task)"]}}]}, "scanner_results": {"violations": [{"rule": "rules\\use_active_behavioral_language", "rule_file": "rules\\use_active_behavioral_language.json", "violation_message": "Story name \"Groups Selected Tokens Into Mob Collection\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\use_active_behavioral_language", "rule_file": "rules\\use_active_behavioral_language.json", "violation_message": "Story name \"Displays Mob Formation Confirmation\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[2].name"}, {"rule": "rules\\use_active_behavioral_language", "rule_file": "rules\\use_active_behavioral_language.json", "violation_message": "Sub_epic name \"Add Minions To Existing Mob\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].name"}, {"rule": "rules\\use_active_behavioral_language", "rule_file": "rules\\use_active_behavioral_language.json", "violation_message": "Story name \"Selects Existing Mob And Additional Tokens\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\use_active_behavioral_language", "rule_file": "rules\\use_active_behavioral_language.json", "violation_message": "Story name \"Adds Selected Tokens To Mob Collection\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\use_active_behavioral_language", "rule_file": "rules\\use_active_behavioral_language.json", "violation_message": "Story name \"Removes Selected Tokens From Mob Collection\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\use_active_behavioral_language", "rule_file": "rules\\use_active_behavioral_language.json", "violation_message": "Sub_epic name \"Initiate Mob Action\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].name"}, {"rule": "rules\\use_active_behavioral_language", "rule_file": "rules\\use_active_behavioral_language.json", "violation_message": "Story name \"Identifies Mob Containing Clicked Token\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\use_active_behavioral_language", "rule_file": "rules\\use_active_behavioral_language.json", "violation_message": "Story name \"Evaluates Available Targets Using Strategy Criteria\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\use_active_behavioral_language", "rule_file": "rules\\use_active_behavioral_language.json", "violation_message": "Story name \"Executes Attack Action For All Minions In Mob\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[2].name"}, {"rule": "rules\\use_active_behavioral_language", "rule_file": "rules\\use_active_behavioral_language.json", "violation_message": "Story name \"Determines Movement Path For Out Of Range Minions\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[0].name"}, {"rule": "rules\\use_active_behavioral_language", "rule_file": "rules\\use_active_behavioral_language.json", "violation_message": "Story name \"Moves Minions To Target Area Using Foundry Movement\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\use_active_behavioral_language", "rule_file": "rules\\use_active_behavioral_language.json", "violation_message": "Sub_epic name \"Attack Fleeing Targets\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].name"}, {"rule": "rules\\use_active_behavioral_language", "rule_file": "rules\\use_active_behavioral_language.json", "violation_message": "Story name \"Identifies Fleeing Targets\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[0].name"}, {"rule": "rules\\use_active_behavioral_language", "rule_file": "rules\\use_active_behavioral_language.json", "violation_message": "Story name \"Executes Attack On Fleeing Targets\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[1].name"}]}}, {"rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "rule_content": {"description": "Use verb-noun format for all story elements (epic names, feature names, story titles)", "scanner": "agile_bot.bots.base_bot.src.scanners.verb_noun_scanner.VerbNounScanner", "do": {"examples": [{"description": "Use verb-noun format for epic names", "content": ["Manage Orders, Create Character, Process Payment"]}, {"description": "Use verb-noun format for feature names", "content": ["Place Order, Validate Payment, Save Character"]}, {"description": "Use verb-noun format for story titles", "content": ["Customer places order, System validates payment, User saves character"]}, {"description": "Use verb-noun format for scenario sentences", "content": ["User submits form, System processes request"]}]}, "dont": {"examples": [{"description": "Don't use noun-only or capability-based names", "content": ["Order Management, Payment Processing, Character System"]}, {"description": "Don't mix verb-noun with other formats", "content": ["Order Management and Place Order (mixed format)"]}, {"description": "Don't use gerund forms", "content": ["Ordering, Processing Payments, Creating Characters"]}]}}, "scanner_results": {"violations": [{"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Sub_epic name \"Form Mob From Selected Tokens\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"Selects Multiple Minion Tokens\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"Groups Selected Tokens Into Mob Collection\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"Displays Mob Formation Confirmation\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[2].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"Selects Existing Mob And Additional Tokens\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"Selects Actor Templates And Specifies Count\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[2].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"Groups Spawned Tokens Into New Mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[2].story_groups[0].stories[2].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"Removes Selected Tokens From Mob Collection\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"Selects Mob And Chooses Strategy\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[0].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"Displays Available Strategies\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Sub_epic name \"Customize Strategy Parameters\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"Selects Strategy And Sets Parameters\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"Stores Strategy Parameters For Mob\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"Clicks Any Token In Mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"Identifies Mob Containing Clicked Token\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"Retrieves Mob Active Strategy\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"Displays Selected Target\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[3].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"Checks Range To Target For Each Minion\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"Executes Attack Action For All Minions In Mob\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[2].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"Determines Movement Path For Out Of Range Minions\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"Moves Minions To Target Area Using Foundry Movement\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Sub_epic name \"Attack Fleeing Targets\" appears to be noun-only - use verb-noun format (e.g., \"Places Order\" not \"Order Management\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"Identifies Fleeing Targets\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[0].name"}, {"rule": "rules\\use_verb_noun_format_for_story_elements", "rule_file": "rules\\use_verb_noun_format_for_story_elements.json", "violation_message": "Story name \"Executes Attack On Fleeing Targets\" uses noun-verb pattern - use verb-noun format (e.g., \"Places Order\" not \"Order places\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[1].name"}]}}, {"rule_file": "apply_7_plus_minus_2_hierarchy.json", "rule_content": {"description": "Apply 7\u00b12 rule for hierarchy: epics contain 4-9 sub-epics, sub-epics contain 4-9 stories. Split when exceeding, merge when below minimum.", "scanner": "agile_bot.bots.base_bot.src.scanners.story_sizing_scanner.StorySizingScanner", "examples": [{"do": {"description": "Maintain hierarchy within the 7\u00b12 cognitive limit range", "content": ["(E) Epic: Contains 4-9 sub-epics", "  - Split into additional Sub-Epics when > 9 sub-epics", "  - Merge with another epic when < 4 sub-epics", "(E) Sub-Epic: Contains 4-9 stories", "  - Split into 2 sub-epics when > 9 stories", "  - Merge with another sub-epic when < 4 stories", "(S) Story: Contains 2-9 acceptance criteria", "  - Split into 2 stories when > 9 AC", "  - Merge with another story when < 2 AC (single AC stories are too small)", "Apply 7\u00b12 cognitive limit principle (optimal range: 5-9, acceptable: 4-9)", "", "Example:", "(E) Manage Orders (10 sub-epics \u2192 SPLIT)", "  and (E) Manage Customer Orders (6 stories) \u2713", "  and (E) Manage Order Fulfillment (4 stories) \u2713", "", "(E) Place Order (12 stories \u2192 SPLIT)", "  and (S) Initiate Order (6 AC) \u2713", "  and (S) Complete Order (6 AC) \u2713", "", "(S) Validate Payment (11 AC \u2192 SPLIT)", "  and (AC) Check Payment Method (5 steps) \u2713", "  and (AC) Process Payment Transaction (6 steps) \u2713"]}, "dont": {"description": "Don't exceed thresholds or create items below minimum", "content": ["Create epics with > 9 sub-epics (use additional Sub-Epics instead)", "Create sub-epics with > 9 stories (split the sub-epic)", "Create stories with > 9 acceptance criteria (split the story)", "Create very small stories with < 2 AC (merge with related story)", "Ignore sizing thresholds during shaping, discovery, or exploration", "", "Wrong Examples:", "- (E) Epic with 15 sub-epics (too many, use additional Sub-Epics)", "- (E) Sub-Epic with 15 stories (too many, split sub-epic)", "- (S) Story with 15 AC (too many, split story)", "- (S) Story with 1 AC (too small, merge with related story)"]}}]}, "scanner_results": {"violations": [{"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Epic \"Group Minions Into Mobs\" has 4 4 sub-epics/story groups (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[0].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Form Mob From Selected Tokens\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[0].sub_epics[0].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Add Minions To Existing Mob\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Spawn Mob From Actor Templates\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[0].sub_epics[2].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Remove Minions From Mob\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[3].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Epic \"Assign Strategies To Mobs\" has 2 2 sub-epics/story groups (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[1].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Select Strategy For Mob\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[1].sub_epics[0].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Customize Strategy Parameters\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Initiate Mob Action\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Select Target From Strategy\" has 4 4 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[2].sub_epics[1].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Execute Mob Attack\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[2].sub_epics[2].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Move Minions To Target\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].name"}, {"rule": "apply_7_plus_minus_2_hierarchy", "rule_file": "apply_7_plus_minus_2_hierarchy.json", "violation_message": "Sub-epic \"Attack Fleeing Targets\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].name"}]}}, {"rule_file": "avoid_noun_redundancy.json", "rule_content": {"description": "When shaping stories, avoid noun redundancy in domain and concept names", "context": "when shaping stories", "examples": [{"do": {"description": "INTEGRATE first: nest related capabilities under one domain", "content": ["INTEGRATE first: nest related capabilities under one domain (90% of cases)", "Only then rename: use distinct nouns ONLY when integration doesn't make sense", "Test for uniqueness: Can you remove the qualifier and still know what it is?", "Use subject-area nouns when domains are genuinely separate", "Only when integration truly doesn't make sense"]}, "dont": {"description": "Don't rename without considering integration", "content": ["Don't rename without considering integration (this hides the real issue)", "Wrong: Repeat same noun with different prefixes: X Animation, Y Animation, Z Animation", "Don't use vague qualifiers to avoid integration", "Wrong: Animation 1, Animation System", "Don't create parallel domains that should be nested", "Wrong: Integrate related concepts rather than creating redundant structures"]}}], "scanner": "agile_bot.bots.base_bot.src.scanners.noun_redundancy_scanner.NounRedundancyScanner"}, "scanner_results": {"violations": []}}, {"rule_file": "avoid_technical_implementation_language.json", "rule_content": {"description": "When shaping stories, avoid technical implementation language in user-facing story elements", "context": "when shaping stories", "do": {"examples": [{"description": "Use business language in user-facing elements", "content": ["Customer places order, User views profile, Admin approves request"]}, {"description": "Focus on what user experiences, not how it's implemented", "content": ["Story describes user experience, not technical implementation"]}]}, "dont": {"examples": [{"description": "Don't use development task language", "content": ["implement, create, refactor, optimize, fix, build, set up"]}, {"description": "Don't use technical implementation details", "content": ["query database, call API, update table"]}, {"description": "Don't focus on delivery or development tasks", "content": ["Implement order system, Create database schema, Set up API endpoints"]}, {"description": "Don't focus on system internals", "content": ["Optimize query performance, Refactor authentication code, Update configuration"]}]}, "scanner": "agile_bot.bots.base_bot.src.scanners.technical_language_scanner.TechnicalLanguageScanner"}, "scanner_results": {"violations": [{"rule": "avoid_technical_implementation_language", "rule_file": "avoid_technical_implementation_language.json", "violation_message": "Story element \"Generates Minion Tokens From Actor Templates\" uses technical implementation verb \"generate\" - use business language focusing on user experience", "severity": "error", "line_number": null, "location": "Generates Minion Tokens From Actor Templates"}]}}, {"rule_file": "avoid_technical_stories.json", "rule_content": {"description": "Technical stories represent implementation tasks that do not describe system behavior. They are normally avoided in favor of user stories and system stories. When technical stories are necessary, they should be marked with story_type: 'technical' and kept minimal.", "do": {"examples": [{"description": "Prefer user stories and system stories over technical stories", "content": ["Instead of 'Set up database schema', use 'Store user data' (user story)", "Instead of 'Create API endpoint', use 'Expose user data via API' (system story)", "Instead of 'Write unit tests', use 'Verify story behavior' (user story)"]}, {"description": "When technical stories are necessary, mark with story_type: 'technical'", "content": ["Story: 'Migrate legacy data format' with story_type: 'technical'", "Story: 'Refactor authentication module' with story_type: 'technical'", "Story: 'Update dependency versions' with story_type: 'technical'"]}, {"description": "Keep technical stories minimal and focused", "content": ["Technical stories should be rare exceptions", "Technical stories should still follow Verb-Noun format", "Technical stories should be clearly justified"]}]}, "dont": {"examples": [{"description": "Don't create technical stories for normal development work", "content": ["Avoid: 'Write code', 'Create class', 'Add method'", "Avoid: 'Set up CI/CD', 'Configure database', 'Install package'", "These are implementation details, not stories"]}, {"description": "Don't use technical stories to describe system behavior", "content": ["Use system stories for system-to-system behavior", "Use user stories for user-facing behavior", "Technical stories are for unavoidable implementation tasks only"]}]}}, "scanner_results": {}}, {"rule_file": "balance_fine_grained_testable_stories.json", "rule_content": {"description": "Balance fine-grained stories with testable and valuable independent units. Stories must deliver value and be independently testable.", "examples": [{"do": {"description": "Create stories that are complete interactions with value", "content": ["Create stories that are complete interactions with value", "Example: Customer places order (complete interaction, testable, valuable)", "Balance fine-grained stories with testable/valuable stories", "Ensure stories are fine-grained enough to enable frequent feedback", "Ensure stories are grouped into meaningful chunks for high quality feedback", "Stories that deliver measurable value independently"]}, "dont": {"description": "Avoid stories that are too small or too large", "content": ["Avoid stories that are too small and have no value alone", "Don't create stories that are too fine-grained without being testable or valuable", "Don't create stories that are too large to be testable or deliverable quickly", "", "Wrong Examples:", "- Add order button (too fine-grained, no value alone)", "- Change button color (too fine-grained, no value)", "- Customer places order and views history and updates profile (too large, multiple flows)"]}}]}, "scanner_results": {}}, {"rule_file": "create_lightweight_precise_docs.json", "rule_content": {"description": "Create lightweight but precise documentation during shaping. Focus on structure and scope, not detailed specifications.", "examples": [{"do": {"description": "Create lightweight but precise documentation during shaping", "content": ["Balance fine-grained stories with testable/valuable stories", "Ensure stories are fine-grained enough to enable frequent feedback", "Ensure stories are grouped into meaningful chunks for high quality feedback", "Validate that a business expert can understand the language of most of the stories", "Focus the language on the business domain", "Create lightweight but precise documentation", "Focus on structure and scope, not detailed specifications", "Make the map easy to walk through (it tells a story)", "", "Example:", "(E) Manage Orders", "  and (E) Place Order", "    and (S) Customer --> places order", "(Shows hierarchy and structure, not detailed specs)"]}, "dont": {"description": "Don't over-elaborate or add detailed specifications during shaping", "content": ["Create stories that are too fine-grained without being testable or valuable", "Create stories that are too large to be testable or deliverable quickly", "Add detailed technical specifications during shaping phase", "Over-elaborate story mapping during shaping", "", "Wrong Example:", "(E) Manage Orders", "  and (E) Place Order", "    and (S) Customer --> places order", "  \u2192 Detailed API specs, database schema, UI mockups", "(Too much detail for shaping phase)"]}}]}, "scanner_results": {}}, {"rule_file": "discover_relationships_from_story_map.json", "rule_content": {"description": "Domain Discovery determines relationships and responsibilities between core domain objects by walking through the story map, then suggests story refinements to rebuild the story map to complement the domain model.", "examples": [{"do": {"description": "Extract keywords from story map and determine relationships and responsibilities", "content": "Go through all stories in increment scope, extract keywords from story titles/descriptions/acceptance criteria, ask clarifying questions for each keyword, map relationships with multiplicities, document responsibilities"}, "dont": {"description": "Don't skip keyword identification or build domain model without story map analysis", "content": "Skip going through stories, ignore keywords in acceptance criteria, build domain model without asking what keywords mean, use technical terms instead of domain terms"}}]}, "scanner_results": {}}, {"rule_file": "enforce_behavioral_journey_flow.json", "rule_content": {"description": "When shaping stories, CRITICAL: Stories must show user/system journey flow, not just list operations. Stories must include context (when/why actions happen) and connect logically. Order by user journey, not technical sequential_order.", "context": "when shaping stories", "examples": [{"do": {"description": "Show user/system journey with context and flow", "content": ["Stories must show WHEN and WHY actions happen, not just WHAT", "Story maps must show logical flow: Initialize \u2192 Validate \u2192 Process \u2192 Confirm \u2192 Complete", "Each story must connect to previous/next stories in the journey", "Order stories by user journey flow, not by technical sequential_order", "", "Correct Examples (with journey context - Payment Domain):", "(E) Process Payment", "  and (E) Process Card Payment", "    and (S) User --> invokes process payment command", "    and (S) System --> validates payment details", "    and (S) System --> authorizes payment", "    and (S) System --> processes payment transaction", "    and (S) System --> confirms payment and sends notification", "", "(E) Refund Payment", "  and (E) Process Refund", "    and (S) User --> invokes refund payment command", "    and (S) System --> validates refund eligibility", "    and (S) System --> processes refund transaction", "    and (S) System --> confirms refund and sends notification", "", "(E) Process Payment", "  and (E) Validate Payment", "    and (S) User --> submits payment request", "    and (S) System --> validates card number", "    and (S) System --> validates amount", "    and (S) System --> validates currency", "    and (S) System --> returns validation result", "", "Note: Individual stories like 'Authorize Payment with Processor' are correct story format (verb-noun, specific), but they need to be part of a journey. Stories should NOT include actors in the name (actors are documented separately).", "", "Correct Individual Stories (but need journey context):", "- 'Authorize Payment with Processor' (correct story format, but needs: when? why? what happens next?)", "- 'Validate Payment Details' (correct story format, but needs: when? why? what triggers this?)", "- 'Process Payment Transaction' (correct story format, but needs: when? why? what happens before/after?)", "", "Journey Flow Requirements:", "- Start with initialization/entry point", "- Show logical progression through operations", "- Include error handling and alternative paths", "- End with completion/save operations", "- Connect stories logically (this leads to that)"]}, "dont": {"description": "Don't create isolated sets of functions that don't make sense linearly", "content": ["Don't group unrelated operations together that don't form a logical journey", "Don't create story maps with random functions that have no linear relationship", "Don't mix unrelated operations from different domains or contexts", "", "Wrong Examples (isolated sets of functions, no linear sense - Payment Domain):", "(E) Payment Operations", "  and (E) Process Payment", "  and (E) Generate Invoice", "  and (E) Send Email", "  and (E) Update Inventory", "  and (E) Calculate Tax", "(unrelated operations, no linear flow - why does email come after payment? why inventory? no journey)", "", "(E) Payment System", "  and (E) Authorize Payment", "  and (E) Create User Account", "  and (E) Process Refund", "  and (E) Generate Report", "  and (E) Delete Transaction", "(random operations, no logical sequence - account creation doesn't follow authorization, deletion doesn't follow processing)", "", "(E) Payment Flow", "  and (S) System --> validates payment", "  and (S) System --> sends notification", "  and (S) System --> authorizes payment", "  and (S) System --> updates database", "  and (S) System --> processes payment", "(wrong order, no linear sense - notification before authorization? database update before processing?)", "", "What Makes It NOT a Linear Journey:", "- Unrelated operations grouped together (payment + inventory + email + tax - why together?)", "- Operations from different contexts mixed (payment + user account + reporting - different domains)", "- No logical sequence (why does X come before Y? no reason)", "- Operations can be in any order (no dependencies, no flow)", "- Random collection of functions (like a function library, not a journey)", "- No user/system goal that connects them (what are we trying to accomplish?)"]}}]}, "scanner_results": {}}, {"rule_file": "enforce_functional_accomplishment.json", "rule_content": {"description": "CRITICAL: Stories must represent complete functional accomplishments, not data access operations or implementation steps. Stories must deliver value independently.", "examples": [{"do": {"description": "Create stories that accomplish complete functions", "content": ["Stories must represent complete functional accomplishments", "Stories must deliver value independently (INVEST principle)", "Stories must show end-to-end flow, not just data access", "", "Correct Examples (complete functional accomplishments):", "- 'User loads story graph and system displays epics in diagram' (complete: load + display = accomplishment)", "- 'Developer edits epic name and system updates diagram' (complete: edit + update = accomplishment)", "- 'User requests render and system generates DrawIO file' (complete: request + generate = accomplishment)", "- 'CLI invokes render command and system saves outline diagram' (complete: invoke + save = accomplishment)", "", "Functional Accomplishment Requirements:", "- Story must accomplish something meaningful for user/system", "- Story must be independently valuable (can be tested/delivered alone)", "- Story must show complete flow (start \u2192 process \u2192 outcome)", "- Story must have clear acceptance criteria (how do we know it's done?)"]}, "dont": {"description": "Don't create stories that are just data access or implementation steps", "content": ["Don't create stories that are just data access operations", "Don't create stories that are implementation steps without outcomes", "Don't create stories that aren't independently valuable", "", "Wrong Examples (not complete accomplishments):", "- 'Read All Epics from Diagram' (data access - not accomplishment, what happens with the data?)", "- 'Load All Features In Graph Epic' (data access - not accomplishment)", "- 'Serialize Components to JSON' (implementation step - not accomplishment, part of what story?)", "- 'Convert Diagram to StoryGraph Format' (implementation step - not accomplishment)", "- 'Calculate Component Positions' (implementation step - not accomplishment)", "", "Data Access/Implementation Indicators (REJECT as stories):", "- Just reads/loads data without using it", "- Just converts/formats data without purpose", "- Just calculates/computes without outcome", "- Just serializes/saves without context", "", "These should be STEPS within stories, not stories themselves:", "- Step: 'System reads epics from diagram' (within story: 'User views story map and system displays epics')", "- Step: 'System serializes components' (within story: 'User saves story graph and system writes JSON file')", "- Step: 'System calculates positions' (within story: 'User requests render and system generates positioned diagram')", "", "Instead, ask:", "- What does the user/system accomplish with this?", "- Is this independently valuable?", "- Can this be tested/delivered alone?", "- What's the complete flow from start to finish?"]}}]}, "scanner_results": {}}, {"rule_file": "enforce_specificity_in_stories.json", "rule_content": {"description": "CRITICAL: Stories must be specific about what, when, why, and who. Generic operations like 'Add Sub-Epic' or 'Read Epics' are insufficient - stories must include context and specificity.", "scanner": "agile_bot.bots.base_bot.src.scanners.specificity_scanner.SpecificityScanner", "examples": [{"do": {"description": "Create specific stories with full context", "content": ["Stories must be specific about what, when, why, and who", "Stories must include context: when does it happen? why? what triggers it?", "Stories must specify actors, objects, and outcomes clearly", "", "Correct Examples (specific with context - Payment Domain):", "- 'User processes payment for order #12345 with amount $50.00 when customer completes checkout' (specific: user, order ID, amount, context)", "- 'Merchant invokes refund command from API and system reverses payment transaction' (specific: merchant, API, command, outcome)", "- 'System validates payment card number 4111-1111-1111-1111 when user submits payment form' (specific: system, card number, trigger)", "- 'User clicks Process Payment button and system prompts for payment method selection' (specific: user, action, UI element, system response)", "", "Specificity Requirements:", "- WHO: Specific actor (User, Merchant, Customer, System, PaymentProcessor, API)", "- WHAT: Specific action and object (processes payment for order #12345 with amount $50.00)", "- WHEN: Specific trigger/context (when customer completes checkout, when user submits payment form)", "- WHY: Purpose in journey (to complete purchase transaction, to reverse payment error)", "- OUTCOME: Specific result (payment processed, transaction ID returned, notification sent)"]}, "dont": {"description": "Don't create generic stories without context", "content": ["Don't create generic operations without specificity", "Don't omit context about when/why actions happen", "Don't use vague descriptions without details", "", "Wrong Examples (generic without context - Payment Domain):", "- 'Process Payment' (which payment? for which order? when? why?)", "- 'Authorize Payment' (which payment? with which card? when? why? what happens next?)", "- 'Exposes Payment API' (which endpoints? to whom? when? why?)", "- 'Refund Payment' (which payment? for which reason? when? why?)", "", "Generic Indicators (REJECT or require more specificity):", "- Single verb + noun without context: 'Process Payment', 'Authorize Payment', 'Refund Payment'", "- No specific objects: 'Process Payment' (which payment? which order?)", "- No context: 'Authorize Payment' (when? why? what triggers this?)", "- No outcome: 'Authorize Payment' (what happens with the authorization result?)", "", "Instead, ask:", "- Which specific object? (payment ID, order number, transaction ID, card number)", "- When does this happen? (trigger, context, user action - when customer completes checkout, when merchant requests refund)", "- Why does this happen? (purpose, user need, journey step - to complete purchase, to reverse error)", "- What's the outcome? (result, system response, user experience - payment processed, transaction ID returned, notification sent)"]}}]}, "scanner_results": {"violations": []}}, {"rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "rule_content": {"description": "Establish mandatory spine stories vs optional/enhanced behavior stories. When mapping stories, carefully distinguish between sequential spine (essential path) and optional paths, alternate routes, or additional functionality that is not strictly essential. Mandatory stories form the sequential spine (story AND story AND story). Optional stories are alternatives or enhancements (story OR story) that branch from the spine and can return to it. Sequential stories form the mandatory flow; optional stories are alternatives, enhancements, or non-essential sub-epics.", "scanner": "agile_bot.bots.base_bot.src.scanners.spine_optional_scanner.SpineOptionalScanner", "examples": [{"do": {"description": "Identify the essential spine first", "content": ["Start by identifying the minimal essential path that delivers core value", "The spine represents the mandatory sequence: Story1 AND Story2 AND Story3", "Spine stories get sequential_order numbers (1, 2, 3, etc.)", "Spine stories are required for the sub-epic to deliver its core purpose", "Ask: 'What is the minimum path to deliver value?'", "Establish the mandatory spine before identifying optional/enhanced behaviors", "Explicitly distinguish between spine (mandatory) and optional/enhanced behaviors"]}, "dont": {"description": "Don't mark everything as sequential", "content": ["Don't assign sequential_order to all stories when some are optional", "Don't treat alternate routes as part of the spine", "Don't include enhancements in the mandatory sequential flow", "Don't confuse 'nice to have' with 'must have'", "Don't mark all stories as mandatory when some are alternatives or enhancements", "Don't fail to establish the spine before adding optional/enhanced behaviors"]}}, {"do": {"description": "Mark optional paths clearly", "content": ["Optional stories branch from or enhance the spine but are not required", "Mark optional stories with 'optional: true' in the story structure", "Optional stories may have sequential_order if they're part of an alternative flow (e.g., 2.1, 3.1, etc.)", "Optional stories represent: alternate routes, enhancements, nice-to-have sub-epics", "Ask: 'Can the sub-epic deliver value without this story?'", "Optional/enhanced stories can return to the spine after completion", "Sort optional/enhanced stories by priority of delivery within the same sub-epic"]}, "dont": {"description": "Don't omit optional markers", "content": ["Don't leave optional stories unmarked - be explicit", "Don't assume all stories in a sub-epic are mandatory", "Don't mix optional and mandatory without clear distinction", "Don't fail to identify the spine before adding optional paths", "Don't omit the optional marker - be explicit about spine vs optional/enhanced behaviors", "Don't create sub-epics where every story is mandatory when alternatives or enhancements exist"]}}, {"do": {"description": "Distinguish types of optional paths with concrete examples", "content": ["Spine (all stories with and), then OR optional branch (all stories with and), then OR enhanced (all stories with and):", "", "Correct Example:", "Spine (all stories with and):", "  (S) User --> creates account", "  and (S) User --> logs in", "  and (S) User --> views dashboard", "OR optional branch (all stories with and):", "  (S) User --> signs in with social media (optional)", "  and (S) User --> signs in with email (optional)", "OR enhanced (all stories with and):", "  (S) User --> customizes dashboard (enhanced)", "  and (S) User --> shares dashboard (enhanced)"]}, "dont": {"description": "Wrong mapping examples", "content": ["Wrong: All stories marked mandatory when some are clearly alternatives or enhancements", "  and (S) User --> creates account (1)", "  and (S) User --> logs in with email (2)", "  and (S) User --> logs in with social media (3) - social media should be optional", "", "Wrong: No distinction between essential path and optional sub-epics", "  and (S) User --> views dashboard (1)", "  and (S) User --> customizes dashboard (2)", "  and (S) User --> shares dashboard (3) - customization and sharing should be optional", "", "Wrong: Missing optional markers on alternative flows or enhanced behaviors", "Wrong: Optional/enhanced stories not sorted by priority", "Wrong: No clear spine established before adding optional behaviors"]}}]}, "scanner_results": {"violations": [{"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}, {"rule": "establish_spine_vs_optional_enhanced_behavior", "rule_file": "establish_spine_vs_optional_enhanced_behavior.json", "violation_message": "All stories in story group have sequential_order - consider marking some as optional if they are alternatives or enhancements", "severity": "warning", "line_number": null, "location": ""}]}}, {"rule_file": "extract_story_map_checklist.json", "rule_content": {"description": "Quick checklist for extracting story maps from code. Follow this process step-by-step.", "steps": [{"step": 1, "title": "Find Outermost Layer and Entry Points", "checklist": ["Locate CLI commands (main(), argparse, command handlers)", "Locate UI entry points (routes, event handlers, button clicks)", "Locate MCP server tool definitions (tool names, parameters)", "Locate API contracts (REST endpoints, GraphQL, WSDL)", "Locate WebSocket handlers, message queues, event listeners", "Locate acceptance tests (end-to-end, integration, BDD/Gherkin)", "Document all entry points with their parameters and return values"]}, {"step": 2, "title": "Analyze Operations and Domain Concepts", "checklist": ["List all operations from entry points (what can be invoked?)", "Identify MAJOR domain concepts (high-level entities)", "Identify MINOR domain concepts (supporting entities)", "Identify relationships between concepts", "Document operation names, parameters, return values", "Document concept names, properties, relationships"]}, {"step": 3, "title": "Create Epics Based on Higher-Order Goals", "checklist": ["Group operations by higher-order goals (what is user/system trying to accomplish?)", "Create epics from goals, not from implementation structure", "Each epic represents a major capability or lifecycle stage", "Validate: Epic name describes a goal, not a technical operation"]}, {"step": 4, "title": "Create Sub-Epics Based on Distinct Behaviors", "checklist": ["For each epic, identify distinct behaviors (different ways to accomplish goal)", "Group behaviors into sub-epics (different types, modes, contexts)", "Each sub-epic represents a distinct path or scenario", "Validate: Sub-epic name describes a behavior, not a technical mechanism"]}, {"step": 5, "title": "Identify Distinct Behaviors from Tests and Code Flow", "checklist": ["Trace through acceptance tests: what happens step by step?", "Trace through CLI commands: what's the execution flow?", "Trace through MCP tool calls: what's the sequence?", "Identify distinct behaviors at each step", "Document typical execution order", "Document error handling and alternative paths"]}, {"step": 6, "title": "Lay Out Story Journey from End-to-End Flow", "checklist": ["Start with entry point (how does user/system initiate?)", "Follow code flow through operations (what happens step by step?)", "Include error handling (what happens when things go wrong?)", "End with completion (how does it finish?)", "For each story, include:", "  - WHEN: trigger, condition, user action", "  - WHY: purpose, user need, system requirement", "  - OUTCOME: result, state change, user experience", "  - ACTOR: who performs the action", "Validate: Stories show complete journey, not isolated operations"]}, {"step": 7, "title": "Validate Story Map Quality", "checklist": ["Stories show user/system journey (not just list operations)", "Stories have context (when/why/outcome)", "Stories are specific (not generic like 'Add Sub-Epic')", "Stories represent complete accomplishments (not data access)", "Implementation details are steps, not stories", "Order follows user journey, not technical sequential_order", "Epics/sub-epics based on goals, not implementation structure"]}], "common_mistakes": ["Starting with internal classes instead of entry points", "Creating epics from class structure instead of goals", "Creating stories from every method call", "Missing context (when/why) in stories", "Making implementation details into stories", "Ordering by technical sequential_order instead of user journey", "Generic stories without specificity"]}, "scanner_results": {}}, {"rule_file": "extract_story_map_from_code.json", "rule_content": {"description": "CRITICAL: When creating story maps from code, analyze the outermost layer showing end-to-end journey. Locate acceptance tests, human code engagement points (CLI/UI), MCP server definitions, WSDL, API contracts. Analyze operations and domain for major/minor concepts. Create epics/sub-epics based on higher-order goals. Look at distinct behaviors and typical execution order to lay out story journey.", "examples": [{"do": {"description": "Find outermost layer and entry points", "content": ["Start with the OUTERMOST LAYER showing end-to-end journey", "Locate all HUMAN CODE ENGAGEMENT points:", "  - CLI commands and entry points (main(), command handlers)", "  - UI entry points (web routes, event handlers, button clicks)", "  - MCP server tool definitions (tool names, parameters, descriptions)", "  - API contracts (REST endpoints, GraphQL queries, WSDL operations)", "  - WebSocket handlers, message queues, event listeners", "", "Locate ACCEPTANCE TESTS:", "  - End-to-end tests that show complete user journeys", "  - Integration tests that show system-to-system flows", "  - Test scenarios that describe 'when X, then Y' behaviors", "  - BDD/Gherkin tests with Given-When-Then structure", "", "Example Entry Points to Find:", "- CLI: 'python -m story_io.story_io_cli render-outline --story-graph file.json'", "- MCP: Tool 'render_outline' with parameters 'story_graph_path', 'output_path'", "- API: POST /api/story-graph/render with body {storyGraph, outputFormat}", "- UI: Button 'Render Outline' that triggers render operation", "- Test: 'test_render_outline_from_json' that shows complete flow"]}, "dont": {"description": "Don't start with internal implementation details", "content": ["Don't start with internal classes or helper functions", "Don't start with data structures or domain models", "Don't start with utility functions or low-level operations", "", "Wrong Starting Points:", "- Internal class: 'StoryIODiagram.load_from_json()' (implementation detail)", "- Helper function: 'parse_story_graph()' (internal mechanism)", "- Data structure: 'Epic' class definition (domain model, not entry point)", "", "These are important but come AFTER identifying the journey"]}}, {"do": {"description": "Analyze operations and domain for major/minor concepts", "content": ["Analyze OPERATIONS from entry points:", "  - What operations are exposed? (render, sync, search, edit, save)", "  - What are the operation names? (render-outline, sync-increments, search-stories)", "  - What parameters do they take? (story_graph_path, output_path, query)", "  - What do they return? (DrawIO file, JSON report, search results)", "", "Analyze DOMAIN CONCEPTS:", "  - MAJOR CONCEPTS: High-level domain entities (StoryGraph, Diagram, Epic, Sub-Epic, Story)", "  - MINOR CONCEPTS: Supporting entities (Position, Boundary, User, Increment)", "  - OPERATIONS: Actions on concepts (Load, Read, Edit, Render, Synchronize, Search, Save)", "  - RELATIONSHIPS: How concepts relate (Epic contains Sub-Epics, Sub-Epic contains Stories)", "", "Example Analysis (Story-IO Domain):", "- Operations: render-outline, render-increments, sync-outline, sync-increments, search, add-user, merge", "- Major Concepts: StoryGraph (main entity), Diagram (visual representation), Epic/Sub-Epic/Story (hierarchy)", "- Minor Concepts: Position (2D coordinate), Boundary (rectangular area), User (story actor), Increment (priority grouping)", "- Relationships: StoryGraph contains Epics, Epic contains Sub-Epics, Sub-Epic contains Stories", "", "Example Analysis (Payment Domain):", "- Operations: process-payment, refund-payment", "- Major Concepts: Payment (main entity), Transaction (financial transaction), Card (payment method), Refund (reversal)", "- Minor Concepts: Amount (monetary value), Currency (USD, EUR), Status (pending, approved, declined), PaymentMethod (card, bank transfer)", "- Relationships: Payment contains Transaction, Payment uses Card, Payment can have Refund, Transaction has Status"]}, "dont": {"description": "Don't confuse implementation details with domain concepts", "content": ["Don't treat implementation classes as domain concepts", "Don't treat utility functions as operations", "Don't treat data structures as domain entities", "", "Wrong Analysis:", "- Implementation class: 'StoryIORenderer' (implementation detail, not domain concept)", "- Utility function: 'calculate_position()' (implementation detail, not operation)", "- Data structure: 'dict' or 'list' (implementation detail, not domain concept)", "", "Focus on WHAT the system does (domain), not HOW it does it (implementation)"]}}, {"do": {"description": "Create epics/sub-epics based on higher-order goals", "content": ["Group operations into EPICS based on HIGHER-ORDER GOALS:", "  - What is the user/system trying to accomplish?", "  - What are the major capabilities?", "  - What are the lifecycle stages?", "", "Example Epic Creation from Operations (Story-IO Domain):", "- Operations: render-outline, render-increments, render-exploration", "- Higher-Order Goal: 'Render StoryGraph' (user wants to visualize story map)", "- Epic: 'Render StoryGraph'", "", "- Operations: sync-outline, sync-increments, generate-sync-report, merge", "- Higher-Order Goal: 'Synchronize StoryGraph' (user wants to sync between formats)", "- Epic: 'Synchronize StoryGraph'", "", "Example Epic Creation from Operations (Payment Domain):", "- Operations: process-payment, process_payment, POST /api/payments/process", "- Higher-Order Goal: 'Process Payment' (user wants to process a payment transaction)", "- Epic: 'Process Payment'", "", "- Operations: refund-payment, refund_payment, POST /api/payments/refund", "- Higher-Order Goal: 'Refund Payment' (user wants to reverse a payment)", "- Epic: 'Refund Payment'", "", "Group operations into SUB-EPICS based on DISTINCT BEHAVIORS:", "  - What are the different ways to accomplish the epic goal?", "  - What are the different types or modes?", "  - What are the different contexts or scenarios?", "", "Example Sub-Epic Creation (Story-IO Domain):", "- Epic: 'Render StoryGraph'", "- Distinct Behaviors: Render outline (basic), Render increments (with priorities), Render exploration (with acceptance criteria)", "- Sub-Epics: 'Render Outline', 'Render Increments', 'Render Exploration'", "", "- Epic: 'Synchronize StoryGraph'", "- Distinct Behaviors: Sync outline structure, Sync increments, Generate comparison report, Merge graphs", "- Sub-Epics: 'Synchronize Outline', 'Synchronize Increments', 'Generate Sync Report', 'Merge StoryGraphs'", "", "Example Sub-Epic Creation (Payment Domain):", "- Epic: 'Process Payment'", "- Distinct Behaviors: Validate payment (required), Authorize payment (required), Process with card (common), Process with bank transfer (alternative), Process with wallet (alternative), Confirm payment (required)", "- Sub-Epics: 'Validate Payment', 'Authorize Payment', 'Process Card Payment', 'Process Bank Transfer', 'Process Wallet Payment', 'Confirm Payment'", "", "- Epic: 'Refund Payment'", "- Distinct Behaviors: Validate refund eligibility, Process refund, Confirm refund", "- Sub-Epics: 'Validate Refund', 'Process Refund', 'Confirm Refund'"]}, "dont": {"description": "Don't create epics/sub-epics from implementation structure", "content": ["Don't create epics based on class structure (StoryIODiagram, DrawIORenderer, PaymentProcessor, etc.)", "Don't create sub-epics based on method names (load_json, parse_xml, charge_card, etc.)", "Don't create epics/sub-epics from technical layers (data layer, service layer, etc.)", "", "Wrong Epic Creation:", "- Based on class: 'StoryIODiagram Operations' (implementation structure)", "- Based on method: 'JSON Loading' (technical mechanism)", "- Based on layer: 'Data Access Layer' (technical architecture)", "", "Focus on USER/SYSTEM GOALS, not technical structure"]}}, {"do": {"description": "Look at distinct behaviors and typical execution order", "content": ["Analyze DISTINCT BEHAVIORS from acceptance tests and code flow:", "  - What are the different scenarios?", "  - What are the different paths through the code?", "  - What are the different user actions?", "", "Example Behavior Analysis (Story-IO Domain):", "- Test: 'test_render_outline_from_json' shows: Load JSON \u2192 Parse \u2192 Generate XML \u2192 Calculate Positions \u2192 Apply Styles \u2192 Save", "- Distinct Behaviors: Load, Parse, Generate, Calculate, Apply, Save", "- These become STORIES in the journey", "", "Example Behavior Analysis (Payment Domain):", "- Test: 'test_process_payment_success' shows: Invoke \u2192 Validate \u2192 Authorize \u2192 Process \u2192 Confirm", "- Distinct Behaviors: Invoke (entry point), Validate (check input), Authorize (check funds/fraud), Process (execute transaction), Confirm (complete and notify)", "- These become STORIES in the journey", "", "Determine TYPICAL EXECUTION ORDER from code flow:", "  - Trace through acceptance tests: what happens first, second, third?", "  - Trace through CLI commands: what's the flow?", "  - Trace through MCP tool calls: what's the sequence?", "  - Look at error handling: what are alternative paths?", "", "Example Execution Order Analysis (Story-IO Domain):", "- CLI: 'render-outline --story-graph file.json --output file.drawio'", "- Code Flow: Parse args \u2192 Load story graph \u2192 Create diagram \u2192 Render outline \u2192 Save file", "- Typical Order: 1. Parse arguments, 2. Load story graph, 3. Render outline, 4. Save file", "- Stories: 'Parses Command Arguments' \u2192 'Loads StoryGraph from JSON' \u2192 'Renders Outline to DrawIO' \u2192 'Saves DrawIO File'", "", "Example Execution Order Analysis (Payment Domain):", "- CLI: 'process-payment --payment-id 123 --amount 50.00'", "- Code Flow: Parse args \u2192 Validate payment \u2192 Authorize payment \u2192 Process payment \u2192 Confirm payment", "- Typical Order: 1. User invokes process payment, 2. System validates payment details, 3. System authorizes payment, 4. System processes payment, 5. System confirms payment", "- Stories: 'User invokes process payment command' \u2192 'System validates payment details' \u2192 'System authorizes payment with payment processor' \u2192 'System processes payment transaction' \u2192 'System confirms payment and sends notification'", "", "Create STORY JOURNEY from execution order:", "  - Start with entry point (CLI invocation, UI click, MCP tool call)", "  - Follow the code flow through operations", "  - Include error handling and alternative paths", "  - End with completion (save, return result, display)", "", "Example Story Journey (Story-IO Domain):", "- Entry: 'User invokes render-outline command from CLI'", "- Flow: 'CLI parses arguments' \u2192 'CLI loads story graph' \u2192 'CLI invokes render' \u2192 'System renders outline' \u2192 'System saves file'", "- Error: 'If file not found, CLI displays error message'", "- Completion: 'CLI returns success message'", "", "Example Story Journey (Payment Domain):", "- Entry: 'User invokes process payment command' (WHEN: user wants to charge customer, WHY: to complete purchase, OUTCOME: CLI/MCP/API receives request)", "- Flow: 'System validates payment details' (WHEN: after request received, WHY: to ensure payment can be processed, OUTCOME: details validated) \u2192 'System authorizes payment' (WHEN: after validation, WHY: to check funds/fraud, OUTCOME: payment authorized) \u2192 'System processes payment' (WHEN: after authorization, WHY: to execute transaction, OUTCOME: payment processed) \u2192 'System confirms payment' (WHEN: after processing, WHY: to notify user, OUTCOME: payment confirmed)", "- Error: 'If validation fails, System displays validation error' (WHEN: validation fails, WHY: to inform user, OUTCOME: error shown, process stops)", "- Completion: 'System returns transaction ID' (WHEN: after confirmation, WHY: to provide reference, OUTCOME: transaction ID returned)"]}, "dont": {"description": "Don't create stories from code structure or method calls", "content": ["Don't create stories from every method call in code", "Don't create stories from internal function calls", "Don't create stories from data structure operations", "", "Wrong Story Creation:", "- From method: 'StoryIODiagram.__init__()' (internal initialization)", "- From function: 'parse_json()' (internal parsing)", "- From operation: 'dict.get()' (data access, not behavior)", "- From method: 'PaymentProcessor.charge_card()' (internal implementation)", "", "Focus on USER/SYSTEM VISIBLE BEHAVIORS, not internal implementation"]}}, {"do": {"description": "Lay out story journey from end-to-end flow", "content": ["Create STORY JOURNEY that shows complete end-to-end flow:", "  - Start: How does user/system initiate? (CLI command, UI click, API call)", "  - Middle: What happens step by step? (parse, load, process, transform)", "  - End: How does it complete? (save, return, display, notify)", "", "Include CONTEXT for each story:", "  - WHEN does it happen? (trigger, condition, user action)", "  - WHY does it happen? (purpose, user need, system requirement)", "  - WHAT is the outcome? (result, state change, user experience)", "  - ACTOR: Who performs the action? (User, System, CLI, MCP, API, etc.)", "", "Example Complete Story Journey (Story-IO Domain):", "(E) Render StoryGraph", "  and (E) Render Outline", "    and (S) User --> invokes render-outline command from CLI", "    and (S) CLI --> parses command arguments", "    and (S) CLI --> loads story graph from JSON file", "    and (S) System --> renders outline to DrawIO format", "    and (S) System --> saves DrawIO file", "", "Example Complete Story Journey (Payment Domain):", "(E) Process Payment", "  and (E) Process Card Payment", "    and (S) User --> invokes process payment command", "    and (S) System --> validates payment details", "    and (S) System --> authorizes payment with payment processor", "    and (S) System --> processes payment transaction", "    and (S) System --> confirms payment and sends notification", "", "Include ERROR HANDLING and ALTERNATIVE PATHS:", "  - What happens when file not found?", "  - What happens when parsing fails?", "  - What happens when validation fails?", "  - What happens when authorization fails?", "", "Example Error Handling (Story-IO Domain):", "  and (S) CLI --> displays error message if story graph file not found", "", "Example Error Handling (Payment Domain):", "  and (S) System --> displays validation error if validation fails", "  and (S) System --> displays authorization declined message if authorization fails"]}, "dont": {"description": "Don't create isolated stories without journey context", "content": ["Don't create stories that are just operations without context", "Don't create stories that don't connect to a journey", "Don't create stories without when/why/outcome/actor", "", "Wrong Story Creation:", "- (S) System --> loads StoryGraph (no context: when? why? what happens next?)", "- (S) System --> parses JSON (no context: when? why? what's the outcome?)", "- (S) System --> saves file (no context: when? why? what triggers this?)", "- (S) System --> processes payment (no context: when? why? what's the outcome?)", "", "Every story must be part of a JOURNEY with CONTEXT (when/why/outcome/actor)"]}}]}, "scanner_results": {}}, {"rule_file": "focus_real_actions_on_domain_concepts.json", "rule_content": {"description": "When shaping stories, stories must describe REAL ACTIONS that users or other actors (even system or technical actors) can perform, not capabilities or structural descriptions. Organize by lifecycle flow (Load, Read, Edit, Render, Synchronize, Search, Save). CRITICAL: Actor names must NOT appear in Epic/Sub-Epic/Story names - names are Verb-Noun only.", "context": "when shaping stories", "examples": [{"do": {"description": "Use real actions - actor separate from name", "content": ["Stories describe actions: Load, Read, Add, Remove, Render, Search, Save", "Organize by lifecycle: Load \u2192 Read \u2192 Edit \u2192 Render \u2192 Synchronize \u2192 Search \u2192 Save", "Use Verb-Noun format for names: '[Verb] [Noun]' - NO ACTOR in name", "Focus on what users/code CAN DO, not what things ARE", "", "NAMING RULE - Actor NOT in Name:", "- Epic name: 'Places Order' (NOT 'Customer Places Order')", "- Sub-Epic name: 'Validates Payment' (NOT 'PaymentValidator Validates Payment')", "- Story name: 'Processes Order Items' (NOT 'OrderProcessor Processes Order Items')", "- Actor is documented separately, not in the name itself", "", "ACTORS for User/System Stories (normal stories):", "- Use human/system actors: User, Developer, System, Customer, Admin", "- Actor is implicit or documented separately from name", "- Examples: Epic 'Places Order' has actor: Customer", "- Examples: Sub-Epic 'Validates Payment' has actor: System", "", "ACTORS for Technical Stories (deep internal class-level interactions):", "- Domain concepts CAN be actors: OrderProcessor, PaymentValidator, InventoryManager, Cart, Product", "- Actor is documented separately, NOT in name", "- Examples: Epic 'Loads Order Data' has actor: OrderProcessor (technical)", "- Examples: Sub-Epic 'Updates Inventory' has actor: InventoryManager (technical)", "- Examples: Story 'Calculates Total' has actor: Cart (technical)", "- This is acceptable when documenting class-to-class interactions internally"]}, "dont": {"description": "Avoid capabilities, structural descriptions, passive states, and actors in names", "content": ["Don't use capability nouns or structural descriptions", "Don't describe what things ARE or CONTAIN", "Don't use passive states or properties as stories", "CRITICAL: Don't put actor in Epic/Sub-Epic/Story names", "", "Wrong Examples (capabilities/structure):", "- 'PaymentValidator Contains Validation Logic' (capability, not action)", "- 'OrderProcessor Tracks Order Count' (passive state, not action)", "- 'Cart Hierarchy Foundation' (structural description)", "- 'Domain Components Implementation' (capability)", "- 'Product Represents Item' (structural description)", "", "Wrong Examples (actor in name):", "- Epic: 'Customer Places Order' (actor in name - WRONG)", "- Sub-Epic: 'OrderProcessor Validates Payment' (actor in name - WRONG)", "- Sub-Epic: 'Cart Adds Product' (actor in name - WRONG)", "- Story: 'InventoryManager Updates Stock' (actor in name - WRONG)", "", "Correct Examples (actor NOT in name):", "- Epic: 'Places Order' (actor: Customer, documented separately)", "- Sub-Epic: 'Validates Payment' (actor: PaymentValidator, documented separately)", "- Sub-Epic: 'Adds Product' (actor: Cart, documented separately)", "- Story: 'Updates Stock' (actor: InventoryManager, documented separately)", "", "These are not actions users/code can perform - they describe structure or capabilities", "Instead ask: What can users/code DO with this domain concept?", "- Instead of 'Contains Logic' \u2192 'Generates XML' or 'Renders Diagram'", "- Instead of 'Tracks Count' \u2192 'Reads Count' or 'Updates Count'", "- Instead of 'Represents X' \u2192 'Creates X' or 'Loads X'"]}}]}, "scanner_results": {}}, {"rule_file": "focus_user_and_system_activities.json", "rule_content": {"description": "Focus story maps on both user AND system activities, not tasks. Stories should outline user and system behavior patterns.", "examples": [{"do": {"description": "Include both user and system activities in story descriptions", "content": ["User submits order, System validates payment", "Customer views products, System displays inventory", "Use user activity patterns: User submits, Customer places", "Use system activity patterns: System validates, System sends", "Focus stories on user interactions and how the system behaves as observed by users", "Example: Customer places order with payment details", "", "ACTOR SELECTION (documented separately, NOT in name):", "- For user/system stories: Actors are User, System, Developer, Customer, Admin (human/system actors)", "- For technical stories (deep internal class-level): Domain concepts can be actors (StoryIODiagram, DrawIORenderer, DrawIOSynchronizer, User, Increment, Component)", "- Technical stories document class-to-class interactions where domain concepts act as actors", "", "CRITICAL NAMING RULE:", "- Actor must NOT appear in Epic/Sub-Epic/Story name", "- Name format: '[Verb] [Noun]' only", "- Examples: 'Loads StoryGraph' (actor: StoryIODiagram, documented separately)", "- Examples: 'Adds Sub-Epic' (actor: Epic, documented separately)", "- Examples: 'Changes Parent' (actor: Component, documented separately)"]}, "dont": {"description": "Avoid task-oriented language that describes implementation", "content": ["Avoid task-oriented language that describes implementation", "Don't use task language for building or setting up", "Don't focus only on user activities (ignore system activities)", "Don't focus only on tasks (instead of activities)", "Don't use development task language: implement, create, refactor, optimize, fix, build, set up", "Don't use technical implementation details: query database, call API, update table", "", "Wrong Examples:", "- Only user activities: User submits order, User views products (missing system activities)", "- Only tasks: Implement order submission, Create payment validation (not activities)", "- Implement order submission, Create payment validation", "- Build product listing page, Set up inventory display"]}}]}, "scanner_results": {}}, {"rule_file": "identify_system_stories.json", "rule_content": {"description": "System stories capture system-to-system interactions that are not user-facing. They represent internal system behavior that crosses system boundaries (e.g., microservice to microservice, component to component). System stories should be identified and marked with story_type: 'system'.", "do": {"examples": [{"description": "Identify system-to-system interactions", "content": ["Storage Microservice validates payload from Local Mgmt System", "API Gateway routes request to Authentication Service", "Message Queue delivers event to Notification Service"]}, {"description": "Mark system stories with story_type: 'system'", "content": ["Story: 'Validate Payload' with story_type: 'system'", "Story: 'Route Request' with story_type: 'system'", "Story: 'Deliver Event' with story_type: 'system'"]}, {"description": "Use system stories for internal system behavior", "content": ["System stories represent behavior that happens between systems/components", "System stories are not directly visible to end users", "System stories enable user-facing stories to function"]}]}, "dont": {"examples": [{"description": "Don't mark user-facing stories as system stories", "content": ["User clicks button \u2192 NOT a system story", "User views dashboard \u2192 NOT a system story", "User submits form \u2192 NOT a system story"]}, {"description": "Don't confuse system stories with technical stories", "content": ["System stories = system-to-system behavior (dark blue in DrawIO)", "Technical stories = implementation tasks (black/white in DrawIO, normally avoided)"]}]}}, "scanner_results": {}}, {"rule_file": "maximize_integration_of_related_concepts.json", "rule_content": {"description": "When shaping stories, maximize integration of related concepts", "context": "when shaping stories", "examples": [{"do": {"description": "Group concepts that the user sees as one capability", "content": ["Group concepts that the user sees as one capability", "Nest implementation details under the sub-epic they serve", "Keep related data and operations together", "Eliminate artificial boundaries based on code organization"]}, "dont": {"description": "Don't separate related concepts", "content": ["Don't separate related concepts into different major sections", "Wrong: Split based on code layers (data, business, presentation)", "Don't duplicate related concepts across multiple sections", "Wrong: Create gaps that break the user's mental model"]}}]}, "scanner_results": {}}, {"rule_file": "place_domain_concepts_by_relevance.json", "rule_content": {"description": "When shaping stories, place domain concepts locally or globally based on relevance to one or multiple sub_epics", "context": "when shaping stories", "examples": [{"do": {"description": "Place domain concepts at the most specific level, favoring local placement", "content": ["Favor local placement: Place domain_concepts at the sub_epic level when they are relevant to only that sub_epic", "Think about the core: Consider core domain concepts that span multiple sub_epics - these should be placed at the parent epic/sub_epic level", "Elevate when shared: If a domain concept is used by multiple child sub_epics, elevate it to the parent level", "Start local, elevate if needed: Begin with local placement, but elevate if the concept is referenced by multiple sub_epics", "", "Correct Examples (Local Placement):", "- Sub-Epic 'Validates Payment' has domain_concept: 'Payment' (only used in this sub-epic)", "- Sub-Epic 'Processes Order' has domain_concept: 'Order' (only used in this sub-epic)", "- Sub-Epic 'Updates Inventory' has domain_concept: 'InventoryItem' (only used in this sub-epic)", "", "Correct Examples (Global Placement):", "- Epic 'Process Payment' has domain_concept: 'Payment' (used by multiple sub-epics: Validate Payment, Authorize Payment, Process Transaction)", "- Epic 'Manage Orders' has domain_concept: 'Order' (used by multiple sub-epics: Create Order, Update Order, Cancel Order)", "- Sub-Epic 'Order Management' has domain_concept: 'Customer' (used by multiple child sub-epics: Create Customer Order, Update Customer Order)"]}, "dont": {"description": "Don't place domain concepts at wrong levels or duplicate them unnecessarily", "content": ["Don't place domain concepts at epic level when they're only used in one sub-epic", "Wrong: Epic 'Payment System' has domain_concept: 'PaymentValidator' (only used in 'Validates Payment' sub-epic - should be local)", "Don't duplicate domain concepts at multiple levels", "Wrong: Both Epic and Sub-Epic have 'Payment' concept when it's only used in one sub-epic", "Don't place core domain concepts too locally if they're used across multiple epics", "Wrong: Core concept 'User' placed only in one sub-epic when it's used across multiple epics", "Don't ignore shared usage - if multiple sub-epics reference a concept, elevate it", "Wrong: 'Order' concept placed in each sub-epic separately when all sub-epics use it (should be at parent level)"]}}]}, "scanner_results": {}}, {"rule_file": "prevent_generic_capabilities.json", "rule_content": {"description": "CRITICAL: Stories must describe specific actions with actors, not generic capabilities. Reject stories that describe what system IS (capabilities) vs what system DOES (behaviors).", "scanner": "agile_bot.bots.base_bot.src.scanners.generic_capability_scanner.GenericCapabilityScanner", "examples": [{"do": {"description": "Use specific actions with actors and outcomes", "content": ["Stories must have specific actors performing specific actions", "Stories must describe what system DOES (behaviors), not what system IS (capabilities)", "Stories must have specific outcomes, not generic descriptions", "", "Correct Examples (specific behaviors with actors):", "- 'User invokes MCP tool and system routes to StoryIO handler' (specific: user, MCP tool, routing action)", "- 'Developer adds sub-epic Render Exploration to epic Render StoryGraph' (specific: developer, sub-epic name, epic name)", "- 'System loads story graph from JSON file when user requests render' (specific: system, load action, trigger)", "- 'CLI determines workspace root from current directory' (specific: CLI, determine action, source)", "", "Actor Requirements:", "- Every story must have an actor (User, System, Developer, CLI, StoryIODiagram, etc.)", "- Actor must be documented separately (not in name)", "- Actor must be specific (not generic 'Component' or 'System')", "- Actor must perform the action (not just be present)"]}, "dont": {"description": "Don't use generic capabilities or passive descriptions", "content": ["Don't describe what system IS (capabilities)", "Don't use generic action descriptions without actors", "Don't use passive states or properties as stories", "", "Wrong Examples (generic capabilities):", "- 'Exposes Tools' (capability - what tools? when? to whom? what happens?)", "- 'Provides Server Interface' (capability - what interface? when? why?)", "- 'Contains Validation Logic' (capability - not an action)", "- 'Tracks Order Count' (passive state - not an action)", "", "Capability Indicators (REJECT):", "- Describes what system IS: 'Exposes', 'Provides', 'Contains', 'Represents'", "- No specific actor or action", "- No specific outcome or trigger", "- Generic description without context", "", "Instead, ask:", "- Who performs this action? (actor)", "- When does this happen? (trigger/context)", "- What specific outcome occurs? (result)", "- Why does this happen? (purpose in journey)"]}}]}, "scanner_results": {"violations": [{"rule": "prevent_generic_capabilities", "rule_file": "prevent_generic_capabilities.json", "violation_message": "Story name \"Stores Strategy Parameters For Mob\" uses passive state verb \"stores\" - use active behaviors instead (e.g., \"User updates order count\" not \"Tracks order count\")", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].story_groups[0].stories[1].name"}]}}, {"rule_file": "prevent_implementation_details_as_stories.json", "rule_content": {"description": "CRITICAL: Implementation operations (serialize, convert, calculate, generate XML, apply formatting) must be steps within stories, not stories themselves. Stories must focus on user/system outcomes, not technical mechanisms.", "examples": [{"do": {"description": "Keep implementation details as steps within stories", "content": ["Implementation operations must be steps within stories", "Stories must focus on user/system outcomes, not technical mechanisms", "Stories must describe what user/system experiences, not how it's implemented", "", "Correct Examples (outcomes, not mechanisms):", "- Story: 'User saves story graph and system writes JSON file' \u2192 Steps: 'System converts diagram to story graph format', 'System serializes components to JSON', 'System writes file'", "- Story: 'User requests render and system generates DrawIO diagram' \u2192 Steps: 'System generates DrawIO XML', 'System calculates component positions', 'System applies styles', 'System saves file'", "- Story: 'User edits epic and system updates diagram' \u2192 Steps: 'System updates epic data', 'System recalculates layout', 'System refreshes diagram'", "", "Story vs Step Distinction:", "- Story = User/system outcome (what they experience)", "- Step = Implementation detail (how it's done)", "- Story = Independently valuable (can be tested/delivered)", "- Step = Part of story (not independently valuable)"]}, "dont": {"description": "Don't make implementation operations into stories", "content": ["Don't create stories for implementation operations", "Don't expose technical mechanisms as user stories", "Don't break implementation steps into separate stories", "", "Wrong Examples (implementation details as stories):", "- 'Convert Diagram to StoryGraph Format' (implementation - should be step in 'Save StoryGraph' story)", "- 'Serialize Components to JSON' (implementation - should be step in 'Save StoryGraph' story)", "- 'Generate DrawIO XML from StoryGraph' (implementation - should be step in 'Render Outline' story)", "- 'Calculate Component Positions' (implementation - should be step in 'Render Outline' story)", "- 'Apply Component Styles' (implementation - should be step in 'Render Outline' story)", "- 'Save DrawIO XML to File' (implementation - should be step in 'Render Outline' story)", "", "Implementation Operation Indicators (REJECT as stories):", "- Serialize, deserialize, convert, transform, format", "- Calculate, compute, generate, create (technical artifacts)", "- Apply, set, configure (technical settings)", "- Save, write, store (without user context)", "", "These are implementation mechanisms, not user/system behaviors", "They should be steps within stories that describe outcomes", "", "Instead, ask:", "- What does the user/system experience? (story)", "- How is it implemented? (step within story)", "- What's the outcome? (story)", "- What's the mechanism? (step)"]}}], "scanner": "agile_bot.bots.base_bot.src.scanners.implementation_details_scanner.ImplementationDetailsScanner"}, "scanner_results": {"violations": []}}, {"rule_file": "refine_scope_to_functional_accomplishment.json", "rule_content": {"description": "Refine Scope to Functional Accomplishment", "examples": [{"do": {"description": "Focus on functional outcomes, not mechanisms", "content": ["Focus on functional outcomes, not mechanisms", "Frame domains by what they accomplish for users", "Ask about user enablement: What does this enable the user to do or understand?", "State the transformation or capability provided", "Be specific about the functional benefit"]}, "dont": {"description": "Don't frame domains by their technical implementation", "content": ["Don't frame domains by their technical implementation", "Wrong: Focus on 'how' before 'what'", "Don't use generic system capabilities as domain names", "Wrong: Describe mechanisms instead of outcomes"]}}]}, "scanner_results": {}}, {"rule_file": "size_stories_3_to_12_days.json", "rule_content": {"description": "Size stories to fall within 3-12 day effort range for effective planning and frequent delivery.", "scanner": "agile_bot.bots.base_bot.src.scanners.story_sizing_scanner.StorySizingScanner", "examples": [{"do": {"description": "Create stories that represent complete flows within the effort range", "content": ["Create stories that represent complete flows within the effort range", "Example: Customer places order (complete flow, 3-5 days)", "Break/group stories so that most fall into a 3-12 day effort range", "Enable frequent feedback by decomposing the work into smaller items"]}, "dont": {"description": "Avoid stories that are too large or too small", "content": ["Avoid stories that are too large and span multiple weeks", "Don't arbitrarily decompose stories to a functional level, regardless of size", "", "Wrong Examples:", "- Order management system (too large, 20+ days)", "- Create stories that are too small without considering value"]}}]}, "scanner_results": {"violations": [{"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Epic \"Group Minions Into Mobs\" has 4 4 sub-epics/story groups (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[0].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Form Mob From Selected Tokens\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[0].sub_epics[0].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Add Minions To Existing Mob\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Spawn Mob From Actor Templates\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[0].sub_epics[2].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Remove Minions From Mob\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[3].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Epic \"Assign Strategies To Mobs\" has 2 2 sub-epics/story groups (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[1].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Select Strategy For Mob\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[1].sub_epics[0].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Customize Strategy Parameters\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[1].sub_epics[1].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Initiate Mob Action\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Select Target From Strategy\" has 4 4 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[2].sub_epics[1].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Execute Mob Attack\" has 3 3 nested sub-epics/stories (should be 5-9)", "severity": "warning", "line_number": null, "location": "epics[2].sub_epics[2].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Move Minions To Target\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].name"}, {"rule": "size_stories_3_to_12_days", "rule_file": "size_stories_3_to_12_days.json", "violation_message": "Sub-epic \"Attack Fleeing Targets\" has 2 2 nested sub-epics/stories (should be 5-9)", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].name"}]}}, {"rule_file": "story_map_code_approach.json", "rule_content": {"description": "Quick checklist for extracting story maps from code. Follow this process step-by-step.", "steps": [{"step": 1, "title": "Find Outermost Layer and Entry Points", "checklist": ["Locate CLI commands (main(), argparse, command handlers)", "Locate UI entry points (routes, event handlers, button clicks)", "Locate MCP server tool definitions (tool names, parameters)", "Locate API contracts (REST endpoints, GraphQL, WSDL)", "Locate WebSocket handlers, message queues, event listeners", "Locate acceptance tests (end-to-end, integration, BDD/Gherkin)", "Document all entry points with their parameters and return values"]}, {"step": 2, "title": "Analyze Operations and Domain Concepts", "checklist": ["List all operations from entry points (what can be invoked?)", "Identify MAJOR domain concepts (high-level entities)", "Identify MINOR domain concepts (supporting entities)", "Identify relationships between concepts", "Document operation names, parameters, return values", "Document concept names, properties, relationships"]}, {"step": 3, "title": "Create Epics Based on Higher-Order Goals", "checklist": ["Group operations by higher-order goals (what is user/system trying to accomplish?)", "Create epics from goals, not from implementation structure", "Each epic represents a major capability or lifecycle stage", "Validate: Epic name describes a goal, not a technical operation"]}, {"step": 4, "title": "Create Sub-Epics Based on Distinct Behaviors", "checklist": ["For each epic, identify distinct behaviors (different ways to accomplish goal)", "Group behaviors into sub-epics (different types, modes, contexts)", "Each sub-epic represents a distinct path or scenario", "Validate: Sub-epic name describes a behavior, not a technical mechanism"]}, {"step": 5, "title": "Identify Distinct Behaviors from Tests and Code Flow", "checklist": ["Trace through acceptance tests: what happens step by step?", "Trace through CLI commands: what's the execution flow?", "Trace through MCP tool calls: what's the sequence?", "Identify distinct behaviors at each step", "Document typical execution order", "Document error handling and alternative paths"]}, {"step": 6, "title": "Lay Out Story Journey from End-to-End Flow", "checklist": ["Start with entry point (how does user/system initiate?)", "Follow code flow through operations (what happens step by step?)", "Include error handling (what happens when things go wrong?)", "End with completion (how does it finish?)", "For each story, include:", "  - WHEN: trigger, condition, user action", "  - WHY: purpose, user need, system requirement", "  - OUTCOME: result, state change, user experience", "  - ACTOR: who performs the action", "Validate: Stories show complete journey, not isolated operations"]}, {"step": 7, "title": "Validate Story Map Quality", "checklist": ["Stories show user/system journey (not just list operations)", "Stories have context (when/why/outcome)", "Stories are specific (not generic like 'Add Sub-Epic')", "Stories represent complete accomplishments (not data access)", "Implementation details are steps, not stories", "Order follows user journey, not technical sequential_order", "Epics/sub-epics based on goals, not implementation structure"]}], "common_mistakes": ["Starting with internal classes instead of entry points", "Creating epics from class structure instead of goals", "Creating stories from every method call", "Missing context (when/why) in stories", "Making implementation details into stories", "Ordering by technical sequential_order instead of user journey", "Generic stories without specificity"]}, "scanner_results": {}}, {"rule_file": "use_active_behavioral_language.json", "rule_content": {"description": "When shaping stories, use active behavioral language with action verbs. Describe behaviors, not tasks or capabilities.", "context": "when shaping stories", "scanner": "agile_bot.bots.base_bot.src.scanners.active_language_scanner.ActiveLanguageScanner", "examples": [{"do": {"description": "Use action verbs to describe what happens", "content": ["Use action verbs to describe what happens", "Example: User submits order, System validates payment", "Favor active behavioral language over functional/capability breakup", "Use story maps to outline user and system behavior (NOT tasks)", "Use action verbs: submits, views, validates, sends, displays", "Describe behaviors: [Actor] [action] [object] - but actor NOT in name", "Use active behavior language: Place order (active behavior), Validate payment (active behavior)", "", "CRITICAL NAMING RULE - Actor NOT in Name:", "- Epic/Sub-Epic/Story names must be Verb-Noun format: '[Verb] [Noun]'", "- Actor is documented separately, NOT included in the name", "- Verb can be in various forms: imperative ('Add'), infinitive ('To Add'), third person ('Adds') - all are acceptable", "- Noun can be singular or plural based on context - DO NOT pluralize unnecessarily", "- Prepositional phrases and context are part of the noun phrase and should be preserved (e.g., 'Add Minion To Mob' is correct)", "- Examples: Epic 'Places Order' (actor: Customer, documented separately)", "- Examples: Sub-Epic 'Validates Payment' (actor: PaymentValidator, documented separately)", "- Examples: Story 'Updates Stock' (actor: InventoryManager, documented separately)", "- Examples: Story 'Add Minion To Mob' (verb-noun with context preserved - CORRECT)", "- Examples: Story 'Group Minions' (verb-noun, plural noun is correct for context - CORRECT)", "", "ACTOR SELECTION (documented separately, not in name):", "- For user/system stories: Use human/system actors (User, System, Developer, Customer)", "- For technical stories (deep internal): Domain concepts can be actors (OrderProcessor, PaymentValidator, InventoryManager, Cart, Product)", "- Actor is implicit or explicitly documented, but NOT in the name string"]}, "dont": {"description": "Avoid capability nouns and task language", "content": ["Avoid capability nouns that describe functions rather than behaviors", "Don't use functional or capability-based language instead of behavioral language", "Don't use capability nouns: Management, Processing, Administration", "Don't use task verbs: implement, create, build, set up", "Don't use task language", "", "Wrong Examples:", "- Order Management, Payment Processing (capability nouns)", "- Focus on tasks instead of behaviors", "- Order Management (capability), Implement order placement (task)", "", "Wrong Examples (actor in name):", "- Epic: 'Customer Places Order' (actor in name - WRONG)", "- Sub-Epic: 'OrderProcessor Validates Payment' (actor in name - WRONG)", "- Sub-Epic: 'Cart Adds Product' (actor in name - WRONG)", "- Story: 'InventoryManager Updates Stock' (actor in name - WRONG)", "", "Correct: Name is Verb-Noun only, actor documented separately"]}}]}, "scanner_results": {"violations": [{"rule": "use_active_behavioral_language", "rule_file": "use_active_behavioral_language.json", "violation_message": "Story name \"Groups Selected Tokens Into Mob Collection\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "use_active_behavioral_language", "rule_file": "use_active_behavioral_language.json", "violation_message": "Story name \"Displays Mob Formation Confirmation\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[0].story_groups[0].stories[2].name"}, {"rule": "use_active_behavioral_language", "rule_file": "use_active_behavioral_language.json", "violation_message": "Sub_epic name \"Add Minions To Existing Mob\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].name"}, {"rule": "use_active_behavioral_language", "rule_file": "use_active_behavioral_language.json", "violation_message": "Story name \"Selects Existing Mob And Additional Tokens\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].story_groups[0].stories[0].name"}, {"rule": "use_active_behavioral_language", "rule_file": "use_active_behavioral_language.json", "violation_message": "Story name \"Adds Selected Tokens To Mob Collection\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "use_active_behavioral_language", "rule_file": "use_active_behavioral_language.json", "violation_message": "Story name \"Removes Selected Tokens From Mob Collection\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[0].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "use_active_behavioral_language", "rule_file": "use_active_behavioral_language.json", "violation_message": "Sub_epic name \"Initiate Mob Action\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].name"}, {"rule": "use_active_behavioral_language", "rule_file": "use_active_behavioral_language.json", "violation_message": "Story name \"Identifies Mob Containing Clicked Token\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[0].story_groups[0].stories[1].name"}, {"rule": "use_active_behavioral_language", "rule_file": "use_active_behavioral_language.json", "violation_message": "Story name \"Evaluates Available Targets Using Strategy Criteria\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[1].story_groups[0].stories[1].name"}, {"rule": "use_active_behavioral_language", "rule_file": "use_active_behavioral_language.json", "violation_message": "Story name \"Executes Attack Action For All Minions In Mob\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[2].story_groups[0].stories[2].name"}, {"rule": "use_active_behavioral_language", "rule_file": "use_active_behavioral_language.json", "violation_message": "Story name \"Determines Movement Path For Out Of Range Minions\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[0].name"}, {"rule": "use_active_behavioral_language", "rule_file": "use_active_behavioral_language.json", "violation_message": "Story name \"Moves Minions To Target Area Using Foundry Movement\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[3].story_groups[0].stories[1].name"}, {"rule": "use_active_behavioral_language", "rule_file": "use_active_behavioral_language.json", "violation_message": "Sub_epic name \"Attack Fleeing Targets\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].name"}, {"rule": "use_active_behavioral_language", "rule_file": "use_active_behavioral_language.json", "violation_message": "Story name \"Identifies Fleeing Targets\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[0].name"}, {"rule": "use_active_behavioral_language", "rule_file": "use_active_behavioral_language.json", "violation_message": "Story name \"Executes Attack On Fleeing Targets\" uses capability noun - use active behavioral language (e.g., \"Processes Payments\" not \"Payment Processing\")", "severity": "error", "line_number": null, "location": "epics[2].sub_epics[4].story_groups[0].stories[1].name"}]}}, {"rule_file": "use_outcome_verbs_not_communication_verbs.json", "rule_content": {"description": "Use Outcome Verbs, Not Communication Verbs", "scanner": "agile_bot.bots.base_bot.src.scanners.communication_verb_scanner.CommunicationVerbScanner", "examples": [{"do": {"description": "Use verbs that describe artifacts/outcomes", "content": ["Use verbs that describe artifacts/outcomes", "Examples: Animation, Feedback, Indicators, Configuration", "Name concepts by what they ARE or CREATE", "Examples: Power Activation Animation, Combat Outcome Feedback", "Focus on tangible results", "Examples: Hit Indicators, Save Result Feedback"]}, "dont": {"description": "Don't use generic communication verbs", "content": ["Don't use generic communication verbs", "Examples: showing, displaying, visualizing, presenting", "Don't use vague enablement verbs", "Examples: providing, enabling, allowing", "Don't name concepts by their mechanism", "Wrong Examples: Visualizing Power Activation, Showing Combat Results"]}}]}, "scanner_results": {"violations": []}}], "content_to_validate": {"project_location": "C:\\dev\\augmented-teams\\demo\\mob_minion", "rendered_outputs": ["C:\\dev\\augmented-teams\\demo\\mob_minion\\docs\\stories\\story-graph.json"], "clarification_file": "C:\\dev\\augmented-teams\\demo\\mob_minion\\docs\\stories\\clarification.json", "planning_file": "C:\\dev\\augmented-teams\\demo\\mob_minion\\docs\\stories\\planning.json", "report_path": "C:\\dev\\augmented-teams\\demo\\mob_minion\\docs\\stories\\validation-report.md"}}}}, "27": {"action_state": "story_bot.1_shape.render_output", "status": "started", "timestamp": "2025-12-11T13:38:56.112949"}, "28": {"action_state": "story_bot.1_shape.render_output", "status": "completed", "timestamp": "2025-12-11T13:38:56.186883", "outputs": {"instructions": {"action": "render_output", "behavior": "1_shape", "base_instructions": ["\n**WORKSPACE PATH: C:\\dev\\augmented-teams\\demo\\mob_minion**\nAll render outputs must be written to paths relative to this workspace path, NOT to the bot's own directories.", "**MANDATORY: Before rendering any output, you MUST load and review the project's context files:**", "1. Load `{project_area}/docs/stories/clarification.json` - Contains key questions and evidence (generated file)", "2. Load `{project_area}/docs/stories/planning.json` - Contains assumptions and decisions (generated file)", "3. Load `{project_area}/docs/context/input.txt` (or similar) - Original input/source material (original context)", "", "**CRITICAL: File locations:**", "- **Generated files:** `{project_area}/docs/stories/clarification.json`, `{project_area}/docs/stories/planning.json`", "- **Original input:** `{project_area}/docs/context/input.txt` and other original context files", "", "These files contain critical requirements, decisions, and context that MUST be reflected in all rendered artifacts.", "", "**CRITICAL: Load planning.json and check for the current behavior's section (e.g., 'shape', 'discovery', 'exploration', 'specification'). Reference decisions_made and assumptions_made for the current behavior, as well as any previous behaviors that affect this work.**", "", "**MANDATORY STEPS - DO THESE IN ORDER:**", "", "**STEP 1: Execute Render Configurations**", "All render configurations are automatically loaded and injected below. Process ALL configs - do not skip any.", "", "**Render Configurations:**", "", "1. **render_domain_model_description** (behaviors\\1_shape\\2_content\\2_render\\render_domain_model_description.json)", "   - Instructions: Transform the domain_concepts from story-graph.json into a domain model description markdown document using the domain-model-description-template.md template file. Extract domain_concepts from all epics and sub_epics in story-graph.json. The description should use natural language that domain experts understand, explaining what each concept represents in the business domain, describing relationships and constraints between concepts, and using examples to illustrate domain concepts.", "   - Template: templates/domain-model-description-template.md", "   - Input: story-graph.json", "   - Output: {solution_name_slug}-domain-model-description.md", "   - Path: docs/stories", "", "2. **render_domain_model_diagram** (behaviors\\1_shape\\2_content\\2_render\\render_domain_model_diagram.json)", "   - Instructions: Transform the domain_concepts from story-graph.json into a domain model diagram markdown document using the domain-model-diagram-template.md template file. Extract domain_concepts from all epics and sub_epics in story-graph.json. Generate Mermaid diagrams from the extracted domain_concepts structure.", "   - Template: templates/domain-model-diagram-template.md", "   - Input: story-graph.json", "   - Output: {solution_name_slug}-domain-model-diagram.md", "   - Path: docs/stories", "", "3. **render_domain_model_scaffold** (behaviors\\1_shape\\2_content\\2_render\\render_domain_model_outline.json)", "   - Instructions: Generate source code scaffold files in the src directory based on the domain_concepts from story-graph.json. Extract domain_concepts from all epics and sub_epics in story-graph.json. Create actual source code files (Python .py files, TypeScript .ts files, or appropriate language files) for each bounded context and aggregate. Note: This is currently a placeholder - no builder or template is specified.", "   - Template: templates/domain_outline.md", "   - Input: story-graph.json", "   - Output: domain_outline.md", "   - Path: src", "", "4. **render_story_map** (behaviors\\1_shape\\2_content\\2_render\\render_story_map_md.json)", "   - Instructions: Render story-graph.json to story-map.txt format using the render_story_map_txt.py builder script. The builder reads story-graph.json and generates a formatted text file with epics, sub-epics, and stories.", "   - Template: templates/story-map.md", "   - Input: story-graph.json", "   - Output: story-map.txt", "   - Path: docs/stories", "", "5. **render_story_map_outline_drawio** (behaviors\\1_shape\\2_content\\2_render\\render_story_map_outline_drawio.json)", "   - Instructions: Render story-graph.json to DrawIO format using the story_io CLI. Execute: python -m agile_bot.bots.story_bot.src.synchronizers.story_io.story_io_cli render-outline --story-graph {project_path}/docs/stories/story-graph.json --drawio-file {project_path}/docs/stories/story-map-outline.drawio --output {project_path}/docs/stories/story-map-outline.drawio --force-outline", "   - Synchronizer: synchronizers.story_io.DrawIOSynchronizer", "   - Renderer Command: render-outline", "   - Input: story-graph.json", "   - Output: story-map-outline.drawio", "   - Path: docs/stories", "", "6. **render_story_map_txt** (behaviors\\1_shape\\2_content\\2_render\\render_story_map_txt.json)", "   - Instructions: Render story-graph.json to story-map.txt format using the story-map.txt template file. This is a direct template rendering (no builder script).", "   - Template: templates/story-map.txt", "   - Input: story-graph.json", "   - Output: story-map.txt", "   - Path: docs/stories", "", "", "For each render_config above:", "", "1. follow the instructions {render_config.instructions}:", "2. Determine execution method from config fields:", "   - If 'synchronizer' field exists \u2192 Execute {render_config.synchronizer}", "   - If 'template' field exists \u2192 Render {render_config.template} directly", "", "3. Determine input and output files from config fields:", "   - Input {render_config.input}`", "   - Output {render_config.output}`", "", "4. Verify output file was created at the expected path", "", "**CRITICAL RULES:**", "- Process ALL configs in the injected render_configs - do not skip any", "- Priority order: synchronizer > template", "- Verify each output file exists after execution", "- If execution fails, report the error and continue with other outputs", "**Render Instructions:**", "Hey, going to be going away for a little while to render the output. Go get a cup of coffee \ud83d\ude0a", "", "**RENDER STORY MAP AND DOMAIN MODEL - DRAWIO AND MARKDOWN GENERATION:**", "", "Render the story graph and domain model to visual diagrams and markdown documents.", "", "**Configuration Files:**", "- Story map markdown render: render_story_map_md.json", "- Story map DrawIO render: render_story_map_outline_drawio.json", "- Domain model description render: render_domain_model_description.json", "- Domain model diagram render: render_domain_model_diagram.json", "- Templates: templates/story-map-outline.drawio, templates/story-map.md, templates/domain-model-description-template.md, templates/domain-model-diagram-template.md", "", "**Process:**", "1. Read story-graph.json from docs/stories/", "2. Render story map to DrawIO diagram and markdown document", "3. Render domain model to description and diagram documents", "4. Generate all outputs in project area docs/stories/", "", "**Outputs:**", "- File: {project_area}/docs/stories/story-map-outline.drawio", "- File: {project_area}/docs/stories/story-map.md", "- File: {project_area}/docs/stories/{solution_name_slug}-domain-model-description.md", "- File: {project_area}/docs/stories/{solution_name_slug}-domain-model-diagram.md", "", "**Next Step:** Proceed to synchronize step after rendering is complete.", "", "**MANDATORY: PAUSE FOR HUMAN FEEDBACK**", "When this action is complete, AI MUST pause and wait for human feedback. When human says 'done' or confirms completion, you MUST proceed to the next step: **validate_rules** (call the validate_rules action tool).", "", "**NEXT BEHAVIOR REMINDER:**", "After completing this behavior, the next behavior in sequence is `2_prioritization`. When the user is ready to continue, remind them: 'The next behavior in sequence is `2_prioritization`. Would you like to continue with `2_prioritization` or work on a different behavior?'"], "render_instructions": {"behaviorName": "shape", "instructions": ["Hey, going to be going away for a little while to render the output. Go get a cup of coffee \ud83d\ude0a", "", "**RENDER STORY MAP AND DOMAIN MODEL - DRAWIO AND MARKDOWN GENERATION:**", "", "Render the story graph and domain model to visual diagrams and markdown documents.", "", "**Configuration Files:**", "- Story map markdown render: render_story_map_md.json", "- Story map DrawIO render: render_story_map_outline_drawio.json", "- Domain model description render: render_domain_model_description.json", "- Domain model diagram render: render_domain_model_diagram.json", "- Templates: templates/story-map-outline.drawio, templates/story-map.md, templates/domain-model-description-template.md, templates/domain-model-diagram-template.md", "", "**Process:**", "1. Read story-graph.json from docs/stories/", "2. Render story map to DrawIO diagram and markdown document", "3. Render domain model to description and diagram documents", "4. Generate all outputs in project area docs/stories/", "", "**Outputs:**", "- File: {project_area}/docs/stories/story-map-outline.drawio", "- File: {project_area}/docs/stories/story-map.md", "- File: {project_area}/docs/stories/{solution_name_slug}-domain-model-description.md", "- File: {project_area}/docs/stories/{solution_name_slug}-domain-model-diagram.md", "", "**Next Step:** Proceed to synchronize step after rendering is complete."]}, "render_configs": [{"file": "behaviors\\1_shape\\2_content\\2_render\\render_domain_model_description.json", "config": {"name": "render_domain_model_description", "type": "template", "path": "docs/stories", "input": "story-graph.json", "template": "templates/domain-model-description-template.md", "output": "{solution_name_slug}-domain-model-description.md", "instructions": "Transform the domain_concepts from story-graph.json into a domain model description markdown document using the domain-model-description-template.md template file. Extract domain_concepts from all epics and sub_epics in story-graph.json. The description should use natural language that domain experts understand, explaining what each concept represents in the business domain, describing relationships and constraints between concepts, and using examples to illustrate domain concepts."}, "template": "# Domain Model Description: {solution_name}\n\n**File Name**: `{solution_name_slug}-domain-model-description.md`\n**Location**: `{solution_folder}/{solution_name_slug}-domain-model-description.md`\n\n## Solution Purpose\n{solution_purpose}\n\n---\n\n## Domain Model Descriptions\n\n{domain_model_descriptions}\n\n---\n\n## Source Material\n\n{source_material}\n"}, {"file": "behaviors\\1_shape\\2_content\\2_render\\render_domain_model_diagram.json", "config": {"name": "render_domain_model_diagram", "type": "template", "path": "docs/stories", "input": "story-graph.json", "template": "templates/domain-model-diagram-template.md", "output": "{solution_name_slug}-domain-model-diagram.md", "instructions": "Transform the domain_concepts from story-graph.json into a domain model diagram markdown document using the domain-model-diagram-template.md template file. Extract domain_concepts from all epics and sub_epics in story-graph.json. Generate Mermaid diagrams from the extracted domain_concepts structure."}, "template": "# Domain Model Diagram: {solution_name}\n\n**File Name**: `{solution_name_slug}-domain-model-diagram.md`\n**Location**: `{solution_folder}/{solution_name_slug}-domain-model-diagram.md`\n\n## Solution Purpose\n{solution_purpose}\n\n---\n\n## Domain Model Diagram\n\n```mermaid\nclassDiagram\n    class {ConceptName} {\n        +{responsibility}()\n        +{responsibility}()\n        +{responsibility}()\n    }\n    \n    class {AnotherConcept} {\n        +{responsibility}()\n        +{responsibility}()\n    }\n    \n    %% Inheritance\n    {ChildConcept} --|> {ParentConcept}\n    \n    %% Associations\n    {ConceptName} --> {CollaboratorConcept} : {relationship_label}\n    {ConceptName} --> {AnotherConcept} : uses\n```\n\n**Example:**\n```mermaid\nclassDiagram\n    class Payment {\n        +Validates card number()\n        +Authorizes transaction()\n        +Processes payment()\n    }\n    \n    class Order {\n        +Creates order()\n        +Calculates total()\n        +Updates status()\n    }\n    \n    Order --> Payment : processes\n```\n\n**Diagram Notes:**\n- Domain concepts are shown as classes with their responsibilities\n- Responsibilities are listed as methods in the class (format: +{responsibility}())\n- Relationships show dependencies and associations between concepts\n- Inheritance relationships show specialization (--|>)\n- Associations show usage and collaboration (-->)\n\n---\n\n## Source Material\n\n{source_material}\n"}, {"file": "behaviors\\1_shape\\2_content\\2_render\\render_domain_model_outline.json", "config": {"name": "render_domain_model_scaffold", "type": "template", "path": "src", "input": "story-graph.json", "template": "templates/domain_outline.md", "output": "domain_outline.md", "instructions": "Generate source code scaffold files in the src directory based on the domain_concepts from story-graph.json. Extract domain_concepts from all epics and sub_epics in story-graph.json. Create actual source code files (Python .py files, TypeScript .ts files, or appropriate language files) for each bounded context and aggregate. Note: This is currently a placeholder - no builder or template is specified."}, "template": "{concept}\n    {responsibility}: {collaborator},{collaborator},...\n    {responsibility}: {collaborator},{collaborator},...\n    {responsibility}: {collaborator},{collaborator},...\n\n{concept}\nInstructions:\n- Use clear, concise domain concepts and responsibilities.\n- List each responsibility as: {responsibility}: {collaborator},{collaborator},...\n- Only include meaningful relationships; avoid unnecessary boilerplate or filler.\n- Ensure each domain concept is followed by its set of responsibilities.\n"}, {"file": "behaviors\\1_shape\\2_content\\2_render\\render_story_map_md.json", "config": {"name": "render_story_map", "type": "builder", "builder": "render_story_map_txt.py", "path": "docs/stories", "input": "story-graph.json", "template": "templates/story-map.md", "output": "story-map.txt", "instructions": "Render story-graph.json to story-map.txt format using the render_story_map_txt.py builder script. The builder reads story-graph.json and generates a formatted text file with epics, sub-epics, and stories."}, "template": "(E) Epic Name\n    (E) Sub-Epic Name\n        (E) Nested Sub-Epic Name (optional)\n            (S) Actor --> Story Name\n            (S) Actor --> Story Name\n            or (S) Actor --> Story Name\n                (AC) Actor --> Acceptance Criteria\n                (AC) Actor --> Acceptance Criteria\n            (S) Actor --> Story Name\n                (AC) Actor --> Acceptance Criteria\n                (AC) Actor --> Acceptance Criteria\n        (E) Another Nested Sub-Epic Name\n            (S) Actor --> Story Name\n            (S) Actor --> Story Name\n\n(E) {epic_name}\n    (E) {sub_epic_name}\n        (S) {actor} --> {story_name}\n        (S) {actor} --> {story_name}\n        or (S) {actor} --> {story_name}\n            (AC) {actor} --> {acceptance_criteria}\n            (AC) {actor} --> {acceptance_criteria}\n            (S) {actor} --> {story_name}\n                (AC) {actor} --> {acceptance_criteria}\n                (AC) {actor} --> {acceptance_criteria}\n        (S) {actor} --> {story_name}\n\n## Instructions\n\n- **Epics (E)**: Top-level features, no connectors\n- **Sub-Epics (E)**: Nested epics, no connectors\n- **Stories (S)**: User stories with actors, format: `Actor --> Story Name`\n- **Acceptance Criteria (AC)**: Nested under stories, format: `Actor --> Acceptance Criteria`\n- **Connectors**: \n  - \"and\" is the default - do NOT show in output (only stored in JSON)\n  - \"or\" shown explicitly for alternatives\n  - \"opt\" shown explicitly for optional items\n- **Indentation**: Use spaces (4 spaces per level), not tabs\n- **First item**: No connector (even if default \"and\")\n- **Nesting**: Stories can contain nested stories or acceptance criteria\n- **Language**: Use active behavioral language (verb-noun format)\n- **Epic/Sub-Epic names**: Verb-Noun format (actor NOT in name)\n- **Story/AC names**: Actor-Verb-Noun format (actor shown with \"-->\")\n"}, {"file": "behaviors\\1_shape\\2_content\\2_render\\render_story_map_outline_drawio.json", "config": {"name": "render_story_map_outline_drawio", "type": "synchronizer", "path": "docs/stories", "input": "story-graph.json", "synchronizer": "synchronizers.story_io.DrawIOSynchronizer", "renderer_command": "render-outline", "output": "story-map-outline.drawio", "drawio_file": "story-map-outline.drawio", "force_outline": true, "instructions": "Render story-graph.json to DrawIO format using the story_io CLI. Execute: python -m agile_bot.bots.story_bot.src.synchronizers.story_io.story_io_cli render-outline --story-graph {project_path}/docs/stories/story-graph.json --drawio-file {project_path}/docs/stories/story-map-outline.drawio --output {project_path}/docs/stories/story-map-outline.drawio --force-outline"}}, {"file": "behaviors\\1_shape\\2_content\\2_render\\render_story_map_txt.json", "config": {"name": "render_story_map_txt", "type": "template", "path": "docs/stories", "input": "story-graph.json", "template": "templates/story-map.txt", "output": "story-map.txt", "instructions": "Render story-graph.json to story-map.txt format using the story-map.txt template file. This is a direct template rendering (no builder script)."}, "template": "(E) \n    (E) Sub-Epic(s)\n        (E) Sub-Epic(s) - additional are optional\n            or - connector type\n                (S) Story and | or common across group \n                    (AC) AC or steps\n\n(E) {epic_name}\n    (E) {sub_epic_name} \n            (S) {actor} --> {story_name} \n            or (S) {actor} --> {story_name}   --> or group type\n            or (S) {actor} --> {story_name}\n        or  --> second group connector type\n            (S) {actor} --> {story_name}\n            (AC) {actor} --> {acceptance_criteria}   --> and group type\n            (AC) {actor} --> {acceptance_criteria}\n        and  --> third group connector type\n            (S) {actor} --> {story_name}\n            (AC) {actor} --> {acceptance_criteria}  --> and type\n            (AC) {actor} --> {acceptance_criteria}  --> and type\n        or \n            (S) {actor} --> {story_name}\n            (AC) {actor} /default group type is and\n            (AC) {actor}\n        \n       \n(E) {epic_name}\n    (E) {sub_epic_name}\n        (E) {nested_sub_epic_name}\n           ...\n\nInstructions:\n- Use (E) for Epics and Sub-Epics\n- Use (S) for Stories\n- Use (AC) for Acceptance Criteria\n- Story Groups are MANDATORY - all stories must be in a story group\n- Story group TYPE is determined by the connector on stories WITHIN the group (and | or | opt)\n- Story group CONNECTOR appears on a line by itself BETWEEN groups (and | or | opt)\n- Default group type is \"and\" (no connector on first story in group)\n- First story group in a sub-epic has NO connector line before it\n- Group connector line (e.g., \"or\", \"and\") separates story groups\n- Within a group, all stories share the same type (and, or, or opt)\n- Show actors with \"--> \" before story names (e.g., \"Human --> Story Name\")\n- Use hierarchical indentation (spaces, not tabs)\n- Acceptance criteria are nested under stories with same indentation pattern\n- Use active behavioral language (verb-noun format)\n- Epic/Sub-Epic names: Verb-Noun format (actor NOT in name)\n- Story names: Actor-Verb-Noun format (actor in story with \"-->\")\n- Epics and Sub-Epics do NOT have connectors (only story groups have connectors)\n\n"}], "workspace_path": "C:\\dev\\augmented-teams\\demo\\mob_minion"}}}, "29": {"action_state": "story_bot.1_shape.render_output", "status": "started", "timestamp": "2025-12-11T13:41:46.700853"}, "30": {"action_state": "story_bot.1_shape.render_output", "status": "completed", "timestamp": "2025-12-11T13:41:46.734419", "outputs": {"instructions": {"action": "render_output", "behavior": "1_shape", "base_instructions": ["\n**WORKSPACE PATH: C:\\dev\\augmented-teams\\demo\\mob_minion**\nAll render outputs must be written to paths relative to this workspace path, NOT to the bot's own directories.", "**MANDATORY: Before rendering any output, you MUST load and review the project's context files:**", "1. Load `{project_area}/docs/stories/clarification.json` - Contains key questions and evidence (generated file)", "2. Load `{project_area}/docs/stories/planning.json` - Contains assumptions and decisions (generated file)", "3. Load `{project_area}/docs/context/input.txt` (or similar) - Original input/source material (original context)", "", "**CRITICAL: File locations:**", "- **Generated files:** `{project_area}/docs/stories/clarification.json`, `{project_area}/docs/stories/planning.json`", "- **Original input:** `{project_area}/docs/context/input.txt` and other original context files", "", "These files contain critical requirements, decisions, and context that MUST be reflected in all rendered artifacts.", "", "**CRITICAL: Load planning.json and check for the current behavior's section (e.g., 'shape', 'discovery', 'exploration', 'specification'). Reference decisions_made and assumptions_made for the current behavior, as well as any previous behaviors that affect this work.**", "", "**MANDATORY STEPS - DO THESE IN ORDER:**", "", "**STEP 1: Execute Render Configurations**", "All render configurations are automatically loaded and injected below. Process ALL configs - do not skip any.", "", "**Render Configurations:**", "", "1. **render_domain_model_description** (behaviors\\1_shape\\2_content\\2_render\\render_domain_model_description.json)", "   - Instructions: Transform the domain_concepts from story-graph.json into a domain model description markdown document using the domain-model-description-template.md template file. Extract domain_concepts from all epics and sub_epics in story-graph.json. The description should use natural language that domain experts understand, explaining what each concept represents in the business domain, describing relationships and constraints between concepts, and using examples to illustrate domain concepts.", "   - Template: templates/domain-model-description-template.md", "   - Input: story-graph.json", "   - Output: {solution_name_slug}-domain-model-description.md", "   - Path: docs/stories", "", "2. **render_domain_model_diagram** (behaviors\\1_shape\\2_content\\2_render\\render_domain_model_diagram.json)", "   - Instructions: Transform the domain_concepts from story-graph.json into a domain model diagram markdown document using the domain-model-diagram-template.md template file. Extract domain_concepts from all epics and sub_epics in story-graph.json. Generate Mermaid diagrams from the extracted domain_concepts structure.", "   - Template: templates/domain-model-diagram-template.md", "   - Input: story-graph.json", "   - Output: {solution_name_slug}-domain-model-diagram.md", "   - Path: docs/stories", "", "3. **render_domain_model_scaffold** (behaviors\\1_shape\\2_content\\2_render\\render_domain_model_outline.json)", "   - Instructions: Generate source code scaffold files in the src directory based on the domain_concepts from story-graph.json. Extract domain_concepts from all epics and sub_epics in story-graph.json. Create actual source code files (Python .py files, TypeScript .ts files, or appropriate language files) for each bounded context and aggregate. Note: This is currently a placeholder - no builder or template is specified.", "   - Template: templates/domain_outline.md", "   - Input: story-graph.json", "   - Output: domain_outline.md", "   - Path: src", "", "4. **render_story_map** (behaviors\\1_shape\\2_content\\2_render\\render_story_map_md.json)", "   - Instructions: Render story-graph.json to story-map.txt format using the render_story_map_txt.py builder script. The builder reads story-graph.json and generates a formatted text file with epics, sub-epics, and stories.", "   - Template: templates/story-map.md", "   - Input: story-graph.json", "   - Output: story-map.txt", "   - Path: docs/stories", "", "5. **render_story_map_outline_drawio** (behaviors\\1_shape\\2_content\\2_render\\render_story_map_outline_drawio.json)", "   - Instructions: Render story-graph.json to DrawIO format using the story_io CLI. Execute: python -m agile_bot.bots.story_bot.src.synchronizers.story_io.story_io_cli render-outline --story-graph {project_path}/docs/stories/story-graph.json --drawio-file {project_path}/docs/stories/story-map-outline.drawio --output {project_path}/docs/stories/story-map-outline.drawio --force-outline", "   - Synchronizer: synchronizers.story_io.DrawIOSynchronizer", "   - Renderer Command: render-outline", "   - Input: story-graph.json", "   - Output: story-map-outline.drawio", "   - Path: docs/stories", "", "6. **render_story_map_txt** (behaviors\\1_shape\\2_content\\2_render\\render_story_map_txt.json)", "   - Instructions: Render story-graph.json to story-map.txt format using the story-map.txt template file. This is a direct template rendering (no builder script).", "   - Template: templates/story-map.txt", "   - Input: story-graph.json", "   - Output: story-map.txt", "   - Path: docs/stories", "", "", "For each render_config above:", "", "1. follow the instructions {render_config.instructions}:", "2. Determine execution method from config fields:", "   - If 'synchronizer' field exists \u2192 Execute {render_config.synchronizer}", "   - If 'template' field exists \u2192 Render {render_config.template} directly", "", "3. Determine input and output files from config fields:", "   - Input {render_config.input}`", "   - Output {render_config.output}`", "", "4. Verify output file was created at the expected path", "", "**CRITICAL RULES:**", "- Process ALL configs in the injected render_configs - do not skip any", "- Priority order: synchronizer > template", "- Verify each output file exists after execution", "- If execution fails, report the error and continue with other outputs", "**Render Instructions:**", "Hey, going to be going away for a little while to render the output. Go get a cup of coffee \ud83d\ude0a", "", "**RENDER STORY MAP AND DOMAIN MODEL - DRAWIO AND MARKDOWN GENERATION:**", "", "Render the story graph and domain model to visual diagrams and markdown documents.", "", "**Configuration Files:**", "- Story map markdown render: render_story_map_md.json", "- Story map DrawIO render: render_story_map_outline_drawio.json", "- Domain model description render: render_domain_model_description.json", "- Domain model diagram render: render_domain_model_diagram.json", "- Templates: templates/story-map-outline.drawio, templates/story-map.md, templates/domain-model-description-template.md, templates/domain-model-diagram-template.md", "", "**Process:**", "1. Read story-graph.json from docs/stories/", "2. Render story map to DrawIO diagram and markdown document", "3. Render domain model to description and diagram documents", "4. Generate all outputs in project area docs/stories/", "", "**Outputs:**", "- File: {project_area}/docs/stories/story-map-outline.drawio", "- File: {project_area}/docs/stories/story-map.md", "- File: {project_area}/docs/stories/{solution_name_slug}-domain-model-description.md", "- File: {project_area}/docs/stories/{solution_name_slug}-domain-model-diagram.md", "", "**Next Step:** Proceed to synchronize step after rendering is complete.", "", "**MANDATORY: PAUSE FOR HUMAN FEEDBACK**", "When this action is complete, AI MUST pause and wait for human feedback. When human says 'done' or confirms completion, you MUST proceed to the next step: **validate_rules** (call the validate_rules action tool).", "", "**NEXT BEHAVIOR REMINDER:**", "After completing this behavior, the next behavior in sequence is `2_prioritization`. When the user is ready to continue, remind them: 'The next behavior in sequence is `2_prioritization`. Would you like to continue with `2_prioritization` or work on a different behavior?'"], "render_instructions": {"behaviorName": "shape", "instructions": ["Hey, going to be going away for a little while to render the output. Go get a cup of coffee \ud83d\ude0a", "", "**RENDER STORY MAP AND DOMAIN MODEL - DRAWIO AND MARKDOWN GENERATION:**", "", "Render the story graph and domain model to visual diagrams and markdown documents.", "", "**Configuration Files:**", "- Story map markdown render: render_story_map_md.json", "- Story map DrawIO render: render_story_map_outline_drawio.json", "- Domain model description render: render_domain_model_description.json", "- Domain model diagram render: render_domain_model_diagram.json", "- Templates: templates/story-map-outline.drawio, templates/story-map.md, templates/domain-model-description-template.md, templates/domain-model-diagram-template.md", "", "**Process:**", "1. Read story-graph.json from docs/stories/", "2. Render story map to DrawIO diagram and markdown document", "3. Render domain model to description and diagram documents", "4. Generate all outputs in project area docs/stories/", "", "**Outputs:**", "- File: {project_area}/docs/stories/story-map-outline.drawio", "- File: {project_area}/docs/stories/story-map.md", "- File: {project_area}/docs/stories/{solution_name_slug}-domain-model-description.md", "- File: {project_area}/docs/stories/{solution_name_slug}-domain-model-diagram.md", "", "**Next Step:** Proceed to synchronize step after rendering is complete."]}, "render_configs": [{"file": "behaviors\\1_shape\\2_content\\2_render\\render_domain_model_description.json", "config": {"name": "render_domain_model_description", "type": "template", "path": "docs/stories", "input": "story-graph.json", "template": "templates/domain-model-description-template.md", "output": "{solution_name_slug}-domain-model-description.md", "instructions": "Transform the domain_concepts from story-graph.json into a domain model description markdown document using the domain-model-description-template.md template file. Extract domain_concepts from all epics and sub_epics in story-graph.json. The description should use natural language that domain experts understand, explaining what each concept represents in the business domain, describing relationships and constraints between concepts, and using examples to illustrate domain concepts."}, "template": "# Domain Model Description: {solution_name}\n\n**File Name**: `{solution_name_slug}-domain-model-description.md`\n**Location**: `{solution_folder}/{solution_name_slug}-domain-model-description.md`\n\n## Solution Purpose\n{solution_purpose}\n\n---\n\n## Domain Model Descriptions\n\n{domain_model_descriptions}\n\n---\n\n## Source Material\n\n{source_material}\n"}, {"file": "behaviors\\1_shape\\2_content\\2_render\\render_domain_model_diagram.json", "config": {"name": "render_domain_model_diagram", "type": "template", "path": "docs/stories", "input": "story-graph.json", "template": "templates/domain-model-diagram-template.md", "output": "{solution_name_slug}-domain-model-diagram.md", "instructions": "Transform the domain_concepts from story-graph.json into a domain model diagram markdown document using the domain-model-diagram-template.md template file. Extract domain_concepts from all epics and sub_epics in story-graph.json. Generate Mermaid diagrams from the extracted domain_concepts structure."}, "template": "# Domain Model Diagram: {solution_name}\n\n**File Name**: `{solution_name_slug}-domain-model-diagram.md`\n**Location**: `{solution_folder}/{solution_name_slug}-domain-model-diagram.md`\n\n## Solution Purpose\n{solution_purpose}\n\n---\n\n## Domain Model Diagram\n\n```mermaid\nclassDiagram\n    class {ConceptName} {\n        +{responsibility}()\n        +{responsibility}()\n        +{responsibility}()\n    }\n    \n    class {AnotherConcept} {\n        +{responsibility}()\n        +{responsibility}()\n    }\n    \n    %% Inheritance\n    {ChildConcept} --|> {ParentConcept}\n    \n    %% Associations\n    {ConceptName} --> {CollaboratorConcept} : {relationship_label}\n    {ConceptName} --> {AnotherConcept} : uses\n```\n\n**Example:**\n```mermaid\nclassDiagram\n    class Payment {\n        +Validates card number()\n        +Authorizes transaction()\n        +Processes payment()\n    }\n    \n    class Order {\n        +Creates order()\n        +Calculates total()\n        +Updates status()\n    }\n    \n    Order --> Payment : processes\n```\n\n**Diagram Notes:**\n- Domain concepts are shown as classes with their responsibilities\n- Responsibilities are listed as methods in the class (format: +{responsibility}())\n- Relationships show dependencies and associations between concepts\n- Inheritance relationships show specialization (--|>)\n- Associations show usage and collaboration (-->)\n\n---\n\n## Source Material\n\n{source_material}\n"}, {"file": "behaviors\\1_shape\\2_content\\2_render\\render_domain_model_outline.json", "config": {"name": "render_domain_model_scaffold", "type": "template", "path": "src", "input": "story-graph.json", "template": "templates/domain_outline.md", "output": "domain_outline.md", "instructions": "Generate source code scaffold files in the src directory based on the domain_concepts from story-graph.json. Extract domain_concepts from all epics and sub_epics in story-graph.json. Create actual source code files (Python .py files, TypeScript .ts files, or appropriate language files) for each bounded context and aggregate. Note: This is currently a placeholder - no builder or template is specified."}, "template": "{concept}\n    {responsibility}: {collaborator},{collaborator},...\n    {responsibility}: {collaborator},{collaborator},...\n    {responsibility}: {collaborator},{collaborator},...\n\n{concept}\nInstructions:\n- Use clear, concise domain concepts and responsibilities.\n- List each responsibility as: {responsibility}: {collaborator},{collaborator},...\n- Only include meaningful relationships; avoid unnecessary boilerplate or filler.\n- Ensure each domain concept is followed by its set of responsibilities.\n"}, {"file": "behaviors\\1_shape\\2_content\\2_render\\render_story_map_md.json", "config": {"name": "render_story_map", "type": "builder", "builder": "render_story_map_txt.py", "path": "docs/stories", "input": "story-graph.json", "template": "templates/story-map.md", "output": "story-map.txt", "instructions": "Render story-graph.json to story-map.txt format using the render_story_map_txt.py builder script. The builder reads story-graph.json and generates a formatted text file with epics, sub-epics, and stories."}, "template": "(E) Epic Name\n    (E) Sub-Epic Name\n        (E) Nested Sub-Epic Name (optional)\n            (S) Actor --> Story Name\n            (S) Actor --> Story Name\n            or (S) Actor --> Story Name\n                (AC) Actor --> Acceptance Criteria\n                (AC) Actor --> Acceptance Criteria\n            (S) Actor --> Story Name\n                (AC) Actor --> Acceptance Criteria\n                (AC) Actor --> Acceptance Criteria\n        (E) Another Nested Sub-Epic Name\n            (S) Actor --> Story Name\n            (S) Actor --> Story Name\n\n(E) {epic_name}\n    (E) {sub_epic_name}\n        (S) {actor} --> {story_name}\n        (S) {actor} --> {story_name}\n        or (S) {actor} --> {story_name}\n            (AC) {actor} --> {acceptance_criteria}\n            (AC) {actor} --> {acceptance_criteria}\n            (S) {actor} --> {story_name}\n                (AC) {actor} --> {acceptance_criteria}\n                (AC) {actor} --> {acceptance_criteria}\n        (S) {actor} --> {story_name}\n\n## Instructions\n\n- **Epics (E)**: Top-level features, no connectors\n- **Sub-Epics (E)**: Nested epics, no connectors\n- **Stories (S)**: User stories with actors, format: `Actor --> Story Name`\n- **Acceptance Criteria (AC)**: Nested under stories, format: `Actor --> Acceptance Criteria`\n- **Connectors**: \n  - \"and\" is the default - do NOT show in output (only stored in JSON)\n  - \"or\" shown explicitly for alternatives\n  - \"opt\" shown explicitly for optional items\n- **Indentation**: Use spaces (4 spaces per level), not tabs\n- **First item**: No connector (even if default \"and\")\n- **Nesting**: Stories can contain nested stories or acceptance criteria\n- **Language**: Use active behavioral language (verb-noun format)\n- **Epic/Sub-Epic names**: Verb-Noun format (actor NOT in name)\n- **Story/AC names**: Actor-Verb-Noun format (actor shown with \"-->\")\n"}, {"file": "behaviors\\1_shape\\2_content\\2_render\\render_story_map_outline_drawio.json", "config": {"name": "render_story_map_outline_drawio", "type": "synchronizer", "path": "docs/stories", "input": "story-graph.json", "synchronizer": "synchronizers.story_io.DrawIOSynchronizer", "renderer_command": "render-outline", "output": "story-map-outline.drawio", "drawio_file": "story-map-outline.drawio", "force_outline": true, "instructions": "Render story-graph.json to DrawIO format using the story_io CLI. Execute: python -m agile_bot.bots.story_bot.src.synchronizers.story_io.story_io_cli render-outline --story-graph {project_path}/docs/stories/story-graph.json --drawio-file {project_path}/docs/stories/story-map-outline.drawio --output {project_path}/docs/stories/story-map-outline.drawio --force-outline"}}, {"file": "behaviors\\1_shape\\2_content\\2_render\\render_story_map_txt.json", "config": {"name": "render_story_map_txt", "type": "template", "path": "docs/stories", "input": "story-graph.json", "template": "templates/story-map.txt", "output": "story-map.txt", "instructions": "Render story-graph.json to story-map.txt format using the story-map.txt template file. This is a direct template rendering (no builder script)."}, "template": "(E) \n    (E) Sub-Epic(s)\n        (E) Sub-Epic(s) - additional are optional\n            or - connector type\n                (S) Story and | or common across group \n                    (AC) AC or steps\n\n(E) {epic_name}\n    (E) {sub_epic_name} \n            (S) {actor} --> {story_name} \n            or (S) {actor} --> {story_name}   --> or group type\n            or (S) {actor} --> {story_name}\n        or  --> second group connector type\n            (S) {actor} --> {story_name}\n            (AC) {actor} --> {acceptance_criteria}   --> and group type\n            (AC) {actor} --> {acceptance_criteria}\n        and  --> third group connector type\n            (S) {actor} --> {story_name}\n            (AC) {actor} --> {acceptance_criteria}  --> and type\n            (AC) {actor} --> {acceptance_criteria}  --> and type\n        or \n            (S) {actor} --> {story_name}\n            (AC) {actor} /default group type is and\n            (AC) {actor}\n        \n       \n(E) {epic_name}\n    (E) {sub_epic_name}\n        (E) {nested_sub_epic_name}\n           ...\n\nInstructions:\n- Use (E) for Epics and Sub-Epics\n- Use (S) for Stories\n- Use (AC) for Acceptance Criteria\n- Story Groups are MANDATORY - all stories must be in a story group\n- Story group TYPE is determined by the connector on stories WITHIN the group (and | or | opt)\n- Story group CONNECTOR appears on a line by itself BETWEEN groups (and | or | opt)\n- Default group type is \"and\" (no connector on first story in group)\n- First story group in a sub-epic has NO connector line before it\n- Group connector line (e.g., \"or\", \"and\") separates story groups\n- Within a group, all stories share the same type (and, or, or opt)\n- Show actors with \"--> \" before story names (e.g., \"Human --> Story Name\")\n- Use hierarchical indentation (spaces, not tabs)\n- Acceptance criteria are nested under stories with same indentation pattern\n- Use active behavioral language (verb-noun format)\n- Epic/Sub-Epic names: Verb-Noun format (actor NOT in name)\n- Story names: Actor-Verb-Noun format (actor in story with \"-->\")\n- Epics and Sub-Epics do NOT have connectors (only story groups have connectors)\n\n"}], "workspace_path": "C:\\dev\\augmented-teams\\demo\\mob_minion"}}}}}