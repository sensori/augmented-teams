{
  "behaviorName": "code",
  "description": "Generate production source code from domain model and story specifications",
  "goal": "Create clean, maintainable production code that implements story behavior",
  "inputs": "Domain model, story specifications, and test files",
  "outputs": "Source code files (.py, .js, etc.) with production implementation",
  "baseActionsPath": "agile_bot/bots/base_bot/base_actions",
  "instructions": [
    "**BEHAVIOR WORKFLOW INSTRUCTIONS:**",
    "Perform each instruction action as specified in base_actions, tweaked for the code behavior.",
    "",
    "**CRITICAL RULE - CODE MUST FOLLOW CLEAN CODE PRINCIPLES:**",
    "",
    "See agile_bot/bots/story_bot/behaviors/8_code/3_rules/ for complete rules with examples.",
    "",
    "**Summary of key code quality principles:**",
    "",
    "1. **Single Responsibility Principle**",
    "   - Each class/function should have one reason to change",
    "   - Keep classes small and focused",
    "   - Extract multi-responsibility code",
    "",
    "2. **DRY (Don't Repeat Yourself)**",
    "   - Eliminate duplication through abstraction",
    "   - Extract repeated logic into reusable functions",
    "   - Centralize common patterns",
    "",
    "3. **Encapsulation**",
    "   - Hide implementation details",
    "   - Expose minimal public interface",
    "   - Follow Law of Demeter",
    "",
    "4. **Clean Code Practices**",
    "   - Use intention-revealing names",
    "   - Keep functions small and focused",
    "   - Prefer code over comments",
    "   - Handle errors properly",
    "   - Isolate third-party code",
    "",
    "5. **Code Organization**",
    "   - Source file name = Sub-epic name (snake_case)",
    "   - Format: <sub_epic_name>.py",
    "   - Example: 'Create Mob' -> create_mob.py",
    "   - Classes and functions organized by story and scenario",
    "",
    "**Action Sequence:**",
    "**NOTE: Action order and action-specific instructions are determined by the actions_workflow section below. Always check that section for the correct sequence and instructions.**",
    "",
    "**Workflow Control:**",
    "- **STOP for human feedback** when told to stop or when action requires user input",
    "- **CONTINUE to next action** when told to proceed",
    "- **STOP when complete** when all actions are finished"
  ],
  "actions_workflow": {
    "actions": [
      {
        "name": "decide_planning_criteria",
        "order": 1,
        "next_action": "render_output",
        "instructions": [
          "Follow agile_bot/bots/base_bot/base_actions/5_render_output/instructions.json, specifcally to render code required to implemnt all tests that have beeen recently built or updated"
        ]
      },
      {
        "name": "render_output",
        "order": 2,
        "next_action": "validate_rules",
        "instructions": [
          "Follow agile_bot/bots/base_bot/base_actions/3_build_knowledge/instructions.json, code: build clean code"
        ]
      },
      {
        "name": "validate_rules",
        "order": 3,
        "action_class": "agile_bot.bots.story_bot.src.bot.validate_code_files_action.ValidateCodeFilesAction",
        "instructions": [
          "Follow agile_bot/bots/base_bot/base_actions/4_validate_rules/instructions.json, code: validate source code quality AND domain model refinements",
          "Validate that all source files, classes, and functions are properly mapped to story-graph.json",
          "MANDATORY: Discover and pass code_files parameter - CodeScanner requires explicit file paths to scan for violations"
        ]
      }
    ]
  },
  "trigger_words": {
    "description": "Behavior-level trigger words - specific to production code generation behavior",
    "patterns": [
      "generate.*source.*code",
      "create.*production.*code",
      "write.*source.*files",
      "implement.*production.*code",
      "generate.*implementation",
      "create.*source.*files",
      "write.*production.*code",
      "implement.*source.*code",
      "generate.*code",
      "create.*code",
      "write.*code",
      "implement.*code",
      "production.*code",
      "source.*code.*generation"
    ],
    "priority": 5
  }
}


