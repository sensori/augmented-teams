{
  "behaviorName": "specification_tests",
  "order": 6,
  "description": "Write test files (.py, .js, etc.) with executable test code from scenarios/examples that validate story behavior",
  "goal": "Write automated test files that validate story behavior",
  "inputs": "Scenarios from specification_scenarios or examples from specification_examples",
  "outputs": "Test files (.py, .js, etc.) with executable test code",
  "baseActionsPath": "agile_bot/bots/base_bot/base_actions",
  "instructions": [
    "**BEHAVIOR PURPOSE:**",
    "This behavior WRITES TEST FILES. The primary output is executable test code files that validate story behavior.",
    "Write test files (.py, .js, etc.) with executable test code from scenarios/examples that validate story behavior",
    "The secondary output is to make sure that the story_graph.json scenarios, stories, and sub-epics have test fields added for the test methods, test classes, and test files respectively.",
    "After creating test files, classes, and methods, you MUST map them to the story-graph.json:",
    ],
  "actions_workflow": {
    "actions": [
      {
        "name": "build_knowledge",
        "order": 3,
        "next_action": "render_output",
        "instructions": [
          "specification_tests: add test_file, test_class, and test_method fields to story-graph.json based on the test file updates / creations you are going to make",
          "",
          "1. **test_file field** - Add to sub-epic level:",
          "   - Format: \"test_file\": \"test_<sub_epic_name>.py\"",
          "   - Example: \"test_file\": \"test_generate_bot_server_and_tools.py\"",
          "   - Maps to the sub-epic that contains the stories being tested",
          "",
          "2. **test_class field** - Add to story level (when applicable):",
          "   - Format: \"test_class\": \"Test<ExactStoryName>\"",
          "   - Example: \"test_class\": \"TestGenerateBotTools\"",
          "   - Only add if the test file contains a test class (not standalone functions)",
          "   - Maps to the exact story name that the test class validates",
          "",
          "3. **test_method field** - Add to scenario level:",
          "   - Format: \"test_method\": \"test_<scenario_name_snake_case>\"",
          "   - Example: \"test_method\": \"test_generator_creates_bot_tool_for_test_bot\"",
          "   - Maps to the exact scenario name that the test method validates",
          "Refine domain model concepts, relationships, and responsibilities based on test file implementation patterns and requirements"
        ]
      },
      {
        "name": "render_output",
        "order": 4,
        "next_action": "validate_rules",
        "instructions": [
          "specification_tests: write test files (.py, .js, etc.) with executable test code based on the entries you have made within the @story-graph.json file",
          "After writing test files, update story-graph.json with further test_file, test_class, and test_method mapping changes you have made"
        ]
      },
      {
        "name": "validate_rules",
        "order": 5,
        "action_class": "agile_bot.bots.story_bot.src.bot.validate_code_files_action.ValidateCodeFilesAction",
        "instructions": [
          "specification_tests: validate test code AND domain model refinements",
          "Validate that all test files, classes, and methods are properly mapped to story-graph.json"
        ]
      }
    ]
  },
  "trigger_words": {
    "description": "Behavior-level trigger words - specific to writing test files behavior",
    "patterns": [
      "write.*test.*files",
      "write.*test.*code",
      "write.*pytest.*tests",
      "write.*test.*cases",
      "generate.*test.*code",
      "create.*test.*file",
      "implement.*step.*definitions",
      "generate.*acceptance.*tests",
      "create.*bdd.*tests",
      "generate.*test.*implementation",
      "create.*test.*cases",
      "implement.*feature.*tests",
      "specification.*tests",
      "test.*code.*generation",
      "bdd.*test.*code",
      "write.*tests"
    ]
  }
}


