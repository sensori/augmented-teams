
================================================================================
THEN: Assert JSON integrity and layout preservation
================================================================================

Checking for actual files (generated by 2_when)...
   [OK] All actual files found

1. Asserting JSON integrity (sync didn't lose data)...
   Original: C:\dev\augmented-teams\agile_bot\bots\story_bot\utils\story_io\acceptance\scenarios\sync_render_with_layout\1_given\story-graph.json
   Synced:   C:\dev\augmented-teams\agile_bot\bots\story_bot\utils\story_io\acceptance\scenarios\sync_render_with_layout\2_when\synced-story-graph.json
   [OK] Original JSON matches synced JSON (no data lost)!

2. Asserting layout preservation (re-render with extracted layout matches original)...
   First render (no layout):  C:\dev\augmented-teams\agile_bot\bots\story_bot\utils\story_io\acceptance\scenarios\sync_render_with_layout\3_then\actual-first-render.drawio
   Second render (with layout): C:\dev\augmented-teams\agile_bot\bots\story_bot\utils\story_io\acceptance\scenarios\sync_render_with_layout\3_then\actual-second-render.drawio
   [FAIL] Layout not preserved! Second render differs from first render: 276 differences found
   [INFO] Differences: 276 differences found
   [INFO] First few differences:
      - Cell count mismatch: 303 vs 28
      - Cell 10 missing in second DrawIO
      - Cell 11 missing in second DrawIO
      - Cell 12 missing in second DrawIO
      - Cell 13 missing in second DrawIO
      - Cell 14 missing in second DrawIO
      - Cell 15 missing in second DrawIO
      - Cell 2 missing in second DrawIO
      - Cell 3 missing in second DrawIO
      - Cell 4 missing in second DrawIO

================================================================================
[FAIL] Some assertions failed!
================================================================================
