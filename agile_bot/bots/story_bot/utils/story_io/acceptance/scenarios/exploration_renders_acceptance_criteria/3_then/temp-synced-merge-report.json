{
  "timestamp": "2025-11-29T13:22:51.892295",
  "extracted_file": "C:\\dev\\augmented-teams\\agile_bot\\bots\\story_bot\\src\\story_io\\spec_by_example\\exploration_renders_acceptance_criteria\\3_then\\temp-synced.json",
  "original_file": "C:\\dev\\augmented-teams\\agile_bot\\bots\\story_bot\\src\\story_io\\spec_by_example\\exploration_renders_acceptance_criteria\\1_given\\story-graph-with-acceptance-criteria.json",
  "summary": {
    "total_extracted_stories": 3,
    "total_original_stories": 3,
    "exact_matches": 3,
    "fuzzy_matches": 0,
    "new_stories": 0,
    "removed_stories": 0
  },
  "exact_matches": [
    {
      "extracted": {
        "name": "Handle Render Outline",
        "users": [
          "Story IO MCP Server"
        ],
        "sequential_order": 1,
        "epic_name": "Render Diagram",
        "feature_name": "Render Story IO Diagram",
        "story_type": "technical"
      },
      "original": {
        "name": "Handle Render Outline",
        "users": [
          "Story IO MCP Server"
        ],
        "Steps": [
          "When MCP tool receives render_outline request with story_graph_path, drawio_path, output_path, and layout_json parameters",
          "Then tool validates that story_graph_path is provided",
          "When story_graph_path is None",
          "Then tool raises ValueError('story_graph_path is required')",
          "When story_graph_path is provided",
          "Then tool calls StoryIODiagram.load_from_story_graph(Path(story_graph_path), Path(drawio_path) if drawio_path else None)",
          "When layout_json parameter is provided",
          "Then tool parses layout_json string using json.loads() to create layout_data dict",
          "When layout_json is None",
          "Then tool sets layout_data to None",
          "When diagram.render_outline(output_path=Path(output_path), layout_data=layout_data) is called",
          "Then renderer generates DrawIO XML and saves to output_path",
          "When render completes successfully",
          "Then tool returns JSON string with success=True, output_path, and summary containing epics count",
          "When render raises exception",
          "Then tool catches exception and returns JSON string with success=False and error message"
        ],
        "epic_name": "Render Diagram",
        "feature_name": "Render Story IO Diagram"
      },
      "match_type": "exact",
      "confidence": 1.0
    },
    {
      "extracted": {
        "name": "Invoke Render Outline from CLI",
        "users": [
          "Story IO CLI"
        ],
        "sequential_order": 2,
        "epic_name": "Render Diagram",
        "feature_name": "Render Story IO Diagram",
        "story_type": "technical"
      },
      "original": {
        "name": "Invoke Render Outline from CLI",
        "users": [
          "Story IO CLI"
        ],
        "Steps": [
          "When argparse parses 'render-outline' command with --story-graph and --output arguments",
          "Then argparse creates args object with story_graph Path and output Path attributes",
          "When render_outline_command function receives args object",
          "Then function calls StoryIODiagram.load_from_story_graph(args.story_graph, args.drawio_file)",
          "When layout file is not provided in args",
          "Then function auto-detects layout by checking output_path.stem-layout.json, story-graph-drawio-extracted-layout.json, and output_path.stem-drawio-extracted-layout.json patterns",
          "When layout file exists",
          "Then function loads layout_data from JSON file",
          "When diagram.render_outline(output_path, layout_data) is called",
          "Then renderer generates DrawIO XML and saves to output_path",
          "When render completes",
          "Then function prints 'Generated DrawIO diagram: {output_path}' and 'Epics: {count}' to stdout",
          "When render succeeds",
          "Then function returns exit code 0"
        ],
        "epic_name": "Render Diagram",
        "feature_name": "Render Story IO Diagram"
      },
      "match_type": "exact",
      "confidence": 1.0
    },
    {
      "extracted": {
        "name": "Handle Synchronize Outline",
        "users": [
          "Story IO MCP Server"
        ],
        "sequential_order": 3,
        "epic_name": "Synchronize Graph",
        "feature_name": "Synchronize Story Graph",
        "story_type": "technical"
      },
      "original": {
        "name": "Handle Synchronize Outline",
        "users": [
          "Story IO MCP Server"
        ],
        "Steps": [
          "When MCP tool receives synchronize_outline request with drawio_path, original_path, and output_path parameters",
          "Then tool creates StoryIODiagram instance with drawio_file=Path(drawio_path)",
          "When original_path parameter is provided",
          "Then tool sets original to Path(original_path)",
          "When original_path is None",
          "Then tool sets original to None",
          "When diagram.synchronize_outline(drawio_path=Path(drawio_path), original_path=original) is called",
          "Then synchronizer extracts story graph from DrawIO XML and compares with original if provided",
          "When output_path parameter is provided",
          "Then tool calls diagram.save_story_graph(Path(output_path)) to save synchronized graph",
          "When synchronize completes successfully",
          "Then tool returns JSON string with success=True, epics_count from result, and output_path",
          "When synchronize raises exception",
          "Then tool catches exception and returns JSON string with success=False and error message"
        ],
        "epic_name": "Synchronize Graph",
        "feature_name": "Synchronize Story Graph"
      },
      "match_type": "exact",
      "confidence": 1.0
    }
  ],
  "fuzzy_matches": [],
  "new_stories": [],
  "removed_stories": [],
  "large_deletions": {
    "missing_epics": [],
    "missing_features": [],
    "epics_with_many_missing_stories": [],
    "features_with_many_missing_stories": []
  }
}