{
  "behaviorName": "story_bot_entry",
  "baseActionsPath": "agile_bot/bots/base_bot/base_actions",
  "instructions": [
    "**STORY BOT ENTRY POINT - PROJECT STATUS ASSESSMENT:**",
    "",
    "This instruction file determines the current project status and suggests which behavior stage to start.",
    "",
    "**STEP 1: ASSESS PROJECT STATUS**",
    "",
    "Check for the following artifacts in the project area ({{project_area}}) to determine current stage:",
    "",
    "**1. Shape Stage (1_shape) - Story Map Creation:**",
    "   - Check for: docs/stories/map/*-story-map.md",
    "   - Check for: docs/stories/map/*-story-map-outline.drawio",
    "   - Check for: story-graph.json files",
    "   - If NONE exist → Start at 1_shape",
    "",
    "**2. Prioritization Stage (2_prioritization) - Increment Backlog:**",
    "   - Check for: docs/stories/increments/*-story-map-increments.md",
    "   - Check for: docs/stories/map/*-story-map-increments.drawio",
    "   - If story map exists but increments don't → Start at 2_prioritization",
    "",
    "**3. Arrange Stage (3_arrange) - Organize Artifacts:**",
    "   - Check for: Organized folder structure in docs/stories/map/",
    "   - Check for: Epic/Feature folders with story files",
    "   - If increments exist but no organized structure → Start at 3_arrange",
    "",
    "**4. Discovery Stage (4_discovery) - Story Refinement:**",
    "   - Check for: Refined story documents in docs/stories/map/*/",
    "   - Check for: Story documents with detailed descriptions",
    "   - If organized structure exists but stories not refined → Start at 4_discovery",
    "",
    "**5. Exploration Stage (5_exploration) - Acceptance Criteria:**",
    "   - Check for: Story documents with acceptance criteria sections",
    "   - Check for: Feature documents with AC",
    "   - If stories refined but no AC → Start at 5_exploration",
    "",
    "**6. Specification Examples Stage (6_specification_examples) - Feature Files:**",
    "   - Check for: .feature files (Gherkin format)",
    "   - Check for: docs/stories/features/ or similar",
    "   - If AC exists but no feature files → Start at 6_specification_examples",
    "",
    "**7. Specification Scenarios Stage (7_specification_scenarios) - Scenarios:**",
    "   - Check for: Story documents with scenario sections",
    "   - Check for: Detailed scenario descriptions",
    "   - If feature files exist but scenarios incomplete → Start at 7_specification_scenarios",
    "",
    "**8. Specification Tests Stage (8_specification_tests) - Test Implementation:**",
    "   - Check for: Test implementation files",
    "   - Check for: Test code matching scenarios",
    "   - If scenarios exist but tests not implemented → Start at 8_specification_tests",
    "",
    "**STEP 2: SUGGEST STARTING STAGE**",
    "",
    "Based on the assessment above, determine the earliest missing stage and suggest it:",
    "",
    "1. **If no story map exists** → Suggest: \"Start with 1_shape (Story Map Creation)\"",
    "2. **If story map exists but no increments** → Suggest: \"Start with 2_prioritization (Increment Backlog)\"",
    "3. **If increments exist but no organization** → Suggest: \"Start with 3_arrange (Organize Artifacts)\"",
    "4. **If organized but stories not refined** → Suggest: \"Start with 4_discovery (Story Refinement)\"",
    "5. **If refined but no acceptance criteria** → Suggest: \"Start with 5_exploration (Acceptance Criteria)\"",
    "6. **If AC exists but no feature files** → Suggest: \"Start with 6_specification_examples (Feature Files)\"",
    "7. **If feature files exist but scenarios incomplete** → Suggest: \"Start with 7_specification_scenarios (Scenarios)\"",
    "8. **If scenarios exist but tests not implemented** → Suggest: \"Start with 8_specification_tests (Test Implementation)\"",
    "9. **If all stages complete** → Suggest: \"All stages appear complete. Which stage would you like to review or continue?\"",
    "",
    "**STEP 3: PRESENT FINDINGS AND WAIT FOR CONFIRMATION**",
    "",
    "Present the assessment results to the user:",
    "- List what artifacts were found",
    "- Suggest the recommended starting stage",
    "- Ask: \"Should I proceed with [suggested_stage]?\" or \"Which stage would you like to start with?\"",
    "",
    "**STOP and WAIT for user confirmation before proceeding.**",
    "",
    "**STEP 4: EXECUTE CONFIRMED BEHAVIOR**",
    "",
    "Once user confirms the stage, follow the instructions in the corresponding behavior:",
    "",
    "- **1_shape** → Follow: agile_bot/bots/story_bot/behaviors/1_shape/instructions.json",
    "- **2_prioritization** → Follow: agile_bot/bots/story_bot/behaviors/2_prioritization/instructions.json",
    "- **3_arrange** → Follow: agile_bot/bots/story_bot/behaviors/3_arrange/instructions.json",
    "- **4_discovery** → Follow: agile_bot/bots/story_bot/behaviors/4_discovery/instructions.json",
    "- **5_exploration** → Follow: agile_bot/bots/story_bot/behaviors/5_exploration/instructions.json",
    "- **6_specification_examples** → Follow: agile_bot/bots/story_bot/behaviors/6_specification_examples/instructions.json",
    "- **7_specification_scenarios** → Follow: agile_bot/bots/story_bot/behaviors/7_specification_scenarios/instructions.json",
    "- **8_specification_tests** → Follow: agile_bot/bots/story_bot/behaviors/8_specification_tests/instructions.json",
    "",
    "**Each behavior will then follow its own workflow using base_actions as specified in its instructions.json.**",
    "",
    "**IMPORTANT NOTES:**",
    "- Always check the project area ({{project_area}}) for artifacts",
    "- If project_area is not set, follow agile_bot/bots/base_bot/base_actions/1_initialize_project/instructions.json first",
    "- The assessment is a suggestion - user can override and choose any stage",
    "- Some stages may be skipped if user has already completed them manually"
  ]
}

