{
  "concepts": [
    {
      "name": "Agile Bot",
      "responsibilities": [
        {
          "name": "Loads Workflow",
          "collaborators": ["Workflow", "Bot Config"]
        },
        {
          "name": "Loads Project",
          "collaborators": ["Project", "Workflow"]
        },
        {
          "name": "Loads Behaviors",
          "collaborators": ["Behaviors", "Bot Config"]
        },
        {
          "name": "Generates MCP Server",
          "collaborators": ["MCP Bot Server Generator"]
        }
      ]
    },
    {
      "name": "Specific Bot",
      "examples": ["story_bot", "bdd_bot", "domain_bot"],
      "responsibilities": [
        {
          "name": "Loads Behavior Configuration",
          "collaborators": ["Bot Config", "Behaviors"]
        },
        {
          "name": "Provides Behavior List For Tool Generation",
          "collaborators": ["Behaviors", "MCP Bot Server Generator"]
        },
        {
          "name": "Provides Context For Tool Invocation",
          "collaborators": ["BaseBehavioralActionTool", "Behavior", "Base Action"]
        }
      ]
    },
    {
      "name": "Bot Behavior",
      "responsibilities": [
        {
          "name": "Defines Action Steps",
          "collaborators": ["Bot Config"]
        },
        {
          "name": "Compiles Instructions",
          "collaborators": ["Base Action", "Instructions File"]
        },
        {
          "name": "Returns Compiled Instructions",
          "collaborators": ["BaseBehavioralActionTool"]
        }
      ]
    },
    {
      "name": "Project",
      "responsibilities": [
        {
          "name": "Manages Project State",
          "collaborators": ["Project Bot State", "File System"]
        },
        {
          "name": "Manages Workflow State",
          "collaborators": ["Workflow", "Project Bot State", "File System"]
        },
        {
          "name": "Provides Project Scaffold",
          "collaborators": ["File System"]
        },
        {
          "name": "Tracks Bot State And Activity",
          "collaborators": ["Project Bot State", "Bot Activity", "File System"]
        }
      ]
    },
    {
      "name": "Project Bot State",
      "responsibilities": [
        {
          "name": "Stores Project Area",
          "collaborators": ["File System"]
        },
        {
          "name": "For A Bot",
          "collaborators": ["Bot Name"]
        },
        {
          "name": "Stores Activities",
          "collaborators": ["Bot Activity", "File System"]
        },
        {
          "name": "Stores Workflow State",
          "collaborators": ["Workflow State", "File System"]
        }
      ]
    },
    {
      "name": "Workflow State",
      "responsibilities": [
        {
          "name": "Stores Current Behavior Name",
          "collaborators": ["Behavior"]
        },
        {
          "name": "Stores Current Action Name",
          "collaborators": ["Action"]
        }
      ]
    },
    {
      "name": "Workflow",
      "responsibilities": [
        {
          "name": "Orders Behavior Action Steps",
          "collaborators": ["Agile Bot", "Bot Behavior"]
        }
      ]
    },
    {
      "name": "MCP Bot Server Generator",
      "responsibilities": [
        {
          "name": "Generates MCP Bot Server",
          "collaborators": ["Bot Config", "MCP Bot Server"]
        },
        {
          "name": "Generates Bot Tools",
          "collaborators": ["Bot Config", "MCP Bot Server", "Bot Tool", "Trigger Words"]
        },
        {
          "name": "Generates Behavior Tools",
          "collaborators": ["Bot Config", "MCP Bot Server", "Behavior Tool", "Bot Behavior", "Behavior Trigger Words"]
        },
        {
          "name": "Generates Behavior Action Tools",
          "collaborators": ["Bot Config", "MCP Bot Server", "BaseBehavioralActionTool", "Behavior", "Action", "Behavior Action Trigger Words"]
        },
        {
          "name": "Deploys Generated MCP Server",
          "collaborators": ["Generated MCP Server", "MCP Protocol Handler"]
        }
      ]
    },
    {
      "name": "MCP Bot Server",
      "note": "Unique per bot with unique server name",
      "responsibilities": [
        {
          "name": "Has Unique Server Name",
          "collaborators": ["Bot Name"]
        },
        {
          "name": "Created By Bot",
          "collaborators": ["Agile Bot"]
        },
        {
          "name": "Initializes In Separate Thread",
          "collaborators": ["Thread Manager"]
        },
        {
          "name": "Registers With Protocol Handler",
          "collaborators": ["MCP Protocol Handler"]
        },
        {
          "name": "Instantiates Bot For Project",
          "collaborators": ["Bot Config", "Specific Bot", "Project"]
        },
        {
          "name": "Preloads Bot Class At Startup",
          "collaborators": ["Specific Bot", "Bot Config"]
        },
        {
          "name": "Publishes Tool Catalog",
          "collaborators": ["AI Chat", "Tool Catalog"]
        },
        {
          "name": "Provides Bot Behavior Actions MCP Tools",
          "collaborators": ["BaseBehavioralActionTool"]
        },
        {
          "name": "Routes Tool Calls",
          "collaborators": ["AI Chat", "BaseBehavioralActionTool"]
        },
        {
          "name": "Routes To Specific MCP Tool Based On Trigger Words",
          "collaborators": ["AI Chat", "BaseBehavioralActionTool", "Trigger Words"]
        }
      ]
    },
    {
      "name": "Bot Tool",
      "examples": ["story_bot"],
      "responsibilities": [
        {
          "name": "Runs Active Action On Active Behavior",
          "collaborators": ["Agile Bot", "Project", "Project Bot State", "Workflow State", "Bot Behavior", "Bot Action"]
        },
        {
          "name": "Moves To Next Action If Done",
          "collaborators": ["Agile Bot", "Project", "Workflow State", "Workflow"]
        },
        {
          "name": "Moves To Next Behavior If Done",
          "collaborators": ["Workflow", "Agile Bot", "Project", "Workflow State"]
        }
      ]
    },
    {
      "name": "Behavior Tool",
      "examples": ["story_bot_shape"],
      "responsibilities": [
        {
          "name": "Determines Active Or Next Behavior Action",
          "collaborators": ["Workflow State", "Workflow", "Bot Config"]
        },
        {
          "name": "Runs Active Action On Behavior",
          "collaborators": ["Agile Bot", "Project", "Project Bot State", "Workflow State", "Bot Behavior", "Bot Action"]
        },
        {
          "name": "Moves To Next Action If Done",
          "collaborators": ["Workflow", "Project Bot State", "Workflow State"]
        },
        {
          "name": "Moves To Next Behavior If Done",
          "collaborators": ["Workflow", "Project Bot State", "Workflow State"]
        }
      ]
    },
    {
      "name": "BaseTool",
      "responsibilities": [
        {
          "name": "Provides Invocation Logic",
          "collaborators": ["Bot", "Behavior", "Action"]
        },
        {
          "name": "Routes To Preloaded Bot",
          "collaborators": ["Specific Bot"]
        },
        {
          "name": "Loads Instructions",
          "collaborators": ["Instructions File", "File System"]
        },
        {
          "name": "Injects Instructions",
          "collaborators": ["AI Chat"]
        }
      ]
    },
    {
      "name": "BaseBehavioralActionTool",
      "examples": ["story_bot_shape_gather_context"],
      "responsibilities": [
        {
          "name": "Inherits From BaseTool",
          "collaborators": ["BaseTool"]
        },
        {
          "name": "Forwards Invocation To Bot Behavior Action",
          "collaborators": ["Specific Bot", "Behavior", "Base Action"]
        },
        {
          "name": "Annotated With Trigger Words",
          "collaborators": ["Trigger Words Config"]
        },
        {
          "name": "Runs Specific Behavior Action",
          "collaborators": ["Agile Bot", "Bot Behavior", "Bot Action"]
        }
      ]
    },
    {
      "name": "Project State Tool",
      "responsibilities": [
        {
          "name": "Reads Project State",
          "collaborators": ["Project Bot State", "Workflow State", "File System"]
        },
        {
          "name": "Returns Current State",
          "collaborators": ["AI Chat", "MCP Bot Server"]
        }
      ]
    },
    {
      "name": "Base Action",
      "responsibilities": [
        {
          "name": "Loads Base Action Instructions",
          "collaborators": ["Instructions File", "File System"]
        },
        {
          "name": "Merges Base And Behavior Instructions",
          "collaborators": ["Behavior Instructions", "Base Instructions"]
        },
        {
          "name": "Returns Compiled Instructions",
          "collaborators": ["Bot Behavior"]
        }
      ]
    },
    {
      "name": "GatherContextAction",
      "responsibilities": [
        {
          "name": "Loads Guardrails",
          "collaborators": ["Guardrails", "Key Questions", "Evidence"]
        },
        {
          "name": "Injects Guardrails Into Clarify Requirements",
          "collaborators": ["Compiled Instructions"]
        }
      ]
    },
    {
      "name": "PlanningAction",
      "responsibilities": [
        {
          "name": "Loads Planning Guardrails",
          "collaborators": ["Guardrails", "Typical Assumptions", "Decision Criteria"]
        },
        {
          "name": "Injects Planning Guardrails",
          "collaborators": ["Compiled Instructions"]
        }
      ]
    },
    {
      "name": "BuildKnowledgeAction",
      "responsibilities": [
        {
          "name": "Loads Knowledge Graph Template",
          "collaborators": ["Knowledge Graph Template", "File System"]
        },
        {
          "name": "Injects Template And Build Instructions",
          "collaborators": ["Compiled Instructions"]
        },
        {
          "name": "Injects Validation Rules Reference",
          "collaborators": ["Validation Rules"]
        }
      ]
    },
    {
      "name": "RenderOutputAction",
      "responsibilities": [
        {
          "name": "Loads Render Templates",
          "collaborators": ["Render Templates", "File System"]
        },
        {
          "name": "Loads Transformer Methods",
          "collaborators": ["Transformers", "File System"]
        },
        {
          "name": "Injects Template And Transformer Paths",
          "collaborators": ["Compiled Instructions"]
        }
      ]
    },
    {
      "name": "ValidateRulesAction",
      "responsibilities": [
        {
          "name": "Loads Common Bot Rules",
          "collaborators": ["Common Rules", "File System"]
        },
        {
          "name": "Loads Behavior Specific Rules",
          "collaborators": ["Behavior Rules", "File System"]
        },
        {
          "name": "Merges And Injects Rules",
          "collaborators": ["Compiled Instructions"]
        }
      ]
    },
    {
      "name": "CorrectBotAction",
      "responsibilities": [
        {
          "name": "Loads Correct Bot Instructions",
          "collaborators": ["Base Instructions", "File System"]
        },
        {
          "name": "Injects Correction Instructions",
          "collaborators": ["Compiled Instructions"]
        }
      ]
    },
    {
      "name": "Guardrails",
      "responsibilities": [
        {
          "name": "Provides Required Context",
          "collaborators": ["Key Questions", "Evidence"]
        },
        {
          "name": "Provides Planning Guidance",
          "collaborators": ["Decision Criteria", "Assumptions"]
        }
      ]
    },
    {
      "name": "AI Chat",
      "responsibilities": [
        {
          "name": "Detects Trigger Words And Routes To Tools",
          "collaborators": ["Human", "Bot Server", "MCP Bot Tools", "BaseBehavioralActionTool"]
        },
        {
          "name": "Presents Information To Human",
          "collaborators": ["Human", "All tools"]
        }
      ]
    }
  ]
}

