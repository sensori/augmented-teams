{
  "behaviorName": "shape",
  "description": "Create a story map and domain model outline that captures the user's journey through epics, features, and stories, and captures domain model concepts and requirements",
  "goal": "Shape both story map and domain model together from user context - capture domain concepts, responsibilities, and requirements alongside story structure",
  "inputs": "User context, interviews, vision documents, existing requirements, business DOmain Experts interviews",
  "outputs": "story-graph.json, story-map.md, story-map-outline.drawio, story-map.txt, domain_outline.md, domain_graph.json, domain-model-description.md",
  "baseActionsPath": "agile_bot/bots/base_bot/base_actions",
  "instructions": [
    "**BEHAVIOR WORKFLOW INSTRUCTIONS:**",
    "",
    "Perform each instruction action as specified in base_actions, tweaked for the shape behavior. This workflow captures BOTH story map AND domain model together.",
    "",
    "**Action Sequence:**",
    "**NOTE: Action order and action-specific instructions are determined by the actions_workflow section below. Always check that section for the correct sequence and instructions.**",
    "",
    "**Workflow Control:**",
    "- **STOP for human feedback** when told to stop or when action requires user input",
    "- **CONTINUE to next action** when told to proceed",
    "- **STOP when complete** when all actions are finished"
  ],
  "actions_workflow": {
    "actions": [
      {
        "name": "gather_context",
        "order": 1,
        "next_action": "decide_planning_criteria",
        "instructions": [
          "Follow agile_bot/bots/base_bot/base_actions/1_gather_context/instructions.json, agile_bot/bots/test_story_bot/behaviors/1_shape/guardrails/required_context/instructions.json",
          "Gather context for both story mapping and domain modeling"
        ]
      },
      {
        "name": "decide_planning_criteria",
        "order": 2,
        "next_action": "build_knowledge",
        "instructions": [
          "Follow agile_bot/bots/base_bot/base_actions/2_decide_planning_criteria/instructions.json, agile_bot/bots/test_story_bot/behaviors/1_shape/guardrails/planning/instructions.json",
          "Include domain modeling planning criteria alongside story mapping criteria"
        ]
      },
      {
        "name": "build_knowledge",
        "order": 3,
        "next_action": "validate_rules",
        "instructions": [
          "Follow agile_bot/bots/base_bot/base_actions/3_build_knowledge/instructions.json, shape: build story map structure AND domain model",
          "Follow agile_bot/bots/test_story_bot/behaviors/1_shape/2_content/1_knowledge_graph/instructions.json",
          "Apply story shaping rules (context: 'when shaping stories') for story structure",
          "Apply domain shaping rules (context: 'when shaping the domain') for domain model structure"
        ]
      },
      {
        "name": "validate_rules",
        "order": 4,
        "next_action": "render_output",
        "instructions": [
          "Follow agile_bot/bots/base_bot/base_actions/4_validate_rules/instructions.json, shape: validate hierarchy, story structure, AND domain model",
          "Apply story shaping rules (context: 'when shaping stories') for story structure",
          "Apply domain shaping rules (context: 'when shaping the domain') for domain model validation"
        ]
      },
      {
        "name": "render_output",
        "order": 5,
        "instructions": [
          "Follow agile_bot/bots/base_bot/base_actions/5_render_output/instructions.json, shape: render story map documents AND domain model documents"
        ]
      }
    ]
  },
  "trigger_words": {
    "description": "Behavior-level trigger words - specific to shaping/scoping/initial planning behavior, including domain shaping integration",
    "patterns": [
      "start.*shaping",
      "let.*s.*shape",
      "begin.*shaping",
      "do.*shaping",
      "shaping",
      "shape.*capability",
      "scoping",
      "initial.*planning",
      "starting.*with.*requirements",
      "begin.*capability.*shape",
      "explore.*problem.*space",
      "what.*are.*we.*solving",
      "frame.*initiative",
      "frame.*solution",
      "kick.*off.*project",
      "initiate.*request",
      "describe.*need",
      "start.*intake",
      "capture.*ask",
      "early.*shaping",
      "solution.*intent",
      "business.*intent",
      "initial.*goal",
      "who.*needs.*what",
      "start.*mapping.*conversation",
      "map.*user.*types",
      "identify.*system.*touchpoints",
      "start.*exploring.*flow",
      "problem.*framing",
      "build.*new",
      "start.*new.*project",
      "new.*project",
      "begin.*new",
      "create.*new",
      "start.*on.*new",
      "want.*to.*build.*new",
      "want.*to.*start.*new",
      "want.*to.*start.*on.*new",
      "i.*want.*to.*build",
      "i.*want.*to.*start",
      "new.*initiative",
      "new.*application",
      "new.*solution",
      "new.*system",
      "new.*platform",
      "new.*service",
      "new.*product",
      "new.*capability",
      "new.*tool",
      "new.*software",
      "new.*technology",
      "new.*tech.*stack",
      "new.*architecture",
      "new.*infrastructure",
      "new.*integration",
      "new.*api",
      "new.*microservice",
      "new.*component",
      "new.*module",
      "new.*framework",
      "new.*library",
      "new.*ecosystem",
      "new.*transformation",
      "new.*modernization",
      "new.*digital",
      "new.*automation",
      "new.*enterprise",
      "new.*program",
      "launch.*new",
      "develop.*new",
      "design.*new",
      "implement.*new",
      "roll.*out.*new",
      "deploy.*new",
      "release.*new",
      "introduce.*new",
      "establish.*new",
      "set.*up.*new",
      "commence.*new",
      "embark.*on.*new",
      "undertake.*new",
      "shape.*domain",
      "model.*domain",
      "identify.*bounded.*contexts",
      "map.*domain",
      "discover.*domain.*concepts",
      "define.*ubiquitous.*language",
      "start.*domain.*modeling",
      "begin.*ddd",
      "explore.*domain",
      "domain.*shaping"
    ],
    "priority": 8
  }
}
