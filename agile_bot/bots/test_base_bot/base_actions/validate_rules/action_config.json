{"name": "validate_rules", "workflow": true, "order": 4, "next_action": "render_output", 
    "instructions": [
      "**MANDATORY: Before validating any content, you MUST load and review the project's context files:**",
      "1. Load `{project_area}/docs/stories/clarification.json` - Contains key questions and evidence (generated file)",
      "2. Load `{project_area}/docs/stories/planning.json` - Contains assumptions and decisions (generated file)",
      "3. Load `{project_area}/docs/context/input.txt` (or similar) - Original input/source material if needed for validation (original context)",
      "",
      "**CRITICAL: File locations:**",
      "- **Generated files:** `{project_area}/docs/stories/clarification.json`, `{project_area}/docs/stories/planning.json`",
      "- **Original input:** `{project_area}/docs/context/input.txt` and other original context files",
      "",
      "These files contain critical requirements, decisions, and context that MUST be checked against during validation.",
      "",
      "**CRITICAL: Load planning.json and check for the current behavior's section (e.g., 'shape', 'discovery', 'exploration', 'specification'). Reference decisions_made and assumptions_made for the current behavior, as well as any previous behaviors that affect this work.**",
      "",
      "**Instructions:**",
      "1. Load and review `{project_area}/docs/stories/clarification.json` and `{project_area}/docs/stories/planning.json` to understand all requirements and decisions",
      "2. Check planning.json for the current behavior's decisions_made and assumptions_made sections",
      "3. Evaluate the Content Data against all rules listed above",
      "4. Check for violations of each rule",
      "5. Verify that Content Data incorporates all requirements from clarification.json and planning.json (especially the current behavior's decisions_made and assumptions_made)",
      "6. Generate a validation report with:",
      "   - List of all violations found (if any)",
      "   - Specific examples from the Content Data that violate rules",
      "   - Any missing requirements from clarification.json or planning.json (including stage-specific decisions/assumptions)",
      "   - Recommendations for fixing violations",
      "7. If no violations found, confirm that Content Data follows all rules and incorporates all requirements",
      "8. **MANDATORY: Save the validation report to a file**",
      "   - File name: `validation-report.md`",
      "   - Location: `{project_area}/{docs_path}/validation-report.md` (validation report goes in docs_path, NOT in context folder)",
      "   - Note: Generated context files (clarification.json, planning.json) are in `{project_area}/docs/stories/`, and validation report is also output to `{project_area}/{docs_path}/`",
      "   - Format: Markdown with sections for Status, Violations Found, Suggested Corrections",
      "   - Include: Total documents validated, violations count, rules checked count, summary",
      "   - After generating the report, write it to the file using standard file writing operations",
      "",
      "**AUTOMATIC PROGRESSION: Once validation is complete and all violations are fixed (if any), automatically proceed to render_output action without stopping or waiting for user confirmation. These two actions should execute sequentially as a single workflow step.**"
    ],
    "templates": {
      "validation_results": {
        "template": "Validation Results:\n\n**Status:** {{validation_status}}\n\n**Violations Found:**\n{{violations_list}}\n\n**Suggested Corrections:**\n{{suggested_corrections}}\n\nYou may request a second validation pass with corrections applied.",
        "description": "Used to present validation results to user"
      }
    }
  }

